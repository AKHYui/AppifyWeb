"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[2039],{42715:function(e,t,i){i.d(t,{A:function(){return p}});var s=i(16684),r=i(18748),a=i(94026),n=i(45475),o=i(69791),l=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(r.A,{attrs:{dense:""}},e._l(e.sortOptions,(function(i,r){return t(a.A,{key:r,on:{click:function(t){return e.setSort(i)}}},[t(n.A,[i.key===e.sortActive.key&&"asc"===e.sortActive.order?t(s.A,{attrs:{color:"secondary"}},[e._v(" mdi-chevron-up ")]):e._e(),i.key===e.sortActive.key&&"desc"===e.sortActive.order?t(s.A,{attrs:{color:"secondary"}},[e._v(" mdi-chevron-down ")]):e._e()],1),t(o.UZ,[e._v(e._s(i.name))])],1)})),1)},h=[],u=i(85471),d=u.Ay.extend({name:"SortList",props:{sortOptions:{type:Array,required:!0},sortDefault:{type:Object,required:!0},sortActive:{type:Object,required:!0}},methods:{setSort(e){this.sortActive.key===e.key&&"desc"===this.sortActive.order?this.$emit("update:sortActive",{key:e.key,order:"asc"}):this.$emit("update:sortActive",{key:e.key,order:"desc"})}}}),c=d,g=i(81656),f=(0,g.A)(c,l,h,!1,null,"24e7aee8",null),p=f.exports},88297:function(e,t,i){i.d(t,{A:function(){return y}});var s=i(73847),r=i(16684),a=i(18748),n=i(94026),o=i(69791),l=i(30376),h=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[e.isAdmin?t(l.A,{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:i}){return[t(s.A,e._g({attrs:{icon:""},on:{click:function(e){e.preventDefault()}}},i),[t(r.A,[e._v("mdi-dots-vertical")])],1)]}}],null,!1,863602117)},[t(a.A,{attrs:{dense:""}},[t(n.A,{on:{click:function(t){return e.scan(!1)}}},[t(o.UZ,[e._v(e._s(e.$t("server.server_management.button_scan_libraries")))])],1),t(n.A,{staticClass:"list-warning",on:{click:function(t){return e.scan(!0)}}},[t(o.UZ,[e._v(e._s(e.$t("server.server_management.button_scan_libraries_deep")))])],1),t(n.A,{on:{click:function(t){e.confirmEmptyTrash=!0}}},[t(o.UZ,[e._v(e._s(e.$t("server.server_management.button_empty_trash")))])],1)],1)],1):e._e(),t("confirmation-dialog",{attrs:{title:e.$t("dialog.empty_trash.title"),body:e.$t("dialog.empty_trash.body"),"button-confirm":e.$t("dialog.empty_trash.button_confirm")},on:{confirm:e.emptyTrash},model:{value:e.confirmEmptyTrash,callback:function(t){e.confirmEmptyTrash=t},expression:"confirmEmptyTrash"}})],1)},u=[],d=i(85471),c=i(32837),g=d.Ay.extend({name:"LibrariesActionsMenu",components:{ConfirmationDialog:c.A},data:()=>({confirmEmptyTrash:!1}),computed:{isAdmin(){return this.$store.getters.meAdmin}},methods:{scan(e){this.$store.state.komgaLibraries.libraries.forEach((t=>{this.$komgaLibraries.scanLibrary(t,e)}))},emptyTrash(){this.$store.state.komgaLibraries.libraries.forEach((e=>{this.$komgaLibraries.emptyTrash(e)}))}}}),f=g,p=i(81656),m=(0,p.A)(f,h,u,!1,null,"ca5eba4c",null),y=m.exports},27874:function(e,t,i){i.r(t),i.d(t,{default:function(){return J}});var s=i(73847),r=i(15137),a=i(70793),n=i(16684),o=i(6231),l=i(40005),h=i(26702),u=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{style:e.$vuetify.breakpoint.xs?"margin-bottom: 56px":void 0},[0===e.selectedSeries.length?t("toolbar-sticky",[e.library?t("library-actions-menu",{attrs:{library:e.library}}):t("libraries-actions-menu"),t(h.sw,[t("span",[e._v(e._s(e.library?e.library.name:e.$t("common.all_libraries")))]),e.totalElements?t(r.A,{staticClass:"mx-4",attrs:{label:""}},[t("span",{staticStyle:{"font-size":"1.1rem"}},[e._v(e._s(e.totalElements))])]):e._e()],1),t(l.A),e.$vuetify.breakpoint.mdAndUp?t("library-navigation",{attrs:{libraryId:e.libraryId}}):e._e(),t(l.A),t("page-size-select",{model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}}),t(s.A,{attrs:{icon:""},on:{click:function(t){e.drawer=!e.drawer}}},[t(n.A,{attrs:{color:e.sortOrFilterActive?"secondary":""}},[e._v("mdi-filter-variant")])],1)],1):e._e(),t("multi-select-bar",{attrs:{kind:"series",oneshots:e.selectedOneshots,"show-select-all":""},on:{"unselect-all":function(t){e.selectedSeries=[]},"select-all":function(t){e.selectedSeries=e.series},"mark-read":e.markSelectedRead,"mark-unread":e.markSelectedUnread,"add-to-collection":e.addToCollection,"add-to-readlist":e.addToReadList,edit:e.editMultipleSeries,delete:e.deleteSeries},model:{value:e.selectedSeries,callback:function(t){e.selectedSeries=t},expression:"selectedSeries"}}),e.$vuetify.breakpoint.smAndDown?t("library-navigation",{attrs:{libraryId:e.libraryId,"bottom-navigation":""}}):e._e(),t("filter-drawer",{attrs:{"clear-button":e.sortOrFilterActive},on:{clear:e.resetSortAndFilters},scopedSlots:e._u([{key:"default",fn:function(){return[t("filter-list",{attrs:{"filters-options":e.filterOptionsList,"filters-active":e.filters},on:{"update:filtersActive":function(t){e.filters=t},"update:filters-active":function(t){e.filters=t}}})]},proxy:!0},{key:"filter",fn:function(){return[t("filter-panels",{attrs:{"filters-options":e.filterOptionsPanel,"filters-active":e.filters,"filters-active-mode":e.filtersMode},on:{"update:filtersActive":function(t){e.filters=t},"update:filters-active":function(t){e.filters=t},"update:filtersActiveMode":function(t){e.filtersMode=t},"update:filters-active-mode":function(t){e.filtersMode=t}}})]},proxy:!0},{key:"sort",fn:function(){return[t("sort-list",{attrs:{"sort-default":e.sortDefault,"sort-options":e.sortOptions,"sort-active":e.sortActive},on:{"update:sortActive":function(t){e.sortActive=t},"update:sort-active":function(t){e.sortActive=t}}})]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),t(a.A,{attrs:{fluid:""}},[t("alphabetical-navigation",{staticClass:"text-center",attrs:{symbols:e.alphabeticalNavigation,selected:e.selectedSymbol,"group-count":e.seriesGroups},on:{clicked:e.filterByStarting}}),0===e.totalPages&&e.sortOrFilterActive?t("empty-state",{attrs:{title:e.$t("common.filter_no_matches"),"sub-title":e.$t("common.use_filter_panel_to_change_filter"),icon:"mdi-book-multiple","icon-color":"secondary"}},[t(s.A,{on:{click:e.resetSortAndFilters}},[e._v(e._s(e.$t("common.reset_filters")))])],1):e._e(),0!==e.totalPages||e.sortOrFilterActive?e._e():t("empty-state",{attrs:{title:e.$t("common.nothing_to_show"),icon:"mdi-help-circle","icon-color":"secondary"}}),e.totalPages>0?[e.totalPages>1?t(o.A,{attrs:{"total-visible":e.paginationVisible,length:e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e(),t("item-browser",{attrs:{items:e.series,"item-context":e.itemContext,selected:e.selectedSeries,"edit-function":e.isAdmin?e.editSingleSeries:void 0},on:{"update:selected":function(t){e.selectedSeries=t}}}),e.totalPages>1?t(o.A,{attrs:{"total-visible":e.paginationVisible,length:e.totalPages},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}):e._e()]:e._e()],2)],1)},d=[],c=(i(14602),i(28743),i(62554),i(78892)),g=i(72448),f=i(1324),p=i(10734),m=i(57531),y=i(60693),b=i(4395),v=i(96982),$=i(79957),w=i(41834),_=i(52846),S=i(85471),A=i(67036),k=i(49865),L=i(42715),O=i(97782),R=i(85894),D=i(71933),E=i(41272),P=i(2543),C=i(84551),I=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",e._l(e.symbols,(function(i){return t(C.A,{key:i,attrs:{disabled:void 0===e.groupCount,top:""},scopedSlots:e._u([{key:"activator",fn:function({on:r}){return[t(s.A,e._g({attrs:{text:"",small:"",icon:"",color:e.selected===i?"secondary":void 0,disabled:!(!e.groupCount||e.selected===i)&&0===e.getCount(i)},on:{click:function(t){return e.clicked(i)}}},r),[e._v(" "+e._s(i)+" ")])]}}],null,!0)},[e._v(" "+e._s(e.getCount(i))+" ")])})),1)},q=[],M=S.Ay.extend({name:"AlphabeticalNavigation",data:function(){return{}},props:{groupCount:{type:Array,required:!1},symbols:{type:Array,default:()=>["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},selected:{type:String,required:!1}},methods:{clicked(e){this.$emit("clicked",e)},getCount(e){if(!this.groupCount)return;const t=this.groupCount.find((t=>t.group.toLowerCase()===e.toLowerCase()));return t?t.count:0}}}),N=M,T=i(81656),x=(0,T.A)(N,I,q,!1,null,null,null),U=x.exports,W=i(54919),Y=i(19447),F=i(80061),B=i(41728),z=i(86189),V=i(88297),H=S.Ay.extend({name:"BrowseLibraries",components:{LibrariesActionsMenu:V.A,AlphabeticalNavigation:U,LibraryActionsMenu:y.A,EmptyState:f.A,ToolbarSticky:g.A,ItemBrowser:p.A,PageSizeSelect:b.A,LibraryNavigation:m.A,MultiSelectBar:c.A,FilterDrawer:k.A,FilterPanels:O.A,FilterList:R.A,SortList:L.A},data:function(){return{library:void 0,series:[],seriesGroups:[],alphabeticalNavigation:["ALL","#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],selectedSymbol:"ALL",selectedSeries:[],page:1,pageSize:20,totalPages:1,totalElements:null,sortActive:{},sortDefault:{key:"metadata.titleSort",order:"asc"},filters:{},filtersMode:{},sortUnwatch:null,filterUnwatch:null,filterModeUnwatch:null,pageUnwatch:null,pageSizeUnwatch:null,drawer:!1,filterOptions:{genre:[],tag:[],publisher:[],language:[],ageRating:[],releaseDate:[],sharingLabel:[]}}},props:{libraryId:{type:String,default:A._}},created(){this.$eventHub.$on(_.t_,this.seriesChanged),this.$eventHub.$on(_.P,this.seriesChanged),this.$eventHub.$on(_.Mi,this.seriesChanged),this.$eventHub.$on(_.yn,this.libraryDeleted),this.$eventHub.$on(_.lD,this.libraryChanged),this.$eventHub.$on(_.$V,this.readProgressChanged),this.$eventHub.$on(_.sn,this.readProgressChanged)},beforeDestroy(){this.$eventHub.$off(_.t_,this.seriesChanged),this.$eventHub.$off(_.P,this.seriesChanged),this.$eventHub.$off(_.Mi,this.seriesChanged),this.$eventHub.$off(_.yn,this.libraryDeleted),this.$eventHub.$off(_.lD,this.libraryChanged),this.$eventHub.$off(_.$V,this.readProgressChanged),this.$eventHub.$off(_.sn,this.readProgressChanged)},async mounted(){this.$store.commit("setLibraryRoute",{id:this.libraryId,route:A.k.BROWSE}),this.pageSize=this.$store.state.persistedState.browsingPageSize||this.pageSize,await this.resetParams(this.$route,this.libraryId),this.$route.query.page&&(this.page=Number(this.$route.query.page)),this.$route.query.pageSize&&(this.pageSize=Number(this.$route.query.pageSize)),this.$route.query.nav&&(this.selectedSymbol=this.$route.query.nav.toString()),this.loadLibrary(this.libraryId),this.setWatches()},async beforeRouteUpdate(e,t,i){e.params.libraryId!==t.params.libraryId&&(this.unsetWatches(),await this.resetParams(e,e.params.libraryId),this.page=1,this.totalPages=1,this.totalElements=null,this.series=[],this.seriesGroups=[],this.selectedSymbol="ALL",this.loadLibrary(e.params.libraryId),this.setWatches()),i()},computed:{symbolCondition(){if("ALL"!==this.selectedSymbol)return"#"===this.selectedSymbol?new Y.NY(this.alphabeticalNavigation.filter((e=>"ALL"!==e&&"#"!==e)).map((e=>new Y.YX(new Y.gS(e))))):new Y.YX(new Y.pF(this.selectedSymbol))},itemContext(){return"booksMetadata.releaseDate"===this.sortActive.key?[W.XZ.RELEASE_DATE]:"createdDate"===this.sortActive.key?[W.XZ.DATE_ADDED]:"lastModifiedDate"===this.sortActive.key?[W.XZ.DATE_UPDATED]:[]},sortOptions(){return[{name:this.$t("sort.name").toString(),key:"metadata.titleSort"},{name:this.$t("sort.date_added").toString(),key:"createdDate"},{name:this.$t("sort.date_updated").toString(),key:"lastModifiedDate"},{name:this.$t("sort.date_read").toString(),key:"readDate"},{name:this.$t("sort.release_date").toString(),key:"booksMetadata.releaseDate"},{name:this.$t("sort.folder_name").toString(),key:"name"},{name:this.$t("sort.books_count").toString(),key:"booksCount"},{name:this.$t("sort.random").toString(),key:"random"}]},filterOptionsList(){return{readStatus:{values:[{name:this.$t("filter.unread").toString(),value:new Y.qE(new Y.Tr($.RJ.UNREAD)),nValue:new Y.qE(new Y._f($.RJ.UNREAD))},{name:this.$t("filter.in_progress").toString(),value:new Y.qE(new Y.Tr($.RJ.IN_PROGRESS)),nValue:new Y.qE(new Y._f($.RJ.IN_PROGRESS))},{name:this.$t("filter.read").toString(),value:new Y.qE(new Y.Tr($.RJ.READ)),nValue:new Y.qE(new Y._f($.RJ.READ))}]},complete:{values:[{name:this.$t("filter.complete").toString(),value:new Y.F2(new Y.NE),nValue:new Y.F2(new Y.ch)}]},oneshot:{values:[{name:this.$t("filter.oneshot").toString(),value:new Y.WL(new Y.NE),nValue:new Y.WL(new Y.ch)}]}}},filterOptionsPanel(){const e={status:{name:this.$t("filter.status").toString(),values:Object.values(w.m).map((e=>({name:F.A.t(`enums.series_status.${e}`),value:new Y.f$(new Y.Tr(e)),nValue:new Y.f$(new Y._f(e))})))},genre:{name:this.$t("filter.genre").toString(),values:this.filterOptions.genre,anyAllSelector:!0},tag:{name:this.$t("filter.tag").toString(),values:this.filterOptions.tag,anyAllSelector:!0},publisher:{name:this.$t("filter.publisher").toString(),values:this.filterOptions.publisher},language:{name:this.$t("filter.language").toString(),values:this.filterOptions.language},ageRating:{name:this.$t("filter.age_rating").toString(),values:this.filterOptions.ageRating.map((e=>({name:"None"===e.value?this.$t("filter.age_rating_none").toString():e.name,value:e.value,nValue:e.nValue})))},releaseDate:{name:this.$t("filter.release_date").toString(),values:this.filterOptions.releaseDate}};return E.B.forEach((t=>{e[t]={name:this.$t(`author_roles.${t}`).toString(),search:async e=>(await this.$komgaReferential.getAuthors(e,t,this.libraryId!==A._?this.libraryId:void 0)).content.map((e=>e.name)),values:[{name:this.$t("filter.any").toString(),value:z.M,nValue:z._}],anyAllSelector:!0}})),e["sharingLabel"]={name:this.$t("filter.sharing_label").toString(),values:this.filterOptions.sharingLabel},e},isAdmin(){return this.$store.getters.meAdmin},paginationVisible(){switch(this.$vuetify.breakpoint.name){case"xs":return 5;case"sm":case"md":return 10;case"lg":case"xl":default:return 15}},sortOrFilterActive(){return(0,D.cJ)(this.sortActive,this.sortDefault,this.filters)},selectedOneshots(){return this.selectedSeries.every((e=>e.oneshot))}},methods:{filterByStarting(e){this.selectedSymbol=e,this.page=1,this.updateRoute(),this.loadPage(this.libraryId,1,this.sortActive,this.symbolCondition)},resetSortAndFilters(){this.drawer=!1;for(const e in this.filters)this.$set(this.filters,e,[]);this.sortActive=this.sortDefault,this.$store.commit("setLibraryFilter",{id:this.libraryId,filter:this.filters}),this.$store.commit("setLibrarySort",{id:this.libraryId,sort:this.sortActive}),this.updateRouteAndReload()},async resetParams(e,t){this.sortActive=(0,v.k)(e.query.sort,this.sortOptions)||this.$store.getters.getLibrarySort(e.params.libraryId)||this.$_.clone(this.sortDefault);const i=t!==A._?t:void 0,[s,r,a,n,o,l,h]=await Promise.all([this.$komgaReferential.getGenres(i),this.$komgaReferential.getSeriesAndBookTags(i),this.$komgaReferential.getPublishers(i),this.$komgaReferential.getLanguages(i),this.$komgaReferential.getAgeRatings(i),this.$komgaReferential.getSeriesReleaseDates(i),this.$komgaReferential.getSharingLabels(i)]);let u,d;this.$set(this.filterOptions,"genre",(0,D.Dr)(s,(e=>new Y.BK(new Y.Tr(e))),(e=>new Y.BK(new Y._f(e))))),this.$set(this.filterOptions,"tag",(0,D.Dr)(r,(e=>new Y.iT(new Y.Tr(e))),(e=>new Y.iT(new Y._f(e))))),this.$set(this.filterOptions,"publisher",(0,D.Dr)(a,(e=>new Y.oy(new Y.Tr(e))),(e=>new Y.oy(new Y._f(e))))),this.$set(this.filterOptions,"language",n.map((e=>({name:e.name,value:new Y.oF(new Y.Tr(e.value)),nValue:new Y.oF(new Y._f(e.value))})))),this.$set(this.filterOptions,"ageRating",(0,D.Dr)(o,(e=>new Y.CM(isFinite(e)?new Y.Tr(e):new Y.Cg)),(e=>new Y.CM(isFinite(e)?new Y._f(e):new Y.t7)))),this.$set(this.filterOptions,"releaseDate",(0,D.Dr)(l,(e=>{const t=Number.parseInt(e);return t?new Y.NY([new Y.Vf(new Y.Ne(t-1+"-12-31T12:00:00Z")),new Y.Vf(new Y.cQ(`${t+1}-01-01T12:00:00Z`))]):new Y.NY([])}),(e=>new Y.y([new Y.Vf(new Y.Ne(`${e}-12-31T12:00:00Z`)),new Y.Vf(new Y.cQ(`${e}-01-01T12:00:00Z`)),new Y.Vf(new Y.Cg)])))),this.$set(this.filterOptions,"sharingLabel",(0,D.Dr)(h,(e=>new Y.SA(new Y.Tr(e))),(e=>new Y.SA(new Y._f(e))))),e.query.status||e.query.readStatus||e.query.genre||e.query.tag||e.query.language||e.query.ageRating||e.query.publisher||E.B.some((t=>t in e.query))||e.query.complete||e.query.oneshot||e.query.sharingLabel?(u={status:e.query.status||[],readStatus:e.query.readStatus||[],genre:e.query.genre||[],tag:e.query.tag||[],publisher:e.query.publisher||[],language:e.query.language||[],ageRating:e.query.ageRating||[],releaseDate:e.query.releaseDate||[],complete:e.query.complete||[],oneshot:e.query.oneshot||[],sharingLabel:e.query.sharingLabel||[]},E.B.forEach((t=>{u[t]=e.query[t]||[]}))):u=this.$store.getters.getLibraryFilter(e.params.libraryId)||{},this.filters=this.validateFilters(u),d=e.query.filterMode?e.query.filterMode:this.$store.getters.getLibraryFilterMode(e.params.libraryId)||{},this.filtersMode=this.validateFiltersMode(d)},validateFiltersMode(e){const t={};for(let i in e)"true"!=e[i].allOf&&1!=e[i].allOf||(t[i]={allOf:!0});return t},validateFilters(e){const t={status:this.$_.intersectionWith(e.status,(0,D.eW)(this.filterOptionsPanel.status.values),B.Y)||[],readStatus:this.$_.intersectionWith(e.readStatus,(0,D.eW)(this.filterOptionsList.readStatus.values),B.Y)||[],genre:this.$_.intersectionWith(e.genre,(0,D.eW)(this.filterOptions.genre),B.Y)||[],tag:this.$_.intersectionWith(e.tag,(0,D.eW)(this.filterOptions.tag),B.Y)||[],publisher:this.$_.intersectionWith(e.publisher,(0,D.eW)(this.filterOptions.publisher),B.Y)||[],language:this.$_.intersectionWith(e.language,(0,D.eW)(this.filterOptions.language),B.Y)||[],ageRating:this.$_.intersectionWith(e.ageRating,(0,D.eW)(this.filterOptions.ageRating),B.Y)||[],releaseDate:this.$_.intersectionWith(e.releaseDate,(0,D.eW)(this.filterOptions.releaseDate),B.Y)||[],complete:this.$_.intersectionWith(e.complete,(0,D.eW)(this.filterOptionsList.complete.values),B.Y)||[],oneshot:this.$_.intersectionWith(e.oneshot,(0,D.eW)(this.filterOptionsList.oneshot.values),B.Y)||[],sharingLabel:this.$_.intersectionWith(e.sharingLabel,(0,D.eW)(this.filterOptions.sharingLabel),B.Y)||[]};return E.B.forEach((i=>{t[i]=e[i]||[]})),t},libraryDeleted(e){e.libraryId===this.libraryId?this.$router.push({name:"home"}):this.libraryId===A._&&this.loadLibrary(this.libraryId)},setWatches(){this.sortUnwatch=this.$watch("sortActive",(e=>{this.$store.commit("setLibrarySort",{id:this.libraryId,sort:e}),this.updateRouteAndReload()})),this.filterUnwatch=this.$watch("filters",(e=>{this.$store.commit("setLibraryFilter",{id:this.libraryId,filter:e}),this.updateRouteAndReload()})),this.filterModeUnwatch=this.$watch("filtersMode",(e=>{this.$store.commit("setLibraryFilterMode",{id:this.libraryId,filterMode:e}),this.updateRouteAndReload()})),this.pageSizeUnwatch=this.$watch("pageSize",(e=>{this.$store.commit("setBrowsingPageSize",e),this.updateRouteAndReload()})),this.pageUnwatch=this.$watch("page",(e=>{this.updateRoute(),this.loadPage(this.libraryId,e,this.sortActive,this.symbolCondition)}))},unsetWatches(){this.sortUnwatch(),this.filterUnwatch(),this.filterModeUnwatch(),this.pageUnwatch(),this.pageSizeUnwatch()},updateRouteAndReload(){this.unsetWatches(),this.page=1,this.updateRoute(),this.loadPage(this.libraryId,this.page,this.sortActive,this.symbolCondition),this.setWatches()},seriesChanged(e){this.libraryId!==A._&&e.libraryId!==this.libraryId||this.reloadPage()},libraryChanged(e){this.libraryId!==A._&&e.libraryId!==this.libraryId||this.loadLibrary(this.libraryId)},readProgressChanged(e){this.series.some((t=>t.id===e.seriesId))&&this.reloadPage()},async loadLibrary(e){this.library=this.getLibraryLazy(e),void 0!=this.library&&(document.title=`Komga - ${this.library.name}`),await this.loadPage(e,this.page,this.sortActive,this.symbolCondition)},updateRoute(){const e={name:this.$route.name,params:{libraryId:this.$route.params.libraryId},query:{page:`${this.page}`,pageSize:`${this.pageSize}`,sort:`${this.sortActive.key},${this.sortActive.order}`,nav:this.selectedSymbol}};(0,D.Bp)(this.filters,e.query),e.query["filterMode"]=this.validateFiltersMode(this.filtersMode),this.$router.replace(e).catch((e=>{}))},reloadPage:(0,P.throttle)((function(){this.loadPage(this.libraryId,this.page,this.sortActive,this.symbolCondition)}),1e3),async loadPage(e,t,i,s){var r,a,n,o,l,h,u,d;this.selectedSeries=[];const c={page:t-1,size:this.pageSize};i&&(c.sort=[`${i.key},${i.order}`]);const g=[];e!==A._&&g.push(new Y.KU(new Y.Tr(e))),this.filters.status&&this.filters.status.length>0&&(null!==(r=this.filtersMode)&&void 0!==r&&null!==(r=r.status)&&void 0!==r&&r.allOf?g.push(new Y.NY(this.filters.status)):g.push(new Y.y(this.filters.status))),this.filters.readStatus&&this.filters.readStatus.length>0&&g.push(new Y.y(this.filters.readStatus)),this.filters.genre&&this.filters.genre.length>0&&(null!==(a=this.filtersMode)&&void 0!==a&&null!==(a=a.genre)&&void 0!==a&&a.allOf?g.push(new Y.NY(this.filters.genre)):g.push(new Y.y(this.filters.genre))),this.filters.tag&&this.filters.tag.length>0&&(null!==(n=this.filtersMode)&&void 0!==n&&null!==(n=n.tag)&&void 0!==n&&n.allOf?g.push(new Y.NY(this.filters.tag)):g.push(new Y.y(this.filters.tag))),this.filters.language&&this.filters.language.length>0&&(null!==(o=this.filtersMode)&&void 0!==o&&null!==(o=o.language)&&void 0!==o&&o.allOf?g.push(new Y.NY(this.filters.language)):g.push(new Y.y(this.filters.language))),this.filters.publisher&&this.filters.publisher.length>0&&(null!==(l=this.filtersMode)&&void 0!==l&&null!==(l=l.publisher)&&void 0!==l&&l.allOf?g.push(new Y.NY(this.filters.publisher)):g.push(new Y.y(this.filters.publisher))),this.filters.ageRating&&this.filters.ageRating.length>0&&(null!==(h=this.filtersMode)&&void 0!==h&&null!==(h=h.ageRating)&&void 0!==h&&h.allOf?g.push(new Y.NY(this.filters.ageRating)):g.push(new Y.y(this.filters.ageRating))),this.filters.releaseDate&&this.filters.releaseDate.length>0&&(null!==(u=this.filtersMode)&&void 0!==u&&null!==(u=u.releaseDate)&&void 0!==u&&u.allOf?g.push(new Y.NY(this.filters.releaseDate)):g.push(new Y.y(this.filters.releaseDate))),this.filters.sharingLabel&&this.filters.sharingLabel.length>0&&(null!==(d=this.filtersMode)&&void 0!==d&&null!==(d=d.sharingLabel)&&void 0!==d&&d.allOf?g.push(new Y.NY(this.filters.sharingLabel)):g.push(new Y.y(this.filters.sharingLabel))),this.filters.complete&&this.filters.complete.length>0&&g.push(...this.filters.complete),this.filters.oneshot&&this.filters.oneshot.length>0&&g.push(...this.filters.oneshot),E.B.forEach((e=>{if(e in this.filters){var t;const i=this.filters[e].map((t=>t===z.M?new Y.$Z(new Y.Tr({role:e})):t===z._?new Y.$Z(new Y._f({role:e})):new Y.$Z(new Y.Tr({name:t,role:e}))));g.push(null!==(t=this.filtersMode[e])&&void 0!==t&&t.allOf?new Y.NY(i):new Y.y(i))}}));const f=this.$_.cloneDeep(g);s&&g.push(s);const p=await this.$komgaSeries.getSeriesList({condition:new Y.NY(g)},c);this.totalPages=p.totalPages,this.totalElements=p.totalElements,this.series=p.content;const m=await this.$komgaSeries.getSeriesListByAlphabeticalGroups({condition:new Y.NY(f)}),y=m.filter((e=>!/[a-zA-Z]/.test(e.group))).reduce(((e,t)=>e+t.count),0),b=m.reduce(((e,t)=>e+t.count),0);this.seriesGroups=[...m.filter((e=>/[a-zA-Z]/.test(e.group))),{group:"#",count:y},{group:"ALL",count:b}]},getLibraryLazy(e){return e!==A._?this.$store.getters.getLibraryById(e):void 0},async markSelectedRead(){await Promise.all(this.selectedSeries.map((e=>this.$komgaSeries.markAsRead(e.id)))),this.selectedSeries=[]},async markSelectedUnread(){await Promise.all(this.selectedSeries.map((e=>this.$komgaSeries.markAsUnread(e.id)))),this.selectedSeries=[]},addToCollection(){this.$store.dispatch("dialogAddSeriesToCollection",this.selectedSeries.map((e=>e.id)))},async addToReadList(){const e=this.selectedSeries.map((e=>new Y.kq(new Y.Tr(e.id)))),t=await this.$komgaBooks.getBooksList({condition:new Y.a4(e)},{unpaged:!0});this.$store.dispatch("dialogAddBooksToReadList",t.content.map((e=>e.id)))},async editSingleSeries(e){if(e.oneshot){const t=(await this.$komgaBooks.getBooksList({condition:new Y.kq(new Y.Tr(e.id))})).content[0];this.$store.dispatch("dialogUpdateOneshots",{series:e,book:t})}else this.$store.dispatch("dialogUpdateSeries",e)},async editMultipleSeries(){if(this.selectedOneshots){const e=await Promise.all(this.selectedSeries.map((e=>this.$komgaBooks.getBooksList({condition:new Y.kq(new Y.Tr(e.id))})))),t=this.selectedSeries.map(((t,i)=>({series:t,book:e[i].content[0]})));this.$store.dispatch("dialogUpdateOneshots",t)}else this.$store.dispatch("dialogUpdateSeries",this.selectedSeries)},deleteSeries(){this.$store.dispatch("dialogDeleteSeries",this.selectedSeries)}}}),Z=H,G=(0,T.A)(Z,u,d,!1,null,"674e5022",null),J=G.exports},41728:function(e,t,i){i.d(t,{Y:function(){return s}});i(30959);function s(e,t){return JSON.stringify(e)===JSON.stringify(t)}},96982:function(e,t,i){i.d(t,{C:function(){return a},k:function(){return r}});i(68329);const s=["asc","desc"];function r(e,t){let i=null;if(e){const r=e.split(",");2===r.length&&t.map((e=>e.key)).includes(r[0])&&s.includes(r[1])&&(i={key:r[0],order:r[1]})}return i}function a(e){if(e&&0!==e.length)return"true"===e[0].trim().toLowerCase()||"false"!==e[0].trim().toLowerCase()&&void 0}},41834:function(e,t,i){i.d(t,{m:function(){return s},q:function(){return a}});var s,r=i(80061);function a(){return Object.values(s).map((e=>({name:r.A.t(`enums.series_status.${e}`),value:e})))}(function(e){e["ENDED"]="ENDED",e["ONGOING"]="ONGOING",e["ABANDONED"]="ABANDONED",e["HIATUS"]="HIATUS"})(s||(s={}))},86189:function(e,t,i){i.d(t,{M:function(){return s},_:function(){return r}});const s="KOMGA____ANY____",r="KOMGA____NONE____"},89233:function(e,t,i){var s=i(12071).PROPER,r=i(92074),a=i(55073),n="​᠎";e.exports=function(e){return r((function(){return!!a[e]()||n[e]()!==n||s&&a[e].name!==e}))}},69163:function(e,t,i){var s=i(30281),r=i(71229),a=i(95362),n=i(55073),o=s("".replace),l=RegExp("^["+n+"]+"),h=RegExp("(^|[^"+n+"])["+n+"]+$"),u=function(e){return function(t){var i=a(r(t));return 1&e&&(i=o(i,l,"")),2&e&&(i=o(i,h,"$1")),i}};e.exports={start:u(1),end:u(2),trim:u(3)}},55073:function(e){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},68329:function(e,t,i){var s=i(51605),r=i(69163).trim,a=i(89233);s({target:"String",proto:!0,forced:a("trim")},{trim:function(){return r(this)}})}}]);
//# sourceMappingURL=browse-libraries.e61a8af1.js.map