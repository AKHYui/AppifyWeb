"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[8787],{57531:function(t,e,i){i.d(e,{A:function(){return w}});var o=i(11545),r=i(87375),a=i(78956),s=i(64724),l=i(80767),n=i(86728),c=i(81582),d=i(38937),h=i(72006),u=i(73803),m=(0,h.A)((0,o.A)("bottom",["height","inputValue"]),a.A,s.A,(0,d.P)("inputValue"),l.A,n.A,c.A).extend({name:"v-bottom-navigation",props:{activeClass:{type:String,default:"v-btn--active"},backgroundColor:String,grow:Boolean,height:{type:[Number,String],default:56},hideOnScroll:Boolean,horizontal:Boolean,inputValue:{type:Boolean,default:!0},mandatory:Boolean,shift:Boolean,tag:{type:String,default:"div"}},data(){return{isActive:this.inputValue}},computed:{canScroll(){return n.A.options.computed.canScroll.call(this)&&(this.hideOnScroll||!this.inputValue)},classes(){return{"v-bottom-navigation--absolute":this.absolute,"v-bottom-navigation--grow":this.grow,"v-bottom-navigation--fixed":!this.absolute&&(this.app||this.fixed),"v-bottom-navigation--horizontal":this.horizontal,"v-bottom-navigation--shift":this.shift}},styles(){return{...this.measurableStyles,transform:this.isActive?"none":"translateY(100%)"}}},watch:{canScroll:"onScroll"},created(){this.$attrs.hasOwnProperty("active")&&(0,u.q4)("active.sync","value or v-model",this)},methods:{thresholdMet(){this.hideOnScroll&&(this.isActive=!this.isScrollingUp||this.currentScroll>this.computedScrollThreshold,this.$emit("update:input-value",this.isActive)),this.currentThreshold<this.computedScrollThreshold||(this.savedScroll=this.currentScroll)},updateApplication(){return this.$el?this.$el.clientHeight:0},updateValue(t){this.$emit("change",t)}},render(t){const e=this.setBackgroundColor(this.backgroundColor,{staticClass:"v-bottom-navigation",class:this.classes,style:this.styles,props:{activeClass:this.activeClass,mandatory:Boolean(this.mandatory||void 0!==this.value),tag:this.tag,value:this.internalValue},on:{change:this.updateValue}});return this.canScroll&&(e.directives=e.directives||[],e.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),t(r.A,this.setTextColor(this.color,e),this.$slots.default)}}),b=i(73847),y=i(16684),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.show&&t.bottomNavigation?e(m,{attrs:{grow:"",color:"primary",app:t.$vuetify.breakpoint.smAndUp,fixed:t.bottomNavigation}},[t.showRecommended?e(b.A,{attrs:{to:{name:"recommended-libraries",params:{libraryId:t.libraryId}}}},[e("span",[t._v(t._s(t.$t("library_navigation.recommended")))]),e(y.A,[t._v("mdi-star")])],1):t._e(),e(b.A,{attrs:{to:{name:"browse-libraries",params:{libraryId:t.libraryId}}}},[e("span",[t._v(t._s(t.$t("library_navigation.browse")))]),e(y.A,[t._v("mdi-bookshelf")])],1),t.collectionsCount>0?e(b.A,{attrs:{to:{name:"browse-collections",params:{libraryId:t.libraryId}}}},[e("span",[t._v(t._s(t.$t("library_navigation.collections")))]),e(y.A,[t._v("mdi-layers-triple")])],1):t._e(),t.readListsCount>0?e(b.A,{attrs:{to:{name:"browse-readlists",params:{libraryId:t.libraryId}}}},[e("span",[t._v(t._s(t.$t("library_navigation.readlists")))]),e(y.A,[t._v("mdi-book-multiple")])],1):t._e()],1):t._e(),t.show&&!t.bottomNavigation?[t.showRecommended?e(b.A,{staticClass:"mx-1",attrs:{to:{name:"recommended-libraries",params:{libraryId:t.libraryId}},text:""}},[t._v(" "+t._s(t.$t("library_navigation.recommended"))+" ")]):t._e(),e(b.A,{staticClass:"mx-1",attrs:{to:{name:"browse-libraries",params:{libraryId:t.libraryId}},text:""}},[t._v(" "+t._s(t.$t("library_navigation.browse"))+" ")]),t.collectionsCount>0?e(b.A,{staticClass:"mx-1",attrs:{to:{name:"browse-collections",params:{libraryId:t.libraryId}},text:""}},[t._v(" "+t._s(t.$t("library_navigation.collections"))+" ")]):t._e(),t.readListsCount>0?e(b.A,{staticClass:"mx-1",attrs:{to:{name:"browse-readlists",params:{libraryId:t.libraryId}},text:""}},[t._v(" "+t._s(t.$t("library_navigation.readlists"))+" ")]):t._e()]:t._e()],2)},v=[],f=i(85471),_=i(52846),g=i(67036),A=f.Ay.extend({name:"LibraryNavigation",data:()=>({collectionsCount:0,readListsCount:0}),props:{libraryId:{type:String,required:!0},bottomNavigation:{type:Boolean,default:!1}},watch:{libraryId:{handler(t){this.loadReadListCounts(t),this.loadCollectionCounts(t)},immediate:!0}},created(){this.$eventHub.$on(_.Ep,this.collectionAdded),this.$eventHub.$on(_.HS,this.collectionDeleted),this.$eventHub.$on(_.YP,this.readListAdded),this.$eventHub.$on(_.Vp,this.readListDeleted)},beforeDestroy(){this.$eventHub.$off(_.Ep,this.collectionAdded),this.$eventHub.$off(_.HS,this.collectionDeleted),this.$eventHub.$off(_.YP,this.readListAdded),this.$eventHub.$off(_.Vp,this.readListDeleted)},computed:{showRecommended(){return this.libraryId!==g._},show(){return this.collectionsCount>0||this.readListsCount>0||this.showRecommended}},methods:{readListAdded(){0===this.readListsCount&&this.loadReadListCounts(this.libraryId)},readListDeleted(){1===this.readListsCount&&this.loadReadListCounts(this.libraryId)},collectionAdded(){0===this.collectionsCount&&this.loadCollectionCounts(this.libraryId)},collectionDeleted(){1===this.collectionsCount&&this.loadCollectionCounts(this.libraryId)},async loadCollectionCounts(t){const e=t!==g._?[t]:void 0;this.$komgaCollections.getCollections(e,{size:0}).then((t=>this.collectionsCount=t.totalElements))},async loadReadListCounts(t){const e=t!==g._?[t]:void 0;await this.$komgaReadLists.getReadLists(e,{size:0}).then((t=>this.readListsCount=t.totalElements))}}}),S=A,$=i(81656),C=(0,$.A)(S,p,v,!1,null,"17c84062",null),w=C.exports},60693:function(t,e,i){i.d(e,{A:function(){return v}});var o=i(73847),r=i(16684),a=i(18748),s=i(94026),l=i(69791),n=i(30376),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isAdmin?e(n.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.A,t._g({attrs:{icon:""},on:{click:function(t){t.preventDefault()}}},i),[e(r.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!1,863602117)},[e(a.A,{attrs:{dense:""}},[e(s.A,{on:{click:function(e){return t.scan(!1)}}},[e(l.UZ,[t._v(t._s(t.$t("menu.scan_library_files")))])],1),e(s.A,{staticClass:"list-warning",on:{click:function(e){return t.scan(!0)}}},[e(l.UZ,[t._v(t._s(t.$t("menu.scan_library_files_deep")))])],1),e(s.A,{on:{click:function(e){t.confirmAnalyzeModal=!0}}},[e(l.UZ,[t._v(t._s(t.$t("menu.analyze")))])],1),e(s.A,{on:{click:function(e){t.confirmRefreshMetadataModal=!0}}},[e(l.UZ,[t._v(t._s(t.$t("menu.refresh_metadata")))])],1),e(s.A,{on:{click:function(e){t.confirmEmptyTrash=!0}}},[e(l.UZ,[t._v(t._s(t.$t("menu.empty_trash")))])],1),e(s.A,{on:{click:t.edit}},[e(l.UZ,[t._v(t._s(t.$t("menu.edit")))])],1),e(s.A,{staticClass:"list-danger",on:{click:t.promptDeleteLibrary}},[e(l.UZ,[t._v(t._s(t.$t("menu.delete")))])],1)],1)],1):t._e(),e("confirmation-dialog",{attrs:{title:t.$t("dialog.analyze_library.title"),body:t.$t("dialog.analyze_library.body"),"button-confirm":t.$t("dialog.analyze_library.button_confirm")},on:{confirm:t.analyze},model:{value:t.confirmAnalyzeModal,callback:function(e){t.confirmAnalyzeModal=e},expression:"confirmAnalyzeModal"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.refresh_library_metadata.title"),body:t.$t("dialog.refresh_library_metadata.body"),"button-confirm":t.$t("dialog.refresh_library_metadata.button_confirm")},on:{confirm:t.refreshMetadata},model:{value:t.confirmRefreshMetadataModal,callback:function(e){t.confirmRefreshMetadataModal=e},expression:"confirmRefreshMetadataModal"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.empty_trash.title"),body:t.$t("dialog.empty_trash.body"),"button-confirm":t.$t("dialog.empty_trash.button_confirm")},on:{confirm:t.emptyTrash},model:{value:t.confirmEmptyTrash,callback:function(e){t.confirmEmptyTrash=e},expression:"confirmEmptyTrash"}})],1)},d=[],h=i(85471),u=i(32837),m=h.Ay.extend({name:"LibraryActionsMenu",components:{ConfirmationDialog:u.A},props:{library:{type:Object,required:!0}},data:()=>({confirmAnalyzeModal:!1,confirmRefreshMetadataModal:!1,confirmEmptyTrash:!1}),computed:{isAdmin(){return this.$store.getters.meAdmin}},methods:{scan(t){this.$komgaLibraries.scanLibrary(this.library,t)},analyze(){this.$komgaLibraries.analyzeLibrary(this.library)},refreshMetadata(){this.$komgaLibraries.refreshMetadata(this.library)},emptyTrash(){this.$komgaLibraries.emptyTrash(this.library)},edit(){this.$store.dispatch("dialogEditLibrary",this.library)},promptDeleteLibrary(){this.$store.dispatch("dialogDeleteLibrary",this.library)}}}),b=m,y=i(81656),p=(0,y.A)(b,c,d,!1,null,"080efe22",null),v=p.exports},88172:function(t,e,i){function o(t,e,i){const{self:o=!1}=e.modifiers||{},r=e.value,a="object"===typeof r&&r.options||{passive:!0},s="function"===typeof r||"handleEvent"in r?r:r.handler,l=o?t:e.arg?document.querySelector(e.arg):window;l&&(l.addEventListener("scroll",s,a),t._onScroll=Object(t._onScroll),t._onScroll[i.context._uid]={handler:s,options:a,target:o?void 0:l})}function r(t,e,i){var o;if(!(null===(o=t._onScroll)||void 0===o?void 0:o[i.context._uid]))return;const{handler:r,options:a,target:s=t}=t._onScroll[i.context._uid];s.removeEventListener("scroll",r,a),delete t._onScroll[i.context._uid]}i.d(e,{O:function(){return a}});const a={inserted:o,unbind:r};e.A=a},86728:function(t,e,i){var o=i(88172),r=i(73803),a=i(85471);e.A=a.Ay.extend({name:"scrollable",directives:{Scroll:o.O},props:{scrollTarget:String,scrollThreshold:[String,Number]},data:()=>({currentScroll:0,currentThreshold:0,isActive:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}),computed:{canScroll(){return"undefined"!==typeof window},computedScrollThreshold(){return this.scrollThreshold?Number(this.scrollThreshold):300}},watch:{isScrollingUp(){this.savedScroll=this.savedScroll||this.currentScroll},isActive(){this.savedScroll=0}},mounted(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget),this.target||(0,r.OP)(`Unable to locate element with identifier ${this.scrollTarget}`,this))},methods:{onScroll(){this.canScroll&&(this.previousScroll=this.currentScroll,this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.currentThreshold=Math.abs(this.currentScroll-this.computedScrollThreshold),this.$nextTick((()=>{Math.abs(this.currentScroll-this.savedScroll)>this.computedScrollThreshold&&this.thresholdMet()})))},thresholdMet(){}}})}}]);
//# sourceMappingURL=8787.8bdb6f56.js.map