"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[7962],{10685:function(t,e,i){i.d(e,{A:function(){return A}});var o=i(73847),s=i(30089),r=i(21253),a=i(92872),n=i(39975),l=i(16684),c=i(18748),u=i(94026),d=i(69791),h=i(45475),m=i(40005),f=i(68069),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(a.A,{attrs:{"max-width":"450",scrollable:""},model:{value:t.modalFileBrowser,callback:function(e){t.modalFileBrowser=e},expression:"modalFileBrowser"}},[e(s.A,[e(r.ri,[t._v(t._s(t.dialogTitle))]),e(r.OQ,{staticStyle:{height:"450px"}},[e(f.A,{attrs:{readonly:""},model:{value:t.selectedPath,callback:function(e){t.selectedPath=e},expression:"selectedPath"}}),e(c.A,{attrs:{elevation:"3",dense:""}},[t.directoryListing.hasOwnProperty("parent")?[e(u.A,{on:{click:function(e){return e.preventDefault(),t.selectParent(t.directoryListing.parent)}}},[e(h.A,[e(l.A,[t._v("mdi-arrow-left")])],1),e(d.pr,[e(d.UZ,[t._v(t._s(t.$t("dialog.file_browser.parent_directory")))])],1)],1),e(n.A)]:t._e(),t._l(t.directoryListing.directories,(function(i,o){return e("div",{key:o},[e(u.A,{on:{click:function(e){return e.preventDefault(),t.select(i)}}},[e(h.A,[e(l.A,[t._v(t._s("directory"===i.type?"mdi-folder":"mdi-file"))])],1),e(d.pr,[e(d.UZ,[t._v(" "+t._s(i.name)+" ")])],1)],1),o!==t.directoryListing.directories.length-1?e(n.A):t._e()],1)})),t._l(t.directoryListing.files,(function(i,o){return e("div",{key:o},[e(u.A,{on:{click:function(e){return e.preventDefault(),t.select(i)}}},[e(h.A,[e(l.A,[t._v(t._s("directory"===i.type?"mdi-folder":"mdi-file"))])],1),e(d.pr,[e(d.UZ,[t._v(" "+t._s(i.name)+" ")])],1)],1),o!==t.directoryListing.files.length-1?e(n.A):t._e()],1)}))],2)],1),e(r.SL,[e(m.A),e(o.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.file_browser.button_cancel")))]),e(o.A,{attrs:{color:"primary",disabled:!t.selectedPath},on:{click:t.dialogConfirm}},[t._v(t._s(t.confirmText)+" ")])],1)],1)],1)},g=[],b=i(85471),k=i(52846),v=b.Ay.extend({name:"FileBrowserDialog",data:()=>({directoryListing:{},selectedPath:"",modalFileBrowser:!1}),watch:{value(t){t&&this.dialogInit(),this.modalFileBrowser=t},modalFileBrowser(t){!t&&this.dialogCancel()}},props:{value:Boolean,path:{type:String,required:!1},showFiles:{type:Boolean,default:!1},dialogTitle:{type:String,default:function(){return this.$t("dialog.file_browser.dialog_title_default").toString()}},confirmText:{type:String,default:function(){return this.$t("dialog.file_browser.button_confirm_default").toString()}}},methods:{dialogInit(){try{this.getDirs(this.path),this.selectedPath=this.path}catch(t){this.getDirs()}},dialogCancel(){this.$emit("input",!1)},dialogConfirm(){this.$emit("input",!1),this.$emit("update:path",this.selectedPath),this.$emit("confirm")},async getDirs(t){try{this.directoryListing=await this.$komgaFileSystem.getDirectoryListing(t,this.showFiles)}catch(e){this.$eventHub.$emit(k.ff,{message:e.message})}},selectParent(t){this.selectedPath=t,this.getDirs(t)},select(t){this.selectedPath=t.path,"directory"==t.type&&this.getDirs(t.path)}}}),y=v,_=i(81656),$=(0,_.A)(y,p,g,!1,null,"0f82a890",null),A=$.exports},88297:function(t,e,i){i.d(e,{A:function(){return b}});var o=i(73847),s=i(16684),r=i(18748),a=i(94026),n=i(69791),l=i(30376),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isAdmin?e(l.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.A,t._g({attrs:{icon:""},on:{click:function(t){t.preventDefault()}}},i),[e(s.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!1,863602117)},[e(r.A,{attrs:{dense:""}},[e(a.A,{on:{click:function(e){return t.scan(!1)}}},[e(n.UZ,[t._v(t._s(t.$t("server.server_management.button_scan_libraries")))])],1),e(a.A,{staticClass:"list-warning",on:{click:function(e){return t.scan(!0)}}},[e(n.UZ,[t._v(t._s(t.$t("server.server_management.button_scan_libraries_deep")))])],1),e(a.A,{on:{click:function(e){t.confirmEmptyTrash=!0}}},[e(n.UZ,[t._v(t._s(t.$t("server.server_management.button_empty_trash")))])],1)],1)],1):t._e(),e("confirmation-dialog",{attrs:{title:t.$t("dialog.empty_trash.title"),body:t.$t("dialog.empty_trash.body"),"button-confirm":t.$t("dialog.empty_trash.button_confirm")},on:{confirm:t.emptyTrash},model:{value:t.confirmEmptyTrash,callback:function(e){t.confirmEmptyTrash=e},expression:"confirmEmptyTrash"}})],1)},u=[],d=i(85471),h=i(32837),m=d.Ay.extend({name:"LibrariesActionsMenu",components:{ConfirmationDialog:h.A},data:()=>({confirmEmptyTrash:!1}),computed:{isAdmin(){return this.$store.getters.meAdmin}},methods:{scan(t){this.$store.state.komgaLibraries.libraries.forEach((e=>{this.$komgaLibraries.scanLibrary(e,t)}))},emptyTrash(){this.$store.state.komgaLibraries.libraries.forEach((t=>{this.$komgaLibraries.emptyTrash(t)}))}}}),f=m,p=i(81656),g=(0,p.A)(f,c,u,!1,null,"ca5eba4c",null),b=g.exports},60693:function(t,e,i){i.d(e,{A:function(){return b}});var o=i(73847),s=i(16684),r=i(18748),a=i(94026),n=i(69791),l=i(30376),c=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[t.isAdmin?e(l.A,{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(o.A,t._g({attrs:{icon:""},on:{click:function(t){t.preventDefault()}}},i),[e(s.A,[t._v("mdi-dots-vertical")])],1)]}}],null,!1,863602117)},[e(r.A,{attrs:{dense:""}},[e(a.A,{on:{click:function(e){return t.scan(!1)}}},[e(n.UZ,[t._v(t._s(t.$t("menu.scan_library_files")))])],1),e(a.A,{staticClass:"list-warning",on:{click:function(e){return t.scan(!0)}}},[e(n.UZ,[t._v(t._s(t.$t("menu.scan_library_files_deep")))])],1),e(a.A,{on:{click:function(e){t.confirmAnalyzeModal=!0}}},[e(n.UZ,[t._v(t._s(t.$t("menu.analyze")))])],1),e(a.A,{on:{click:function(e){t.confirmRefreshMetadataModal=!0}}},[e(n.UZ,[t._v(t._s(t.$t("menu.refresh_metadata")))])],1),e(a.A,{on:{click:function(e){t.confirmEmptyTrash=!0}}},[e(n.UZ,[t._v(t._s(t.$t("menu.empty_trash")))])],1),e(a.A,{on:{click:t.edit}},[e(n.UZ,[t._v(t._s(t.$t("menu.edit")))])],1),e(a.A,{staticClass:"list-danger",on:{click:t.promptDeleteLibrary}},[e(n.UZ,[t._v(t._s(t.$t("menu.delete")))])],1)],1)],1):t._e(),e("confirmation-dialog",{attrs:{title:t.$t("dialog.analyze_library.title"),body:t.$t("dialog.analyze_library.body"),"button-confirm":t.$t("dialog.analyze_library.button_confirm")},on:{confirm:t.analyze},model:{value:t.confirmAnalyzeModal,callback:function(e){t.confirmAnalyzeModal=e},expression:"confirmAnalyzeModal"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.refresh_library_metadata.title"),body:t.$t("dialog.refresh_library_metadata.body"),"button-confirm":t.$t("dialog.refresh_library_metadata.button_confirm")},on:{confirm:t.refreshMetadata},model:{value:t.confirmRefreshMetadataModal,callback:function(e){t.confirmRefreshMetadataModal=e},expression:"confirmRefreshMetadataModal"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.empty_trash.title"),body:t.$t("dialog.empty_trash.body"),"button-confirm":t.$t("dialog.empty_trash.button_confirm")},on:{confirm:t.emptyTrash},model:{value:t.confirmEmptyTrash,callback:function(e){t.confirmEmptyTrash=e},expression:"confirmEmptyTrash"}})],1)},u=[],d=i(85471),h=i(32837),m=d.Ay.extend({name:"LibraryActionsMenu",components:{ConfirmationDialog:h.A},props:{library:{type:Object,required:!0}},data:()=>({confirmAnalyzeModal:!1,confirmRefreshMetadataModal:!1,confirmEmptyTrash:!1}),computed:{isAdmin(){return this.$store.getters.meAdmin}},methods:{scan(t){this.$komgaLibraries.scanLibrary(this.library,t)},analyze(){this.$komgaLibraries.analyzeLibrary(this.library)},refreshMetadata(){this.$komgaLibraries.refreshMetadata(this.library)},emptyTrash(){this.$komgaLibraries.emptyTrash(this.library)},edit(){this.$store.dispatch("dialogEditLibrary",this.library)},promptDeleteLibrary(){this.$store.dispatch("dialogDeleteLibrary",this.library)}}}),f=m,p=i(81656),g=(0,p.A)(f,c,u,!1,null,"080efe22",null),b=g.exports},72744:function(t,e,i){i.r(e),i.d(e,{default:function(){return Ns}});var o=i(75704),s=i(88172),r=i(11545),a=i(86728),n=i(64274),l=i(38937),c=i(69463),u=i(72006);const d=(0,u.A)(o.A,a.A,n.A,l.A,(0,r.A)("top",["clippedLeft","clippedRight","computedHeight","invertedScroll","isExtended","isProminent","value"]));var h=d.extend({name:"v-app-bar",directives:{Scroll:s.A},provide(){return{VAppBar:this}},props:{clippedLeft:Boolean,clippedRight:Boolean,collapseOnScroll:Boolean,elevateOnScroll:Boolean,fadeImgOnScroll:Boolean,hideOnScroll:Boolean,invertedScroll:Boolean,scrollOffScreen:Boolean,shrinkOnScroll:Boolean,value:{type:Boolean,default:!0}},data(){return{isActive:this.value}},computed:{applicationProperty(){return this.bottom?"bottom":"top"},canScroll(){return a.A.options.computed.canScroll.call(this)&&(this.invertedScroll||this.elevateOnScroll||this.hideOnScroll||this.collapseOnScroll||this.isBooted||!this.value)},classes(){return{...o.A.options.computed.classes.call(this),"v-toolbar--collapse":this.collapse||this.collapseOnScroll,"v-app-bar":!0,"v-app-bar--clipped":this.clippedLeft||this.clippedRight,"v-app-bar--fade-img-on-scroll":this.fadeImgOnScroll,"v-app-bar--elevate-on-scroll":this.elevateOnScroll,"v-app-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-app-bar--hide-shadow":this.hideShadow,"v-app-bar--is-scrolled":this.currentScroll>0,"v-app-bar--shrink-on-scroll":this.shrinkOnScroll}},scrollRatio(){const t=this.computedScrollThreshold;return Math.max((t-this.currentScroll)/t,0)},computedContentHeight(){if(!this.shrinkOnScroll)return o.A.options.computed.computedContentHeight.call(this);const t=this.dense?48:56,e=this.computedOriginalHeight;return t+(e-t)*this.scrollRatio},computedFontSize(){if(!this.isProminent)return;const t=1.25,e=1.5;return t+(e-t)*this.scrollRatio},computedLeft(){return!this.app||this.clippedLeft?0:this.$vuetify.application.left},computedMarginTop(){return this.app?this.$vuetify.application.bar:0},computedOpacity(){if(this.fadeImgOnScroll)return this.scrollRatio},computedOriginalHeight(){let t=o.A.options.computed.computedContentHeight.call(this);return this.isExtended&&(t+=parseInt(this.extensionHeight)),t},computedRight(){return!this.app||this.clippedRight?0:this.$vuetify.application.right},computedScrollThreshold(){return this.scrollThreshold?Number(this.scrollThreshold):this.computedOriginalHeight-(this.dense?48:56)},computedTransform(){if(!this.canScroll||this.elevateOnScroll&&0===this.currentScroll&&this.isActive)return 0;if(this.isActive)return 0;const t=this.scrollOffScreen?this.computedHeight:this.computedContentHeight;return this.bottom?t:-t},hideShadow(){return this.elevateOnScroll&&this.isExtended?this.currentScroll<this.computedScrollThreshold:this.elevateOnScroll?0===this.currentScroll||this.computedTransform<0:(!this.isExtended||this.scrollOffScreen)&&0!==this.computedTransform},isCollapsed(){return this.collapseOnScroll?this.currentScroll>0:o.A.options.computed.isCollapsed.call(this)},isProminent(){return o.A.options.computed.isProminent.call(this)||this.shrinkOnScroll},styles(){return{...o.A.options.computed.styles.call(this),fontSize:(0,c.Dg)(this.computedFontSize,"rem"),marginTop:(0,c.Dg)(this.computedMarginTop),transform:`translateY(${(0,c.Dg)(this.computedTransform)})`,left:(0,c.Dg)(this.computedLeft),right:(0,c.Dg)(this.computedRight)}}},watch:{canScroll:"onScroll",computedTransform(){this.canScroll&&(this.clippedLeft||this.clippedRight)&&this.callUpdate()},invertedScroll(t){this.isActive=!t||0!==this.currentScroll},hideOnScroll(t){this.isActive=!t||this.currentScroll<this.computedScrollThreshold}},created(){this.invertedScroll&&(this.isActive=!1)},methods:{genBackground(){const t=o.A.options.methods.genBackground.call(this);return t.data=this._b(t.data||{},t.tag,{style:{opacity:this.computedOpacity}}),t},updateApplication(){return this.invertedScroll?0:this.computedHeight+this.computedTransform},thresholdMet(){this.invertedScroll?this.isActive=this.currentScroll>this.computedScrollThreshold:(this.hideOnScroll&&(this.isActive=this.isScrollingUp||this.currentScroll<this.computedScrollThreshold),this.currentThreshold<this.computedScrollThreshold||(this.savedScroll=this.currentScroll))}},render(t){const e=o.A.options.render.call(this,t);return e.data=e.data||{},this.canScroll&&(e.data.directives=e.data.directives||[],e.data.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),e}}),m=i(54582),f=i(73847),p=i(85471),g=p.Ay.extend({name:"v-app-bar-nav-icon",functional:!0,render(t,{slots:e,listeners:i,props:o,data:s}){const r=Object.assign(s,{staticClass:`v-app-bar__nav-icon ${s.staticClass||""}`.trim(),props:{...o,icon:!0},on:i}),a=e().default;return t(f.A,r,a||[t(m.A,"$menu")])}}),b=i(47623),k=i(39975),v=i(16684),y=i(13812),_=i(18748),$=i(66701),A=i(94026),x=i(99360),T=i(20998),L=i(69791),w=i(45475),S=n.A.extend({name:"v-main",props:{tag:{type:String,default:"main"}},computed:{styles(){const{bar:t,top:e,right:i,footer:o,insetFooter:s,bottom:r,left:a}=this.$vuetify.application;return{paddingTop:`${e+t}px`,paddingRight:`${i}px`,paddingBottom:`${o+s+r}px`,paddingLeft:`${a}px`}}},render(t){const e={staticClass:"v-main",style:this.styles,ref:"main"};return t(this.tag,e,[t("div",{staticClass:"v-main__wrap"},this.$slots.default)])}}),D=i(23879),C=i(99527),R=i(86315),E=i(40005),B=i(84551),I=(i(28743),function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"fill-height"},[e(h,{attrs:{app:""}},[e(b.A,{staticClass:"ms-n3",attrs:{dot:"","offset-x":"15","offset-y":"20",value:t.drawerVisible?0:t.$store.state.booksToCheck+t.$store.getters.getUnreadAnnouncementsCount(),color:t.$store.state.booksToCheck?"accent":"info"}},[e(g,{on:{click:function(e){return e.stopPropagation(),t.toggleDrawer.apply(null,arguments)}}})],1),e("search-box",{staticClass:"flex-fill"})],1),e(D.A,{attrs:{app:"",right:t.$vuetify.rtl},scopedSlots:t._u([{key:"append",fn:function(){return[t.isAdmin&&!t.$_.isEmpty(t.$store.state.actuatorInfo)?e("div",{staticClass:"pa-2 pb-6 text-caption"},[e(b.A,{attrs:{dot:"",value:0==t.$store.getters.isLatestVersion(),color:"warning"}},[e("router-link",{staticClass:"link-none",attrs:{to:{name:"updates"}}},[t._v(" v"+t._s(t.$store.state.actuatorInfo.build.version)+"-"+t._s(t.$store.state.actuatorInfo.git.branch)+" ")])],1)],1):t._e()]},proxy:!0}]),model:{value:t.drawerVisible,callback:function(e){t.drawerVisible=e},expression:"drawerVisible"}},[e(A.A,{staticClass:"pb-2",attrs:{inactive:""},on:{click:function(e){return t.$router.push({name:"home"})}}},[e(T.A,[e(y.A,{attrs:{src:i(63935)}})],1),e(L.pr,[e(L.UZ,{staticClass:"title"},[t._v(" Komga ")])],1),e(B.A,{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(C.A,t._g({attrs:{active:t.taskCount>0,indeterminate:"",absolute:"",bottom:"",height:"5",color:"secondary"}},i))]}}])},[e("div",{staticClass:"mb-2"},[t._v(t._s(t.$tc("common.pending_tasks",t.taskCount)))]),t._l(Object.keys(t.taskCountByType),(function(i){return e("div",{key:i},[t._v(t._s(i)+": "+t._s(t.taskCountByType[i])+" ")])}))],2)],1),e(k.A),e(_.A,{attrs:{nav:"",shaped:"",dense:""}},[e(A.A,{attrs:{to:{name:"dashboard"}}},[e(w.A,[e(v.A,[t._v("mdi-home")])],1),e(L.pr,[e(L.UZ,[t._v(t._s(t.$t("navigation.home")))])],1)],1),e(A.A,{attrs:{to:{name:"libraries",params:{libraryId:t.LIBRARIES_ALL}}}},[e(w.A,[e(v.A,[t._v("mdi-book-multiple")])],1),e(L.pr,[e(L.UZ,[t._v(t._s(t.$t("navigation.libraries")))])],1),t.isAdmin?e(x.A,{staticClass:"ma-0"},[e(f.A,{attrs:{icon:""},on:{"!click":function(e){return e.stopPropagation(),e.preventDefault(),t.addLibrary.apply(null,arguments)}}},[e(v.A,[t._v("mdi-plus")])],1)],1):t._e(),t.isAdmin?e(x.A,{staticClass:"ma-0"},[e("libraries-actions-menu")],1):t._e()],1),t._l(t.libraries,(function(i,o){return e(A.A,{key:o,attrs:{to:{name:"libraries",params:{libraryId:i.id}}}},[e(w.A),e(L.pr,[e(L.UZ,[t._v(t._s(i.name))]),i.unavailable?e(L.w,{staticClass:"error--text caption"},[t._v(t._s(t.$t("common.unavailable"))+" ")]):t._e()],1),t.isAdmin?e(x.A,{staticClass:"ma-0"},[e("library-actions-menu",{attrs:{library:i}})],1):t._e()],1)})),t.isAdmin?e($.A,{attrs:{"prepend-icon":"mdi-import","no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[e(L.UZ,[t._v(t._s(t.$t("book_import.title")))])]},proxy:!0}],null,!1,1248011038),model:{value:t.expandImport,callback:function(e){t.expandImport=e},expression:"expandImport"}},[e(A.A,{attrs:{to:{name:"import-books"}}},[e(L.UZ,[t._v(t._s(t.$t("common.books")))])],1),e(A.A,{attrs:{to:{name:"import-readlist"}}},[e(L.UZ,[t._v(t._s(t.$t("common.readlist")))])],1)],1):t._e(),t.isAdmin?e($.A,{attrs:{"no-action":""},scopedSlots:t._u([{key:"prependIcon",fn:function(){return[e(b.A,{attrs:{dot:"",inline:"",value:t.$store.state.booksToCheck,color:"accent"}},[e(v.A,[t._v("mdi-book-cog")])],1)]},proxy:!0},{key:"activator",fn:function(){return[e(L.UZ,[t._v(t._s(t.$t("common.media")))])]},proxy:!0}],null,!1,1196251077),model:{value:t.expandMediaManagement,callback:function(e){t.expandMediaManagement=e},expression:"expandMediaManagement"}},[e(A.A,{attrs:{to:{name:"media-analysis"}}},[e(b.A,{attrs:{dot:"",inline:"",value:t.$store.state.booksToCheck,color:"accent"}},[e(L.UZ,[t._v(t._s(t.$t("media_analysis.media_analysis")))])],1)],1),e(A.A,{attrs:{to:{name:"missing-posters"}}},[e(L.UZ,[t._v(t._s(t.$t("missing_posters.title")))])],1),e(A.A,{attrs:{to:{name:"duplicate-files"}}},[e(L.UZ,[t._v(t._s(t.$t("duplicates.title")))])],1),e($.A,{attrs:{"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[e(L.UZ,[t._v(t._s(t.$t("duplicate_pages.title")))])]},proxy:!0}],null,!1,631987773),model:{value:t.expandDuplicatePages,callback:function(e){t.expandDuplicatePages=e},expression:"expandDuplicatePages"}},[e(A.A,{attrs:{to:{name:"settings-duplicate-pages-known"}}},[e(L.UZ,[t._v(t._s(t.$t("duplicate_pages.known")))])],1),e(A.A,{attrs:{to:{name:"settings-duplicate-pages-unknown"}}},[e(L.UZ,[t._v(t._s(t.$t("duplicate_pages.new")))])],1)],1)],1):t._e(),t.isAdmin?e(A.A,{attrs:{to:{name:"history"}}},[e(w.A,[e(v.A,[t._v("mdi-clock-time-four-outline")])],1),e(L.pr,[e(L.UZ,[t._v(t._s(t.$t("history.title")))])],1)],1):t._e(),t.isAdmin?e($.A,{attrs:{"no-action":""},scopedSlots:t._u([{key:"prependIcon",fn:function(){return[e(b.A,{attrs:{dot:"",inline:"",value:t.$store.getters.getUnreadAnnouncementsCount(),color:"info"}},[e(v.A,[t._v("mdi-cog")])],1)]},proxy:!0},{key:"activator",fn:function(){return[e(L.UZ,[t._v(t._s(t.$t("server.tab_title")))])]},proxy:!0}],null,!1,1741136620),model:{value:t.expandSettings,callback:function(e){t.expandSettings=e},expression:"expandSettings"}},[e(A.A,{attrs:{to:{name:"settings-users"}}},[e(L.UZ,[t._v(t._s(t.$t("users.users")))])],1),e(A.A,{attrs:{to:{name:"settings-server"}}},[e(L.UZ,[t._v(t._s(t.$t("common.settings")))])],1),e(A.A,{attrs:{to:{name:"metrics"}}},[e(L.UZ,[t._v(t._s(t.$t("metrics.title")))])],1),e(A.A,{attrs:{to:{name:"announcements"}}},[e(b.A,{attrs:{dot:"",inline:"",value:t.$store.getters.getUnreadAnnouncementsCount(),color:"info"}},[e(L.UZ,[t._v(t._s(t.$t("announcements.tab_title")))])],1)],1),e(A.A,{attrs:{to:{name:"updates"}}},[e(b.A,{attrs:{dot:"",inline:"",value:0==t.$store.getters.isLatestVersion(),color:"warning"}},[e(L.UZ,[t._v(t._s(t.$t("server.updates")))])],1)],1)],1):t._e(),e($.A,{attrs:{"prepend-icon":"mdi-account","no-action":""},scopedSlots:t._u([{key:"activator",fn:function(){return[e(L.UZ,[t._v(t._s(t.$t("account_settings.my_account")))])]},proxy:!0}]),model:{value:t.expandAccount,callback:function(e){t.expandAccount=e},expression:"expandAccount"}},[e(A.A,{attrs:{to:{name:"account-me"}}},[e(L.UZ,[t._v(t._s(t.$t("account_settings.details")))])],1),e(A.A,{attrs:{to:{name:"account-api-keys"}}},[e(L.UZ,[t._v(t._s(t.$t("users.api_keys")))])],1),e(A.A,{attrs:{to:{name:"account-activity"}}},[e(L.UZ,[t._v(t._s(t.$t("users.authentication_activity")))])],1)],1),e(A.A,{on:{click:t.logout}},[e(w.A,[e(v.A,[t._v("mdi-power")])],1),e(L.pr,[e(L.UZ,[t._v(t._s(t.$t("navigation.logout")))])],1)],1)],2),e(k.A),e(_.A,{staticClass:"mt-2",attrs:{dense:""}},[e(A.A,[e(w.A,[e(v.A,[t._v(t._s(t.themeIcon))])],1),e(R.A,{staticClass:"py-2",attrs:{dense:"",items:t.themes,label:t.$t("home.theme")},model:{value:t.theme,callback:function(e){t.theme=e},expression:"theme"}})],1),e(A.A,[e(w.A,[e(v.A,[t._v("mdi-translate")])],1),e(R.A,{staticClass:"py-2",attrs:{dense:"",items:t.locales,label:t.$t("home.translation")},model:{value:t.locale,callback:function(e){t.locale=e},expression:"locale"}})],1)],1),e(E.A)],1),e(S,{staticClass:"fill-height"},[e("reusable-dialogs"),e("toaster-notification"),e("router-view")],1)],1)}),O=[],M=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e("collection-add-to-dialog",{attrs:{"series-ids":t.addToCollectionSeriesIds},model:{value:t.addToCollectionDialog,callback:function(e){t.addToCollectionDialog=e},expression:"addToCollectionDialog"}}),e("collection-edit-dialog",{attrs:{collection:t.editCollection},model:{value:t.editCollectionDialog,callback:function(e){t.editCollectionDialog=e},expression:"editCollectionDialog"}}),e("confirmation-dialog",{attrs:{title:t.collectionsToDeleteSingle?t.$t("dialog.delete_collection.dialog_title"):t.$t("dialog.delete_collection.dialog_title_multiple"),"body-html":t.collectionsToDeleteSingle?t.$t("dialog.delete_collection.warning_html",{name:t.collectionsToDelete.name}):t.$t("dialog.delete_collection.warning_multiple_html",{count:t.collectionsToDelete.length}),"confirm-text":t.collectionsToDeleteSingle?t.$t("dialog.delete_collection.confirm_delete",{name:t.collectionsToDelete.name}):t.$t("dialog.delete_collection.confirm_delete_multiple",{count:t.collectionsToDelete.length}),"button-confirm":t.$t("dialog.delete_collection.button_confirm"),"button-confirm-color":"error"},on:{confirm:t.deleteCollections},model:{value:t.deleteCollectionDialog,callback:function(e){t.deleteCollectionDialog=e},expression:"deleteCollectionDialog"}}),e("read-list-add-to-dialog",{attrs:{bookIds:t.addToReadListBookIds},model:{value:t.addToReadListDialog,callback:function(e){t.addToReadListDialog=e},expression:"addToReadListDialog"}}),e("read-list-edit-dialog",{attrs:{"read-list":t.editReadList},model:{value:t.editReadListDialog,callback:function(e){t.editReadListDialog=e},expression:"editReadListDialog"}}),e("confirmation-dialog",{attrs:{title:t.readListsToDeleteSingle?t.$t("dialog.delete_readlist.dialog_title"):t.$t("dialog.delete_readlist.dialog_title_multiple"),"body-html":t.readListsToDeleteSingle?t.$t("dialog.delete_readlist.warning_html",{name:t.readListsToDelete.name}):t.$t("dialog.delete_readlist.warning_multiple_html",{count:t.readListsToDelete.length}),"confirm-text":t.readListsToDeleteSingle?t.$t("dialog.delete_readlist.confirm_delete",{name:t.readListsToDelete.name}):t.$t("dialog.delete_readlist.confirm_delete_multiple",{count:t.readListsToDelete.length}),"button-confirm":t.$t("dialog.delete_readlist.button_confirm"),"button-confirm-color":"error"},on:{confirm:t.deleteReadLists},model:{value:t.deleteReadListDialog,callback:function(e){t.deleteReadListDialog=e},expression:"deleteReadListDialog"}}),e("library-edit-dialog",{attrs:{library:t.editLibrary},model:{value:t.editLibraryDialog,callback:function(e){t.editLibraryDialog=e},expression:"editLibraryDialog"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.delete_library.title"),"body-html":t.$t("dialog.delete_library.warning_html",{name:t.libraryToDelete.name}),"confirm-text":t.$t("dialog.delete_library.confirm_delete",{name:t.libraryToDelete.name}),"button-confirm":t.$t("dialog.delete_library.button_confirm"),"button-confirm-color":"error"},on:{confirm:t.deleteLibrary},model:{value:t.deleteLibraryDialog,callback:function(e){t.deleteLibraryDialog=e},expression:"deleteLibraryDialog"}}),e("edit-books-dialog",{attrs:{books:t.updateBooks},model:{value:t.updateBooksDialog,callback:function(e){t.updateBooksDialog=e},expression:"updateBooksDialog"}}),e("bulk-edit-books-dialog",{attrs:{books:t.updateBulkBooks},model:{value:t.updateBulkBooksDialog,callback:function(e){t.updateBulkBooksDialog=e},expression:"updateBulkBooksDialog"}}),e("edit-oneshot-dialog",{attrs:{oneshots:t.updateOneshots},model:{value:t.updateOneshotsDialog,callback:function(e){t.updateOneshotsDialog=e},expression:"updateOneshotsDialog"}}),e("edit-series-dialog",{attrs:{series:t.updateSeries},model:{value:t.updateSeriesDialog,callback:function(e){t.updateSeriesDialog=e},expression:"updateSeriesDialog"}}),e("confirmation-dialog",{attrs:{title:t.$t("dialog.delete_series.dialog_title"),"body-html":t.seriesToDeleteSingle?t.$t("dialog.delete_series.warning_html",{name:t.seriesToDelete.name}):t.$t("dialog.delete_series.warning_multiple_html",{count:t.seriesToDelete.length}),"confirm-text":t.seriesToDeleteSingle?t.$t("dialog.delete_series.confirm_delete",{name:t.seriesToDelete.name}):t.$t("dialog.delete_series.confirm_delete_multiple",{count:t.seriesToDelete.length}),"button-confirm":t.$t("dialog.delete_series.button_confirm"),"button-confirm-color":"error"},on:{confirm:t.deleteSeries},model:{value:t.deleteSeriesDialog,callback:function(e){t.deleteSeriesDialog=e},expression:"deleteSeriesDialog"}}),e("confirmation-dialog",{attrs:{title:t.booksToDeleteSingle?t.$t("dialog.delete_book.dialog_title"):t.$t("dialog.delete_book.dialog_title_multiple"),"body-html":t.booksToDeleteSingle?t.$t("dialog.delete_book.warning_html",{name:t.booksToDelete.name}):t.$t("dialog.delete_book.warning_multiple_html",{count:t.booksToDelete.length}),"confirm-text":t.booksToDeleteSingle?t.$t("dialog.delete_book.confirm_delete",{name:t.booksToDelete.name}):t.$t("dialog.delete_book.confirm_delete_multiple",{count:t.booksToDelete.length}),"button-confirm":t.$t("dialog.delete_book.button_confirm"),"button-confirm-color":"error"},on:{confirm:t.deleteBooks},model:{value:t.deleteBookDialog,callback:function(e){t.deleteBookDialog=e},expression:"deleteBookDialog"}})],1)},U=[],F=(i(14602),i(90623)),P=i(30089),N=i(21253),q=i(1231),Y=i(70793),Q=i(92872),H=i(22369),V=i(68069),j=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{"max-width":"450",scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e(P.A,[e(N.ri,[t._v(t._s(t.$t("dialog.add_to_collection.dialog_title")))]),e(f.A,{attrs:{icon:"",absolute:"",top:"",right:""},on:{click:t.dialogClose}},[e(v.A,[t._v("mdi-close")])],1),e(k.A),e(N.OQ,{staticStyle:{height:"50%"}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,{attrs:{align:"center"}},[e(q.A,[e(V.A,{attrs:{autofocus:"",label:t.$t("dialog.add_to_collection.field_search_create"),"error-messages":t.duplicate},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.create.apply(null,arguments)}},model:{value:t.newCollection,callback:function(e){t.newCollection=e},expression:"newCollection"}})],1),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{color:"primary",disabled:0===t.newCollection.length||""!==t.duplicate},on:{click:t.create}},[t._v(t._s(t.$t("dialog.add_to_collection.button_create"))+" ")])],1)],1),e(k.A),0!==t.collections.length?e(H.A,[e(q.A,[0!==t.collectionsFiltered.length?e(_.A,{attrs:{elevation:"5"}},t._l(t.collectionsFiltered,(function(i,o){return e("div",{key:o},[e(A.A,{attrs:{"two-line":""},on:{click:function(e){return t.addTo(i)}}},[e(L.pr,[e(L.UZ,[t._v(t._s(i.name))]),e(L.w,[t._v(" "+t._s(t.$tc("dialog.add_to_collection.card_collection_subtitle",i.seriesIds.length))+" ")])],1)],1),o!==t.collectionsFiltered.length-1?e(k.A):t._e()],1)})),0):e(F.A,{attrs:{type:"info",text:""}},[t._v(t._s(t.$t("dialog.add_to_collection.label_no_matching_collection"))+" ")])],1)],1):t._e()],1)],1)],1)],1)},Z=[],z=i(52846);i(62554);function W(t){return t.normalize("NFD").replace(/\p{Diacritic}/gu,"")}var G=p.Ay.extend({name:"CollectionAddToDialog",data:()=>({confirmDelete:!1,modal:!1,collections:[],newCollection:""}),props:{value:Boolean,seriesIds:{type:[Array],required:!0}},watch:{async value(t){this.modal=t,t&&(this.newCollection="",this.collections=this.$_.orderBy((await this.$komgaCollections.getCollections(void 0,{unpaged:!0})).content,["lastModifiedDate"],["desc"]))},modal(t){!t&&this.dialogClose()}},async mounted(){},computed:{duplicate(){return""!==this.newCollection&&this.collections.some((t=>t.name.toLowerCase()===this.newCollection.toLowerCase()))?this.$t("dialog.add_to_collection.field_search_create_error").toString():""},collectionsFiltered(){return this.collections.filter((t=>W(t.name.toLowerCase()).includes(W(this.newCollection.toLowerCase()))))}},methods:{dialogClose(){this.$emit("input",!1)},async addTo(t){const e=this.$_.uniq(t.seriesIds.concat(this.seriesIds)),i={seriesIds:e};try{await this.$komgaCollections.patchCollection(t.id,i),this.dialogClose()}catch(o){this.$eventHub.$emit(z.ff,{message:o.message})}},async create(){const t={name:this.newCollection,ordered:!1,seriesIds:this.seriesIds};try{await this.$komgaCollections.postCollection(t);this.dialogClose()}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}}}}),K=G,X=i(81656),J=(0,X.A)(K,j,Z,!1,null,"1a503243",null),tt=J.exports,et=i(72710),it=i(75310),ot=i(1361),st=i(68462),rt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,"max-width":"800"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.$t("dialog.edit_collection.dialog_title"))+" ")],1),e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-align-center")]),t._v(" "+t._s(t.$t("dialog.edit_collection.tab_general"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-image")]),t._v(" "+t._s(t.$t("dialog.edit_collection.tab_poster"))+" ")],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,[e(V.A,{attrs:{label:"Name","error-messages":t.getErrorsName},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e(H.A,[e(q.A,[e("div",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_collection.label_ordering")))]),e(et.A,{attrs:{label:t.$t("dialog.edit_collection.field_manual_ordering"),"hide-details":""},model:{value:t.form.ordered,callback:function(e){t.$set(t.form,"ordered",e)},expression:"form.ordered"}})],1)],1)],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{staticClass:"pa-1"},[e("drop-zone",{ref:"thumbnailsUpload",staticClass:"pa-8",on:{"on-input-change":t.addThumbnail}})],1)],1),e(H.A,t._l([...t.poster.uploadQueue,...t.poster.collectionThumbnails],(function(i,o){return e(q.A,{key:o,staticClass:"pa-1",attrs:{cols:"6",sm:"4",lg:"3"}},[e("thumbnail-card",{attrs:{item:i,selected:t.isThumbnailSelected(i),toBeDeleted:t.isThumbnailToBeDeleted(i)},on:{"on-select-thumbnail":t.selectThumbnail,"on-delete-thumbnail":t.deleteThumbnail}})],1)})),1)],1)],1)],1)],1),e(N.SL,[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_collection.button_cancel")))]),e(f.A,{attrs:{color:"primary",disabled:""!==t.getErrorsName},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_collection.button_confirm"))+" ")])],1)],1)],1)])},at=[],nt=i(18499),lt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(P.A,[e(y.A,{attrs:{src:t.imageUrl,"aspect-ratio":"0.7071",contain:""}}),e(N.OQ,{staticStyle:{height:"5rem"}},[e("div",[t._v(t._s(t.fileSize))]),t.dimension?e("div",[t._v(t._s(t.$t("common.dimension",t.dimension)))]):t._e(),t.mediaType?e("div",[t._v(t._s(t.mediaType))]):t._e()]),e(N.SL,[e(B.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e(v.A,t._g(t._b({staticClass:"v-btn--icon v-size--default px-2",attrs:{color:t.fileTooBig?"error":""}},"v-icon",o,!1),i),[t._v(" "+t._s(t.statusIcon)+" ")])]}}])},[e("span",[t._v(t._s(t.statusTooltip))])]),t.fileTooBig?t._e():e(B.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e(f.A,t._g(t._b({attrs:{icon:"",color:t.selected?"success":""},on:{click:t.onClickSelect}},"v-btn",o,!1),i),[e(v.A,[t._v("mdi-check")])],1)]}}],null,!1,1529784645)},[e("span",[t._v(t._s(t.selected?t.$t("thumbnail_card.tooltip_selected"):t.$t("thumbnail_card.tooltip_mark_as_selected")))])]),t.deletable?e(B.A,{attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e(f.A,t._g(t._b({attrs:{icon:"",color:t.toBeDeleted?"error":""},on:{click:t.onClickDelete}},"v-btn",o,!1),i),[e(v.A,[t._v("mdi-trash-can-outline")])],1)]}}],null,!1,3437433873)},[e("span",[t._v(t._s(t.toBeDeleted?t.$t("thumbnail_card.tooltip_to_be_deleted"):t.$t("thumbnail_card.tooltip_delete")))])]):t._e()],1)],1)},ct=[],ut=(i(30789),i(60933),i(96380),i(91059),i(42838),i(83515),i(33513)),dt=i(26949),ht=p.Ay.extend({name:"ThumbnailCard",props:{item:{required:!0,validator:t=>t instanceof File||"id"in t&&"type"in t&&"selected"in t&&("seriesId"in t||"bookId"in t||"readListId"in t||"collectionId"in t)},selected:{type:Boolean,required:!0},toBeDeleted:{type:Boolean,required:!0}},computed:{fileSize(){return this.item instanceof File?(0,dt.K)(this.item.size):(0,dt.K)(this.$_.get(this.item,"fileSize",void 0))},dimension(){if(this.$_.has(this.item,"width")&&this.$_.has(this.item,"height"))return{width:this.$_.get(this.item,"width",0),height:this.$_.get(this.item,"height",0)}},mediaType(){return this.$_.get(this.item,"mediaType",void 0)},fileTooBig(){return this.item instanceof File&&this.item.size>1e6},statusIcon(){return this.item instanceof File?this.fileTooBig?"mdi-alert-circle":"mdi-cloud-upload-outline":"SIDECAR"===this.item.type?"mdi-folder-outline":"GENERATED"===this.item.type?"mdi-file-outline":"mdi-cloud-check-outline"},statusTooltip(){return this.item instanceof File?this.fileTooBig?this.$t("thumbnail_card.tooltip_too_big").toString():this.$t("thumbnail_card.tooltip_to_be_uploaded").toString():"SIDECAR"===this.item.type?this.$t("thumbnail_card.tooltip_sidecar").toString():"GENERATED"===this.item.type?this.$t("thumbnail_card.tooltip_generated").toString():this.$t("thumbnail_card.tooltip_user_uploaded").toString()},imageUrl(){if(this.item instanceof File)return URL.createObjectURL(this.item);if("seriesId"in this.item)return(0,ut.r5)(this.item.seriesId,this.item.id);if("bookId"in this.item)return(0,ut.lM)(this.item.bookId,this.item.id);if("readListId"in this.item)return(0,ut.QO)(this.item.readListId,this.item.id);if("collectionId"in this.item)return(0,ut.aF)(this.item.collectionId,this.item.id);throw new Error("The given item type is not known!")},deletable(){return this.item instanceof File||"SIDECAR"!==this.item.type&&"GENERATED"!==this.item.type}},methods:{onClickSelect(){this.selected||this.$emit("on-select-thumbnail",this.item)},onClickDelete(){this.$emit("on-delete-thumbnail",this.item)}}}),mt=ht,ft=(0,X.A)(mt,lt,ct,!1,null,"70203c5d",null),pt=ft.exports,gt=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("label",{staticClass:"drop-zone",on:{drop:function(e){return e.preventDefault(),t.dropHandler.apply(null,arguments)},dragover:function(t){t.preventDefault()}}},[e("span",{staticClass:"file-input"},[t._v(t._s(t.$t("common.choose_image")))]),t._v(" - "+t._s(t.$t("common.drag_drop"))+" "),e("input",{ref:"input",attrs:{hidden:"","aria-hidden":"true",type:"file",accept:"image/*",multiple:""},on:{change:t.dropHandler}})])},bt=[],kt=p.Ay.extend({name:"DropZone",methods:{async dropHandler(t){if(t instanceof DragEvent&&t.dataTransfer)if(t.dataTransfer.files.length>0)this.$emit("on-input-change",Array.from(t.dataTransfer.files));else{const e=t.dataTransfer.getData("text/uri-list");if(e){const t=await(0,dt.W)(e);this.$emit("on-input-change",[t])}}if(t.target instanceof HTMLInputElement&&t.target.files){const e=t.target.files;if(!e)return;this.$emit("on-input-change",Array.from(e))}},reset(){this.$refs.input.value=""}}}),vt=kt,yt=(0,X.A)(vt,gt,bt,!1,null,"49294f8c",null),_t=yt.exports,$t=p.Ay.extend({name:"CollectionEditDialog",components:{ThumbnailCard:pt,DropZone:_t},data:()=>({UserRoles:nt.f,modal:!1,tab:0,collections:[],form:{name:"",ordered:!1},poster:{selectedThumbnail:"",uploadQueue:[],deleteQueue:[],collectionThumbnails:[]}}),props:{value:Boolean,collection:{type:Object,required:!0}},watch:{async value(t){this.modal=t,t&&(this.collections=(await this.$komgaCollections.getCollections(void 0,{unpaged:!0})).content,this.dialogReset(this.collection))},modal(t){!t&&this.dialogCancel(),t&&this.getThumbnails(this.collection)},collection:{handler(t){this.dialogReset(t)},immediate:!0}},computed:{libraries(){return this.$store.state.komgaLibraries.libraries},getErrorsName(){var t,e;return""===this.form.name?this.$t("common.required").toString():(null===(t=this.form.name)||void 0===t?void 0:t.toLowerCase())!==(null===(e=this.collection.name)||void 0===e?void 0:e.toLowerCase())&&this.collections.some((t=>t.name.toLowerCase()===this.form.name.toLowerCase()))?this.$t("dialog.add_to_collection.field_search_create_error").toString():""}},methods:{async dialogReset(t){this.tab=0,this.form.name=t.name,this.form.ordered=t.ordered,this.poster.selectedThumbnail="",this.poster.deleteQueue=[],this.poster.uploadQueue=[],this.poster.collectionThumbnails=[]},dialogCancel(){this.$emit("input",!1)},dialogConfirm(){this.editCollection(),this.$emit("input",!1)},async editCollection(){try{if(this.poster.uploadQueue.length>0){let e=!1;for(const i of this.poster.uploadQueue.slice())try{await this.$komgaCollections.uploadThumbnail(this.collection.id,i,i.name===this.poster.selectedThumbnail),this.deleteThumbnail(i)}catch(t){this.$eventHub.$emit(z.ff,{message:t.message}),e=!0}if(e)return await this.getThumbnails(this.collection),!1}if(""!==this.poster.selectedThumbnail){const t=this.poster.selectedThumbnail;this.poster.collectionThumbnails.find((e=>e.id===t))&&await this.$komgaCollections.markThumbnailAsSelected(this.collection.id,t)}this.poster.deleteQueue.length>0&&this.poster.deleteQueue.forEach((t=>this.$komgaCollections.deleteThumbnail(t.collectionId,t.id)));const e={name:this.form.name,ordered:this.form.ordered};await this.$komgaCollections.patchCollection(this.collection.id,e)}catch(t){this.$eventHub.$emit(z.ff,{message:t.message})}},addThumbnail(t){let e=!1;for(const i of t)this.poster.uploadQueue.find((t=>t.name===i.name))||(this.poster.uploadQueue.push(i),e||(this.selectThumbnail(i),e=!0));this.$refs.thumbnailsUpload.reset()},async getThumbnails(t){const e=await this.$komgaCollections.getThumbnails(t.id);this.selectThumbnail(e.find((t=>t.selected))),this.poster.collectionThumbnails=e},isThumbnailSelected(t){return t instanceof File?t.name===this.poster.selectedThumbnail:t.id===this.poster.selectedThumbnail},selectThumbnail(t){if(t)if(t instanceof File)this.poster.selectedThumbnail=t.name;else{const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1),this.poster.selectedThumbnail=t.id}},isThumbnailToBeDeleted(t){return!(t instanceof File)&&this.poster.deleteQueue.includes(t)},deleteThumbnail(t){if(t instanceof File){const e=this.poster.uploadQueue.indexOf(t,0);e>-1&&this.poster.uploadQueue.splice(e,1),t.name===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}else if(this.isThumbnailToBeDeleted(t)){const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1)}else this.poster.deleteQueue.push(t),t.id===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}}}),At=$t,xt=(0,X.A)(At,rt,at,!1,null,"06ac0754",null),Tt=xt.exports,Lt=i(81737),wt=i(78956),St=(0,u.A)(wt.A).extend({methods:{genPickerButton(t,e,i,o=!1,s=""){const r=this[t]===e,a=i=>{i.stopPropagation(),this.$emit(`update:${(0,c.kW)(t)}`,e)};return this.$createElement("div",{staticClass:`v-picker__title__btn ${s}`.trim(),class:{"v-picker__title__btn--active":r,"v-picker__title__btn--readonly":o},on:r||o?void 0:{click:a}},Array.isArray(i)?i:[i])}}}),Dt=(0,u.A)(St).extend({name:"v-date-picker-title",props:{date:{type:String,default:""},disabled:Boolean,readonly:Boolean,selectingYear:Boolean,value:{type:String},year:{type:[Number,String],default:""},yearIcon:{type:String}},data:()=>({isReversing:!1}),computed:{computedTransition(){return this.isReversing?"picker-reverse-transition":"picker-transition"}},watch:{value(t,e){this.isReversing=t<e}},methods:{genYearIcon(){return this.$createElement(m.A,{props:{dark:!0}},this.yearIcon)},getYearBtn(){return this.genPickerButton("selectingYear",!0,[String(this.year),this.yearIcon?this.genYearIcon():null],!1,"v-date-picker-title__year")},genTitleText(){return this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("div",{domProps:{innerHTML:this.date||"&nbsp;"},key:this.value})])},genTitleDate(){return this.genPickerButton("selectingYear",!1,[this.genTitleText()],!1,"v-date-picker-title__date")}},render(t){return t("div",{staticClass:"v-date-picker-title",class:{"v-date-picker-title--disabled":this.disabled}},[this.getYearBtn(),this.genTitleDate()])}}),Ct=i(39945),Rt=p.Ay.extend({name:"localable",props:{locale:String},computed:{currentLocale(){return this.locale||this.$vuetify.lang.current}}}),Et=i(81582);const Bt=(t,e,i)=>(e|=0,t=String(t),i=String(i),t.length>e?String(t):(e-=t.length,e>i.length&&(i+=i.repeat(e/i.length)),i.slice(0,e)+String(t)));var It=(t,e=2)=>Bt(t,e,"0");function Ot(t,e,i={start:0,length:0}){const o=t=>{const[e,i,o]=t.trim().split(" ")[0].split("-");return[It(e,4),It(i||1),It(o||1)].join("-")};try{const i=new Intl.DateTimeFormat(t||void 0,e);return t=>i.format(new Date(`${o(t)}T00:00:00+00:00`))}catch(s){return i.start||i.length?t=>o(t).substr(i.start||0,i.length):void 0}}var Mt=Ot,Ut=(t,e)=>{const[i,o]=t.split("-").map(Number);return o+e===0?i-1+"-12":o+e===13?`${i+1}-01`:`${i}-${It(o+e)}`},Ft=(0,u.A)(wt.A,Rt,Et.A).extend({name:"v-date-picker-header",props:{disabled:Boolean,format:Function,min:String,max:String,nextAriaLabel:String,nextIcon:{type:String,default:"$next"},prevAriaLabel:String,prevIcon:{type:String,default:"$prev"},readonly:Boolean,value:{type:[Number,String],required:!0}},data(){return{isReversing:!1}},computed:{formatter(){return this.format?this.format:String(this.value).split("-")[1]?Mt(this.currentLocale,{month:"long",year:"numeric",timeZone:"UTC"},{length:7}):Mt(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},watch:{value(t,e){this.isReversing=t<e}},methods:{genBtn(t){const e=t>0?this.nextAriaLabel:this.prevAriaLabel,i=e?this.$vuetify.lang.t(e):void 0,o=this.disabled||t<0&&this.min&&this.calculateChange(t)<this.min||t>0&&this.max&&this.calculateChange(t)>this.max;return this.$createElement(Ct.A,{attrs:{"aria-label":i},props:{dark:this.dark,disabled:o,icon:!0,light:this.light},on:{click:e=>{e.stopPropagation(),this.$emit("input",this.calculateChange(t))}}},[this.$createElement(m.A,t<0===!this.$vuetify.rtl?this.prevIcon:this.nextIcon)])},calculateChange(t){const[e,i]=String(this.value).split("-").map(Number);return null==i?`${e+t}`:Ut(String(this.value),t)},genHeader(){const t=!this.disabled&&(this.color||"accent"),e=this.$createElement("div",this.setTextColor(t,{key:String(this.value)}),[this.$createElement("button",{attrs:{type:"button"},on:{click:()=>this.$emit("toggle")}},[this.$slots.default||this.formatter(String(this.value))])]),i=this.$createElement("transition",{props:{name:this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"}},[e]);return this.$createElement("div",{staticClass:"v-date-picker-header__value",class:{"v-date-picker-header__value--disabled":this.disabled}},[i])}},render(){return this.$createElement("div",{staticClass:"v-date-picker-header",class:{"v-date-picker-header--disabled":this.disabled,...this.themeClasses}},[this.genBtn(-1),this.genHeader(),this.genBtn(1)])}}),Pt=i(3080);function Nt(t,e,i){return Object.keys(t.$listeners).reduce(((o,s)=>(s.endsWith(e)&&(o[s.slice(0,-e.length)]=e=>t.$emit(s,i,e)),o)),{})}function qt(t,e){return Object.keys(t.$listeners).reduce(((i,o)=>(o.endsWith(e)&&(i[o]=t.$listeners[o]),i)),{})}var Yt=(t,e)=>{const[i,o=1,s=1]=t.split("-");return`${i}-${It(o)}-${It(s)}`.substr(0,{date:10,month:7,year:4}[e])};function Qt(t,e,i,o){return(!o||o(t))&&(!e||t>=e.substr(0,10))&&(!i||t<=i)}var Ht=i(20910),Vt=(0,u.A)(wt.A,Rt,Et.A).extend({directives:{Touch:Pt.A},props:{allowedDates:Function,current:String,disabled:Boolean,format:Function,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},min:String,max:String,range:Boolean,readonly:Boolean,scrollable:Boolean,tableDate:{type:String,required:!0},value:[String,Array]},data:()=>({isReversing:!1,wheelThrottle:null}),computed:{computedTransition(){return this.isReversing===!this.$vuetify.rtl?"tab-reverse-transition":"tab-transition"},displayedMonth(){return Number(this.tableDate.split("-")[1])-1},displayedYear(){return Number(this.tableDate.split("-")[0])}},watch:{tableDate(t,e){this.isReversing=t<e}},mounted(){this.wheelThrottle=(0,c.nF)(this.wheel,250)},methods:{genButtonClasses(t,e,i,o,s,r){return{"v-size--default":!e,"v-date-picker-table__current":o,"v-btn--active":i,"v-btn--flat":!t||this.disabled,"v-btn--text":i===o,"v-btn--rounded":e,"v-btn--disabled":!t||this.disabled,"v-btn--outlined":o&&!i,"v-date-picker--first-in-range":s,"v-date-picker--last-in-range":r,...this.themeClasses}},genButtonEvents(t,e,i){if(!this.disabled)return(0,Ht.wf)({click:()=>{e&&!this.readonly&&this.$emit("input",t)}},Nt(this,`:${i}`,t))},genButton(t,e,i,o,s=!1){const r=Qt(t,this.min,this.max,this.allowedDates),a=this.isSelected(t)&&r,n=t===this.current,l=a?this.setBackgroundColor:this.setTextColor,c=(a||n)&&(this.color||"accent");let u=!1,d=!1;return this.range&&this.value&&Array.isArray(this.value)&&(u=t===this.value[0],d=t===this.value[this.value.length-1]),this.$createElement("button",l(c,{staticClass:"v-btn",class:this.genButtonClasses(r&&!s,e,a,n,u,d),attrs:{type:"button"},domProps:{disabled:this.disabled||!r||s},on:this.genButtonEvents(t,r,i)}),[this.$createElement("div",{staticClass:"v-btn__content"},[o(t)]),this.genEvents(t)])},getEventColors(t){const e=t=>Array.isArray(t)?t:[t];let i,o=[];return i=Array.isArray(this.events)?this.events.includes(t):this.events instanceof Function?this.events(t)||!1:this.events&&this.events[t]||!1,i?(o=!0!==i?e(i):"string"===typeof this.eventColor?[this.eventColor]:"function"===typeof this.eventColor?e(this.eventColor(t)):Array.isArray(this.eventColor)?this.eventColor:e(this.eventColor[t]),o.filter((t=>t))):[]},genEvents(t){const e=this.getEventColors(t);return e.length?this.$createElement("div",{staticClass:"v-date-picker-table__events"},e.map((t=>this.$createElement("div",this.setBackgroundColor(t))))):null},isValidScroll(t,e){const i=e(t),o=1===i.split("-").length?"year":"month";return t<0&&(!this.min||i>=Yt(this.min,o))||t>0&&(!this.max||i<=Yt(this.max,o))},wheel(t,e){this.$emit("update:table-date",e(t.deltaY))},touch(t,e){this.$emit("update:table-date",e(t))},genTable(t,e,i){const o=this.$createElement("transition",{props:{name:this.computedTransition}},[this.$createElement("table",{key:this.tableDate},e)]),s={name:"touch",value:{left:t=>t.offsetX<-15&&this.isValidScroll(1,i)&&this.touch(1,i),right:t=>t.offsetX>15&&this.isValidScroll(-1,i)&&this.touch(-1,i)}};return this.$createElement("div",{staticClass:t,class:{"v-date-picker-table--disabled":this.disabled,...this.themeClasses},on:!this.disabled&&this.scrollable?{wheel:t=>{t.preventDefault(),this.isValidScroll(t.deltaY,i)&&this.wheelThrottle(t,i)}}:void 0,directives:[s]},[o])},isSelected(t){if(Array.isArray(this.value)){if(this.range&&2===this.value.length){const[e,i]=[...this.value].sort();return e<=t&&t<=i}return-1!==this.value.indexOf(t)}return t===this.value}}});function jt(t,e=0,i=1){let o;return t<100&&t>=0?(o=new Date(Date.UTC(t,e,i)),isFinite(o.getUTCFullYear())&&o.setUTCFullYear(t)):o=new Date(Date.UTC(t,e,i)),o}function Zt(t,e,i){const o=7+e-i,s=(7+jt(t,0,o).getUTCDay()-e)%7;return-s+o-1}function zt(t,e,i,o){let s=[0,31,59,90,120,151,181,212,243,273,304,334][e];return e>1&&Kt(t)&&s++,s+i}function Wt(t,e,i){const o=Zt(t,e,i),s=Zt(t+1,e,i),r=Kt(t)?366:365;return(r-o+s)/7}function Gt(t,e,i,o,s){const r=Zt(t,o,s),a=Math.ceil((zt(t,e,i,o)-r)/7);return a<1?a+Wt(t-1,o,s):a>Wt(t,o,s)?a-Wt(t,o,s):a}function Kt(t){return t%4===0&&t%100!==0||t%400===0}var Xt=(0,u.A)(Vt).extend({name:"v-date-picker-date-table",props:{firstDayOfWeek:{type:[String,Number],default:0},localeFirstDayOfYear:{type:[String,Number],default:0},showAdjacentMonths:Boolean,showWeek:Boolean,weekdayFormat:Function},computed:{formatter(){return this.format||Mt(this.currentLocale,{day:"numeric",timeZone:"UTC"},{start:8,length:2})},weekdayFormatter(){return this.weekdayFormat||Mt(this.currentLocale,{weekday:"narrow",timeZone:"UTC"})},weekDays(){const t=parseInt(this.firstDayOfWeek,10);return this.weekdayFormatter?(0,c.Sd)(7).map((e=>this.weekdayFormatter(`2017-01-${t+e+15}`))):(0,c.Sd)(7).map((e=>["S","M","T","W","T","F","S"][(e+t)%7]))}},methods:{calculateTableDate(t){return Ut(this.tableDate,Math.sign(t||1))},genTHead(){const t=this.weekDays.map((t=>this.$createElement("th",t)));return this.showWeek&&t.unshift(this.$createElement("th")),this.$createElement("thead",this.genTR(t))},weekDaysBeforeFirstDayOfTheMonth(){const t=new Date(`${this.displayedYear}-${It(this.displayedMonth+1)}-01T00:00:00+00:00`),e=t.getUTCDay();return(e-parseInt(this.firstDayOfWeek)+7)%7},getWeekNumber(t){return Gt(this.displayedYear,this.displayedMonth,t,parseInt(this.firstDayOfWeek),parseInt(this.localeFirstDayOfYear))},genWeekNumber(t){return this.$createElement("td",[this.$createElement("small",{staticClass:"v-date-picker-table--date__week"},String(t).padStart(2,"0"))])},genTBody(){const t=[],e=new Date(this.displayedYear,this.displayedMonth+1,0).getDate();let i=[],o=this.weekDaysBeforeFirstDayOfTheMonth();this.showWeek&&i.push(this.genWeekNumber(this.getWeekNumber(1)));const s=this.displayedMonth?this.displayedYear:this.displayedYear-1,r=(this.displayedMonth+11)%12,a=new Date(this.displayedYear,this.displayedMonth,0).getDate(),n=this.showWeek?8:7;while(o--){const t=`${s}-${It(r+1)}-${It(a-o)}`;i.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(t,!0,"date",this.formatter,!0)]:[]))}for(o=1;o<=e;o++){const s=`${this.displayedYear}-${It(this.displayedMonth+1)}-${It(o)}`;i.push(this.$createElement("td",[this.genButton(s,!0,"date",this.formatter)])),i.length%n===0&&(t.push(this.genTR(i)),i=[],this.showWeek&&(o<e||this.showAdjacentMonths)&&i.push(this.genWeekNumber(this.getWeekNumber(o+7))))}const l=11===this.displayedMonth?this.displayedYear+1:this.displayedYear,c=(this.displayedMonth+1)%12;let u=1;while(i.length<n){const t=`${l}-${It(c+1)}-${It(u++)}`;i.push(this.$createElement("td",this.showAdjacentMonths?[this.genButton(t,!0,"date",this.formatter,!0)]:[]))}return i.length&&t.push(this.genTR(i)),this.$createElement("tbody",t)},genTR(t){return[this.$createElement("tr",t)]}},render(){return this.genTable("v-date-picker-table v-date-picker-table--date",[this.genTHead(),this.genTBody()],this.calculateTableDate)}}),Jt=(0,u.A)(Vt).extend({name:"v-date-picker-month-table",computed:{formatter(){return this.format||Mt(this.currentLocale,{month:"short",timeZone:"UTC"},{start:5,length:2})}},methods:{calculateTableDate(t){return`${parseInt(this.tableDate,10)+Math.sign(t||1)}`},genTBody(){const t=[],e=Array(3).fill(null),i=12/e.length;for(let o=0;o<i;o++){const i=e.map(((t,i)=>{const s=o*e.length+i,r=`${this.displayedYear}-${It(s+1)}`;return this.$createElement("td",{key:s},[this.genButton(r,!1,"month",this.formatter)])}));t.push(this.$createElement("tr",{key:o},i))}return this.$createElement("tbody",t)}},render(){return this.genTable("v-date-picker-table v-date-picker-table--month",[this.genTBody()],this.calculateTableDate)}}),te=(0,u.A)(wt.A,Rt).extend({name:"v-date-picker-years",props:{format:Function,min:[Number,String],max:[Number,String],readonly:Boolean,value:[Number,String]},data(){return{defaultColor:"primary"}},computed:{formatter(){return this.format||Mt(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4})}},mounted(){setTimeout((()=>{const t=this.$el.getElementsByClassName("active")[0];t?this.$el.scrollTop=t.offsetTop-this.$el.offsetHeight/2+t.offsetHeight/2:this.min&&!this.max?this.$el.scrollTop=this.$el.scrollHeight:!this.min&&this.max?this.$el.scrollTop=0:this.$el.scrollTop=this.$el.scrollHeight/2-this.$el.offsetHeight/2}))},methods:{genYearItem(t){const e=this.formatter(`${t}`),i=parseInt(this.value,10)===t,o=i&&(this.color||"primary");return this.$createElement("li",this.setTextColor(o,{key:t,class:{active:i},on:(0,Ht.wf)({click:()=>this.$emit("input",t)},Nt(this,":year",t))}),e)},genYearItems(){const t=[],e=this.value?parseInt(this.value,10):(new Date).getFullYear(),i=this.max?parseInt(this.max,10):e+100,o=Math.min(i,this.min?parseInt(this.min,10):e-100);for(let s=i;s>=o;s--)t.push(this.genYearItem(s));return t}},render(){return this.$createElement("ul",{staticClass:"v-date-picker-years",ref:"years"},this.genYearItems())}}),ee=(i(56001),i(43446)),ie=(0,u.A)(wt.A,ee.A,Et.A).extend({name:"v-picker",props:{flat:Boolean,fullWidth:Boolean,landscape:Boolean,noTitle:Boolean,transition:{type:String,default:"fade-transition"},width:{type:[Number,String],default:290}},computed:{computedTitleColor(){const t=!this.isDark&&(this.color||"primary");return this.color||t}},methods:{genTitle(){return this.$createElement("div",this.setBackgroundColor(this.computedTitleColor,{staticClass:"v-picker__title",class:{"v-picker__title--landscape":this.landscape}}),this.$slots.title)},genBodyTransition(){return this.$createElement("transition",{props:{name:this.transition}},this.$slots.default)},genBody(){return this.$createElement("div",{staticClass:"v-picker__body",class:{"v-picker__body--no-title":this.noTitle,...this.themeClasses},style:this.fullWidth?void 0:{width:(0,c.Dg)(this.width)}},[this.genBodyTransition()])},genActions(){return this.$createElement("div",{staticClass:"v-picker__actions v-card__actions",class:{"v-picker__actions--no-title":this.noTitle}},this.$slots.actions)}},render(t){return t("div",{staticClass:"v-picker v-card",class:{"v-picker--flat":this.flat,"v-picker--landscape":this.landscape,"v-picker--full-width":this.fullWidth,...this.themeClasses,...this.elevationClasses}},[this.$slots.title?this.genTitle():null,this.genBody(),this.$slots.actions?this.genActions():null])}}),oe=ie,se=(0,u.A)(wt.A,ee.A,Et.A).extend({name:"picker",props:{flat:Boolean,fullWidth:Boolean,headerColor:String,landscape:Boolean,noTitle:Boolean,width:{type:[Number,String],default:290}},methods:{genPickerTitle(){return null},genPickerBody(){return null},genPickerActionsSlot(){return this.$scopedSlots.default?this.$scopedSlots.default({save:this.save,cancel:this.cancel}):this.$slots.default},genPicker(t){const e=[];if(!this.noTitle){const t=this.genPickerTitle();t&&e.push(t)}const i=this.genPickerBody();return i&&e.push(i),e.push(this.$createElement("template",{slot:"actions"},[this.genPickerActionsSlot()])),this.$createElement(oe,{staticClass:t,props:{color:this.headerColor||this.color,dark:this.dark,elevation:this.elevation,flat:this.flat,fullWidth:this.fullWidth,landscape:this.landscape,light:this.light,width:this.width,noTitle:this.noTitle}},e)}}});const re=[0,31,28,31,30,31,30,31,31,30,31,30,31],ae=[0,31,29,31,30,31,30,31,31,30,31,30,31];function ne(t,e){return Kt(t)?ae[e]:re[e]}var le=i(73803),ce=(0,u.A)(Rt,se).extend({name:"v-date-picker",props:{activePicker:String,allowedDates:Function,dayFormat:Function,disabled:Boolean,events:{type:[Array,Function,Object],default:()=>null},eventColor:{type:[Array,Function,Object,String],default:()=>"warning"},firstDayOfWeek:{type:[String,Number],default:0},headerDateFormat:Function,localeFirstDayOfYear:{type:[String,Number],default:0},max:String,min:String,monthFormat:Function,multiple:Boolean,nextIcon:{type:String,default:"$next"},nextMonthAriaLabel:{type:String,default:"$vuetify.datePicker.nextMonthAriaLabel"},nextYearAriaLabel:{type:String,default:"$vuetify.datePicker.nextYearAriaLabel"},pickerDate:String,prevIcon:{type:String,default:"$prev"},prevMonthAriaLabel:{type:String,default:"$vuetify.datePicker.prevMonthAriaLabel"},prevYearAriaLabel:{type:String,default:"$vuetify.datePicker.prevYearAriaLabel"},range:Boolean,reactive:Boolean,readonly:Boolean,scrollable:Boolean,showCurrent:{type:[Boolean,String],default:!0},selectedItemsText:{type:String,default:"$vuetify.datePicker.itemsSelected"},showAdjacentMonths:Boolean,showWeek:Boolean,titleDateFormat:Function,type:{type:String,default:"date",validator:t=>["date","month"].includes(t)},value:[Array,String],weekdayFormat:Function,yearFormat:Function,yearIcon:String},data(){const t=new Date;return{internalActivePicker:this.type.toUpperCase(),inputDay:null,inputMonth:null,inputYear:null,isReversing:!1,now:t,tableDate:(()=>{if(this.pickerDate)return this.pickerDate;const e=(0,c.BN)(this.value),i=e[e.length-1]||("string"===typeof this.showCurrent?this.showCurrent:`${t.getFullYear()}-${t.getMonth()+1}`);return Yt(i,"date"===this.type?"month":"year")})()}},computed:{multipleValue(){return(0,c.BN)(this.value)},isMultiple(){return this.multiple||this.range},lastValue(){return this.isMultiple?this.multipleValue[this.multipleValue.length-1]:this.value},selectedMonths(){return this.value&&"month"!==this.type?this.isMultiple?this.multipleValue.map((t=>t.substr(0,7))):this.value.substr(0,7):this.value},current(){return!0===this.showCurrent?Yt(`${this.now.getFullYear()}-${this.now.getMonth()+1}-${this.now.getDate()}`,this.type):this.showCurrent||null},inputDate(){return"date"===this.type?`${this.inputYear}-${It(this.inputMonth+1)}-${It(this.inputDay)}`:`${this.inputYear}-${It(this.inputMonth+1)}`},tableMonth(){return Number((this.pickerDate||this.tableDate).split("-")[1])-1},tableYear(){return Number((this.pickerDate||this.tableDate).split("-")[0])},minMonth(){return this.min?Yt(this.min,"month"):null},maxMonth(){return this.max?Yt(this.max,"month"):null},minYear(){return this.min?Yt(this.min,"year"):null},maxYear(){return this.max?Yt(this.max,"year"):null},formatters(){return{year:this.yearFormat||Mt(this.currentLocale,{year:"numeric",timeZone:"UTC"},{length:4}),titleDate:this.titleDateFormat||(this.isMultiple?this.defaultTitleMultipleDateFormatter:this.defaultTitleDateFormatter)}},defaultTitleMultipleDateFormatter(){return t=>t.length?1===t.length?this.defaultTitleDateFormatter(t[0]):this.$vuetify.lang.t(this.selectedItemsText,t.length):"-"},defaultTitleDateFormatter(){const t={year:{year:"numeric",timeZone:"UTC"},month:{month:"long",timeZone:"UTC"},date:{weekday:"short",month:"short",day:"numeric",timeZone:"UTC"}},e=Mt(this.currentLocale,t[this.type],{start:0,length:{date:10,month:7,year:4}[this.type]}),i=t=>e(t).replace(/([^\d\s])([\d])/g,((t,e,i)=>`${e} ${i}`)).replace(", ",",<br>");return this.landscape?i:e}},watch:{internalActivePicker:{immediate:!0,handler(t){this.$emit("update:active-picker",t)}},activePicker(t){this.internalActivePicker=t},tableDate(t,e){const i="month"===this.type?"year":"month";this.isReversing=Yt(t,i)<Yt(e,i),this.$emit("update:picker-date",t)},pickerDate(t){t?this.tableDate=t:this.lastValue&&"date"===this.type?this.tableDate=Yt(this.lastValue,"month"):this.lastValue&&"month"===this.type&&(this.tableDate=Yt(this.lastValue,"year"))},value(t,e){this.checkMultipleProp(),this.setInputDate(),(this.isMultiple||!this.value||this.pickerDate)&&(!this.isMultiple||!this.multipleValue.length||e&&e.length||this.pickerDate)||(this.tableDate=Yt(this.inputDate,"month"===this.type?"year":"month"))},type(t){if(this.internalActivePicker=t.toUpperCase(),this.value&&this.value.length){const e=this.multipleValue.map((e=>Yt(e,t))).filter(this.isDateAllowed);this.$emit("input",this.isMultiple?e:e[0])}}},created(){this.checkMultipleProp(),this.pickerDate!==this.tableDate&&this.$emit("update:picker-date",this.tableDate),this.setInputDate()},methods:{emitInput(t){if(this.range){if(1!==this.multipleValue.length)this.$emit("input",[t]);else{const e=[this.multipleValue[0],t];this.$emit("input",e),this.$emit("change",e)}return}const e=this.multiple?-1===this.multipleValue.indexOf(t)?this.multipleValue.concat([t]):this.multipleValue.filter((e=>e!==t)):t;this.$emit("input",e),this.multiple||this.$emit("change",t)},checkMultipleProp(){if(null==this.value)return;const t=this.value.constructor.name,e=this.isMultiple?"Array":"String";t!==e&&(0,le.OP)(`Value must be ${this.isMultiple?"an":"a"} ${e}, got ${t}`,this)},isDateAllowed(t){return Qt(t,this.min,this.max,this.allowedDates)},yearClick(t){this.inputYear=t,"month"===this.type?this.tableDate=`${t}`:this.tableDate=`${t}-${It((this.tableMonth||0)+1)}`,this.internalActivePicker="MONTH",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)},monthClick(t){const[e,i]=t.split("-");this.inputYear=parseInt(e,10),this.inputMonth=parseInt(i,10)-1,"date"===this.type?(this.inputDay&&(this.inputDay=Math.min(this.inputDay,ne(this.inputYear,this.inputMonth+1))),this.tableDate=t,this.internalActivePicker="DATE",this.reactive&&!this.readonly&&!this.isMultiple&&this.isDateAllowed(this.inputDate)&&this.$emit("input",this.inputDate)):this.emitInput(this.inputDate)},dateClick(t){const[e,i,o]=t.split("-");this.inputYear=parseInt(e,10),this.inputMonth=parseInt(i,10)-1,this.inputDay=parseInt(o,10),this.emitInput(this.inputDate)},genPickerTitle(){return this.$createElement(Dt,{props:{date:this.value?this.formatters.titleDate(this.isMultiple?this.multipleValue:this.value):"",disabled:this.disabled,readonly:this.readonly,selectingYear:"YEAR"===this.internalActivePicker,year:this.formatters.year(this.multipleValue.length?`${this.inputYear}`:this.tableDate),yearIcon:this.yearIcon,value:this.multipleValue[0]},slot:"title",on:{"update:selecting-year":t=>this.internalActivePicker=t?"YEAR":this.type.toUpperCase()}})},genTableHeader(){return this.$createElement(Ft,{props:{nextIcon:this.nextIcon,color:this.color,dark:this.dark,disabled:this.disabled,format:this.headerDateFormat,light:this.light,locale:this.locale,min:"DATE"===this.internalActivePicker?this.minMonth:this.minYear,max:"DATE"===this.internalActivePicker?this.maxMonth:this.maxYear,nextAriaLabel:"DATE"===this.internalActivePicker?this.nextMonthAriaLabel:this.nextYearAriaLabel,prevAriaLabel:"DATE"===this.internalActivePicker?this.prevMonthAriaLabel:this.prevYearAriaLabel,prevIcon:this.prevIcon,readonly:this.readonly,value:"DATE"===this.internalActivePicker?`${It(this.tableYear,4)}-${It(this.tableMonth+1)}`:`${It(this.tableYear,4)}`},on:{toggle:()=>this.internalActivePicker="DATE"===this.internalActivePicker?"MONTH":"YEAR",input:t=>this.tableDate=t}})},genDateTable(){return this.$createElement(Xt,{props:{allowedDates:this.allowedDates,color:this.color,current:this.current,dark:this.dark,disabled:this.disabled,events:this.events,eventColor:this.eventColor,firstDayOfWeek:this.firstDayOfWeek,format:this.dayFormat,light:this.light,locale:this.locale,localeFirstDayOfYear:this.localeFirstDayOfYear,min:this.min,max:this.max,range:this.range,readonly:this.readonly,scrollable:this.scrollable,showAdjacentMonths:this.showAdjacentMonths,showWeek:this.showWeek,tableDate:`${It(this.tableYear,4)}-${It(this.tableMonth+1)}`,value:this.value,weekdayFormat:this.weekdayFormat},ref:"table",on:{input:this.dateClick,"update:table-date":t=>this.tableDate=t,...qt(this,":date")}})},genMonthTable(){return this.$createElement(Jt,{props:{allowedDates:"month"===this.type?this.allowedDates:null,color:this.color,current:this.current?Yt(this.current,"month"):null,dark:this.dark,disabled:this.disabled,events:"month"===this.type?this.events:null,eventColor:"month"===this.type?this.eventColor:null,format:this.monthFormat,light:this.light,locale:this.locale,min:this.minMonth,max:this.maxMonth,range:this.range,readonly:this.readonly&&"month"===this.type,scrollable:this.scrollable,value:this.selectedMonths,tableDate:`${It(this.tableYear,4)}`},ref:"table",on:{input:this.monthClick,"update:table-date":t=>this.tableDate=t,...qt(this,":month")}})},genYears(){return this.$createElement(te,{props:{color:this.color,format:this.yearFormat,locale:this.locale,min:this.minYear,max:this.maxYear,value:this.tableYear},on:{input:this.yearClick,...qt(this,":year")}})},genPickerBody(){const t="YEAR"===this.internalActivePicker?[this.genYears()]:[this.genTableHeader(),"DATE"===this.internalActivePicker?this.genDateTable():this.genMonthTable()];return this.$createElement("div",{key:this.internalActivePicker},t)},setInputDate(){if(this.lastValue){const t=this.lastValue.split("-");this.inputYear=parseInt(t[0],10),this.inputMonth=parseInt(t[1],10)-1,"date"===this.type&&(this.inputDay=parseInt(t[2],10))}else this.inputYear=this.inputYear||this.now.getFullYear(),this.inputMonth=null==this.inputMonth?this.inputMonth:this.now.getMonth(),this.inputDay=this.inputDay||this.now.getDate()}},render(){return this.genPicker("v-picker--date")}}),ue=i(50877),de=i(30376),he=i(63714),me=i(26702),fe=(i(68329),function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,"max-width":"800"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(o.A,{staticClass:"hidden-sm-and-up"},[e(f.A,{attrs:{icon:""},on:{click:t.dialogCancel}},[e(v.A,[t._v("mdi-close")])],1),e(me.sw,[t._v(t._s(t.dialogTitle))]),e(E.A),e(me.MZ,[e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1),e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.dialogTitle)+" ")],1),e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-align-center")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_general"))+" ")],1):t._e(),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-account-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_authors"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-tag-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_tags"))+" ")],1),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-link")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_links"))+" ")],1):t._e(),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-image")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_poster"))+" ")],1):t._e(),t.single?e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_title"),filled:"",dense:"","error-messages":t.requiredErrors("title")},on:{input:function(e){return t.$v.form.title.$touch()},blur:function(e){return t.$v.form.title.$touch()},change:function(e){t.form.titleLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.titleLock?"secondary":""},on:{click:function(e){t.form.titleLock=!t.form.titleLock}}},[t._v(" "+t._s(t.form.titleLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1824804905),model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_number"),filled:"",dense:"","error-messages":t.requiredErrors("number")},on:{input:function(e){return t.$v.form.number.$touch()},blur:function(e){return t.$v.form.number.$touch()},change:function(e){t.form.numberLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.numberLock?"secondary":""},on:{click:function(e){t.form.numberLock=!t.form.numberLock}}},[t._v(" "+t._s(t.form.numberLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,3817720905),model:{value:t.form.number,callback:function(e){t.$set(t.form,"number",e)},expression:"form.number"}})],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{type:"number",step:"0.1",label:t.$t("dialog.edit_books.field_number_sort"),filled:"",dense:"",hint:t.$t("dialog.edit_books.field_number_sort_hint"),"persistent-hint":"","error-messages":t.requiredErrors("numberSort")},on:{input:function(e){return t.$v.form.numberSort.$touch()},blur:function(e){return t.$v.form.numberSort.$touch()},change:function(e){t.form.numberSortLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.numberSortLock?"secondary":""},on:{click:function(e){t.form.numberSortLock=!t.form.numberSortLock}}},[t._v(" "+t._s(t.form.numberSortLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,3571713673),model:{value:t.form.numberSort,callback:function(e){t.$set(t.form,"numberSort",e)},expression:"form.numberSort"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(he.A,{attrs:{label:t.$t("dialog.edit_books.field_summary"),filled:"",dense:""},on:{input:function(e){return t.$v.form.summary.$touch()},change:function(e){t.form.summaryLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.summaryLock?"secondary":""},on:{click:function(e){t.form.summaryLock=!t.form.summaryLock}}},[t._v(" "+t._s(t.form.summaryLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1928025513),model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(de.A,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e(V.A,t._g(t._b({attrs:{label:t.$t("dialog.edit_books.field_release_date"),filled:"",dense:"",placeholder:"YYYY-MM-DD",clearable:"","error-messages":t.releaseDateErrors},on:{blur:function(e){return t.$v.form.releaseDate.$touch()},change:function(e){t.form.releaseDateLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.releaseDateLock?"secondary":""},on:{click:function(e){t.form.releaseDateLock=!t.form.releaseDateLock}}},[t._v(" "+t._s(t.form.releaseDateLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.releaseDate,callback:function(e){t.$set(t.form,"releaseDate",e)},expression:"form.releaseDate"}},"v-text-field",o,!1),i))]}}],null,!1,3930672348),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[e(ce,{attrs:{"show-current":!0,"show-adjacent-months":!0,locale:t.$i18n.locale,"first-day-of-week":t.$store.getters.getLocaleFirstDay()},on:{input:function(e){t.menuDate=!1},change:function(e){t.form.releaseDateLock=!0}},model:{value:t.form.releaseDate,callback:function(e){t.$set(t.form,"releaseDate",e)},expression:"form.releaseDate"}})],1)],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_isbn"),filled:"",dense:"",placeholder:"978-2-20-504375-4",clearable:"","error-messages":t.isbnErrors},on:{blur:function(e){return t.$v.form.isbn.$touch()},change:function(e){t.form.isbnLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.isbnLock?"secondary":""},on:{click:function(e){t.form.isbnLock=!t.form.isbnLock}}},[t._v(" "+t._s(t.form.isbnLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,3256906921),model:{value:t.form.isbn,callback:function(e){t.$set(t.form,"isbn","string"===typeof e?e.trim():e)},expression:"form.isbn"}})],1)],1):t._e()],1)],1)],1):t._e(),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_books.authors_notice_multiple_edit"))+" ")]),t._l(t.authorRoles,(function(i,o){return e(H.A,{key:o},[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$_.capitalize(i.name)))]),e(Lt.A,{attrs:{items:t.authorSearchResultsFull,"search-input":t.authorSearch[o],"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{"update:searchInput":function(e){return t.$set(t.authorSearch,o,e)},"update:search-input":function(e){return t.$set(t.authorSearch,o,e)},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.authorSearch[o]=null},input:function(e){return t.$v.form.authors.$touch()},change:function(e){t.form.authorsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.authorsLock?"secondary":""},on:{click:function(e){t.form.authorsLock=!t.form.authorsLock}}},[t._v(" "+t._s(t.form.authorsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.authors[i.value],callback:function(e){t.$set(t.form.authors,i.value,e)},expression:"form.authors[role.value]"}})],1)],1)})),e(H.A,[e(q.A,{attrs:{cols:"12",md:"6"}},[e(ue.A,{ref:"customRoleForm",on:{submit:function(e){return e.preventDefault(),t.addRole.apply(null,arguments)}},model:{value:t.customRoleValid,callback:function(e){t.customRoleValid=e},expression:"customRoleValid"}},[e(V.A,{attrs:{label:"Add custom role","append-outer-icon":"mdi-plus",rules:t.customRoleRules},on:{"click:append-outer":t.addRole},model:{value:t.customRole,callback:function(e){t.customRole="string"===typeof e?e.trim():e},expression:"customRole"}})],1)],1)],1)],2)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_books.tags_notice_multiple_edit"))+" ")]),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_books.field_tags")))]),e(Lt.A,{attrs:{items:t.tagsAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.tags.$touch()},change:function(e){t.form.tagsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.tagsLock?"secondary":""},on:{click:function(e){t.form.tagsLock=!t.form.tagsLock}}},[t._v(" "+t._s(t.form.tagsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1)],1)],1)],1),t.single?e(ot.A,[e(P.A,{attrs:{flat:"","min-height":"100"}},[e(Y.A,{attrs:{fluid:""}},[e(ue.A,{ref:"linksForm",model:{value:t.linksValid,callback:function(e){t.linksValid=e},expression:"linksValid"}},t._l(t.form.links,(function(i,o){return e(H.A,{key:o},[e(q.A,{staticClass:"py-0",attrs:{cols:"4"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_label"),filled:"",dense:"",rules:[t.linksLabelRules]},on:{input:function(e){return t.$v.form.links.$touch()},blur:function(e){return t.$v.form.links.$touch()},change:function(e){t.form.linksLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.linksLock?"secondary":""},on:{click:function(e){t.form.linksLock=!t.form.linksLock}}},[t._v(" "+t._s(t.form.linksLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.links[o].label,callback:function(e){t.$set(t.form.links[o],"label",e)},expression:"form.links[i].label"}})],1),e(q.A,{staticClass:"py-0",attrs:{cols:"8"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_url"),filled:"",dense:"",rules:[t.linksUrlRules]},on:{input:function(e){return t.$v.form.links.$touch()},blur:function(e){return t.$v.form.links.$touch()},change:function(e){t.form.linksLock=!0}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(v.A,{on:{click:function(e){return t.form.links.splice(o,1)}}},[t._v("mdi-delete")])]},proxy:!0}],null,!0),model:{value:t.form.links[o].url,callback:function(e){t.$set(t.form.links[o],"url",e)},expression:"form.links[i].url"}})],1)],1)})),1),e(H.A,[e(E.A),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{elevation:"2",fab:"",small:"",bottom:"",right:"",color:"primary"},on:{click:function(e){return t.form.links.push({label:"",url:""})}}},[e(v.A,[t._v("mdi-plus")])],1)],1)],1)],1)],1)],1):t._e(),t.single?e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{staticClass:"pa-1"},[e("drop-zone",{ref:"thumbnailsUpload",staticClass:"pa-8",on:{"on-input-change":t.addThumbnail}})],1)],1),e(H.A,t._l([...t.poster.uploadQueue,...t.poster.bookThumbnails],(function(i,o){return e(q.A,{key:o,staticClass:"pa-1",attrs:{cols:"6",sm:"4",lg:"3"}},[e("thumbnail-card",{attrs:{item:i,selected:t.isThumbnailSelected(i),toBeDeleted:t.isThumbnailToBeDeleted(i)},on:{"on-select-thumbnail":t.selectThumbnail,"on-delete-thumbnail":t.deleteThumbnail}})],1)})),1)],1)],1)],1):t._e()],1),e(N.SL,{staticClass:"hidden-xs-only"},[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_books.button_cancel")))]),e(f.A,{attrs:{color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1)],1)])}),pe=[],ge=(i(79432),i(95843),i(75723)),be=i(41272),ke=i(33278);class ve{#t;#e=!1;#i=!1;constructor(t,e){const i=t.replace(/-/g,"");if(this.#t=i,e?.strict){const{length:e}=t;17===e&&/^(978|979)-[0-9]{1,5}-[0-9]{1,7}-[0-9]{1,7}-[0-9]$/.test(t)?this.#e=!0:13===e&&/^[0-9]{1,5}-[0-9]{1,7}-[0-9]{1,7}-[0-9X]$/.test(t)&&(this.#i=!0)}else t.includes("--")||(/^(978|979)[0-9]{10}$/.test(i)?/^[0-9][-0-9]{11,15}[0-9]$/.test(t)&&(this.#e=!0):/^[0-9]{9}[0-9X]$/.test(i)&&/^[0-9][-0-9]{8,11}[0-9X]$/.test(t)&&(this.#i=!0))}isValid(){return this.verify({check_digit:!0})}isIsbn13(t){return this.#e&&this.verify(t)}isIsbn10(t){return this.#i&&this.verify(t)}verify(t){return t?.check_digit?this.#e?this.#t.substring(12)===this.#o():!!this.#i&&this.#t.substring(9)===this.#s():this.#e||this.#i}#o(){const t=this.#t,e=10-(Number(t.substring(0,1))+3*Number(t.substring(1,2))+Number(t.substring(2,3))+3*Number(t.substring(3,4))+Number(t.substring(4,5))+3*Number(t.substring(5,6))+Number(t.substring(6,7))+3*Number(t.substring(7,8))+Number(t.substring(8,9))+3*Number(t.substring(9,10))+Number(t.substring(10,11))+3*Number(t.substring(11,12)))%10;switch(e){case 10:return"0";default:}return String(e)}#s(){const t=this.#t,e=11-(10*Number(t.substring(0,1))+9*Number(t.substring(1,2))+8*Number(t.substring(2,3))+7*Number(t.substring(3,4))+6*Number(t.substring(4,5))+5*Number(t.substring(5,6))+4*Number(t.substring(6,7))+3*Number(t.substring(7,8))+2*Number(t.substring(8,9)))%11;switch(e){case 10:return"X";case 11:return"0";default:}return String(e)}}var ye=i(45929);i(40590);function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function $e(t,e){if(t){if("string"===typeof t)return _e(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_e(t,e):void 0}}function Ae(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=$e(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var o=0,s=function(){};return{s:s,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,n=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){n=!0,r=t},f:function(){try{a||null==i["return"]||i["return"]()}finally{if(n)throw r}}}}var xe=i(98530),Te=i(37480),Le=i(10123);function we(t,e){if(null==t)throw new TypeError("assign requires that input parameter not be null or undefined");for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}var Se=i(91788),De=i(67044),Ce=i(41109),Re=i(94188),Ee=i(70551);function Be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ie(t,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ie(t,e)}function Oe(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e)}i(73719);function Me(t){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Me(t)}function Ue(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function Fe(t,e){if(e&&("object"===(0,ye.A)(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Be(t)}function Pe(t){var e=Ue();return function(){var i,o=Me(t);if(e){var s=Me(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return Fe(this,i)}}function Ne(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var qe=i(45438);function Ye(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(0,qe.A)(o.key),o)}}function Qe(t,e,i){return e&&Ye(t.prototype,e),i&&Ye(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}var He=i(32362),Ve=10,je=function(){function t(){Ne(this,t),(0,He.A)(this,"priority",void 0),(0,He.A)(this,"subPriority",0)}return Qe(t,[{key:"validate",value:function(t,e){return!0}}]),t}(),Ze=function(t){Oe(i,t);var e=Pe(i);function i(t,o,s,r,a){var n;return Ne(this,i),n=e.call(this),n.value=t,n.validateValue=o,n.setValue=s,n.priority=r,a&&(n.subPriority=a),n}return Qe(i,[{key:"validate",value:function(t,e){return this.validateValue(t,this.value,e)}},{key:"set",value:function(t,e,i){return this.setValue(t,e,this.value,i)}}]),i}(je),ze=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",Ve),(0,He.A)(Be(t),"subPriority",-1),t}return Qe(i,[{key:"set",value:function(t,e){if(e.timestampIsSet)return t;var i=new Date(0);return i.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),i.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),i}}]),i}(je),We=function(){function t(){Ne(this,t),(0,He.A)(this,"incompatibleTokens",void 0),(0,He.A)(this,"priority",void 0),(0,He.A)(this,"subPriority",void 0)}return Qe(t,[{key:"run",value:function(t,e,i,o){var s=this.parse(t,e,i,o);return s?{setter:new Ze(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}},{key:"validate",value:function(t,e,i){return!0}}]),t}(),Ge=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",140),(0,He.A)(Be(t),"incompatibleTokens",["R","u","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}},{key:"set",value:function(t,e,i){return e.era=i,t.setUTCFullYear(i,0,1),t.setUTCHours(0,0,0,0),t}}]),i}(We),Ke=i(57499),Xe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Je={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function ti(t,e){return t?{value:e(t.value),rest:t.rest}:t}function ei(t,e){var i=e.match(t);return i?{value:parseInt(i[0],10),rest:e.slice(i[0].length)}:null}function ii(t,e){var i=e.match(t);if(!i)return null;if("Z"===i[0])return{value:0,rest:e.slice(1)};var o="+"===i[1]?1:-1,s=i[2]?parseInt(i[2],10):0,r=i[3]?parseInt(i[3],10):0,a=i[5]?parseInt(i[5],10):0;return{value:o*(s*Ke.s0+r*Ke.Cg+a*Ke._m),rest:e.slice(i[0].length)}}function oi(t){return ei(Xe.anyDigitsSigned,t)}function si(t,e){switch(t){case 1:return ei(Xe.singleDigit,e);case 2:return ei(Xe.twoDigits,e);case 3:return ei(Xe.threeDigits,e);case 4:return ei(Xe.fourDigits,e);default:return ei(new RegExp("^\\d{1,"+t+"}"),e)}}function ri(t,e){switch(t){case 1:return ei(Xe.singleDigitSigned,e);case 2:return ei(Xe.twoDigitsSigned,e);case 3:return ei(Xe.threeDigitsSigned,e);case 4:return ei(Xe.fourDigitsSigned,e);default:return ei(new RegExp("^-?\\d{1,"+t+"}"),e)}}function ai(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function ni(t,e){var i,o=e>0,s=o?e:1-e;if(s<=50)i=t||100;else{var r=s+50,a=100*Math.floor(r/100),n=t>=r%100;i=t+a-(n?100:0)}return o?i:1-i}function li(t){return t%400===0||t%4===0&&t%100!==0}var ci=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",130),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){var o=function(t){return{year:t,isTwoDigitYear:"yy"===e}};switch(e){case"y":return ti(si(4,t),o);case"yo":return ti(i.ordinalNumber(t,{unit:"year"}),o);default:return ti(si(e.length,t),o)}}},{key:"validate",value:function(t,e){return e.isTwoDigitYear||e.year>0}},{key:"set",value:function(t,e,i){var o=t.getUTCFullYear();if(i.isTwoDigitYear){var s=ni(i.year,o);return t.setUTCFullYear(s,0,1),t.setUTCHours(0,0,0,0),t}var r="era"in e&&1!==e.era?1-i.year:i.year;return t.setUTCFullYear(r,0,1),t.setUTCHours(0,0,0,0),t}}]),i}(We),ui=i(50464),di=i(89742),hi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",130),(0,He.A)(Be(t),"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){var o=function(t){return{year:t,isTwoDigitYear:"YY"===e}};switch(e){case"Y":return ti(si(4,t),o);case"Yo":return ti(i.ordinalNumber(t,{unit:"year"}),o);default:return ti(si(e.length,t),o)}}},{key:"validate",value:function(t,e){return e.isTwoDigitYear||e.year>0}},{key:"set",value:function(t,e,i,o){var s=(0,ui.A)(t,o);if(i.isTwoDigitYear){var r=ni(i.year,s);return t.setUTCFullYear(r,0,o.firstWeekContainsDate),t.setUTCHours(0,0,0,0),(0,di.A)(t,o)}var a="era"in e&&1!==e.era?1-i.year:i.year;return t.setUTCFullYear(a,0,o.firstWeekContainsDate),t.setUTCHours(0,0,0,0),(0,di.A)(t,o)}}]),i}(We),mi=i(9411),fi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",130),(0,He.A)(Be(t),"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e){return ri("R"===e?4:e.length,t)}},{key:"set",value:function(t,e,i){var o=new Date(0);return o.setUTCFullYear(i,0,4),o.setUTCHours(0,0,0,0),(0,mi.A)(o)}}]),i}(We),pi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",130),(0,He.A)(Be(t),"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e){return ri("u"===e?4:e.length,t)}},{key:"set",value:function(t,e,i){return t.setUTCFullYear(i,0,1),t.setUTCHours(0,0,0,0),t}}]),i}(We),gi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",120),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"Q":case"QQ":return si(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=1&&e<=4}},{key:"set",value:function(t,e,i){return t.setUTCMonth(3*(i-1),1),t.setUTCHours(0,0,0,0),t}}]),i}(We),bi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",120),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"q":case"qq":return si(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=1&&e<=4}},{key:"set",value:function(t,e,i){return t.setUTCMonth(3*(i-1),1),t.setUTCHours(0,0,0,0),t}}]),i}(We),ki=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),(0,He.A)(Be(t),"priority",110),t}return Qe(i,[{key:"parse",value:function(t,e,i){var o=function(t){return t-1};switch(e){case"M":return ti(ei(Xe.month,t),o);case"MM":return ti(si(2,t),o);case"Mo":return ti(i.ordinalNumber(t,{unit:"month"}),o);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,i){return t.setUTCMonth(i,1),t.setUTCHours(0,0,0,0),t}}]),i}(We),vi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",110),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){var o=function(t){return t-1};switch(e){case"L":return ti(ei(Xe.month,t),o);case"LL":return ti(si(2,t),o);case"Lo":return ti(i.ordinalNumber(t,{unit:"month"}),o);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,i){return t.setUTCMonth(i,1),t.setUTCHours(0,0,0,0),t}}]),i}(We),yi=i(45062);function _i(t,e,i){(0,Ee.A)(2,arguments);var o=(0,Le.A)(t),s=(0,Re.A)(e),r=(0,yi.A)(o,i)-s;return o.setUTCDate(o.getUTCDate()-7*r),o}var $i=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",100),(0,He.A)(Be(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"w":return ei(Xe.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=53}},{key:"set",value:function(t,e,i,o){return(0,di.A)(_i(t,i,o),o)}}]),i}(We),Ai=i(57004);function xi(t,e){(0,Ee.A)(2,arguments);var i=(0,Le.A)(t),o=(0,Re.A)(e),s=(0,Ai.A)(i)-o;return i.setUTCDate(i.getUTCDate()-7*s),i}var Ti=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",100),(0,He.A)(Be(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"I":return ei(Xe.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=53}},{key:"set",value:function(t,e,i){return(0,mi.A)(xi(t,i))}}]),i}(We),Li=[31,28,31,30,31,30,31,31,30,31,30,31],wi=[31,29,31,30,31,30,31,31,30,31,30,31],Si=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"subPriority",1),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"d":return ei(Xe.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){var i=t.getUTCFullYear(),o=li(i),s=t.getUTCMonth();return o?e>=1&&e<=wi[s]:e>=1&&e<=Li[s]}},{key:"set",value:function(t,e,i){return t.setUTCDate(i),t.setUTCHours(0,0,0,0),t}}]),i}(We),Di=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"subpriority",1),(0,He.A)(Be(t),"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"D":case"DD":return ei(Xe.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){var i=t.getUTCFullYear(),o=li(i);return o?e>=1&&e<=366:e>=1&&e<=365}},{key:"set",value:function(t,e,i){return t.setUTCMonth(0,i),t.setUTCHours(0,0,0,0),t}}]),i}(We),Ci=i(71858);function Ri(t,e,i){var o,s,r,a,n,l,c,u;(0,Ee.A)(2,arguments);var d=(0,Ci.q)(),h=(0,Re.A)(null!==(o=null!==(s=null!==(r=null!==(a=null===i||void 0===i?void 0:i.weekStartsOn)&&void 0!==a?a:null===i||void 0===i||null===(n=i.locale)||void 0===n||null===(l=n.options)||void 0===l?void 0:l.weekStartsOn)&&void 0!==r?r:d.weekStartsOn)&&void 0!==s?s:null===(c=d.locale)||void 0===c||null===(u=c.options)||void 0===u?void 0:u.weekStartsOn)&&void 0!==o?o:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=(0,Le.A)(t),f=(0,Re.A)(e),p=m.getUTCDay(),g=f%7,b=(g+7)%7,k=(b<h?7:0)+f-p;return m.setUTCDate(m.getUTCDate()+k),m}var Ei=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"incompatibleTokens",["D","i","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,i,o){return t=Ri(t,i,o),t.setUTCHours(0,0,0,0),t}}]),i}(We),Bi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i,o){var s=function(t){var e=7*Math.floor((t-1)/7);return(t+o.weekStartsOn+6)%7+e};switch(e){case"e":case"ee":return ti(si(e.length,t),s);case"eo":return ti(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,i,o){return t=Ri(t,i,o),t.setUTCHours(0,0,0,0),t}}]),i}(We),Ii=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i,o){var s=function(t){var e=7*Math.floor((t-1)/7);return(t+o.weekStartsOn+6)%7+e};switch(e){case"c":case"cc":return ti(si(e.length,t),s);case"co":return ti(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}},{key:"validate",value:function(t,e){return e>=0&&e<=6}},{key:"set",value:function(t,e,i,o){return t=Ri(t,i,o),t.setUTCHours(0,0,0,0),t}}]),i}(We);function Oi(t,e){(0,Ee.A)(2,arguments);var i=(0,Re.A)(e);i%7===0&&(i-=7);var o=1,s=(0,Le.A)(t),r=s.getUTCDay(),a=i%7,n=(a+7)%7,l=(n<o?7:0)+i-r;return s.setUTCDate(s.getUTCDate()+l),s}var Mi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",90),(0,He.A)(Be(t),"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){var o=function(t){return 0===t?7:t};switch(e){case"i":case"ii":return si(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return ti(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o);case"iiiii":return ti(i.day(t,{width:"narrow",context:"formatting"}),o);case"iiiiii":return ti(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o);case"iiii":default:return ti(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),o)}}},{key:"validate",value:function(t,e){return e>=1&&e<=7}},{key:"set",value:function(t,e,i){return t=Oi(t,i),t.setUTCHours(0,0,0,0),t}}]),i}(We),Ui=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",80),(0,He.A)(Be(t),"incompatibleTokens",["b","B","H","k","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,i){return t.setUTCHours(ai(i),0,0,0),t}}]),i}(We),Fi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",80),(0,He.A)(Be(t),"incompatibleTokens",["a","B","H","k","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,i){return t.setUTCHours(ai(i),0,0,0),t}}]),i}(We),Pi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",80),(0,He.A)(Be(t),"incompatibleTokens",["a","b","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}},{key:"set",value:function(t,e,i){return t.setUTCHours(ai(i),0,0,0),t}}]),i}(We),Ni=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",70),(0,He.A)(Be(t),"incompatibleTokens",["H","K","k","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"h":return ei(Xe.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=12}},{key:"set",value:function(t,e,i){var o=t.getUTCHours()>=12;return o&&i<12?t.setUTCHours(i+12,0,0,0):o||12!==i?t.setUTCHours(i,0,0,0):t.setUTCHours(0,0,0,0),t}}]),i}(We),qi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",70),(0,He.A)(Be(t),"incompatibleTokens",["a","b","h","K","k","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"H":return ei(Xe.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=23}},{key:"set",value:function(t,e,i){return t.setUTCHours(i,0,0,0),t}}]),i}(We),Yi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",70),(0,He.A)(Be(t),"incompatibleTokens",["h","H","k","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"K":return ei(Xe.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=11}},{key:"set",value:function(t,e,i){var o=t.getUTCHours()>=12;return o&&i<12?t.setUTCHours(i+12,0,0,0):t.setUTCHours(i,0,0,0),t}}]),i}(We),Qi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",70),(0,He.A)(Be(t),"incompatibleTokens",["a","b","h","H","K","t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"k":return ei(Xe.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=1&&e<=24}},{key:"set",value:function(t,e,i){var o=i<=24?i%24:i;return t.setUTCHours(o,0,0,0),t}}]),i}(We),Hi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",60),(0,He.A)(Be(t),"incompatibleTokens",["t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"m":return ei(Xe.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=59}},{key:"set",value:function(t,e,i){return t.setUTCMinutes(i,0,0),t}}]),i}(We),Vi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",50),(0,He.A)(Be(t),"incompatibleTokens",["t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e,i){switch(e){case"s":return ei(Xe.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return si(e.length,t)}}},{key:"validate",value:function(t,e){return e>=0&&e<=59}},{key:"set",value:function(t,e,i){return t.setUTCSeconds(i,0),t}}]),i}(We),ji=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",30),(0,He.A)(Be(t),"incompatibleTokens",["t","T"]),t}return Qe(i,[{key:"parse",value:function(t,e){var i=function(t){return Math.floor(t*Math.pow(10,3-e.length))};return ti(si(e.length,t),i)}},{key:"set",value:function(t,e,i){return t.setUTCMilliseconds(i),t}}]),i}(We),Zi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",10),(0,He.A)(Be(t),"incompatibleTokens",["t","T","x"]),t}return Qe(i,[{key:"parse",value:function(t,e){switch(e){case"X":return ii(Je.basicOptionalMinutes,t);case"XX":return ii(Je.basic,t);case"XXXX":return ii(Je.basicOptionalSeconds,t);case"XXXXX":return ii(Je.extendedOptionalSeconds,t);case"XXX":default:return ii(Je.extended,t)}}},{key:"set",value:function(t,e,i){return e.timestampIsSet?t:new Date(t.getTime()-i)}}]),i}(We),zi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",10),(0,He.A)(Be(t),"incompatibleTokens",["t","T","X"]),t}return Qe(i,[{key:"parse",value:function(t,e){switch(e){case"x":return ii(Je.basicOptionalMinutes,t);case"xx":return ii(Je.basic,t);case"xxxx":return ii(Je.basicOptionalSeconds,t);case"xxxxx":return ii(Je.extendedOptionalSeconds,t);case"xxx":default:return ii(Je.extended,t)}}},{key:"set",value:function(t,e,i){return e.timestampIsSet?t:new Date(t.getTime()-i)}}]),i}(We),Wi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",40),(0,He.A)(Be(t),"incompatibleTokens","*"),t}return Qe(i,[{key:"parse",value:function(t){return oi(t)}},{key:"set",value:function(t,e,i){return[new Date(1e3*i),{timestampIsSet:!0}]}}]),i}(We),Gi=function(t){Oe(i,t);var e=Pe(i);function i(){var t;Ne(this,i);for(var o=arguments.length,s=new Array(o),r=0;r<o;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s)),(0,He.A)(Be(t),"priority",20),(0,He.A)(Be(t),"incompatibleTokens","*"),t}return Qe(i,[{key:"parse",value:function(t){return oi(t)}},{key:"set",value:function(t,e,i){return[new Date(i),{timestampIsSet:!0}]}}]),i}(We),Ki={G:new Ge,y:new ci,Y:new hi,R:new fi,u:new pi,Q:new gi,q:new bi,M:new ki,L:new vi,w:new $i,I:new Ti,d:new Si,D:new Di,E:new Ei,e:new Bi,c:new Ii,i:new Mi,a:new Ui,b:new Fi,B:new Pi,h:new Ni,H:new qi,K:new Yi,k:new Qi,m:new Hi,s:new Vi,S:new ji,X:new Zi,x:new zi,t:new Wi,T:new Gi},Xi=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ji=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,to=/^'([^]*?)'?$/,eo=/''/g,io=/\S/,oo=/[a-zA-Z]/;function so(t,e,i,o){var s,r,a,n,l,c,u,d,h,m,f,p,g,b,k,v,y,_;(0,Ee.A)(3,arguments);var $=String(t),A=String(e),x=(0,Ci.q)(),T=null!==(s=null!==(r=null===o||void 0===o?void 0:o.locale)&&void 0!==r?r:x.locale)&&void 0!==s?s:xe.A;if(!T.match)throw new RangeError("locale must contain match property");var L=(0,Re.A)(null!==(a=null!==(n=null!==(l=null!==(c=null===o||void 0===o?void 0:o.firstWeekContainsDate)&&void 0!==c?c:null===o||void 0===o||null===(u=o.locale)||void 0===u||null===(d=u.options)||void 0===d?void 0:d.firstWeekContainsDate)&&void 0!==l?l:x.firstWeekContainsDate)&&void 0!==n?n:null===(h=x.locale)||void 0===h||null===(m=h.options)||void 0===m?void 0:m.firstWeekContainsDate)&&void 0!==a?a:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var w=(0,Re.A)(null!==(f=null!==(p=null!==(g=null!==(b=null===o||void 0===o?void 0:o.weekStartsOn)&&void 0!==b?b:null===o||void 0===o||null===(k=o.locale)||void 0===k||null===(v=k.options)||void 0===v?void 0:v.weekStartsOn)&&void 0!==g?g:x.weekStartsOn)&&void 0!==p?p:null===(y=x.locale)||void 0===y||null===(_=y.options)||void 0===_?void 0:_.weekStartsOn)&&void 0!==f?f:0);if(!(w>=0&&w<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(""===A)return""===$?(0,Le.A)(i):new Date(NaN);var S,D={firstWeekContainsDate:L,weekStartsOn:w,locale:T},C=[new ze],R=A.match(Ji).map((function(t){var e=t[0];if(e in Se.A){var i=Se.A[e];return i(t,T.formatLong)}return t})).join("").match(Xi),E=[],B=Ae(R);try{var I=function(){var e=S.value;null!==o&&void 0!==o&&o.useAdditionalWeekYearTokens||!(0,Ce.xM)(e)||(0,Ce.lJ)(e,A,t),null!==o&&void 0!==o&&o.useAdditionalDayOfYearTokens||!(0,Ce.ef)(e)||(0,Ce.lJ)(e,A,t);var i=e[0],s=Ki[i];if(s){var r=s.incompatibleTokens;if(Array.isArray(r)){var a=E.find((function(t){return r.includes(t.token)||t.token===i}));if(a)throw new RangeError("The format string mustn't contain `".concat(a.fullToken,"` and `").concat(e,"` at the same time"))}else if("*"===s.incompatibleTokens&&E.length>0)throw new RangeError("The format string mustn't contain `".concat(e,"` and any other token at the same time"));E.push({token:i,fullToken:e});var n=s.run($,e,T.match,D);if(!n)return{v:new Date(NaN)};C.push(n.setter),$=n.rest}else{if(i.match(oo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+i+"`");if("''"===e?e="'":"'"===i&&(e=ro(e)),0!==$.indexOf(e))return{v:new Date(NaN)};$=$.slice(e.length)}};for(B.s();!(S=B.n()).done;){var O=I();if("object"===(0,ye.A)(O))return O.v}}catch(H){B.e(H)}finally{B.f()}if($.length>0&&io.test($))return new Date(NaN);var M=C.map((function(t){return t.priority})).sort((function(t,e){return e-t})).filter((function(t,e,i){return i.indexOf(t)===e})).map((function(t){return C.filter((function(e){return e.priority===t})).sort((function(t,e){return e.subPriority-t.subPriority}))})).map((function(t){return t[0]})),U=(0,Le.A)(i);if(isNaN(U.getTime()))return new Date(NaN);var F,P=(0,Te.A)(U,(0,De.A)(U)),N={},q=Ae(M);try{for(q.s();!(F=q.n()).done;){var Y=F.value;if(!Y.validate(P,D))return new Date(NaN);var Q=Y.set(P,N,D);Array.isArray(Q)?(P=Q[0],we(N,Q[1])):P=Q}}catch(H){q.e(H)}finally{q.f()}return P}function ro(t){return t.match(to)[1].replace(eo,"'")}var ao=i(11130);function no(t,e,i){return(0,Ee.A)(2,arguments),(0,ao.A)(so(t,e,new Date,i))}var lo=i(2543);const co=t=>!ke._$.req(t)||no(t,"yyyy-MM-dd"),uo=t=>!ke._$.req(t)||new ve(t).isIsbn13({check_digit:!0});var ho=p.Ay.extend({name:"EditBooksDialog",components:{ThumbnailCard:pt,DropZone:_t},data:()=>({modal:!1,tab:0,menuDate:!1,customRole:"",customRoles:[],customRoleValid:!1,linksValid:!1,form:{title:"",titleLock:!1,summary:"",summaryLock:!1,number:"",numberLock:!1,numberSort:0,numberSortLock:!1,releaseDate:"",releaseDateLock:!1,authors:{},authorsLock:!1,tags:[],tagsLock:!1,isbn:"",isbnLock:!1,links:[],linksLock:!1},poster:{selectedThumbnail:"",uploadQueue:[],deleteQueue:[],bookThumbnails:[]},authorSearch:[],authorSearchResults:[],tagsAvailable:[]}),props:{value:Boolean,books:{type:[Object,Array],required:!0}},watch:{value(t){this.modal=t},modal(t){t?(this.getThumbnails(this.books),this.loadAvailableTags()):this.dialogCancel()},books:{immediate:!0,handler(t){this.dialogReset(t)}},authorSearch:{deep:!0,handler:(0,lo.debounce)((async function(t){const e=t.findIndex((t=>null!==t));this.authorSearchResults=await this.$komgaReferential.getAuthorsNames(t[e])}),500)}},validations:{form:{title:{required:(0,ke.F5)((function(t){return this.single}))},number:{required:(0,ke.F5)((function(t){return this.single}))},numberSort:{required:(0,ke.F5)((function(t){return this.single}))},tags:{},releaseDate:{validDate:co},summary:{},authors:{},isbn:{validIsbn:uo},links:{}}},computed:{authorRoles(){var t;let e=[];Array.isArray(this.books)?e=this.books.flatMap((t=>t.metadata.authors)).map((t=>t.role)):null!==(t=this.books)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.authors&&(e=this.books.metadata.authors.map((t=>t.role)));const i=this.$_.uniq([...be.B,...e,...this.customRoles]);return i.map((t=>({name:this.$te(`author_roles.${t}`)?this.$t(`author_roles.${t}`).toString():t,value:t})))},single(){return!Array.isArray(this.books)},authorSearchResultsFull(){const t=this.$_.values(this.form.authors).flat();return this.$_.sortBy(this.$_.union(t,this.authorSearchResults),(t=>t.toLowerCase()))},dialogTitle(){return this.single?this.$t("dialog.edit_books.dialog_title_single",{book:this.$_.get(this.books,"metadata.title")}).toString():this.$tc("dialog.edit_books.dialog_title_multiple",this.books.length)},releaseDateErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.releaseDate)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.releaseDate)||void 0===e||!e.validDate)&&i.push(this.$t("dialog.edit_books.field_release_date_error").toString()),i):i},isbnErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.isbn)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.isbn)||void 0===e||!e.validIsbn)&&i.push(this.$t("dialog.edit_books.field_isbn_error").toString()),i):i},customRoleRules(){var t;return""===this.customRole?[this.$t("common.required").toString()]:this.authorRoles.map((t=>t.value.toLowerCase())).includes(null===(t=this.customRole)||void 0===t?void 0:t.toLowerCase())?[this.$t("dialog.edit_books.add_author_role_error_duplicate").toString()]:[!0]}},methods:{async loadAvailableTags(){this.tagsAvailable=await this.$komgaReferential.getTags()},linksLabelRules(t){return!!this.$_.trim(t)||this.$t("common.required").toString()},linksUrlRules(t){let e;try{e=new URL(t)}catch(i){return this.$t("dialog.edit_books.field_link_url_error_url").toString()}return"http:"===e.protocol||"https:"===e.protocol||this.$t("dialog.edit_books.field_link_url_error_protocol").toString()},addRole(){this.$refs.customRoleForm.validate()&&(this.customRoles.push(this.customRole.toLowerCase()),this.$refs.customRoleForm.reset())},requiredErrors(t){const e=[],i=this.$v.form[t];return i.$dirty?(!i.required&&e.push(this.$t("common.required").toString()),e):e},dialogReset(t){var e,i;if(this.tab=0,null===(e=this.$refs.customRoleForm)||void 0===e||e.reset(),null===(i=this.$refs.linksForm)||void 0===i||i.resetValidation(),this.customRoles=[],this.$v.$reset(),(!Array.isArray(t)||0!==t.length)&&!this.$_.isEmpty(t))if(Array.isArray(t)&&t.length>0){this.form.authors={},this.form.links=[];const e=this.$_.uniq(t.map((t=>t.metadata.authorsLock)));this.form.authorsLock=!(e.length>1)&&e[0],this.form.tags=[];const i=this.$_.uniq(t.map((t=>t.metadata.tagsLock)));this.form.tagsLock=!(i.length>1)&&i[0]}else{this.form.tags=[],this.form.links=[];const e=t;this.$_.merge(this.form,e.metadata),this.form.authors=(0,ge.R)(e.metadata.authors),this.poster.selectedThumbnail="",this.poster.deleteQueue=[],this.poster.uploadQueue=[],this.poster.bookThumbnails=[]}},dialogCancel(){this.$emit("input",!1),this.dialogReset(this.books)},async dialogConfirm(){await this.editBooks()&&this.$emit("input",!1)},validateForm(){if(!this.$v.$invalid&&(!this.single||!this.$refs.linksForm||this.$refs.linksForm.validate())){var t,e;const u={authorsLock:this.form.authorsLock,tagsLock:this.form.tagsLock};var i,o,s,r,a,n,l,c;if(null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.authors)&&void 0!==t&&t.$dirty&&this.$_.merge(u,{authors:this.$_.keys(this.form.authors).flatMap((t=>this.$_.get(this.form.authors,t).map((e=>({name:e,role:t})))))}),null!==(e=this.$v.form)&&void 0!==e&&null!==(e=e.tags)&&void 0!==e&&e.$dirty&&this.$_.merge(u,{tags:this.form.tags}),this.single)this.$_.merge(u,{titleLock:this.form.titleLock,numberLock:this.form.numberLock,numberSortLock:this.form.numberSortLock,summaryLock:this.form.summaryLock,releaseDateLock:this.form.releaseDateLock,isbnLock:this.form.isbnLock,linksLock:this.form.linksLock}),null!==(i=this.$v.form)&&void 0!==i&&null!==(i=i.title)&&void 0!==i&&i.$dirty&&this.$_.merge(u,{title:this.form.title}),null!==(o=this.$v.form)&&void 0!==o&&null!==(o=o.number)&&void 0!==o&&o.$dirty&&this.$_.merge(u,{number:this.form.number}),null!==(s=this.$v.form)&&void 0!==s&&null!==(s=s.numberSort)&&void 0!==s&&s.$dirty&&this.$_.merge(u,{numberSort:this.form.numberSort}),null!==(r=this.$v.form)&&void 0!==r&&null!==(r=r.summary)&&void 0!==r&&r.$dirty&&this.$_.merge(u,{summary:this.form.summary}),null!==(a=this.$v.form)&&void 0!==a&&null!==(a=a.releaseDate)&&void 0!==a&&a.$dirty&&this.$_.merge(u,{releaseDate:this.form.releaseDate?this.form.releaseDate:null}),null!==(n=this.$v.form)&&void 0!==n&&null!==(n=n.isbn)&&void 0!==n&&n.$dirty&&this.$_.merge(u,{isbn:this.form.isbn}),(null!==(l=this.$v.form)&&void 0!==l&&null!==(l=l.links)&&void 0!==l&&l.$dirty||this.form.links.length!=(null===(c=this.books.metadata.links)||void 0===c?void 0:c.length))&&this.$_.merge(u,{links:this.form.links});return u}return null},async editBooks(){if(this.single&&this.poster.uploadQueue.length>0){const t=this.books;let i=!1;for(const o of this.poster.uploadQueue.slice())try{await this.$komgaBooks.uploadThumbnail(t.id,o,o.name===this.poster.selectedThumbnail),this.deleteThumbnail(o)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message}),i=!0}if(i)return await this.getThumbnails(t),!1}if(this.single&&""!==this.poster.selectedThumbnail){const t=this.poster.selectedThumbnail,e=this.books;this.poster.bookThumbnails.find((e=>e.id===t))&&await this.$komgaBooks.markThumbnailAsSelected(e.id,t)}this.single&&this.poster.deleteQueue.length>0&&this.poster.deleteQueue.forEach((t=>this.$komgaBooks.deleteThumbnail(t.bookId,t.id)));const t=this.validateForm();if(t){const i=this.single?[this.books]:this.books;for(const o of i)try{await this.$komgaBooks.updateMetadata(o.id,t)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}return!0}return!1},addThumbnail(t){let e=!1;for(const i of t)this.poster.uploadQueue.find((t=>t.name===i.name))||(this.poster.uploadQueue.push(i),e||(this.selectThumbnail(i),e=!0));this.$refs.thumbnailsUpload.reset()},async getThumbnails(t){if(Array.isArray(t))return;const e=await this.$komgaBooks.getThumbnails(t.id);this.selectThumbnail(e.find((t=>t.selected))),this.poster.bookThumbnails=e},isThumbnailSelected(t){return t instanceof File?t.name===this.poster.selectedThumbnail:t.id===this.poster.selectedThumbnail},selectThumbnail(t){if(t)if(t instanceof File)this.poster.selectedThumbnail=t.name;else{const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1),this.poster.selectedThumbnail=t.id}},isThumbnailToBeDeleted(t){return!(t instanceof File)&&this.poster.deleteQueue.includes(t)},deleteThumbnail(t){if(t instanceof File){const e=this.poster.uploadQueue.indexOf(t,0);e>-1&&this.poster.uploadQueue.splice(e,1),t.name===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}else if(this.isThumbnailToBeDeleted(t)){const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1)}else this.poster.deleteQueue.push(t),t.id===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}}}),mo=ho,fo=(0,X.A)(mo,fe,pe,!1,null,"78ddc62c",null),po=fo.exports,go=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,"max-width":"800"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(o.A,{staticClass:"hidden-sm-and-up"},[e(f.A,{attrs:{icon:""},on:{click:t.dialogCancel}},[e(v.A,[t._v("mdi-close")])],1),e(me.sw,[t._v(t._s(t.dialogTitle))]),e(E.A),e(me.MZ,[e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_series.button_confirm")))])],1)],1),e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.dialogTitle)+" ")],1),e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-align-center")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_general"))+" ")],1),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-title")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_titles"))+" ")],1):t._e(),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-tag-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_tags"))+" ")],1),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-link")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_links"))+" ")],1):t._e(),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-image")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_poster"))+" ")],1):t._e(),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-account-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_sharing"))+" ")],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_title"),filled:"",dense:"","error-messages":t.requiredErrors("title")},on:{input:function(e){return t.$v.form.title.$touch()},blur:function(e){return t.$v.form.title.$touch()},change:function(e){t.form.titleLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.titleLock?"secondary":""},on:{click:function(e){t.form.titleLock=!t.form.titleLock}}},[t._v(" "+t._s(t.form.titleLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1824804905),model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_sort_title"),filled:"",dense:"","error-messages":t.requiredErrors("titleSort")},on:{input:function(e){return t.$v.form.titleSort.$touch()},blur:function(e){return t.$v.form.titleSort.$touch()},change:function(e){t.form.titleSortLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.titleSortLock?"secondary":""},on:{click:function(e){t.form.titleSortLock=!t.form.titleSortLock}}},[t._v(" "+t._s(t.form.titleSortLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,3379403945),model:{value:t.form.titleSort,callback:function(e){t.$set(t.form,"titleSort",e)},expression:"form.titleSort"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(he.A,{attrs:{label:t.$t("dialog.edit_series.field_summary"),filled:"",dense:""},on:{input:function(e){return t.$v.form.summary.$touch()},change:function(e){t.form.summaryLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.summaryLock?"secondary":""},on:{click:function(e){t.form.summaryLock=!t.form.summaryLock}}},[t._v(" "+t._s(t.form.summaryLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1928025513),model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1):t._e(),e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(R.A,{attrs:{items:t.seriesStatus,label:t.$t("dialog.edit_series.field_status"),filled:"",placeholder:!t.single&&t.mixed.status?t.$t("dialog.edit_series.mixed"):""},on:{input:function(e){return t.$v.form.status.$touch()},change:function(e){t.form.statusLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.statusLock?"secondary":""},on:{click:function(e){t.form.statusLock=!t.form.statusLock}}},[t._v(" "+t._s(t.form.statusLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_language"),filled:"",dense:"",placeholder:!t.single&&t.mixed.language?t.$t("dialog.edit_series.mixed"):"","error-messages":t.languageErrors,hint:t.$t("dialog.edit_series.field_language_hint")},on:{input:function(e){return t.$v.form.language.$touch()},change:function(e){t.form.languageLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.languageLock?"secondary":""},on:{click:function(e){t.form.languageLock=!t.form.languageLock}}},[t._v(" "+t._s(t.form.languageLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.language,callback:function(e){t.$set(t.form,"language",e)},expression:"form.language"}})],1)],1),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(R.A,{attrs:{items:t.readingDirections,label:t.$t("dialog.edit_series.field_reading_direction"),clearable:"",filled:"",placeholder:!t.single&&t.mixed.readingDirection?t.$t("dialog.edit_series.mixed"):""},on:{input:function(e){return t.$v.form.readingDirection.$touch()},change:function(e){t.form.readingDirectionLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.readingDirectionLock?"secondary":""},on:{click:function(e){t.form.readingDirectionLock=!t.form.readingDirectionLock}}},[t._v(" "+t._s(t.form.readingDirectionLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.readingDirection,callback:function(e){t.$set(t.form,"readingDirection",e)},expression:"form.readingDirection"}})],1)],1),e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_publisher"),filled:"",dense:"",placeholder:!t.single&&t.mixed.publisher?t.$t("dialog.edit_series.mixed"):""},on:{input:function(e){return t.$v.form.publisher.$touch()},change:function(e){t.form.publisherLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.publisherLock?"secondary":""},on:{click:function(e){t.form.publisherLock=!t.form.publisherLock}}},[t._v(" "+t._s(t.form.publisherLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.publisher,callback:function(e){t.$set(t.form,"publisher",e)},expression:"form.publisher"}})],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_age_rating"),clearable:"",filled:"",dense:"",type:"number",placeholder:!t.single&&t.mixed.ageRating?t.$t("dialog.edit_series.mixed"):"","error-messages":t.ageRatingErrors},on:{input:function(e){return t.$v.form.ageRating.$touch()},blur:function(e){return t.$v.form.ageRating.$touch()},change:function(e){t.form.ageRatingLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.ageRatingLock?"secondary":""},on:{click:function(e){t.form.ageRatingLock=!t.form.ageRatingLock}}},[t._v(" "+t._s(t.form.ageRatingLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.ageRating,callback:function(e){t.$set(t.form,"ageRating",e)},expression:"form.ageRating"}})],1)],1),t.single?e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_total_book_count"),clearable:"",filled:"",dense:"",type:"number","error-messages":t.totalBookCountErrors},on:{input:function(e){return t.$v.form.totalBookCount.$touch()},blur:function(e){return t.$v.form.totalBookCount.$touch()},change:function(e){t.form.totalBookCountLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.totalBookCountLock?"secondary":""},on:{click:function(e){t.form.totalBookCountLock=!t.form.totalBookCountLock}}},[t._v(" "+t._s(t.form.totalBookCountLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,4144530793),model:{value:t.form.totalBookCount,callback:function(e){t.$set(t.form,"totalBookCount",e)},expression:"form.totalBookCount"}})],1)],1):t._e()],1)],1)],1),t.single?e(ot.A,[e(P.A,{attrs:{flat:"","min-height":"100"}},[e(Y.A,{attrs:{fluid:""}},[e(ue.A,{ref:"titlesForm",model:{value:t.titlesValid,callback:function(e){t.titlesValid=e},expression:"titlesValid"}},t._l(t.form.alternateTitles,(function(i,o){return e(H.A,{key:o},[e(q.A,{staticClass:"py-0",attrs:{cols:"4"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_label"),filled:"",dense:"",rules:[t.alternateTitleRules]},on:{input:function(e){return t.$v.form.alternateTitles.$touch()},blur:function(e){return t.$v.form.alternateTitles.$touch()},change:function(e){t.form.alternateTitlesLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.alternateTitlesLock?"secondary":""},on:{click:function(e){t.form.alternateTitlesLock=!t.form.alternateTitlesLock}}},[t._v(" "+t._s(t.form.linksLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.alternateTitles[o].label,callback:function(e){t.$set(t.form.alternateTitles[o],"label",e)},expression:"form.alternateTitles[i].label"}})],1),e(q.A,{staticClass:"py-0",attrs:{cols:"8"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_alternate_title"),filled:"",dense:"",rules:[t.alternateTitleRules]},on:{input:function(e){return t.$v.form.alternateTitles.$touch()},blur:function(e){return t.$v.form.alternateTitles.$touch()},change:function(e){t.form.alternateTitlesLock=!0}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(v.A,{on:{click:function(e){return t.form.alternateTitles.splice(o,1)}}},[t._v("mdi-delete")])]},proxy:!0}],null,!0),model:{value:t.form.alternateTitles[o].title,callback:function(e){t.$set(t.form.alternateTitles[o],"title",e)},expression:"form.alternateTitles[i].title"}})],1)],1)})),1),e(H.A,[e(E.A),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{elevation:"2",fab:"",small:"",bottom:"",right:"",color:"primary"},on:{click:function(e){return t.form.alternateTitles.push({label:"",title:""})}}},[e(v.A,[t._v("mdi-plus")])],1)],1)],1)],1)],1)],1):t._e(),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_series.tags_notice_multiple_edit"))+" ")]),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_series.field_genres")))]),e(Lt.A,{attrs:{items:t.genresAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.genres.$touch()},change:function(e){t.form.genresLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.genresLock?"secondary":""},on:{click:function(e){t.form.genresLock=!t.form.genresLock}}},[t._v(" "+t._s(t.form.genresLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.genres,callback:function(e){t.$set(t.form,"genres",e)},expression:"form.genres"}})],1)],1),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_series.field_tags")))]),e(Lt.A,{attrs:{items:t.tagsAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.tags.$touch()},change:function(e){t.form.tagsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.tagsLock?"secondary":""},on:{click:function(e){t.form.tagsLock=!t.form.tagsLock}}},[t._v(" "+t._s(t.form.tagsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1)],1)],1)],1),t.single?e(ot.A,[e(P.A,{attrs:{flat:"","min-height":"100"}},[e(Y.A,{attrs:{fluid:""}},[e(ue.A,{ref:"linksForm",model:{value:t.linksValid,callback:function(e){t.linksValid=e},expression:"linksValid"}},t._l(t.form.links,(function(i,o){return e(H.A,{key:o},[e(q.A,{staticClass:"py-0",attrs:{cols:"4"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_label"),filled:"",dense:"",rules:[t.linksLabelRules]},on:{input:function(e){return t.$v.form.links.$touch()},blur:function(e){return t.$v.form.links.$touch()},change:function(e){t.form.linksLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.linksLock?"secondary":""},on:{click:function(e){t.form.linksLock=!t.form.linksLock}}},[t._v(" "+t._s(t.form.linksLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.links[o].label,callback:function(e){t.$set(t.form.links[o],"label",e)},expression:"form.links[i].label"}})],1),e(q.A,{staticClass:"py-0",attrs:{cols:"8"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_url"),filled:"",dense:"",rules:[t.linksUrlRules]},on:{input:function(e){return t.$v.form.links.$touch()},blur:function(e){return t.$v.form.links.$touch()},change:function(e){t.form.linksLock=!0}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(v.A,{on:{click:function(e){return t.form.links.splice(o,1)}}},[t._v("mdi-delete")])]},proxy:!0}],null,!0),model:{value:t.form.links[o].url,callback:function(e){t.$set(t.form.links[o],"url",e)},expression:"form.links[i].url"}})],1)],1)})),1),e(H.A,[e(E.A),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{elevation:"2",fab:"",small:"",bottom:"",right:"",color:"primary"},on:{click:function(e){return t.form.links.push({label:"",url:""})}}},[e(v.A,[t._v("mdi-plus")])],1)],1)],1)],1)],1)],1):t._e(),t.single?e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{staticClass:"pa-1"},[e("drop-zone",{ref:"thumbnailsUpload",staticClass:"pa-8",on:{"on-input-change":t.addThumbnail}})],1)],1),e(H.A,t._l([...t.poster.uploadQueue,...t.poster.seriesThumbnails],(function(i,o){return e(q.A,{key:o,staticClass:"pa-1",attrs:{cols:"6",sm:"4",lg:"3"}},[e("thumbnail-card",{attrs:{item:i,selected:t.isThumbnailSelected(i),toBeDeleted:t.isThumbnailToBeDeleted(i)},on:{"on-select-thumbnail":t.selectThumbnail,"on-delete-thumbnail":t.deleteThumbnail}})],1)})),1)],1)],1)],1):t._e(),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_series.tags_notice_multiple_edit"))+" ")]),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_series.field_labels")))]),e(Lt.A,{attrs:{items:t.sharingLabelsAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.sharingLabels.$touch()},change:function(e){t.form.sharingLabelsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.sharingLabelsLock?"secondary":""},on:{click:function(e){t.form.sharingLabelsLock=!t.form.sharingLabelsLock}}},[t._v(" "+t._s(t.form.sharingLabelsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.sharingLabels,callback:function(e){t.$set(t.form,"sharingLabels",e)},expression:"form.sharingLabels"}})],1)],1)],1)],1)],1)],1),e(N.SL,{staticClass:"hidden-xs-only"},[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_series.button_cancel")))]),e(f.A,{attrs:{color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_series.button_confirm")))])],1)],1)],1)])},bo=[],ko=i(41834),vo=i(79957);const yo=i(1999),_o=t=>!ke._$.req(t)||yo.check(t);var $o,Ao,xo=p.Ay.extend({name:"EditSeriesDialog",components:{ThumbnailCard:pt,DropZone:_t},data:()=>({modal:!1,tab:0,linksValid:!1,titlesValid:!1,form:{status:"",statusLock:!1,title:"",titleLock:!1,titleSort:"",titleSortLock:!1,summary:"",summaryLock:!1,readingDirection:"",readingDirectionLock:!1,publisher:"",publisherLock:!1,ageRating:void 0,ageRatingLock:!1,language:"",languageLock:!1,genres:[],genresLock:!1,tags:[],tagsLock:!1,totalBookCount:void 0,totalBookCountLock:!1,sharingLabels:[],sharingLabelsLock:!1,links:[],linksLock:!1,alternateTitles:[],alternateTitlesLock:!1},mixed:{status:!1,readingDirection:!1,publisher:!1,ageRating:!1,language:!1},poster:{selectedThumbnail:"",uploadQueue:[],deleteQueue:[],seriesThumbnails:[]},genresAvailable:[],tagsAvailable:[],sharingLabelsAvailable:[]}),props:{value:Boolean,series:{type:[Object,Array],required:!0}},watch:{value(t){this.modal=t},modal(t){t?(this.getThumbnails(this.series),this.loadAvailableTags(),this.loadAvailableGenres(),this.loadAvailableSharingLabels()):this.dialogCancel()},series(t){this.dialogReset(t)}},validations:{form:{title:{required:(0,ke.F5)((function(t){return this.single}))},titleSort:{required:(0,ke.F5)((function(t){return this.single}))},status:{required:(0,ke.F5)((function(t){return this.single}))},summary:{},language:{validLanguage:_o},genres:{},tags:{},sharingLabels:{},ageRating:{minValue:(0,ke.Ww)(0)},readingDirection:{},publisher:{},totalBookCount:{minValue:(0,ke.Ww)(1)},links:{},alternateTitles:{}}},computed:{single(){return!Array.isArray(this.series)},readingDirections(){return Object.keys(vo.s3).map((t=>({text:this.$t(`enums.reading_direction.${t}`),value:t})))},seriesStatus(){return Object.keys(ko.m).map((t=>({text:this.$t(`enums.series_status.${t}`),value:t})))},ageRatingErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.ageRating)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.ageRating)||void 0===e||!e.minValue)&&i.push(this.$t("dialog.edit_series.field_age_rating_error").toString()),i):i},totalBookCountErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.totalBookCount)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.totalBookCount)||void 0===e||!e.minValue)&&i.push(this.$t("dialog.edit_series.field_total_book_count_error").toString()),i):i},languageErrors(){var t,e;return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.language)&&void 0!==t&&t.$dirty?null!==(e=this.$v)&&void 0!==e&&null!==(e=e.form)&&void 0!==e&&null!==(e=e.language)&&void 0!==e&&e.validLanguage?[]:yo(this.form.language).errors().map((t=>t.message)):[]},dialogTitle(){return this.single?this.$t("dialog.edit_series.dialog_title_single",{series:this.$_.get(this.series,"metadata.title")}).toString():this.$tc("dialog.edit_series.dialog_title_multiple",this.series.length)}},methods:{alternateTitleRules(t){return!!this.$_.trim(t)||this.$t("common.required").toString()},linksLabelRules(t){return!!this.$_.trim(t)||this.$t("common.required").toString()},linksUrlRules(t){let e;try{e=new URL(t)}catch(i){return this.$t("dialog.edit_books.field_link_url_error_url").toString()}return"http:"===e.protocol||"https:"===e.protocol||this.$t("dialog.edit_books.field_link_url_error_protocol").toString()},async loadAvailableTags(){this.tagsAvailable=await this.$komgaReferential.getTags()},async loadAvailableGenres(){this.genresAvailable=await this.$komgaReferential.getGenres()},async loadAvailableSharingLabels(){this.sharingLabelsAvailable=await this.$komgaReferential.getSharingLabels()},requiredErrors(t){const e=[],i=this.$v.form[t];return i.$dirty?(!i.required&&e.push(this.$t("common.required").toString()),e):e},dialogReset(t){var e,i;if(this.tab=0,this.$v.$reset(),null===(e=this.$refs.linksForm)||void 0===e||e.resetValidation(),null===(i=this.$refs.titlesForm)||void 0===i||i.resetValidation(),!Array.isArray(t)||0!==t.length)if(Array.isArray(t)&&t.length>0){const e=this.$_.uniq(t.map((t=>t.metadata.status)));this.form.status=e.length>1?"":e[0],this.mixed.status=e.length>1;const i=this.$_.uniq(t.map((t=>t.metadata.statusLock)));this.form.statusLock=!(i.length>1)&&i[0];const o=this.$_.uniq(t.map((t=>t.metadata.readingDirection)));this.form.readingDirection=o.length>1?"":o[0],this.mixed.readingDirection=o.length>1;const s=this.$_.uniq(t.map((t=>t.metadata.readingDirectionLock)));this.form.readingDirectionLock=!(s.length>1)&&s[0];const r=this.$_.uniq(t.map((t=>t.metadata.ageRating)));this.form.ageRating=r.length>1?void 0:r[0],this.mixed.ageRating=r.length>1;const a=this.$_.uniq(t.map((t=>t.metadata.ageRatingLock)));this.form.ageRatingLock=!(a.length>1)&&a[0];const n=this.$_.uniq(t.map((t=>t.metadata.publisher)));this.form.publisher=n.length>1?"":n[0],this.mixed.publisher=n.length>1;const l=this.$_.uniq(t.map((t=>t.metadata.publisherLock)));this.form.publisherLock=!(l.length>1)&&l[0];const c=this.$_.uniq(t.map((t=>t.metadata.language)));this.form.language=c.length>1?"":c[0],this.mixed.language=c.length>1;const u=this.$_.uniq(t.map((t=>t.metadata.languageLock)));this.form.languageLock=!(u.length>1)&&u[0],this.form.genres=[];const d=this.$_.uniq(t.map((t=>t.metadata.genresLock)));this.form.genresLock=!(d.length>1)&&d[0],this.form.tags=[];const h=this.$_.uniq(t.map((t=>t.metadata.tagsLock)));this.form.tagsLock=!(h.length>1)&&h[0],this.form.sharingLabels=[];const m=this.$_.uniq(t.map((t=>t.metadata.sharingLabelsLock)));this.form.sharingLabelsLock=!(m.length>1)&&m[0],this.form.links=[],this.form.alternateTitles=[]}else this.form.genres=[],this.form.tags=[],this.form.sharingLabels=[],this.form.links=[],this.form.alternateTitles=[],this.$_.merge(this.form,t.metadata),this.poster.selectedThumbnail="",this.poster.deleteQueue=[],this.poster.uploadQueue=[],this.poster.seriesThumbnails=[]},dialogCancel(){this.$emit("input",!1),this.dialogReset(this.series)},async dialogConfirm(){await this.editSeries()&&this.$emit("input",!1)},validateForm(){if(!this.$v.$invalid&&(!this.single||!this.$refs.linksForm||this.$refs.linksForm.validate())&&(!this.single||!this.$refs.titlesForm||this.$refs.titlesForm.validate())){var t,e,i,o,s,r,a,n;const g={statusLock:this.form.statusLock,readingDirectionLock:this.form.readingDirectionLock,ageRatingLock:this.form.ageRatingLock,publisherLock:this.form.publisherLock,languageLock:this.form.languageLock,genresLock:this.form.genresLock,tagsLock:this.form.tagsLock,totalBookCountLock:this.form.totalBookCountLock,sharingLabelsLock:this.form.sharingLabelsLock,linksLock:this.form.linksLock,alternateTitlesLock:this.form.alternateTitlesLock};var l,c,u,d,h,m,f,p;if(null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.status)&&void 0!==t&&t.$dirty&&this.$_.merge(g,{status:this.form.status}),null!==(e=this.$v.form)&&void 0!==e&&null!==(e=e.readingDirection)&&void 0!==e&&e.$dirty&&this.$_.merge(g,{readingDirection:this.form.readingDirection?this.form.readingDirection:null}),null!==(i=this.$v.form)&&void 0!==i&&null!==(i=i.ageRating)&&void 0!==i&&i.$dirty&&this.$_.merge(g,{ageRating:this.form.ageRating}),null!==(o=this.$v.form)&&void 0!==o&&null!==(o=o.publisher)&&void 0!==o&&o.$dirty&&this.$_.merge(g,{publisher:this.form.publisher}),null!==(s=this.$v.form)&&void 0!==s&&null!==(s=s.genres)&&void 0!==s&&s.$dirty&&this.$_.merge(g,{genres:this.form.genres}),null!==(r=this.$v.form)&&void 0!==r&&null!==(r=r.tags)&&void 0!==r&&r.$dirty&&this.$_.merge(g,{tags:this.form.tags}),null!==(a=this.$v.form)&&void 0!==a&&null!==(a=a.language)&&void 0!==a&&a.$dirty&&this.$_.merge(g,{language:this.form.language}),null!==(n=this.$v.form)&&void 0!==n&&null!==(n=n.sharingLabels)&&void 0!==n&&n.$dirty&&this.$_.merge(g,{sharingLabels:this.form.sharingLabels}),this.single)this.$_.merge(g,{titleLock:this.form.titleLock,titleSortLock:this.form.titleSortLock,summaryLock:this.form.summaryLock,totalBookCountLock:this.form.totalBookCountLock}),null!==(l=this.$v.form)&&void 0!==l&&null!==(l=l.title)&&void 0!==l&&l.$dirty&&this.$_.merge(g,{title:this.form.title}),null!==(c=this.$v.form)&&void 0!==c&&null!==(c=c.titleSort)&&void 0!==c&&c.$dirty&&this.$_.merge(g,{titleSort:this.form.titleSort}),null!==(u=this.$v.form)&&void 0!==u&&null!==(u=u.summary)&&void 0!==u&&u.$dirty&&this.$_.merge(g,{summary:this.form.summary}),null!==(d=this.$v.form)&&void 0!==d&&null!==(d=d.totalBookCount)&&void 0!==d&&d.$dirty&&this.$_.merge(g,{totalBookCount:this.form.totalBookCount}),(null!==(h=this.$v.form)&&void 0!==h&&null!==(h=h.links)&&void 0!==h&&h.$dirty||this.form.links.length!=(null===(m=this.series.metadata.links)||void 0===m?void 0:m.length))&&this.$_.merge(g,{links:this.form.links}),(null!==(f=this.$v.form)&&void 0!==f&&null!==(f=f.alternateTitles)&&void 0!==f&&f.$dirty||this.form.alternateTitles.length!=(null===(p=this.series.metadata.alternateTitles)||void 0===p?void 0:p.length))&&this.$_.merge(g,{alternateTitles:this.form.alternateTitles});return g}return null},async editSeries(){if(this.single&&this.poster.uploadQueue.length>0){const t=this.series;let i=!1;for(const o of this.poster.uploadQueue.slice())try{await this.$komgaSeries.uploadThumbnail(t.id,o,o.name===this.poster.selectedThumbnail),this.deleteThumbnail(o)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message}),i=!0}if(i)return await this.getThumbnails(t),!1}if(this.single&&""!==this.poster.selectedThumbnail){const t=this.poster.selectedThumbnail,e=this.series;this.poster.seriesThumbnails.find((e=>e.id===t))&&this.$komgaSeries.markThumbnailAsSelected(e.id,t)}this.single&&this.poster.deleteQueue.length>0&&this.poster.deleteQueue.forEach((t=>this.$komgaSeries.deleteThumbnail(t.seriesId,t.id)));const t=this.validateForm();if(t){const i=this.single?[this.series]:this.series;for(const o of i)try{await this.$komgaSeries.updateMetadata(o.id,t)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}return!0}return!1},addThumbnail(t){let e=!1;for(const i of t)this.poster.uploadQueue.find((t=>t.name===i.name))||(this.poster.uploadQueue.push(i),e||(this.selectThumbnail(i),e=!0));this.$refs.thumbnailsUpload.reset()},async getThumbnails(t){if(Array.isArray(t))return;const e=await this.$komgaSeries.getThumbnails(t.id);this.selectThumbnail(e.find((t=>t.selected))),this.poster.seriesThumbnails=e},isThumbnailSelected(t){return t instanceof File?t.name===this.poster.selectedThumbnail:t.id===this.poster.selectedThumbnail},selectThumbnail(t){if(t)if(t instanceof File)this.poster.selectedThumbnail=t.name;else{const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1),this.poster.selectedThumbnail=t.id}},isThumbnailToBeDeleted(t){return!(t instanceof File)&&this.poster.deleteQueue.includes(t)},deleteThumbnail(t){if(t instanceof File){const e=this.poster.uploadQueue.indexOf(t,0);e>-1&&this.poster.uploadQueue.splice(e,1),t.name===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}else if(this.isThumbnailToBeDeleted(t)){const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1)}else this.poster.deleteQueue.push(t),t.id===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}}}),To=xo,Lo=(0,X.A)(To,go,bo,!1,null,"368b00b0",null),wo=Lo.exports,So=i(15137),Do=i(57471),Co=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:this.$vuetify.breakpoint.xsOnly,"hide-overlay":this.$vuetify.breakpoint.xsOnly,"max-width":"700",scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(o.A,{staticClass:"hidden-sm-and-up"},[e(f.A,{attrs:{icon:""},on:{click:t.dialogClose}},[e(v.A,[t._v("mdi-close")])],1),e(me.sw,[t._v(t._s(t.dialogTitle))]),e(E.A),e(me.MZ,[t.showNext?e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.nextTab}},[t._v(" "+t._s(t.$t("dialog.edit_library.button_next"))+" ")]):e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.confirmText))])],1)],1),e(N.ri,{staticClass:"hidden-xs-only"},[t._v(t._s(t.dialogTitle))]),e(N.OQ,{staticClass:"pa-0"},[e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-bookshelf")]),t._v(" "+t._s(t.$t("dialog.edit_library.tab_general"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-magnify-scan")]),t._v(" "+t._s(t.$t("dialog.edit_library.label_scanner"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-tune")]),t._v(" "+t._s(t.$t("dialog.edit_library.tab_options"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-book-information-variant")]),t._v(" "+t._s(t.$t("dialog.edit_library.tab_metadata"))+" ")],1),e(ot.A,[e(P.A,{attrs:{flat:"","min-height":t.$vuetify.breakpoint.xs?.8*t.$vuetify.breakpoint.height:void 0}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,[e(V.A,{attrs:{autofocus:"",label:t.$t("dialog.edit_library.field_name"),"error-messages":t.getErrors("name")},on:{input:function(e){return t.$v.form.name.$touch()},blur:function(e){return t.$v.form.name.$touch()}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e(H.A,{attrs:{justify:"center"}},[e(q.A,{attrs:{cols:"8","align-self":"center"}},[e("file-browser-dialog",{attrs:{path:t.form.path,"confirm-text":t.$t("dialog.edit_library.file_browser_dialog_button_confirm"),"dialog-title":t.$t("dialog.edit_library.file_browser_dialog_title")},on:{"update:path":function(e){return t.$set(t.form,"path",e)}},model:{value:t.modalFileBrowser,callback:function(e){t.modalFileBrowser=e},expression:"modalFileBrowser"}}),e(V.A,{attrs:{label:t.$t("dialog.edit_library.field_root_folder"),"error-messages":t.getErrors("path")},on:{input:function(e){return t.$v.form.path.$touch()},blur:function(e){return t.$v.form.path.$touch()}},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),e(q.A,{attrs:{cols:"4","align-self":"center"}},[e(f.A,{on:{click:function(e){t.modalFileBrowser=!0}}},[t._v(t._s(t.$t("dialog.edit_library.button_browse")))])],1)],1)],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:"","min-height":t.$vuetify.breakpoint.xs?.8*t.$vuetify.breakpoint.height:void 0}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,[e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_scanner_empty_trash_after_scan"),"hide-details":""},model:{value:t.form.emptyTrashAfterScan,callback:function(e){t.$set(t.form,"emptyTrashAfterScan",e)},expression:"form.emptyTrashAfterScan"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_scanner_force_directory_modified_time"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"info"}},i),[t._v("mdi-help-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_scanner_force_modified_time"))+" ")])]},proxy:!0}]),model:{value:t.form.scanForceModifiedTime,callback:function(e){t.$set(t.form,"scanForceModifiedTime",e)},expression:"form.scanForceModifiedTime"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_scanner_scan_startup"),"hide-details":""},model:{value:t.form.scanOnStartup,callback:function(e){t.$set(t.form,"scanOnStartup",e)},expression:"form.scanOnStartup"}}),e(R.A,{staticClass:"mx-4 mt-3",attrs:{items:t.scanInterval,label:t.$t("dialog.edit_library.field_scan_interval"),flat:"","hide-details":""},model:{value:t.form.scanInterval,callback:function(e){t.$set(t.form,"scanInterval",e)},expression:"form.scanInterval"}}),e(V.A,{staticClass:"mx-4 mt-4",attrs:{clearable:"",label:t.$t("dialog.edit_library.field_oneshotsdirectory"),"error-messages":t.getErrors("oneshotsDirectory")},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"info"}},i),[t._v("mdi-help-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_oneshotsdirectory"))+" ")])]},proxy:!0}]),model:{value:t.form.oneshotsDirectory,callback:function(e){t.$set(t.form,"oneshotsDirectory",e)},expression:"form.oneshotsDirectory"}}),e("div",{staticClass:"mx-4"},[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_scan_types")))]),e(Do.A,{attrs:{multiple:"","active-class":"primary"},model:{value:t.form.scanTypes,callback:function(e){t.$set(t.form,"scanTypes",e)},expression:"form.scanTypes"}},t._l(t.fileTypes,(function(i){return e(So.A,{key:i.value,attrs:{value:i.value,filter:"",outlined:""}},[t._v(t._s(i.text)+" ")])})),1)],1),e(Lt.A,{staticClass:"mx-4",attrs:{clearable:"",multiple:"","small-chips":"","deletable-chips":"",label:t.$t("dialog.edit_library.label_scan_directory_exclusions")},model:{value:t.form.scanDirectoryExclusions,callback:function(e){t.$set(t.form,"scanDirectoryExclusions",e)},expression:"form.scanDirectoryExclusions"}})],1)],1)],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:"","min-height":t.$vuetify.breakpoint.xs?.8*t.$vuetify.breakpoint.height:void 0}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{attrs:{cols:"auto"}},[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_analysis")))]),e(et.A,{staticClass:"mx-4 align-center",attrs:{label:t.$t("dialog.edit_library.field_analysis_hash_files"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"warning"}},i),[t._v("mdi-alert-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_use_resources"))+" ")])]},proxy:!0}]),model:{value:t.form.hashFiles,callback:function(e){t.$set(t.form,"hashFiles",e)},expression:"form.hashFiles"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_analysis_hash_pages"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"warning"}},i),[t._v("mdi-alert-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_use_resources"))+" ")])]},proxy:!0}]),model:{value:t.form.hashPages,callback:function(e){t.$set(t.form,"hashPages",e)},expression:"form.hashPages"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_analysis_hash_koreader"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"warning"}},i),[t._v("mdi-alert-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_use_resources"))+" ")])]},proxy:!0}]),model:{value:t.form.hashKoreader,callback:function(e){t.$set(t.form,"hashKoreader",e)},expression:"form.hashKoreader"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_analysis_analyze_dimensions"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"warning"}},i),[t._v("mdi-alert-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_use_resources"))+" ")])]},proxy:!0}]),model:{value:t.form.analyzeDimensions,callback:function(e){t.$set(t.form,"analyzeDimensions",e)},expression:"form.analyzeDimensions"}})],1)],1),e(H.A,[e(q.A,[e(et.A,{attrs:{indeterminate:1===t.fileManagement,"hide-details":"",label:t.$t("dialog.edit_library.label_file_management")},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_file_management")))])]},proxy:!0}]),model:{value:t.fileManagement,callback:function(e){t.fileManagement=e},expression:"fileManagement"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_repair_extensions"),"hide-details":""},model:{value:t.form.repairExtensions,callback:function(e){t.$set(t.form,"repairExtensions",e)},expression:"form.repairExtensions"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_convert_to_cbz"),"hide-details":""},model:{value:t.form.convertToCbz,callback:function(e){t.$set(t.form,"convertToCbz",e)},expression:"form.convertToCbz"}})],1)],1),e(H.A,[e(q.A,[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_series_cover")))]),e(R.A,{attrs:{items:t.seriesCover,label:t.$t("dialog.edit_library.field_series_cover"),solo:"",flat:""},model:{value:t.form.seriesCover,callback:function(e){t.$set(t.form,"seriesCover",e)},expression:"form.seriesCover"}})],1)],1)],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:"","min-height":t.$vuetify.breakpoint.xs?.8*t.$vuetify.breakpoint.height:void 0}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,[e(et.A,{attrs:{indeterminate:1===t.importComicInfo,"hide-details":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_import_comicinfo")))])]},proxy:!0}]),model:{value:t.importComicInfo,callback:function(e){t.importComicInfo=e},expression:"importComicInfo"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_comicinfo_book"),"hide-details":""},model:{value:t.form.importComicInfoBook,callback:function(e){t.$set(t.form,"importComicInfoBook",e)},expression:"form.importComicInfoBook"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_comicinfo_series"),"hide-details":""},model:{value:t.form.importComicInfoSeries,callback:function(e){t.$set(t.form,"importComicInfoSeries",e)},expression:"form.importComicInfoSeries"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_comicinfo_series_append_volume"),"hide-details":""},model:{value:t.form.importComicInfoSeriesAppendVolume,callback:function(e){t.$set(t.form,"importComicInfoSeriesAppendVolume",e)},expression:"form.importComicInfoSeriesAppendVolume"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_comicinfo_collections"),"hide-details":""},model:{value:t.form.importComicInfoCollection,callback:function(e){t.$set(t.form,"importComicInfoCollection",e)},expression:"form.importComicInfoCollection"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_comicinfo_readlists"),"hide-details":""},model:{value:t.form.importComicInfoReadList,callback:function(e){t.$set(t.form,"importComicInfoReadList",e)},expression:"form.importComicInfoReadList"}})],1)],1),e(H.A,[e(q.A,[e(et.A,{attrs:{indeterminate:1===t.importEpub,"hide-details":""},scopedSlots:t._u([{key:"label",fn:function(){return[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_import_epub")))])]},proxy:!0}]),model:{value:t.importEpub,callback:function(e){t.importEpub=e},expression:"importEpub"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_epub_book"),"hide-details":""},model:{value:t.form.importEpubBook,callback:function(e){t.$set(t.form,"importEpubBook",e)},expression:"form.importEpubBook"}}),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_epub_series"),"hide-details":""},model:{value:t.form.importEpubSeries,callback:function(e){t.$set(t.form,"importEpubSeries",e)},expression:"form.importEpubSeries"}})],1)],1),e(H.A,[e(q.A,[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_import_mylar")))]),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_mylar_series"),"hide-details":""},model:{value:t.form.importMylarSeries,callback:function(e){t.$set(t.form,"importMylarSeries",e)},expression:"form.importMylarSeries"}})],1)],1),e(H.A,[e(q.A,[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_import_local")))]),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_local_artwork"),"hide-details":""},model:{value:t.form.importLocalArtwork,callback:function(e){t.$set(t.form,"importLocalArtwork",e)},expression:"form.importLocalArtwork"}})],1)],1),e(H.A,[e(q.A,[e("span",{staticClass:"text-subtitle-1 text--primary"},[t._v(t._s(t.$t("dialog.edit_library.label_import_barcode_isbn")))]),e(et.A,{staticClass:"mx-4",attrs:{label:t.$t("dialog.edit_library.field_import_barcode_isbn"),"hide-details":""},scopedSlots:t._u([{key:"append",fn:function(){return[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({attrs:{color:"warning"}},i),[t._v("mdi-alert-circle-outline")])]}}])},[t._v(" "+t._s(t.$t("dialog.edit_library.tooltip_use_resources"))+" ")])]},proxy:!0}]),model:{value:t.form.importBarcodeIsbn,callback:function(e){t.$set(t.form,"importBarcodeIsbn",e)},expression:"form.importBarcodeIsbn"}})],1)],1)],1)],1)],1)],1)],1),e(N.SL,{staticClass:"hidden-xs-only"},[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogClose}},[t._v(t._s(t.$t("dialog.edit_library.button_cancel")))]),t.showNext?e(f.A,{attrs:{color:"primary"},on:{click:t.nextTab}},[t._v(" "+t._s(t.$t("dialog.edit_library.button_next"))+" ")]):e(f.A,{attrs:{color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.confirmText))])],1)],1)],1)])},Ro=[],Eo=i(10685);(function(t){t["FIRST"]="FIRST",t["FIRST_UNREAD_OR_FIRST"]="FIRST_UNREAD_OR_FIRST",t["FIRST_UNREAD_OR_LAST"]="FIRST_UNREAD_OR_LAST",t["LAST"]="LAST"})($o||($o={})),function(t){t["DISABLED"]="DISABLED",t["HOURLY"]="HOURLY",t["EVERY_6H"]="EVERY_6H",t["EVERY_12H"]="EVERY_12H",t["DAILY"]="DAILY",t["WEEKLY"]="WEEKLY"}(Ao||(Ao={}));var Bo=p.Ay.extend({name:"LibraryEditDialog",components:{FileBrowserDialog:Eo.A},data:()=>({modal:!1,modalFileBrowser:!1,tab:0,form:{name:"",path:"",importComicInfoBook:!0,importComicInfoSeries:!0,importComicInfoCollection:!0,importComicInfoReadList:!0,importComicInfoSeriesAppendVolume:!0,importEpubBook:!0,importEpubSeries:!0,importMylarSeries:!0,importLocalArtwork:!0,importBarcodeIsbn:!1,scanForceModifiedTime:!1,scanInterval:Ao.EVERY_6H,scanOnStartup:!1,scanTypes:[],scanDirectoryExclusions:[],repairExtensions:!1,convertToCbz:!1,emptyTrashAfterScan:!1,seriesCover:$o.FIRST,hashFiles:!0,hashPages:!1,hashKoreader:!1,analyzeDimensions:!0,oneshotsDirectory:""},validationFieldNames:new Map([])}),computed:{dialogTitle(){return this.library?this.$t("dialog.edit_library.dialot_title_edit").toString():this.$t("dialog.edit_library.dialog_title_add").toString()},confirmText(){return this.library?this.$t("dialog.edit_library.button_confirm_edit").toString():this.$t("dialog.edit_library.button_confirm_add").toString()},showNext(){return!this.library&&3!==this.tab},seriesCover(){return Object.keys($o).map((t=>({text:this.$t(`enums.series_cover.${t}`),value:t})))},scanInterval(){return Object.keys(Ao).map((t=>({text:this.$t(`enums.scan_interval.${t}`),value:t})))},fileTypes(){return[{text:this.$t("common.cbx").toString(),value:"cbx"},{text:this.$t("common.pdf").toString(),value:"pdf"},{text:this.$t("common.epub").toString(),value:"epub"}]},importComicInfo:{get:function(){const t=[this.form.importComicInfoBook,this.form.importComicInfoCollection,this.form.importComicInfoReadList,this.form.importComicInfoSeries,this.form.importComicInfoSeriesAppendVolume],e=t.filter(Boolean).length;return e===t.length?2:0===e?0:1},set:function(t){this.form.importComicInfoBook=t,this.form.importComicInfoCollection=t,this.form.importComicInfoReadList=t,this.form.importComicInfoSeries=t,this.form.importComicInfoSeriesAppendVolume=t}},importEpub:{get:function(){const t=[this.form.importEpubBook,this.form.importEpubSeries],e=t.filter(Boolean).length;return e===t.length?2:0===e?0:1},set:function(t){this.form.importEpubBook=t,this.form.importEpubSeries=t}},fileManagement:{get:function(){const t=[this.form.repairExtensions,this.form.convertToCbz],e=t.filter(Boolean).length;return e===t.length?2:0===e?0:1},set:function(t){this.form.repairExtensions=t,this.form.convertToCbz=t}}},props:{value:Boolean,library:{type:Object,required:!1}},watch:{value(t){this.modal=t},modal(t){t?this.dialogReset(this.library):this.dialogClose()}},validations:{form:{name:{required:ke.mw},path:{required:ke.mw}}},methods:{nextTab(){this.$v.$touch(),this.$v.$invalid||(this.tab+=1)},getErrors(t){const e=[],i=this.$v.form[t];if(i&&i.$invalid&&i.$dirty){this.validationFieldNames.has(t)?this.validationFieldNames.get(t):(t.charAt(0).toUpperCase(),t.substring(1));e.push(this.$t("common.required").toString())}return e},dialogClose(){this.$emit("input",!1),this.tab=0},dialogConfirm(){this.addLibrary()},dialogReset(t){this.form.name=t?t.name:"",this.form.path=t?t.root:"",this.form.importComicInfoBook=!t||t.importComicInfoBook,this.form.importComicInfoSeries=!t||t.importComicInfoSeries,this.form.importComicInfoCollection=!t||t.importComicInfoCollection,this.form.importComicInfoReadList=!t||t.importComicInfoReadList,this.form.importComicInfoSeriesAppendVolume=!t||t.importComicInfoSeriesAppendVolume,this.form.importEpubBook=!t||t.importEpubBook,this.form.importEpubSeries=!t||t.importEpubSeries,this.form.importMylarSeries=!t||t.importMylarSeries,this.form.importLocalArtwork=!t||t.importLocalArtwork,this.form.importBarcodeIsbn=!!t&&t.importBarcodeIsbn,this.form.scanForceModifiedTime=!!t&&t.scanForceModifiedTime,this.form.scanInterval=t?t.scanInterval:Ao.EVERY_6H,this.form.scanOnStartup=!!t&&t.scanOnStartup,this.form.scanTypes=[],t||(this.form.scanTypes=["cbx","pdf","epub"]),1==(null===t||void 0===t?void 0:t.scanEpub)&&this.form.scanTypes.splice(0,0,"epub"),1==(null===t||void 0===t?void 0:t.scanPdf)&&this.form.scanTypes.splice(0,0,"pdf"),1==(null===t||void 0===t?void 0:t.scanCbx)&&this.form.scanTypes.splice(0,0,"cbx"),this.form.scanDirectoryExclusions=t?t.scanDirectoryExclusions:["#recycle","@eaDir","@Recycle"],this.form.repairExtensions=!!t&&t.repairExtensions,this.form.convertToCbz=!!t&&t.convertToCbz,this.form.emptyTrashAfterScan=!!t&&t.emptyTrashAfterScan,this.form.seriesCover=t?t.seriesCover:$o.FIRST,this.form.hashFiles=!t||t.hashFiles,this.form.hashPages=!!t&&t.hashPages,this.form.hashKoreader=!!t&&t.hashKoreader,this.form.analyzeDimensions=!t||t.analyzeDimensions,this.form.oneshotsDirectory=t?t.oneshotsDirectory:"",this.$v.$reset()},validateLibrary(){return this.$v.$touch(),this.$v.$invalid?null:{name:this.form.name,root:this.form.path,importComicInfoBook:this.form.importComicInfoBook,importComicInfoSeries:this.form.importComicInfoSeries,importComicInfoCollection:this.form.importComicInfoCollection,importComicInfoReadList:this.form.importComicInfoReadList,importComicInfoSeriesAppendVolume:this.form.importComicInfoSeriesAppendVolume,importEpubBook:this.form.importEpubBook,importEpubSeries:this.form.importEpubSeries,importMylarSeries:this.form.importMylarSeries,importLocalArtwork:this.form.importLocalArtwork,importBarcodeIsbn:this.form.importBarcodeIsbn,scanForceModifiedTime:this.form.scanForceModifiedTime,scanInterval:this.form.scanInterval,scanOnStartup:this.form.scanOnStartup,scanCbx:this.form.scanTypes.includes("cbx"),scanPdf:this.form.scanTypes.includes("pdf"),scanEpub:this.form.scanTypes.includes("epub"),scanDirectoryExclusions:this.form.scanDirectoryExclusions,repairExtensions:this.form.repairExtensions,convertToCbz:this.form.convertToCbz,emptyTrashAfterScan:this.form.emptyTrashAfterScan,seriesCover:this.form.seriesCover,hashFiles:this.form.hashFiles,hashPages:this.form.hashPages,hashKoreader:this.form.hashKoreader,analyzeDimensions:this.form.analyzeDimensions,oneshotsDirectory:this.form.oneshotsDirectory}},async addLibrary(){const t=this.validateLibrary();if(t)try{this.library?await this.$store.dispatch("updateLibrary",{libraryId:this.library.id,library:t}):await this.$store.dispatch("postLibrary",t),this.dialogClose()}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}else this.tab=0}}}),Io=Bo,Oo=(0,X.A)(Io,Co,Ro,!1,null,"65966934",null),Mo=Oo.exports,Uo=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{"max-width":"450",scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e(P.A,[e(N.ri,[t._v(t._s(t.$t("dialog.add_to_readlist.dialog_title")))]),e(f.A,{attrs:{icon:"",absolute:"",top:"",right:""},on:{click:t.dialogClose}},[e(v.A,[t._v("mdi-close")])],1),e(k.A),e(N.OQ,{staticStyle:{height:"50%"}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,{attrs:{align:"center"}},[e(q.A,[e(V.A,{attrs:{autofocus:"",label:t.$t("dialog.add_to_readlist.field_search_create"),"error-messages":t.duplicate},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.create.apply(null,arguments)}},model:{value:t.newReadList,callback:function(e){t.newReadList=e},expression:"newReadList"}})],1),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{color:"primary",disabled:0===t.newReadList.length||""!==t.duplicate},on:{click:t.create}},[t._v(t._s(t.$t("dialog.add_to_readlist.button_create"))+" ")])],1)],1),e(k.A),0!==t.readLists.length?e(H.A,[e(q.A,[0!==t.readListsFiltered.length?e(_.A,{attrs:{elevation:"5"}},t._l(t.readListsFiltered,(function(i,o){return e("div",{key:o},[e(A.A,{attrs:{"two-line":""},on:{click:function(e){return t.addTo(i)}}},[e(L.pr,[e(L.UZ,[t._v(t._s(i.name))]),e(L.w,[t._v(t._s(t.$tc("dialog.add_to_readlist.card_readlist_subtitle",i.bookIds.length))+" ")])],1)],1),o!==t.readListsFiltered.length-1?e(k.A):t._e()],1)})),0):e(F.A,{attrs:{type:"info",text:""}},[t._v(t._s(t.$t("dialog.add_to_readlist.label_no_matching_readlist"))+" ")])],1)],1):t._e()],1)],1)],1)],1)},Fo=[],Po=p.Ay.extend({name:"ReadListAddToDialog",data:()=>({confirmDelete:!1,modal:!1,readLists:[],newReadList:""}),props:{value:Boolean,bookIds:{type:[Array],required:!0}},watch:{async value(t){this.modal=t,t&&(this.newReadList="",this.readLists=this.$_.orderBy((await this.$komgaReadLists.getReadLists(void 0,{unpaged:!0})).content,["lastModifiedDate"],["desc"]))},modal(t){!t&&this.dialogClose()}},async mounted(){},computed:{duplicate(){return""!==this.newReadList&&this.readLists.some((t=>t.name.toLowerCase()===this.newReadList.toLowerCase()))?this.$t("dialog.add_to_readlist.field_search_create_error").toString():""},readListsFiltered(){return this.readLists.filter((t=>W(t.name.toLowerCase()).includes(W(this.newReadList.toLowerCase()))))}},methods:{dialogClose(){this.$emit("input",!1)},async addTo(t){const e=this.$_.uniq(t.bookIds.concat(this.bookIds)),i={bookIds:e};try{await this.$komgaReadLists.patchReadList(t.id,i),this.dialogClose()}catch(o){this.$eventHub.$emit(z.ff,{message:o.message})}},async create(){const t={name:this.newReadList,bookIds:this.bookIds};try{await this.$komgaReadLists.postReadList(t),this.dialogClose()}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}}}}),No=Po,qo=(0,X.A)(No,Uo,Fo,!1,null,"164b661f",null),Yo=qo.exports,Qo=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,"max-width":"800"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.$t("dialog.edit_readlist.dialog_title"))+" ")],1),e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-align-center")]),t._v(" "+t._s(t.$t("dialog.edit_readlist.tab_general"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-image")]),t._v(" "+t._s(t.$t("dialog.edit_readlist.tab_poster"))+" ")],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,[e(V.A,{attrs:{label:t.$t("dialog.edit_readlist.field_name"),"error-messages":t.getErrorsName,filled:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),e(H.A,[e(q.A,[e(he.A,{attrs:{label:t.$t("dialog.edit_readlist.field_summary"),filled:""},model:{value:t.form.summary,callback:function(e){t.$set(t.form,"summary",e)},expression:"form.summary"}})],1)],1),e(H.A,[e(q.A,[e("div",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_readlist.label_ordering")))]),e(et.A,{attrs:{label:t.$t("dialog.edit_readlist.field_manual_ordering"),"hide-details":""},model:{value:t.form.ordered,callback:function(e){t.$set(t.form,"ordered",e)},expression:"form.ordered"}})],1)],1)],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{staticClass:"pa-1"},[e("drop-zone",{ref:"thumbnailsUpload",staticClass:"pa-8",on:{"on-input-change":t.addThumbnail}})],1)],1),e(H.A,t._l([...t.poster.uploadQueue,...t.poster.readListThumbnails],(function(i,o){return e(q.A,{key:o,staticClass:"pa-1",attrs:{cols:"6",sm:"4",lg:"3"}},[e("thumbnail-card",{attrs:{item:i,selected:t.isThumbnailSelected(i),toBeDeleted:t.isThumbnailToBeDeleted(i)},on:{"on-select-thumbnail":t.selectThumbnail,"on-delete-thumbnail":t.deleteThumbnail}})],1)})),1)],1)],1)],1)],1),e(N.SL,[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_readlist.button_cancel")))]),e(f.A,{attrs:{color:"primary",disabled:""!==t.getErrorsName},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_readlist.button_confirm"))+" ")])],1)],1)],1)])},Ho=[],Vo=p.Ay.extend({name:"ReadListEditDialog",components:{ThumbnailCard:pt,DropZone:_t},data:()=>({UserRoles:nt.f,modal:!1,tab:0,readLists:[],form:{name:"",summary:"",ordered:!0},poster:{selectedThumbnail:"",uploadQueue:[],deleteQueue:[],readListThumbnails:[]}}),props:{value:Boolean,readList:{type:Object,required:!0}},watch:{async value(t){this.modal=t,t&&(this.readLists=(await this.$komgaReadLists.getReadLists(void 0,{unpaged:!0})).content,this.dialogReset(this.readList))},modal(t){!t&&this.dialogCancel(),t&&this.getThumbnails(this.readList)},readList:{handler(t){this.dialogReset(t)},immediate:!0}},computed:{libraries(){return this.$store.state.komgaLibraries.libraries},getErrorsName(){var t,e;return""===this.form.name?this.$t("common.required").toString():(null===(t=this.form.name)||void 0===t?void 0:t.toLowerCase())!==(null===(e=this.readList.name)||void 0===e?void 0:e.toLowerCase())&&this.readLists.some((t=>t.name.toLowerCase()===this.form.name.toLowerCase()))?this.$t("dialog.add_to_readlist.field_search_create_error").toString():""}},methods:{async dialogReset(t){this.tab=0,this.form.name=t.name,this.form.summary=t.summary,this.form.ordered=t.ordered,this.poster.selectedThumbnail="",this.poster.deleteQueue=[],this.poster.uploadQueue=[],this.poster.readListThumbnails=[]},dialogCancel(){this.$emit("input",!1)},dialogConfirm(){this.edit(),this.$emit("input",!1)},async edit(){try{if(this.poster.uploadQueue.length>0){let e=!1;for(const i of this.poster.uploadQueue.slice())try{await this.$komgaReadLists.uploadThumbnail(this.readList.id,i,i.name===this.poster.selectedThumbnail),this.deleteThumbnail(i)}catch(t){this.$eventHub.$emit(z.ff,{message:t.message}),e=!0}if(e)return await this.getThumbnails(this.readList),!1}if(""!==this.poster.selectedThumbnail){const t=this.poster.selectedThumbnail;this.poster.readListThumbnails.find((e=>e.id===t))&&await this.$komgaReadLists.markThumbnailAsSelected(this.readList.id,t)}this.poster.deleteQueue.length>0&&this.poster.deleteQueue.forEach((t=>this.$komgaReadLists.deleteThumbnail(t.readListId,t.id)));const e={name:this.form.name,summary:this.form.summary,ordered:this.form.ordered};await this.$komgaReadLists.patchReadList(this.readList.id,e)}catch(t){this.$eventHub.$emit(z.ff,{message:t.message})}},addThumbnail(t){let e=!1;for(const i of t)this.poster.uploadQueue.find((t=>t.name===i.name))||(this.poster.uploadQueue.push(i),e||(this.selectThumbnail(i),e=!0));this.$refs.thumbnailsUpload.reset()},async getThumbnails(t){const e=await this.$komgaReadLists.getThumbnails(t.id);this.selectThumbnail(e.find((t=>t.selected))),this.poster.readListThumbnails=e},isThumbnailSelected(t){return t instanceof File?t.name===this.poster.selectedThumbnail:t.id===this.poster.selectedThumbnail},selectThumbnail(t){if(t)if(t instanceof File)this.poster.selectedThumbnail=t.name;else{const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1),this.poster.selectedThumbnail=t.id}},isThumbnailToBeDeleted(t){return!(t instanceof File)&&this.poster.deleteQueue.includes(t)},deleteThumbnail(t){if(t instanceof File){const e=this.poster.uploadQueue.indexOf(t,0);e>-1&&this.poster.uploadQueue.splice(e,1),t.name===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}else if(this.isThumbnailToBeDeleted(t)){const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1)}else this.poster.deleteQueue.push(t),t.id===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}}}),jo=Vo,Zo=(0,X.A)(jo,Qo,Ho,!1,null,"4a69cf26",null),zo=Zo.exports,Wo=i(32837),Go=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,scrollable:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e(ue.A,{ref:"form"},[e(P.A,[e(o.A,{staticClass:"hidden-sm-and-up"},[e(f.A,{attrs:{icon:""},on:{click:t.dialogCancel}},[e(v.A,[t._v("mdi-close")])],1),e(me.sw,[t._v(t._s(t.dialogTitle))]),e(E.A),e(me.MZ,[e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1),e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.dialogTitle)+" ")],1),e(N.ZR,[e(Y.A,{attrs:{fluid:""}},[e(H.A,t._l(t.headerRow,(function(i,o){return e(q.A,{key:o,attrs:{cols:i.cols?i.cols:void 0}},[e(f.A,{attrs:{icon:""},on:{click:function(e){t.changeAllLock(i.prop,2!==t.lockStatus(i.prop))}}},[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:o}){return[e(v.A,t._g({attrs:{color:2===t.lockStatus(i.prop)?"secondary":""}},o),[t._v(" "+t._s(0!==t.lockStatus(i.prop)?"mdi-lock":"mdi-lock-open")+" ")])]}}],null,!0)},[e("span",[t._v(t._s(2!==t.lockStatus(i.prop)?t.$t("common.lock_all"):t.$t("common.unlock_all")))])])],1),e("span",{staticClass:"subtitle-1"},[t._v(t._s(i.label))]),"number"===i.prop?e(f.A,{attrs:{icon:""},on:{click:t.copyFromNumberSort}},[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({},i),[t._v("mdi-content-copy")])]}}],null,!0)},[e("span",[t._v(t._s(t.$t("dialog.edit_books.copy_from",{field:t.$t("dialog.edit_books.field_number_sort")})))])])],1):t._e(),"numberSort"===i.prop?e("span",[e(f.A,{attrs:{icon:""},on:{click:t.numberSortDecrement}},[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({},i),[t._v("mdi-numeric-negative-1")])]}}],null,!0)},[e("span",[t._v(t._s(t.$t("dialog.edit_books.number_sort_decrement")))])])],1),e(f.A,{attrs:{icon:""},on:{click:t.numberSortIncrement}},[e(B.A,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(v.A,t._g({},i),[t._v("mdi-numeric-positive-1")])]}}],null,!0)},[e("span",[t._v(t._s(t.$t("dialog.edit_books.number_sort_increment")))])])],1)],1):t._e()],1)})),1)],1)],1),e(N.OQ,[e(Y.A,{attrs:{fluid:""}},t._l(t.books,(function(i,o){return e("div",{key:i.id,staticClass:"pa-2"},[e("div",{staticClass:"subtitle-2 mb-2"},[t._v(t._s(t.bookDisplayName(i)))]),e(H.A,[e(q.A,[e(V.A,{attrs:{dense:"","validate-on-blur":"",rules:[t.validateRequired]},on:{change:function(e){t.form[i.id].titleLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form[i.id].titleLock?"secondary":""},on:{click:function(e){t.form[i.id].titleLock=!t.form[i.id].titleLock}}},[t._v(" "+t._s(t.form[i.id].titleLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form[i.id].title,callback:function(e){t.$set(t.form[i.id],"title",e)},expression:"form[book.id].title"}})],1),e(q.A,{attrs:{cols:"2"}},[e(V.A,{attrs:{dense:"","validate-on-blur":"",rules:[t.validateRequired]},on:{change:function(e){t.form[i.id].numberLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form[i.id].numberLock?"secondary":""},on:{click:function(e){t.form[i.id].numberLock=!t.form[i.id].numberLock}}},[t._v(" "+t._s(t.form[i.id].numberLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form[i.id].number,callback:function(e){t.$set(t.form[i.id],"number",e)},expression:"form[book.id].number"}})],1),e(q.A,{attrs:{cols:"2"}},[e(V.A,{attrs:{type:"number",step:"0.1",dense:"","validate-on-blur":"",rules:[t.validateRequired]},on:{change:function(e){t.form[i.id].numberSortLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form[i.id].numberSortLock?"secondary":""},on:{click:function(e){t.form[i.id].numberSortLock=!t.form[i.id].numberSortLock}}},[t._v(" "+t._s(t.form[i.id].numberSortLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form[i.id].numberSort,callback:function(e){t.$set(t.form[i.id],"numberSort",t._n(e))},expression:"form[book.id].numberSort"}})],1),e(q.A,{attrs:{cols:"2"}},[e(V.A,{attrs:{dense:"",placeholder:"YYYY-MM-DD",clearable:"","validate-on-blur":"",rules:[t.validateReleaseDate]},on:{change:function(e){t.form[i.id].releaseDateLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form[i.id].releaseDateLock?"secondary":""},on:{click:function(e){t.form[i.id].releaseDateLock=!t.form[i.id].releaseDateLock}}},[t._v(" "+t._s(t.form[i.id].releaseDateLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form[i.id].releaseDate,callback:function(e){t.$set(t.form[i.id],"releaseDate",e)},expression:"form[book.id].releaseDate"}})],1),e(q.A,{attrs:{cols:"2"}},[e(V.A,{attrs:{dense:"",placeholder:"978-2-20-504375-4",clearable:"","validate-on-blur":"",rules:[t.validateIsbn]},on:{change:function(e){t.form[i.id].isbnLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form[i.id].isbnLock?"secondary":""},on:{click:function(e){t.form[i.id].isbnLock=!t.form[i.id].isbnLock}}},[t._v(" "+t._s(t.form[i.id].isbnLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form[i.id].isbn,callback:function(e){t.$set(t.form[i.id],"isbn","string"===typeof e?e.trim():e)},expression:"form[book.id].isbn"}})],1)],1),o!==t.books.length-1?e(k.A):t._e()],1)})),0)],1),e(N.SL,{staticClass:"hidden-xs-only"},[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_books.button_cancel")))]),e(f.A,{attrs:{color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1)],1)],1)},Ko=[],Xo=p.Ay.extend({name:"BulkEditBooksDialog",data:()=>({modal:!1,form:{sampleId:{title:"",titleLock:!1,number:"",numberLock:!1,numberSort:0,numberSortLock:!1,releaseDate:"",releaseDateLock:!1,isbn:"",isbnLock:!1}}}),props:{value:Boolean,books:{type:Array,required:!0}},watch:{value(t){this.modal=t},modal(t){!t&&this.dialogCancel()},books:{immediate:!0,handler(t){this.dialogReset(t)}}},computed:{dialogTitle(){return this.$tc("dialog.edit_books.dialog_title_multiple",this.books.length)},headerRow(){return[{prop:"title",label:this.$t("dialog.edit_books.field_title")},{prop:"number",label:this.$t("dialog.edit_books.field_number"),cols:2},{prop:"numberSort",label:this.$t("dialog.edit_books.field_number_sort"),cols:2},{prop:"releaseDate",label:this.$t("dialog.edit_books.field_release_date"),cols:2},{prop:"isbn",label:this.$t("dialog.edit_books.field_isbn"),cols:2}]}},methods:{validateIsbn(t){return!(t&&!new ve(t).isIsbn13({check_digit:!0}))||this.$t("dialog.edit_books.field_isbn_error").toString()},validateRequired(t){return!(!t&&0!==t)||this.$t("common.required").toString()},validateReleaseDate(t){return!(t&&!no(t,"yyyy-MM-dd"))||this.$t("dialog.edit_books.field_release_date_error").toString()},bookDisplayName(t){const e=t.url.split("/");return e[e.length-2]+"/"+e[e.length-1]},lockStatus(t){const e=`${t}Lock`;let i=0;for(const o of this.books)this.form[o.id][e]&&i++;return 0===i?0:i===this.books.length?2:1},changeAllLock(t,e){const i=`${t}Lock`;for(const o of this.books)this.form[o.id][i]=e},numberSortDecrement(){for(const t of this.books)this.form[t.id].numberSort=this.form[t.id].numberSort-1},numberSortIncrement(){for(const t of this.books)this.form[t.id].numberSort=this.form[t.id].numberSort+1},copyFromNumberSort(){for(const t of this.books)this.form[t.id].number=this.form[t.id].numberSort},dialogReset(t){var e;null===(e=this.$refs.form)||void 0===e||e.resetValidation(),this.form=t.reduce(((t,e)=>(t[e.id]={title:e.metadata.title,titleLock:e.metadata.titleLock,number:e.metadata.number,numberLock:e.metadata.numberLock,numberSort:e.metadata.numberSort,numberSortLock:e.metadata.numberSortLock,releaseDate:e.metadata.releaseDate,releaseDateLock:e.metadata.releaseDateLock,isbn:e.metadata.isbn,isbnLock:e.metadata.isbnLock},t)),{})},dialogCancel(){this.$emit("input",!1),this.dialogReset(this.books)},async dialogConfirm(){await this.editBooks()&&this.$emit("input",!1)},validateForm(){return this.$refs.form.validate()?this.form:null},async editBooks(){const t=this.validateForm();if(t){try{await this.$komgaBooks.updateMetadataBatch(t)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}return!0}return!1}}}),Jo=Xo,ts=(0,X.A)(Jo,Go,Ko,!1,null,"76c268b9",null),es=ts.exports,is=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Q.A,{attrs:{fullscreen:t.$vuetify.breakpoint.xsOnly,"max-width":"800"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.dialogCancel.apply(null,arguments)}},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e("form",{attrs:{novalidate:""}},[e(P.A,[e(o.A,{staticClass:"hidden-sm-and-up"},[e(f.A,{attrs:{icon:""},on:{click:t.dialogCancel}},[e(v.A,[t._v("mdi-close")])],1),e(me.sw,[t._v(t._s(t.dialogTitle))]),e(E.A),e(me.MZ,[e(f.A,{attrs:{text:"",color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1),e(N.ri,{staticClass:"hidden-xs-only"},[e(v.A,{staticClass:"mx-4"},[t._v("mdi-pencil")]),t._v(" "+t._s(t.dialogTitle)+" ")],1),e(st.A,{attrs:{vertical:t.$vuetify.breakpoint.smAndUp},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-format-align-center")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_general"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-account-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_authors"))+" ")],1),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-tag-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_tags"))+" ")],1),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-link")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_links"))+" ")],1):t._e(),t.single?e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-image")]),t._v(" "+t._s(t.$t("dialog.edit_books.tab_poster"))+" ")],1):t._e(),e(it.A,{staticClass:"justify-start"},[e(v.A,{staticClass:"hidden-xs-only",attrs:{left:""}},[t._v("mdi-account-multiple")]),t._v(" "+t._s(t.$t("dialog.edit_series.tab_sharing"))+" ")],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_title"),filled:"",dense:"","error-messages":t.requiredBookErrors("title")},on:{input:function(e){return t.$v.form.book.title.$touch()},blur:function(e){return t.$v.form.book.title.$touch()},change:function(e){t.form.book.titleLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.titleLock?"secondary":""},on:{click:function(e){t.form.book.titleLock=!t.form.book.titleLock}}},[t._v(" "+t._s(t.form.book.titleLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1031292489),model:{value:t.form.book.title,callback:function(e){t.$set(t.form.book,"title",e)},expression:"form.book.title"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_sort_title"),filled:"",dense:"","error-messages":t.requiredSeriesErrors("titleSort")},on:{input:function(e){return t.$v.form.series.titleSort.$touch()},blur:function(e){return t.$v.form.series.titleSort.$touch()},change:function(e){t.form.series.titleSortLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.titleSortLock?"secondary":""},on:{click:function(e){t.form.series.titleSortLock=!t.form.series.titleSortLock}}},[t._v(" "+t._s(t.form.series.titleSortLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,3111935689),model:{value:t.form.series.titleSort,callback:function(e){t.$set(t.form.series,"titleSort",e)},expression:"form.series.titleSort"}})],1)],1):t._e(),t.single?e(H.A,[e(q.A,{attrs:{cols:"12"}},[e(he.A,{attrs:{label:t.$t("dialog.edit_books.field_summary"),filled:"",dense:""},on:{input:function(e){return t.$v.form.book.summary.$touch()},change:function(e){t.form.book.summaryLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.summaryLock?"secondary":""},on:{click:function(e){t.form.book.summaryLock=!t.form.book.summaryLock}}},[t._v(" "+t._s(t.form.book.summaryLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,1516279241),model:{value:t.form.book.summary,callback:function(e){t.$set(t.form.book,"summary",e)},expression:"form.book.summary"}})],1)],1):t._e(),e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(R.A,{attrs:{items:t.readingDirections,label:t.$t("dialog.edit_series.field_reading_direction"),clearable:"",filled:"",placeholder:!t.single&&t.mixed.readingDirection?t.$t("dialog.edit_series.mixed"):""},on:{input:function(e){return t.$v.form.series.readingDirection.$touch()},change:function(e){t.form.series.readingDirectionLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.readingDirectionLock?"secondary":""},on:{click:function(e){t.form.series.readingDirectionLock=!t.form.series.readingDirectionLock}}},[t._v(" "+t._s(t.form.series.readingDirectionLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.readingDirection,callback:function(e){t.$set(t.form.series,"readingDirection",e)},expression:"form.series.readingDirection"}})],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_language"),filled:"",dense:"",placeholder:!t.single&&t.mixed.language?t.$t("dialog.edit_series.mixed"):"","error-messages":t.languageErrors,hint:t.$t("dialog.edit_series.field_language_hint")},on:{input:function(e){return t.$v.form.series.language.$touch()},change:function(e){t.form.series.languageLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.languageLock?"secondary":""},on:{click:function(e){t.form.series.languageLock=!t.form.series.languageLock}}},[t._v(" "+t._s(t.form.series.languageLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.language,callback:function(e){t.$set(t.form.series,"language",e)},expression:"form.series.language"}})],1)],1),e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_publisher"),filled:"",dense:"",placeholder:!t.single&&t.mixed.publisher?t.$t("dialog.edit_series.mixed"):""},on:{input:function(e){return t.$v.form.series.publisher.$touch()},change:function(e){t.form.series.publisherLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.publisherLock?"secondary":""},on:{click:function(e){t.form.series.publisherLock=!t.form.series.publisherLock}}},[t._v(" "+t._s(t.form.series.publisherLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.publisher,callback:function(e){t.$set(t.form.series,"publisher",e)},expression:"form.series.publisher"}})],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_series.field_age_rating"),clearable:"",filled:"",dense:"",type:"number",placeholder:!t.single&&t.mixed.ageRating?t.$t("dialog.edit_series.mixed"):"","error-messages":t.ageRatingErrors},on:{input:function(e){return t.$v.form.series.ageRating.$touch()},blur:function(e){return t.$v.form.series.ageRating.$touch()},change:function(e){t.form.series.ageRatingLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.ageRatingLock?"secondary":""},on:{click:function(e){t.form.series.ageRatingLock=!t.form.series.ageRatingLock}}},[t._v(" "+t._s(t.form.series.ageRatingLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.ageRating,callback:function(e){t.$set(t.form.series,"ageRating",e)},expression:"form.series.ageRating"}})],1)],1),t.single?e(H.A,[e(q.A,{attrs:{cols:"6"}},[e(de.A,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:o}){return[e(V.A,t._g(t._b({attrs:{label:t.$t("dialog.edit_books.field_release_date"),filled:"",dense:"",placeholder:"YYYY-MM-DD",clearable:"","error-messages":t.releaseDateErrors},on:{blur:function(e){return t.$v.form.book.releaseDate.$touch()},change:function(e){t.form.book.releaseDateLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.releaseDateLock?"secondary":""},on:{click:function(e){t.form.book.releaseDateLock=!t.form.book.releaseDateLock}}},[t._v(" "+t._s(t.form.book.releaseDateLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.book.releaseDate,callback:function(e){t.$set(t.form.book,"releaseDate",e)},expression:"form.book.releaseDate"}},"v-text-field",o,!1),i))]}}],null,!1,3663724699),model:{value:t.menuDate,callback:function(e){t.menuDate=e},expression:"menuDate"}},[e(ce,{attrs:{"show-current":!0,"show-adjacent-months":!0,locale:t.$i18n.locale,"first-day-of-week":t.$store.getters.getLocaleFirstDay()},on:{input:function(e){t.menuDate=!1},change:function(e){t.form.book.releaseDateLock=!0}},model:{value:t.form.book.releaseDate,callback:function(e){t.$set(t.form.book,"releaseDate",e)},expression:"form.book.releaseDate"}})],1)],1),e(q.A,{attrs:{cols:"6"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_isbn"),filled:"",dense:"",placeholder:"978-2-20-504375-4",clearable:"","error-messages":t.isbnErrors},on:{blur:function(e){return t.$v.form.book.isbn.$touch()},change:function(e){t.form.book.isbnLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.isbnLock?"secondary":""},on:{click:function(e){t.form.book.isbnLock=!t.form.book.isbnLock}}},[t._v(" "+t._s(t.form.book.isbnLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!1,2532218953),model:{value:t.form.book.isbn,callback:function(e){t.$set(t.form.book,"isbn","string"===typeof e?e.trim():e)},expression:"form.book.isbn"}})],1)],1):t._e()],1)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_books.authors_notice_multiple_edit"))+" ")]),t._l(t.authorRoles,(function(i,o){return e(H.A,{key:o},[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$_.capitalize(i.name)))]),e(Lt.A,{attrs:{items:t.authorSearchResultsFull,"search-input":t.authorSearch[o],"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{"update:searchInput":function(e){return t.$set(t.authorSearch,o,e)},"update:search-input":function(e){return t.$set(t.authorSearch,o,e)},keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.authorSearch[o]=null},input:function(e){return t.$v.form.book.authors.$touch()},change:function(e){t.form.book.authorsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.authorsLock?"secondary":""},on:{click:function(e){t.form.book.authorsLock=!t.form.book.authorsLock}}},[t._v(" "+t._s(t.form.book.authorsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.book.authors[i.value],callback:function(e){t.$set(t.form.book.authors,i.value,e)},expression:"form.book.authors[role.value]"}})],1)],1)})),e(H.A,[e(q.A,{attrs:{cols:"12",md:"6"}},[e(ue.A,{ref:"customRoleForm",on:{submit:function(e){return e.preventDefault(),t.addRole.apply(null,arguments)}},model:{value:t.customRoleValid,callback:function(e){t.customRoleValid=e},expression:"customRoleValid"}},[e(V.A,{attrs:{label:"Add custom role","append-outer-icon":"mdi-plus",rules:t.customRoleRules},on:{"click:append-outer":t.addRole},model:{value:t.customRole,callback:function(e){t.customRole="string"===typeof e?e.trim():e},expression:"customRole"}})],1)],1)],1)],2)],1)],1),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_books.tags_notice_multiple_edit"))+" ")]),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_series.field_genres")))]),e(Lt.A,{attrs:{items:t.genresAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.series.genres.$touch()},change:function(e){t.form.series.genresLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.genresLock?"secondary":""},on:{click:function(e){t.form.series.genresLock=!t.form.series.genresLock}}},[t._v(" "+t._s(t.form.series.genresLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.genres,callback:function(e){t.$set(t.form.series,"genres",e)},expression:"form.series.genres"}})],1)],1),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_books.field_tags")))]),e(Lt.A,{attrs:{items:t.tagsAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.book.tags.$touch()},change:function(e){t.form.book.tagsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.tagsLock?"secondary":""},on:{click:function(e){t.form.book.tagsLock=!t.form.book.tagsLock}}},[t._v(" "+t._s(t.form.book.tagsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.book.tags,callback:function(e){t.$set(t.form.book,"tags",e)},expression:"form.book.tags"}})],1)],1)],1)],1)],1),t.single?e(ot.A,[e(P.A,{attrs:{flat:"","min-height":"100"}},[e(Y.A,{attrs:{fluid:""}},[e(ue.A,{ref:"linksForm",model:{value:t.linksValid,callback:function(e){t.linksValid=e},expression:"linksValid"}},t._l(t.form.book.links,(function(i,o){return e(H.A,{key:o},[e(q.A,{staticClass:"py-0",attrs:{cols:"4"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_label"),filled:"",dense:"",rules:[t.linksLabelRules]},on:{input:function(e){return t.$v.form.book.links.$touch()},blur:function(e){return t.$v.form.book.links.$touch()},change:function(e){t.form.book.linksLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.book.linksLock?"secondary":""},on:{click:function(e){t.form.book.linksLock=!t.form.book.linksLock}}},[t._v(" "+t._s(t.form.book.linksLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}],null,!0),model:{value:t.form.book.links[o].label,callback:function(e){t.$set(t.form.book.links[o],"label",e)},expression:"form.book.links[i].label"}})],1),e(q.A,{staticClass:"py-0",attrs:{cols:"8"}},[e(V.A,{attrs:{label:t.$t("dialog.edit_books.field_link_url"),filled:"",dense:"",rules:[t.linksUrlRules]},on:{input:function(e){return t.$v.form.book.links.$touch()},blur:function(e){return t.$v.form.book.links.$touch()},change:function(e){t.form.book.linksLock=!0}},scopedSlots:t._u([{key:"append-outer",fn:function(){return[e(v.A,{on:{click:function(e){return t.form.book.links.splice(o,1)}}},[t._v("mdi-delete")])]},proxy:!0}],null,!0),model:{value:t.form.book.links[o].url,callback:function(e){t.$set(t.form.book.links[o],"url",e)},expression:"form.book.links[i].url"}})],1)],1)})),1),e(H.A,[e(E.A),e(q.A,{attrs:{cols:"auto"}},[e(f.A,{attrs:{elevation:"2",fab:"",small:"",bottom:"",right:"",color:"primary"},on:{click:function(e){return t.form.book.links.push({label:"",url:""})}}},[e(v.A,[t._v("mdi-plus")])],1)],1)],1)],1)],1)],1):t._e(),t.single?e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[e(H.A,[e(q.A,{staticClass:"pa-1"},[e("drop-zone",{ref:"thumbnailsUpload",staticClass:"pa-8",on:{"on-input-change":t.addThumbnail}})],1)],1),e(H.A,t._l([...t.poster.uploadQueue,...t.poster.bookThumbnails],(function(i,o){return e(q.A,{key:o,staticClass:"pa-1",attrs:{cols:"6",sm:"4",lg:"3"}},[e("thumbnail-card",{attrs:{item:i,selected:t.isThumbnailSelected(i),toBeDeleted:t.isThumbnailToBeDeleted(i)},on:{"on-select-thumbnail":t.selectThumbnail,"on-delete-thumbnail":t.deleteThumbnail}})],1)})),1)],1)],1)],1):t._e(),e(ot.A,[e(P.A,{attrs:{flat:""}},[e(Y.A,{attrs:{fluid:""}},[t.single?t._e():e(F.A,{attrs:{type:"warning",outlined:"",dense:""}},[t._v(t._s(t.$t("dialog.edit_books.tags_notice_multiple_edit"))+" ")]),e(H.A,[e(q.A,{attrs:{cols:"12"}},[e("span",{staticClass:"text-body-2"},[t._v(t._s(t.$t("dialog.edit_series.field_labels")))]),e(Lt.A,{attrs:{items:t.sharingLabelsAvailable,"hide-selected":"",chips:"","deletable-chips":"",multiple:"",filled:"",dense:""},on:{input:function(e){return t.$v.form.series.sharingLabels.$touch()},change:function(e){t.form.series.sharingLabelsLock=!0}},scopedSlots:t._u([{key:"prepend",fn:function(){return[e(v.A,{attrs:{color:t.form.series.sharingLabelsLock?"secondary":""},on:{click:function(e){t.form.series.sharingLabelsLock=!t.form.series.sharingLabelsLock}}},[t._v(" "+t._s(t.form.series.sharingLabelsLock?"mdi-lock":"mdi-lock-open")+" ")])]},proxy:!0}]),model:{value:t.form.series.sharingLabels,callback:function(e){t.$set(t.form.series,"sharingLabels",e)},expression:"form.series.sharingLabels"}})],1)],1)],1)],1)],1)],1),e(N.SL,{staticClass:"hidden-xs-only"},[e(E.A),e(f.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.edit_books.button_cancel")))]),e(f.A,{attrs:{color:"primary"},on:{click:t.dialogConfirm}},[t._v(t._s(t.$t("dialog.edit_books.button_confirm")))])],1)],1)],1)])},os=[];const ss=i(1999),rs=t=>!ke._$.req(t)||ss.check(t),as=t=>!ke._$.req(t)||no(t,"yyyy-MM-dd"),ns=t=>!ke._$.req(t)||new ve(t).isIsbn13({check_digit:!0});var ls=p.Ay.extend({name:"EditOneshotDialog",components:{ThumbnailCard:pt,DropZone:_t},data:()=>({modal:!1,tab:0,menuDate:!1,customRole:"",customRoles:[],customRoleValid:!1,linksValid:!1,form:{series:{titleSort:"",titleSortLock:!1,readingDirection:"",readingDirectionLock:!1,publisher:"",publisherLock:!1,ageRating:void 0,ageRatingLock:!1,language:"",languageLock:!1,genres:[],genresLock:!1,sharingLabels:[],sharingLabelsLock:!1},book:{title:"",titleLock:!1,summary:"",summaryLock:!1,releaseDate:"",releaseDateLock:!1,authors:{},authorsLock:!1,tags:[],tagsLock:!1,isbn:"",isbnLock:!1,links:[],linksLock:!1}},mixed:{readingDirection:!1,publisher:!1,ageRating:!1,language:!1},poster:{selectedThumbnail:"",uploadQueue:[],deleteQueue:[],bookThumbnails:[]},authorSearch:[],authorSearchResults:[],genresAvailable:[],tagsAvailable:[],sharingLabelsAvailable:[]}),props:{value:Boolean,oneshots:{type:[Object,Array],required:!0}},watch:{value(t){this.modal=t},modal(t){t?(this.getThumbnails(this.books),this.loadAvailableTags(),this.loadAvailableGenres(),this.loadAvailableSharingLabels()):this.dialogCancel()},oneshots:{immediate:!0,handler(t){this.dialogReset(t)}},authorSearch:{deep:!0,handler:(0,lo.debounce)((async function(t){const e=t.findIndex((t=>null!==t));this.authorSearchResults=await this.$komgaReferential.getAuthorsNames(t[e])}),500)}},validations:{form:{series:{titleSort:{required:(0,ke.F5)((function(t){return this.single}))},language:{validLanguage:rs},genres:{},sharingLabels:{},ageRating:{minValue:(0,ke.Ww)(0)},readingDirection:{},publisher:{}},book:{title:{required:(0,ke.F5)((function(t){return this.single}))},summary:{},tags:{},releaseDate:{validDate:as},links:{},authors:{},isbn:{validIsbn:ns}}}},computed:{series(){return this.single?this.oneshots.series:this.oneshots.map((t=>t.series))},books(){return this.single?this.oneshots.book:this.oneshots.map((t=>t.book))},single(){return!Array.isArray(this.oneshots)},authorRoles(){var t;let e=[];Array.isArray(this.books)?e=this.books.flatMap((t=>t.metadata.authors)).map((t=>t.role)):null!==(t=this.books)&&void 0!==t&&null!==(t=t.metadata)&&void 0!==t&&t.authors&&(e=this.books.metadata.authors.map((t=>t.role)));const i=this.$_.uniq([...be.B,...e,...this.customRoles]);return i.map((t=>({name:this.$te(`author_roles.${t}`)?this.$t(`author_roles.${t}`).toString():t,value:t})))},authorSearchResultsFull(){const t=this.$_.values(this.form.book.authors).flat();return this.$_.sortBy(this.$_.union(t,this.authorSearchResults),(t=>t.toLowerCase()))},readingDirections(){return Object.keys(vo.s3).map((t=>({text:this.$t(`enums.reading_direction.${t}`),value:t})))},ageRatingErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.series)&&void 0!==t&&null!==(t=t.ageRating)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.series)||void 0===e||null===(e=e.ageRating)||void 0===e||!e.minValue)&&i.push(this.$t("dialog.edit_series.field_age_rating_error").toString()),i):i},languageErrors(){var t,e;return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.series)&&void 0!==t&&null!==(t=t.language)&&void 0!==t&&t.$dirty?null!==(e=this.$v)&&void 0!==e&&null!==(e=e.form)&&void 0!==e&&null!==(e=e.series)&&void 0!==e&&null!==(e=e.language)&&void 0!==e&&e.validLanguage?[]:ss(this.form.series.language).errors().map((t=>t.message)):[]},dialogTitle(){return this.single?this.$t("dialog.edit_books.dialog_title_single",{book:this.$_.get(this.books,"metadata.title")}).toString():this.$tc("dialog.edit_books.dialog_title_multiple",this.books.length)},releaseDateErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.book)&&void 0!==t&&null!==(t=t.releaseDate)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.book)||void 0===e||null===(e=e.releaseDate)||void 0===e||!e.validDate)&&i.push(this.$t("dialog.edit_books.field_release_date_error").toString()),i):i},isbnErrors(){var t,e;const i=[];return null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.book)&&void 0!==t&&null!==(t=t.isbn)&&void 0!==t&&t.$dirty?((null===(e=this.$v)||void 0===e||null===(e=e.form)||void 0===e||null===(e=e.book)||void 0===e||null===(e=e.isbn)||void 0===e||!e.validIsbn)&&i.push(this.$t("dialog.edit_books.field_isbn_error").toString()),i):i},customRoleRules(){var t;return""===this.customRole?[this.$t("common.required").toString()]:this.authorRoles.map((t=>t.value.toLowerCase())).includes(null===(t=this.customRole)||void 0===t?void 0:t.toLowerCase())?[this.$t("dialog.edit_books.add_author_role_error_duplicate").toString()]:[!0]}},methods:{linksLabelRules(t){return!!this.$_.trim(t)||this.$t("common.required").toString()},linksUrlRules(t){let e;try{e=new URL(t)}catch(i){return this.$t("dialog.edit_books.field_link_url_error_url").toString()}return"http:"===e.protocol||"https:"===e.protocol||this.$t("dialog.edit_books.field_link_url_error_protocol").toString()},addRole(){this.$refs.customRoleForm.validate()&&(this.customRoles.push(this.customRole.toLowerCase()),this.$refs.customRoleForm.reset())},async loadAvailableTags(){this.tagsAvailable=await this.$komgaReferential.getTags()},async loadAvailableGenres(){this.genresAvailable=await this.$komgaReferential.getGenres()},async loadAvailableSharingLabels(){this.sharingLabelsAvailable=await this.$komgaReferential.getSharingLabels()},requiredBookErrors(t){const e=[],i=this.$v.form.book[t];return i.$dirty?(!i.required&&e.push(this.$t("common.required").toString()),e):e},requiredSeriesErrors(t){const e=[],i=this.$v.form.series[t];return i.$dirty?(!i.required&&e.push(this.$t("common.required").toString()),e):e},dialogReset(t){var e,i;if(this.tab=0,null===(e=this.$refs.customRoleForm)||void 0===e||e.reset(),null===(i=this.$refs.linksForm)||void 0===i||i.resetValidation(),this.customRoles=[],this.$v.$reset(),(!Array.isArray(t)||0!==t.length)&&!this.$_.isEmpty(t))if(Array.isArray(t)&&t.length>0){const e=this.$_.uniq(t.map((t=>t.series.metadata.readingDirection)));this.form.series.readingDirection=e.length>1?"":e[0],this.mixed.readingDirection=e.length>1;const i=this.$_.uniq(t.map((t=>t.series.metadata.readingDirectionLock)));this.form.series.readingDirectionLock=!(i.length>1)&&i[0];const o=this.$_.uniq(t.map((t=>t.series.metadata.ageRating)));this.form.series.ageRating=o.length>1?void 0:o[0],this.mixed.ageRating=o.length>1;const s=this.$_.uniq(t.map((t=>t.series.metadata.ageRatingLock)));this.form.series.ageRatingLock=!(s.length>1)&&s[0];const r=this.$_.uniq(t.map((t=>t.series.metadata.publisher)));this.form.series.publisher=r.length>1?"":r[0],this.mixed.publisher=r.length>1;const a=this.$_.uniq(t.map((t=>t.series.metadata.publisherLock)));this.form.series.publisherLock=!(a.length>1)&&a[0];const n=this.$_.uniq(t.map((t=>t.series.metadata.language)));this.form.series.language=n.length>1?"":n[0],this.mixed.language=n.length>1;const l=this.$_.uniq(t.map((t=>t.series.metadata.languageLock)));this.form.series.languageLock=!(l.length>1)&&l[0],this.form.series.genres=[];const c=this.$_.uniq(t.map((t=>t.series.metadata.genresLock)));this.form.series.genresLock=!(c.length>1)&&c[0],this.form.book.tags=[];const u=this.$_.uniq(t.map((t=>t.book.metadata.tagsLock)));this.form.book.tagsLock=!(u.length>1)&&u[0],this.form.series.sharingLabels=[];const d=this.$_.uniq(t.map((t=>t.series.metadata.sharingLabelsLock)));this.form.series.sharingLabelsLock=!(d.length>1)&&d[0],this.form.book.links=[],this.form.book.authors={};const h=this.$_.uniq(t.map((t=>t.book.metadata.authorsLock)));this.form.book.authorsLock=!(h.length>1)&&h[0]}else{this.form.series.genres=[],this.form.series.sharingLabels=[],this.form.book.tags=[],this.form.book.links=[];const e=t;this.$_.merge(this.form.series,e.series.metadata),this.$_.merge(this.form.book,e.book.metadata),this.form.book.authors=(0,ge.R)(e.book.metadata.authors),this.poster.selectedThumbnail="",this.poster.deleteQueue=[],this.poster.uploadQueue=[],this.poster.bookThumbnails=[]}},dialogCancel(){this.$emit("input",!1),this.dialogReset(this.oneshots)},async dialogConfirm(){await this.editOneShots()&&this.$emit("input",!1)},validateForm(){if(!this.$v.$invalid&&(!this.single||!this.$refs.linksForm||this.$refs.linksForm.validate())){var t,e,i,o,s,r,a,n;const p={readingDirectionLock:this.form.series.readingDirectionLock,ageRatingLock:this.form.series.ageRatingLock,publisherLock:this.form.series.publisherLock,languageLock:this.form.series.languageLock,genresLock:this.form.series.genresLock,sharingLabelsLock:this.form.series.sharingLabelsLock},g={authorsLock:this.form.book.authorsLock,tagsLock:this.form.book.tagsLock};var l,c,u,d,h,m,f;if(null!==(t=this.$v.form)&&void 0!==t&&null!==(t=t.book)&&void 0!==t&&null!==(t=t.authors)&&void 0!==t&&t.$dirty&&this.$_.merge(g,{authors:this.$_.keys(this.form.book.authors).flatMap((t=>this.$_.get(this.form.book.authors,t).map((e=>({name:e,role:t})))))}),null!==(e=this.$v.form)&&void 0!==e&&null!==(e=e.book)&&void 0!==e&&null!==(e=e.tags)&&void 0!==e&&e.$dirty&&this.$_.merge(g,{tags:this.form.book.tags}),null!==(i=this.$v.form)&&void 0!==i&&null!==(i=i.series)&&void 0!==i&&null!==(i=i.readingDirection)&&void 0!==i&&i.$dirty&&this.$_.merge(p,{readingDirection:this.form.series.readingDirection?this.form.series.readingDirection:null}),null!==(o=this.$v.form)&&void 0!==o&&null!==(o=o.series)&&void 0!==o&&null!==(o=o.ageRating)&&void 0!==o&&o.$dirty&&this.$_.merge(p,{ageRating:this.form.series.ageRating}),null!==(s=this.$v.form)&&void 0!==s&&null!==(s=s.series)&&void 0!==s&&null!==(s=s.publisher)&&void 0!==s&&s.$dirty&&this.$_.merge(p,{publisher:this.form.series.publisher}),null!==(r=this.$v.form)&&void 0!==r&&null!==(r=r.series)&&void 0!==r&&null!==(r=r.genres)&&void 0!==r&&r.$dirty&&this.$_.merge(p,{genres:this.form.series.genres}),null!==(a=this.$v.form)&&void 0!==a&&null!==(a=a.series)&&void 0!==a&&null!==(a=a.language)&&void 0!==a&&a.$dirty&&this.$_.merge(p,{language:this.form.series.language}),null!==(n=this.$v.form)&&void 0!==n&&null!==(n=n.series)&&void 0!==n&&null!==(n=n.sharingLabels)&&void 0!==n&&n.$dirty&&this.$_.merge(p,{sharingLabels:this.form.series.sharingLabels}),this.single)this.$_.merge(p,{titleLock:this.form.book.titleLock,titleSortLock:this.form.series.titleSortLock,summaryLock:this.form.book.summaryLock}),this.$_.merge(g,{titleLock:this.form.book.titleLock,summaryLock:this.form.book.summaryLock,releaseDateLock:this.form.book.releaseDateLock,isbnLock:this.form.book.isbnLock,linksLock:this.form.book.linksLock}),null!==(l=this.$v.form)&&void 0!==l&&null!==(l=l.series)&&void 0!==l&&null!==(l=l.titleSort)&&void 0!==l&&l.$dirty&&this.$_.merge(p,{titleSort:this.form.series.titleSort}),null!==(c=this.$v.form)&&void 0!==c&&null!==(c=c.book)&&void 0!==c&&null!==(c=c.title)&&void 0!==c&&c.$dirty&&(this.$_.merge(g,{title:this.form.book.title}),this.$_.merge(p,{title:this.form.book.title})),null!==(u=this.$v.form)&&void 0!==u&&null!==(u=u.book)&&void 0!==u&&null!==(u=u.summary)&&void 0!==u&&u.$dirty&&(this.$_.merge(g,{summary:this.form.book.summary}),this.$_.merge(p,{summary:this.form.book.summary})),null!==(d=this.$v.form)&&void 0!==d&&null!==(d=d.book)&&void 0!==d&&null!==(d=d.releaseDate)&&void 0!==d&&d.$dirty&&this.$_.merge(g,{releaseDate:this.form.book.releaseDate?this.form.book.releaseDate:null}),null!==(h=this.$v.form)&&void 0!==h&&null!==(h=h.book)&&void 0!==h&&null!==(h=h.isbn)&&void 0!==h&&h.$dirty&&this.$_.merge(g,{isbn:this.form.book.isbn}),(null!==(m=this.$v.form)&&void 0!==m&&null!==(m=m.book)&&void 0!==m&&null!==(m=m.links)&&void 0!==m&&m.$dirty||this.form.book.links.length!=(null===(f=this.books.metadata.links)||void 0===f?void 0:f.length))&&this.$_.merge(g,{links:this.form.book.links});return{series:p,book:g}}return null},async editOneShots(){if(this.single&&this.poster.uploadQueue.length>0){const t=this.books;let i=!1;for(const o of this.poster.uploadQueue.slice())try{await this.$komgaBooks.uploadThumbnail(t.id,o,o.name===this.poster.selectedThumbnail),this.deleteThumbnail(o)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message}),i=!0}if(i)return await this.getThumbnails(t),!1}if(this.single&&""!==this.poster.selectedThumbnail){const t=this.poster.selectedThumbnail,e=this.books;this.poster.bookThumbnails.find((e=>e.id===t))&&await this.$komgaBooks.markThumbnailAsSelected(e.id,t)}this.single&&this.poster.deleteQueue.length>0&&this.poster.deleteQueue.forEach((t=>this.$komgaBooks.deleteThumbnail(t.bookId,t.id)));const t=this.validateForm();if(t){const i=this.single?[this.oneshots]:this.oneshots;for(const o of i)try{await this.$komgaSeries.updateMetadata(o.series.id,t.series),await this.$komgaBooks.updateMetadata(o.book.id,t.book)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}return!0}return!1},addThumbnail(t){let e=!1;for(const i of t)this.poster.uploadQueue.find((t=>t.name===i.name))||(this.poster.uploadQueue.push(i),e||(this.selectThumbnail(i),e=!0));this.$refs.thumbnailsUpload.reset()},async getThumbnails(t){if(Array.isArray(t))return;const e=await this.$komgaBooks.getThumbnails(t.id);this.selectThumbnail(e.find((t=>t.selected))),this.poster.bookThumbnails=e},isThumbnailSelected(t){return t instanceof File?t.name===this.poster.selectedThumbnail:t.id===this.poster.selectedThumbnail},selectThumbnail(t){if(t)if(t instanceof File)this.poster.selectedThumbnail=t.name;else{const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1),this.poster.selectedThumbnail=t.id}},isThumbnailToBeDeleted(t){return!(t instanceof File)&&this.poster.deleteQueue.includes(t)},deleteThumbnail(t){if(t instanceof File){const e=this.poster.uploadQueue.indexOf(t,0);e>-1&&this.poster.uploadQueue.splice(e,1),t.name===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}else if(this.isThumbnailToBeDeleted(t)){const e=this.poster.deleteQueue.indexOf(t,0);e>-1&&this.poster.deleteQueue.splice(e,1)}else this.poster.deleteQueue.push(t),t.id===this.poster.selectedThumbnail&&(this.poster.selectedThumbnail="")}}}),cs=ls,us=(0,X.A)(cs,is,os,!1,null,"35904771",null),ds=us.exports,hs=p.Ay.extend({name:"ReusableDialogs",components:{EditOneshotDialog:ds,BulkEditBooksDialog:es,ConfirmationDialog:Wo.A,CollectionAddToDialog:tt,CollectionEditDialog:Tt,ReadListAddToDialog:Yo,ReadListEditDialog:zo,LibraryEditDialog:Mo,EditBooksDialog:po,EditSeriesDialog:wo},computed:{addToCollectionDialog:{get(){return this.$store.state.addToCollectionDialog},set(t){this.$store.dispatch("dialogAddSeriesToCollectionDisplay",t)}},addToCollectionSeriesIds(){return this.$store.state.addToCollectionSeriesIds},editCollectionDialog:{get(){return this.$store.state.editCollectionDialog},set(t){this.$store.dispatch("dialogEditCollectionDisplay",t)}},editCollection(){return this.$store.state.editCollection},deleteCollectionDialog:{get(){return this.$store.state.deleteCollectionDialog},set(t){this.$store.dispatch("dialogDeleteCollectionDisplay",t)}},collectionsToDelete(){return this.$store.state.deleteCollections},collectionsToDeleteSingle(){return!Array.isArray(this.collectionsToDelete)},addToReadListDialog:{get(){return this.$store.state.addToReadListDialog},set(t){this.$store.dispatch("dialogAddBooksToReadListDisplay",t)}},addToReadListBookIds(){return this.$store.state.addToReadListBookIds},editReadListDialog:{get(){return this.$store.state.editReadListDialog},set(t){this.$store.dispatch("dialogEditReadListDisplay",t)}},editReadList(){return this.$store.state.editReadList},deleteReadListDialog:{get(){return this.$store.state.deleteReadListDialog},set(t){this.$store.dispatch("dialogDeleteReadListDisplay",t)}},readListsToDelete(){return this.$store.state.deleteReadLists},readListsToDeleteSingle(){return!Array.isArray(this.readListsToDelete)},editLibraryDialog:{get(){return this.$store.state.editLibraryDialog},set(t){this.$store.dispatch("dialogEditLibraryDisplay",t)}},editLibrary(){return this.$store.state.editLibrary},deleteLibraryDialog:{get(){return this.$store.state.deleteLibraryDialog},set(t){this.$store.dispatch("dialogDeleteLibraryDisplay",t)}},libraryToDelete(){return this.$store.state.deleteLibrary},updateBooksDialog:{get(){return this.$store.state.updateBooksDialog},set(t){this.$store.dispatch("dialogUpdateBooksDisplay",t)}},updateBooks(){return this.$store.state.updateBooks},updateBulkBooksDialog:{get(){return this.$store.state.updateBulkBooksDialog},set(t){this.$store.dispatch("dialogUpdateBulkBooksDisplay",t)}},updateBulkBooks(){return this.$store.state.updateBulkBooks},deleteBookDialog:{get(){return this.$store.state.deleteBookDialog},set(t){this.$store.dispatch("dialogDeleteBookDisplay",t)}},booksToDelete(){return this.$store.state.deleteBooks},booksToDeleteSingle(){return!Array.isArray(this.booksToDelete)},updateOneshotsDialog:{get(){return this.$store.state.updateOneshotsDialog},set(t){this.$store.dispatch("dialogUpdateOneshotsDisplay",t)}},updateOneshots(){return this.$store.state.updateOneshots},updateSeriesDialog:{get(){return this.$store.state.updateSeriesDialog},set(t){this.$store.dispatch("dialogUpdateSeriesDisplay",t)}},updateSeries(){return this.$store.state.updateSeries},deleteSeriesDialog:{get(){return this.$store.state.deleteSeriesDialog},set(t){this.$store.dispatch("dialogDeleteSeriesDisplay",t)}},seriesToDelete(){return this.$store.state.deleteSeries},seriesToDeleteSingle(){return!Array.isArray(this.seriesToDelete)}},methods:{async deleteLibrary(){try{await this.$store.dispatch("deleteLibrary",this.libraryToDelete)}catch(t){this.$eventHub.$emit(z.ff,{message:t.message})}},async deleteReadLists(){const t=this.readListsToDeleteSingle?[this.readListsToDelete]:this.readListsToDelete;for(const i of t)try{await this.$komgaReadLists.deleteReadList(i.id)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}},async deleteCollections(){const t=this.collectionsToDeleteSingle?[this.collectionsToDelete]:this.collectionsToDelete;for(const i of t)try{await this.$komgaCollections.deleteCollection(i.id)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}},async deleteSeries(){const t=this.seriesToDeleteSingle?[this.seriesToDelete]:this.seriesToDelete;for(const i of t)try{await this.$komgaSeries.deleteSeries(i.id)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}},async deleteBooks(){const t=this.booksToDeleteSingle?[this.booksToDelete]:this.booksToDelete;for(const i of t)try{await this.$komgaBooks.deleteBook(i.id)}catch(e){this.$eventHub.$emit(z.ff,{message:e.message})}}}}),ms=hs,fs=(0,X.A)(ms,M,U,!1,null,"a82a1800",null),ps=fs.exports,gs=i(60693),bs=i(28597),ks=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(bs.A,{ref:"searchbox",attrs:{placeholder:t.$t("search.search"),"no-data-text":t.$t("searchbox.no_results"),loading:t.loading,items:t.results,"hide-no-data":!t.showResults,clearable:"",solo:"","hide-details":"","no-filter":"","return-object":"","prepend-inner-icon":"mdi-magnify","append-icon":"","item-text":"id","auto-select-first":"","search-input":t.search,"menu-props":{maxHeight:.9*t.$vuetify.breakpoint.height,minWidth:t.$vuetify.breakpoint.mdAndUp?.4*t.$vuetify.breakpoint.width:.8*t.$vuetify.breakpoint.width}},on:{"update:searchInput":function(e){t.search=e},"update:search-input":function(e){t.search=e},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.clear.apply(null,arguments)},blur:t.clear},scopedSlots:t._u([{key:"selection",fn:function(){},proxy:!0},{key:"item",fn:function(i){return["object"!==typeof i.item?[e(L.pr,[t._v(t._s(i.item))])]:t._e(),"search"===i.item.type?[e(L.pr,[t._v(t._s(t.$t("searchbox.search_all")))])]:t._e(),"series"===i.item.type?[e(y.A,{staticClass:"my-1 mx-3",attrs:{src:t.seriesThumbnailUrl(i.item.id),height:"50","max-width":"35",contain:""}},[0!==i.item.booksUnreadCount?e("span",{staticClass:"white--text pa-0 px-1 text-caption",style:{background:"orange",position:"absolute",right:0}},[t._v(" "+t._s(i.item.booksUnreadCount)+" ")]):t._e()]),e(L.pr,[e(L.UZ,[t._v(t._s(i.item.metadata.title))]),e(L.w,[t._v(t._s(t.$t("searchbox.in_library",{library:t.getLibraryName(i.item)}))+" ")]),i.item.booksMetadata.releaseDate?e(L.w,[t._v(t._s(new Intl.DateTimeFormat(t.$i18n.locale,{year:"numeric",timeZone:"UTC"}).format(new Date(i.item.booksMetadata.releaseDate)))+" ")]):t._e()],1)]:t._e(),"book"===i.item.type?[e(y.A,{staticClass:"my-1 mx-3",attrs:{src:t.bookThumbnailUrl(i.item.id),height:"50","max-width":"35",contain:""}},[t.isUnread(i.item)?e("div",{staticClass:"unread"}):t._e()]),e(L.pr,[e(L.UZ,[t._v(t._s(i.item.metadata.title))]),i.item.oneshot?t._e():e(L.w,[t._v(t._s(i.item.seriesTitle)+" - "+t._s(i.item.metadata.number)+" ")]),e(L.w,[t._v(t._s(t.$t("searchbox.in_library",{library:t.getLibraryName(i.item)}))+" ")])],1)]:t._e(),"collection"===i.item.type?[e(y.A,{staticClass:"my-1 mx-3",attrs:{src:t.collectionThumbnailUrl(i.item.id),height:"50","max-width":"35"}}),e(L.pr,[e(L.UZ,[t._v(t._s(i.item.name))])],1)]:t._e(),"readlist"===i.item.type?[e(y.A,{staticClass:"my-1 mx-3",attrs:{src:t.readListThumbnailUrl(i.item.id),height:"50","max-width":"35"}}),e(L.pr,[e(L.UZ,[t._v(t._s(i.item.name))])],1)]:t._e()]}}]),model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}})],1)},vs=[],ys=i(50536),_s=i(19447),$s=p.Ay.extend({name:"SearchBox",data:function(){return{selectedItem:null,search:null,showResults:!1,loading:!1,series:[],books:[],collections:[],readLists:[],pageSize:10}},watch:{selectedItem(t,e){t&&t.hasOwnProperty("type")&&(this.$nextTick((()=>{this.selectedItem=void 0})),"series"===t.type?this.$router.push({name:"browse-series",params:{seriesId:t.id}}):"book"===t.type&&t.oneshot?this.$router.push({name:"browse-oneshot",params:{seriesId:t.seriesId}}):"book"===t.type?this.$router.push({name:"browse-book",params:{bookId:t.id}}):"collection"===t.type?this.$router.push({name:"browse-collection",params:{collectionId:t.id}}):"readlist"===t.type?this.$router.push({name:"browse-readlist",params:{readListId:t.id}}):"search"===t.type&&this.searchDetails(),this.$refs.searchbox.blur())},search(t){this.searchItems(t)},showResults(t){!t&&this.clear()}},computed:{results(){const t=[];return this.search&&(t.push({type:"search"}),this.series.length>0&&(t.push({header:this.$tc("common.series",2).toString().toUpperCase()}),t.push(...this.series.map((t=>({...t,type:"series"}))))),this.books.length>0&&(t.push({header:this.$t("common.books").toString().toUpperCase()}),t.push(...this.books.map((t=>({...t,type:"book"}))))),this.collections.length>0&&(t.push({header:this.$t("common.collections").toString().toUpperCase()}),t.push(...this.collections.map((t=>({...t,type:"collection"}))))),this.readLists.length>0&&(t.push({header:this.$t("common.readlists").toString().toUpperCase()}),t.push(...this.readLists.map((t=>({...t,type:"readlist"})))))),t}},methods:{getLibraryName(t){return this.$store.getters.getLibraryById(t.libraryId).name},searchItems:(0,lo.debounce)((async function(t){t?(this.loading=!0,this.series=(await this.$komgaSeries.getSeriesList({fullTextSearch:t,condition:new _s.WL(new _s.ch)},{size:this.pageSize})).content,this.books=(await this.$komgaBooks.getBooksList({fullTextSearch:t},{size:this.pageSize})).content,this.collections=(await this.$komgaCollections.getCollections(void 0,{size:this.pageSize},t)).content,this.readLists=(await this.$komgaReadLists.getReadLists(void 0,{size:this.pageSize},t)).content,this.showResults=!0,this.loading=!1):this.clear()}),500),clear(){this.search=null,this.showResults=!1,this.series=[],this.books=[],this.collections=[],this.readLists=[]},searchDetails(){const t=this.search;this.clear(),this.$router.push({name:"search",query:{q:t}}).catch((t=>{}))},isUnread(t){return(0,ys.wP)(t)===vo.RJ.UNREAD},seriesThumbnailUrl(t){return(0,ut.TJ)(t)},bookThumbnailUrl(t){return(0,ut.HP)(t)},collectionThumbnailUrl(t){return(0,ut.qY)(t)},readListThumbnailUrl(t){return(0,ut._0)(t)}}}),As=$s,xs=(0,X.A)(As,ks,vs,!1,null,"04261bcc",null),Ts=xs.exports,Ls=i(50337),ws=i(67036),Ss=i(48166),Ds=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(Ss.A,{attrs:{color:t.snackbar.color,bottom:"","multi-line":"",vertical:t.snackbar.vertical,timeout:t.snackbar.timeout},scopedSlots:t._u([{key:"action",fn:function({attrs:i}){return[t.snackbar.goTo?e(f.A,t._b({attrs:{color:"secondary",text:""},on:{click:function(e){t.snackbar.goTo.click(),t.close()}}},"v-btn",i,!1),[t._v(" "+t._s(t.snackbar.goTo.text)+" ")]):t._e(),e(f.A,t._b({attrs:{text:""},on:{click:t.close}},"v-btn",i,!1),[t._v(t._s(t.$t("common.dismiss"))+" ")])]}}]),model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[e("p",[t._v(t._s(t.snackbar.text))]),e("p",[t._v(t._s(t.snackbar.text2))])])},Cs=[],Rs=i(23850),Es=p.Ay.extend({name:"ToasterNotification",data:function(){return{queue:[],snackbar:{show:!1,vertical:!1,text:"",text2:"",color:void 0,timeout:5e3,goTo:{text:"",click:()=>{}}}}},created(){this.$eventHub.$on(z.t6,this.onBookImported),this.$eventHub.$on(z.ff,this.onError),this.$eventHub.$on(z.yp,this.onNotification)},beforeDestroy(){this.$eventHub.$off(z.t6,this.onBookImported),this.$eventHub.$off(z.ff,this.onError),this.$eventHub.$off(z.yp,this.onNotification)},watch:{"snackbar.show"(t){t||setTimeout((()=>this.next()),1e3)},queue(t){t.length>0&&this.next()}},methods:{close(){this.snackbar.show=!1},next(){if(!this.snackbar.show&&this.queue.length>0){const t=this.queue.shift();this.snackbar.text=t.text,this.snackbar.text2=t.text2,this.snackbar.goTo=t.goTo,this.snackbar.color=t.color,this.snackbar.vertical=void 0!==t.text2,this.snackbar.show=!0}},onError(t){this.queue.push({text:t.message,color:"error"})},onNotification(t){this.queue.push({text:t.message,text2:t.text2,goTo:t.goTo})},async onBookImported(t){if(t.success&&t.bookId){const e=await this.$komgaBooks.getBook(t.bookId);this.queue.push({text:this.$t("book_import.notification.import_successful",{book:e.metadata.title}).toString(),text2:this.$t("book_import.notification.source_file",{file:t.sourceFile}).toString(),goTo:{text:this.$t("book_import.notification.go_to_book").toString(),click:()=>this.$router.push({name:"browse-book",params:{bookId:e.id}})}})}else this.queue.push({text:this.$t("book_import.notification.import_failure",{file:t.sourceFile}).toString(),text2:(0,Rs.q)(t.message||""),color:"error"})}}}),Bs=Es,Is=(0,X.A)(Bs,Ds,Cs,!1,null,"4d0dba5a",null),Os=Is.exports,Ms=i(88297),Us=p.Ay.extend({name:"HomeView",components:{LibrariesActionsMenu:Ms.A,ToasterNotification:Os,LibraryActionsMenu:gs.A,SearchBox:Ts,ReusableDialogs:ps},data:function(){return{LIBRARIES_ALL:ws._,drawerVisible:this.$vuetify.breakpoint.lgAndUp,locales:this.$i18n.availableLocales.map((t=>({text:this.$i18n.t("common.locale_name",t),value:t}))),expandSettings:!1,expandDuplicatePages:!1,expandMediaManagement:!1,expandImport:!1,expandAccount:!1}},async created(){this.isAdmin&&(this.$actuator.getInfo().then((t=>this.$store.commit("setActuatorInfo",t))),this.$komgaBooks.getBooksList({condition:new _s.a4([new _s.gX(new _s.Tr(vo.nl.ERROR)),new _s.gX(new _s.Tr(vo.nl.UNSUPPORTED))])},{size:0}).then((t=>this.$store.commit("setBooksToCheck",t.totalElements))),this.$komgaAnnouncements.getAnnouncements().then((t=>this.$store.commit("setAnnouncements",t))),this.$komgaReleases.getReleases().then((t=>this.$store.commit("setReleases",t)))),this.checkRoute(this.$route)},watch:{$route(t,e){this.checkRoute(t)}},computed:{taskCount(){return this.$store.state.komgaSse.taskCount},taskCountByType(){return this.$store.state.komgaSse.taskCountByType},libraries(){return this.$store.state.komgaLibraries.libraries},isAdmin(){return this.$store.getters.meAdmin},themes(){return[{text:this.$i18n.t(Ls.S.LIGHT),value:Ls.S.LIGHT},{text:this.$i18n.t(Ls.S.DARK),value:Ls.S.DARK},{text:this.$i18n.t(Ls.S.SYSTEM),value:Ls.S.SYSTEM}]},themeIcon(){switch(this.theme){case Ls.S.LIGHT:return"mdi-brightness-7";case Ls.S.DARK:return"mdi-brightness-3";case Ls.S.SYSTEM:return"mdi-brightness-auto"}return""},theme:{get:function(){return this.$store.state.persistedState.theme},set:function(t){Object.values(Ls.S).includes(t)&&this.$store.commit("setTheme",t)}},locale:{get:function(){return this.$i18n.locale},set:function(t){this.$i18n.availableLocales.includes(t)&&this.$store.commit("setLocale",t)}}},methods:{checkRoute(t){this.expandSettings=t.path.includes("/settings/"),this.expandMediaManagement=t.path.includes("/media-management/"),this.expandImport=t.path.includes("/import/"),this.expandDuplicatePages=t.path.includes("/duplicate-pages/"),this.expandAccount=t.path.includes("/account/")},toggleDrawer(){this.drawerVisible=!this.drawerVisible},logout(){this.$store.dispatch("logout"),this.$router.push({name:"login"})},addLibrary(){this.$store.dispatch("dialogAddLibrary")}}}),Fs=Us,Ps=(0,X.A)(Fs,I,O,!1,null,null,null),Ns=Ps.exports},75723:function(t,e,i){i.d(e,{R:function(){return s}});var o=i(2543);function s(t){return(0,o.mapValues)((0,o.groupBy)(t,"role"),(t=>t.map((t=>t.name))))}},50536:function(t,e,i){i.d(e,{mq:function(){return r},wP:function(){return s},yW:function(){return a}});var o=i(79957);function s(t){var e,i;return null!==(e=t.readProgress)&&void 0!==e&&e.completed?o.RJ.READ:!1===(null===(i=t.readProgress)||void 0===i?void 0:i.completed)?o.RJ.IN_PROGRESS:o.RJ.UNREAD}function r(t){var e,i,o;return null!==(e=t.readProgress)&&void 0!==e&&e.completed?100:!1===(null===(i=t.readProgress)||void 0===i?void 0:i.completed)?(null===(o=t.readProgress)||void 0===o?void 0:o.page)/t.media.pagesCount*100:0}function a(t){var e,i;return!1===(null===(e=t.readProgress)||void 0===e?void 0:e.completed)?t.media.pagesCount-(null===(i=t.readProgress)||void 0===i?void 0:i.page):0}},23850:function(t,e,i){i.d(e,{q:function(){return s}});i(62554);var o=i(80061);function s(t){const e=t.match(/ERR_\d{4}/g);let i=t;return e&&e.forEach((t=>i=i.replace(t,o.A.t(`error_codes.${t}`).toString()))),i}},26949:function(t,e,i){i.d(e,{W:function(){return w},K:function(){return D}});
/**
 * filesize
 *
 * @copyright 2023 Jason Mulligan <jason.mulligan@avoidwork.com>
 * @license BSD-3-Clause
 * @version 10.0.12
 */
const o="array",s="bit",r="bits",a="byte",n="bytes",l="",c="exponent",u="function",d="iec",h="Invalid number",m="Invalid rounding method",f="jedec",p="object",g=".",b="round",k="s",v="kbit",y="kB",_=" ",$="string",A="0",x={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function T(t,{bits:e=!1,pad:i=!1,base:T=-1,round:L=2,locale:w=l,localeOptions:S={},separator:D=l,spacer:C=_,symbols:R={},standard:E=l,output:B=$,fullform:I=!1,fullforms:O=[],exponent:M=-1,roundingMethod:U=b,precision:F=0}={}){let P=M,N=Number(t),q=[],Y=0,Q=l;-1===T&&0===E.length?(T=10,E=f):-1===T&&E.length>0?(E=E===d?d:f,T=E===d?2:10):(T=2===T?2:10,E=10===T||E===f?f:d);const H=10===T?1e3:1024,V=!0===I,j=N<0,Z=Math[U];if("bigint"!==typeof t&&isNaN(t))throw new TypeError(h);if(typeof Z!==u)throw new TypeError(m);if(j&&(N=-N),(-1===P||isNaN(P))&&(P=Math.floor(Math.log(N)/Math.log(H)),P<0&&(P=0)),P>8&&(F>0&&(F+=8-P),P=8),B===c)return P;if(0===N)q[0]=0,Q=q[1]=x.symbol[E][e?r:n][P];else{Y=N/(2===T?Math.pow(2,10*P):Math.pow(1e3,P)),e&&(Y*=8,Y>=H&&P<8&&(Y/=H,P++));const t=Math.pow(10,P>0?L:0);q[0]=Z(Y*t)/t,q[0]===H&&P<8&&-1===M&&(q[0]=1,P++),Q=q[1]=10===T&&1===P?e?v:y:x.symbol[E][e?r:n][P]}if(j&&(q[0]=-q[0]),F>0&&(q[0]=q[0].toPrecision(F)),q[1]=R[q[1]]||q[1],!0===w?q[0]=q[0].toLocaleString():w.length>0?q[0]=q[0].toLocaleString(w,S):D.length>0&&(q[0]=q[0].toString().replace(g,D)),i&&!1===Number.isInteger(q[0])&&L>0){const t=D||g,e=q[0].toString().split(t),i=e[1]||l,o=i.length,s=L-o;q[0]=`${e[0]}${t}${i.padEnd(o+s,A)}`}return V&&(q[1]=O[P]?O[P]:x.fullform[E][P]+(e?s:a)+(1===q[0]?l:k)),B===o?q:B===p?{value:q[0],symbol:q[1],exponent:P,unit:Q}:q.join(C)}function L({bits:t=!1,pad:e=!1,base:i=-1,round:o=2,locale:s=l,localeOptions:r={},separator:a=l,spacer:n=_,symbols:c={},standard:u=l,output:d=$,fullform:h=!1,fullforms:m=[],exponent:f=-1,roundingMethod:p=b,precision:g=0}={}){return l=>T(l,{bits:t,pad:e,base:i,round:o,locale:s,localeOptions:r,separator:a,spacer:n,symbols:c,standard:u,output:d,fullform:h,fullforms:m,exponent:f,roundingMethod:p,precision:g})}async function w(t,e=t,i="image/jpeg",o={}){const s=await fetch(t,o),r=await s.blob();return new File([r],e,{type:r.type||i})}const S=L({round:1});function D(t){if(t)return S(t)}},79957:function(t,e,i){var o,s,r,a,n;i.d(e,{Er:function(){return n},RJ:function(){return r},Zd:function(){return a},nl:function(){return s},s3:function(){return o}}),function(t){t["LEFT_TO_RIGHT"]="LEFT_TO_RIGHT",t["RIGHT_TO_LEFT"]="RIGHT_TO_LEFT",t["VERTICAL"]="VERTICAL",t["WEBTOON"]="WEBTOON"}(o||(o={})),function(t){t["READY"]="READY",t["UNKNOWN"]="UNKNOWN",t["ERROR"]="ERROR",t["UNSUPPORTED"]="UNSUPPORTED",t["OUTDATED"]="OUTDATED"}(s||(s={})),function(t){t["UNREAD"]="UNREAD",t["IN_PROGRESS"]="IN_PROGRESS",t["READ"]="READ"}(r||(r={})),function(t){t["MOVE"]="MOVE",t["COPY"]="COPY",t["HARDLINK"]="HARDLINK"}(a||(a={})),function(t){t["DIVINA"]="DIVINA",t["PDF"]="PDF",t["EPUB"]="EPUB"}(n||(n={}))},41834:function(t,e,i){i.d(e,{m:function(){return o},q:function(){return r}});var o,s=i(80061);function r(){return Object.values(o).map((t=>({name:s.A.t(`enums.series_status.${t}`),value:t})))}(function(t){t["ENDED"]="ENDED",t["ONGOING"]="ONGOING",t["ABANDONED"]="ABANDONED",t["HIATUS"]="HIATUS"})(o||(o={}))},19447:function(t,e,i){i.d(e,{$Z:function(){return x},BK:function(){return p},CM:function(){return v},Cg:function(){return R},Dg:function(){return T},F2:function(){return $},FY:function(){return a},H2:function(){return f},KU:function(){return c},NE:function(){return B},NY:function(){return l},Ne:function(){return C},SA:function(){return _},Tr:function(){return w},Vf:function(){return y},WL:function(){return A},YX:function(){return L},_f:function(){return S},a4:function(){return r},cQ:function(){return D},ch:function(){return I},f$:function(){return d},gS:function(){return M},gX:function(){return m},iT:function(){return g},kq:function(){return u},oF:function(){return b},oy:function(){return k},pF:function(){return O},qE:function(){return h},t7:function(){return E},y:function(){return n}});var o,s=i(32362);class r{constructor(t){(0,s.A)(this,"anyOf",void 0),this.anyOf=t}}class a{constructor(t){(0,s.A)(this,"allOf",void 0),this.allOf=t}}class n{constructor(t){(0,s.A)(this,"anyOf",void 0),this.anyOf=t}}class l{constructor(t){(0,s.A)(this,"allOf",void 0),this.allOf=t}}class c{constructor(t){(0,s.A)(this,"libraryId",void 0),this.libraryId=t}}class u{constructor(t){(0,s.A)(this,"seriesId",void 0),this.seriesId=t}}class d{constructor(t){(0,s.A)(this,"seriesStatus",void 0),this.seriesStatus=t}}class h{constructor(t){(0,s.A)(this,"readStatus",void 0),this.readStatus=t}}class m{constructor(t){(0,s.A)(this,"mediaStatus",void 0),this.mediaStatus=t}}class f{constructor(t){(0,s.A)(this,"mediaProfile",void 0),this.mediaProfile=t}}class p{constructor(t){(0,s.A)(this,"genre",void 0),this.genre=t}}class g{constructor(t){(0,s.A)(this,"tag",void 0),this.tag=t}}class b{constructor(t){(0,s.A)(this,"language",void 0),this.language=t}}class k{constructor(t){(0,s.A)(this,"publisher",void 0),this.publisher=t}}class v{constructor(t){(0,s.A)(this,"ageRating",void 0),this.ageRating=t}}class y{constructor(t){(0,s.A)(this,"releaseDate",void 0),this.releaseDate=t}}class _{constructor(t){(0,s.A)(this,"sharingLabel",void 0),this.sharingLabel=t}}class ${constructor(t){(0,s.A)(this,"complete",void 0),this.complete=t}}class A{constructor(t){(0,s.A)(this,"oneShot",void 0),this.oneShot=t}}class x{constructor(t){(0,s.A)(this,"author",void 0),this.author=t}}class T{constructor(t){(0,s.A)(this,"poster",void 0),this.poster=t}}class L{constructor(t){(0,s.A)(this,"titleSort",void 0),this.titleSort=t}}(function(t){t["GENERATED"]="GENERATED",t["SIDECAR"]="SIDECAR",t["USER_UPLOADED"]="USER_UPLOADED"})(o||(o={}));class w{constructor(t){(0,s.A)(this,"operator","is"),(0,s.A)(this,"value",void 0),this.value=t}}class S{constructor(t){(0,s.A)(this,"operator","isNot"),(0,s.A)(this,"value",void 0),this.value=t}}class D{constructor(t){(0,s.A)(this,"operator","before"),(0,s.A)(this,"dateTime",void 0),this.dateTime=t}}class C{constructor(t){(0,s.A)(this,"operator","after"),(0,s.A)(this,"dateTime",void 0),this.dateTime=t}}class R{constructor(){(0,s.A)(this,"operator","isNull")}}class E{constructor(){(0,s.A)(this,"operator","isNotNull")}}class B{constructor(){(0,s.A)(this,"operator","isTrue")}}class I{constructor(){(0,s.A)(this,"operator","isFalse")}}class O{constructor(t){(0,s.A)(this,"operator","beginsWith"),(0,s.A)(this,"value",void 0),this.value=t}}class M{constructor(t){(0,s.A)(this,"operator","doesNotBeginWith"),(0,s.A)(this,"value",void 0),this.value=t}}},89233:function(t,e,i){var o=i(12071).PROPER,s=i(92074),r=i(55073),a="​᠎";t.exports=function(t){return s((function(){return!!r[t]()||a[t]()!==a||o&&r[t].name!==t}))}},69163:function(t,e,i){var o=i(30281),s=i(71229),r=i(95362),a=i(55073),n=o("".replace),l=RegExp("^["+a+"]+"),c=RegExp("(^|[^"+a+"])["+a+"]+$"),u=function(t){return function(e){var i=r(s(e));return 1&t&&(i=n(i,l,"")),2&t&&(i=n(i,c,"$1")),i}};t.exports={start:u(1),end:u(2),trim:u(3)}},55073:function(t){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},95843:function(t,e,i){var o=i(40298);o("flat")},73719:function(t,e,i){var o=i(51605),s=i(30200),r=i(75282);o({global:!0},{Reflect:{}}),r(s.Reflect,"Reflect",!0)},68329:function(t,e,i){var o=i(51605),s=i(69163).trim,r=i(89233);o({target:"String",proto:!0,forced:r("trim")},{trim:function(){return s(this)}})},90623:function(t,e,i){i.d(e,{A:function(){return d}});var o=i(37858),s=i(39945),r=i(54582),a=i(38937),n=i(81582),l=i(7038),c=i(72006),u=i(73803),d=(0,c.A)(o.A,a.A,l.A).extend({name:"v-alert",props:{border:{type:String,validator(t){return["top","right","bottom","left"].includes(t)}},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator(t){return"string"===typeof t||!1===t}},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator(t){return["info","error","success","warning"].includes(t)}},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let t={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(t=this.setBackgroundColor(this.computedColor,t),t.class["v-alert__border--has-color"]=!0),this.$createElement("div",t)},__cachedDismissible(){if(!this.dismissible)return null;const t=this.iconColor;return this.$createElement(s.A,{staticClass:"v-alert__dismissible",props:{color:t,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(r.A,{props:{color:t}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(r.A,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const t={...o.A.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(t[`v-alert--border-${this.border}`]=!0),t},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"===typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||n.A.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,u.q4)("outline","outlined",this)},methods:{genWrapper(){const t=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible],e={staticClass:"v-alert__wrapper"};return this.$createElement("div",e,t)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let t={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};if(!this.coloredBorder){const e=this.hasText?this.setTextColor:this.setBackgroundColor;t=e(this.computedColor,t)}return this.$createElement("div",t,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(t){const e=this.genAlert();return this.transition?t("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[e]):e}})},47623:function(t,e,i){i.d(e,{A:function(){return d}});var o=i(16684),s=i(78956),r=i(81582),a=i(38937),n=i(7038),l=i(47222),c=i(72006),u=i(69463),d=(0,c.A)(s.A,(0,l.P)(["left","bottom"]),r.A,a.A,n.A).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(t){return`calc(100% - ${(0,u.Dg)(t||this.offset)})`},genBadge(){const t=this.$vuetify.lang,e=this.$attrs["aria-label"]||t.t(this.label),i=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":e,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),o=this.$createElement("span",i,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[o]):o},genBadgeContent(){if(this.dot)return;const t=(0,u.$c)(this,"badge");return t||(this.content?String(this.content):this.icon?this.$createElement(o.A,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(t){const e=[this.genBadgeWrapper()],i=[(0,u.$c)(this)],{"aria-atomic":o,"aria-label":s,"aria-live":r,role:a,title:n,...l}=this.$attrs;return this.inline&&this.left?i.unshift(e):i.push(e),t("span",{staticClass:"v-badge",attrs:l,class:this.classes},i)}})},57471:function(t,e,i){i.d(e,{A:function(){return a}});var o=i(9854),s=i(78956),r=i(72006),a=(0,r.A)(o.Ql,s.A).extend({name:"v-chip-group",provide(){return{chipGroup:this}},props:{column:Boolean},computed:{classes(){return{...o.Ql.options.computed.classes.call(this),"v-chip-group":!0,"v-chip-group--column":this.column}}},watch:{column(t){t&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData(){return this.setTextColor(this.color,{...o.Ql.options.methods.genData.call(this)})}}})},81737:function(t,e,i){i(29);var o=i(86315),s=i(28597),r=i(69463);e.A=s.A.extend({name:"v-combobox",props:{delimiters:{type:Array,default:()=>[]},returnObject:{type:Boolean,default:!0}},data:()=>({editingIndex:-1}),computed:{computedCounterValue(){return this.multiple?this.selectedItems.length:(this.internalSearch||"").toString().length},hasSlot(){return o.A.options.computed.hasSlot.call(this)||this.multiple},isAnyValueAllowed(){return!0},menuCanShow(){return!!this.isFocused&&(this.hasDisplayedItems||!!this.$slots["no-data"]&&!this.hideNoData)},searchIsDirty(){return null!=this.internalSearch}},methods:{onInternalSearchChanged(t){if(t&&this.multiple&&this.delimiters.length){const e=this.delimiters.find((e=>t.endsWith(e)));null!=e&&(this.internalSearch=t.slice(0,t.length-e.length),this.updateTags())}this.updateMenuDimensions()},genInput(){const t=s.A.options.methods.genInput.call(this);return delete t.data.attrs.name,t.data.on.paste=this.onPaste,t},genChipSelection(t,e){const i=o.A.options.methods.genChipSelection.call(this,t,e);return this.multiple&&(i.componentOptions.listeners={...i.componentOptions.listeners,dblclick:()=>{this.editingIndex=e,this.internalSearch=this.getText(t),this.selectedIndex=-1}}),i},onChipInput(t){o.A.options.methods.onChipInput.call(this,t),this.editingIndex=-1},onEnterDown(t){t.preventDefault(),this.getMenuIndex()>-1||this.$nextTick(this.updateSelf)},onKeyDown(t){const e=t.keyCode;!t.ctrlKey&&[r.uP.home,r.uP.end].includes(e)||o.A.options.methods.onKeyDown.call(this,t),this.multiple&&e===r.uP.left&&0===this.$refs.input.selectionStart?this.updateSelf():e===r.uP.enter&&this.onEnterDown(t),this.changeSelectedIndex(e)},onTabDown(t){if(this.multiple&&this.internalSearch&&-1===this.getMenuIndex())return t.preventDefault(),t.stopPropagation(),this.updateTags();s.A.options.methods.onTabDown.call(this,t)},selectItem(t){this.editingIndex>-1?this.updateEditing():(s.A.options.methods.selectItem.call(this,t),this.internalSearch&&this.multiple&&this.getText(t).toLocaleLowerCase().includes(this.internalSearch.toLocaleLowerCase())&&(this.internalSearch=null))},setSelectedItems(){null==this.internalValue||""===this.internalValue?this.selectedItems=[]:this.selectedItems=this.multiple?this.internalValue:[this.internalValue]},setValue(t){o.A.options.methods.setValue.call(this,void 0===t?this.internalSearch:t)},updateEditing(){const t=this.internalValue.slice(),e=this.selectedItems.findIndex((t=>this.getText(t)===this.internalSearch));if(e>-1){const i="object"===typeof t[e]?Object.assign({},t[e]):t[e];t.splice(e,1),t.push(i)}else t[this.editingIndex]=this.internalSearch;this.setValue(t),this.editingIndex=-1,this.internalSearch=null},updateCombobox(){if(!this.searchIsDirty)return;this.internalSearch!==this.getText(this.internalValue)&&this.setValue();const t=Boolean(this.$scopedSlots.selection)||this.hasChips;t&&(this.internalSearch=null)},updateSelf(){this.multiple?this.updateTags():this.updateCombobox()},updateTags(){const t=this.getMenuIndex();if(t<0&&!this.searchIsDirty||!this.internalSearch)return;if(this.editingIndex>-1)return this.updateEditing();const e=this.selectedItems.findIndex((t=>this.internalSearch===this.getText(t))),i=e>-1&&"object"===typeof this.selectedItems[e]?Object.assign({},this.selectedItems[e]):this.internalSearch;if(e>-1){const t=this.internalValue.slice();t.splice(e,1),this.setValue(t)}if(t>-1)return this.internalSearch=null;this.selectItem(i),this.internalSearch=null},onPaste(t){var e;if(this.$emit("paste",t),!this.multiple||this.searchIsDirty)return;const i=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/vnd.vuetify.autocomplete.item+plain");i&&-1===this.findExistingIndex(i)&&(t.preventDefault(),o.A.options.methods.selectItem.call(this,i))},clearableCallback(){this.editingIndex=-1,s.A.options.methods.clearableCallback.call(this)}}})},63714:function(t,e,i){i.d(e,{A:function(){return a}});var o=i(68069),s=i(72006);const r=(0,s.A)(o.A);var a=r.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...o.A.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,i=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(i,e)+"px"},genInput(){const t=o.A.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){o.A.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})},88172:function(t,e,i){function o(t,e,i){const{self:o=!1}=e.modifiers||{},s=e.value,r="object"===typeof s&&s.options||{passive:!0},a="function"===typeof s||"handleEvent"in s?s:s.handler,n=o?t:e.arg?document.querySelector(e.arg):window;n&&(n.addEventListener("scroll",a,r),t._onScroll=Object(t._onScroll),t._onScroll[i.context._uid]={handler:a,options:r,target:o?void 0:n})}function s(t,e,i){var o;if(!(null===(o=t._onScroll)||void 0===o?void 0:o[i.context._uid]))return;const{handler:s,options:r,target:a=t}=t._onScroll[i.context._uid];a.removeEventListener("scroll",s,r),delete t._onScroll[i.context._uid]}i.d(e,{O:function(){return r}});const r={inserted:o,unbind:s};e.A=r},86728:function(t,e,i){var o=i(88172),s=i(73803),r=i(85471);e.A=r.Ay.extend({name:"scrollable",directives:{Scroll:o.O},props:{scrollTarget:String,scrollThreshold:[String,Number]},data:()=>({currentScroll:0,currentThreshold:0,isActive:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}),computed:{canScroll(){return"undefined"!==typeof window},computedScrollThreshold(){return this.scrollThreshold?Number(this.scrollThreshold):300}},watch:{isScrollingUp(){this.savedScroll=this.savedScroll||this.currentScroll},isActive(){this.savedScroll=0}},mounted(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget),this.target||(0,s.OP)(`Unable to locate element with identifier ${this.scrollTarget}`,this))},methods:{onScroll(){this.canScroll&&(this.previousScroll=this.currentScroll,this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.currentThreshold=Math.abs(this.currentScroll-this.computedScrollThreshold),this.$nextTick((()=>{Math.abs(this.currentScroll-this.savedScroll)>this.computedScrollThreshold&&this.thresholdMet()})))},thresholdMet(){}}})},7038:function(t,e,i){var o=i(85471);e.A=o.Ay.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},63935:function(t,e,i){t.exports=i.p+"img/logo.5a9779c6.svg"}}]);
//# sourceMappingURL=home.83df0048.js.map