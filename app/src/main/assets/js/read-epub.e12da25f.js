(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[7762],{8547:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Ay:function(){return src_default}});var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__require=(e=>__webpack_require__(73614))(),__esm=(e,t)=>function(){return e&&(t=(0,e[__getOwnPropNames(e)[0]])(e=0)),t},__commonJS=(e,t)=>function(){return t||(0,e[__getOwnPropNames(e)[0]])((t={exports:{}}).exports,t),t.exports},__export=(e,t)=>{for(var r in t)__defProp(e,r,{get:t[r],enumerable:!0})},__copyProps=(e,t,r,n)=>{if(t&&"object"===typeof t||"function"===typeof t)for(let i of __getOwnPropNames(t))__hasOwnProp.call(e,i)||i===r||__defProp(e,i,{get:()=>t[i],enumerable:!(n=__getOwnPropDesc(t,i))||n.enumerable});return e},__toESM=(e,t,r)=>(r=null!=e?__create(__getProtoOf(e)):{},__copyProps(!t&&e&&e.__esModule?r:__defProp(r,"default",{value:e,enumerable:!0}),e)),__toCommonJS=e=>__copyProps(__defProp({},"__esModule",{value:!0}),e),__decorateClass=(e,t,r,n)=>{for(var i,o=n>1?void 0:n?__getOwnPropDesc(t,r):t,s=e.length-1;s>=0;s--)(i=e[s])&&(o=(n?i(t,r,o):i(o))||o);return n&&o&&__defProp(t,r,o),o},__publicField=(e,t,r)=>(__defNormalProp(e,"symbol"!==typeof t?t+"":t,r),r),__accessCheck=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},__privateGet=(e,t,r)=>(__accessCheck(e,t,"read from private field"),r?r.call(e):t.get(e)),__privateAdd=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},__privateSet=(e,t,r,n)=>(__accessCheck(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),__privateWrapper=(e,t,r,n)=>({set _(n){__privateSet(e,t,n,r)},get _(){return __privateGet(e,t,n)}}),__privateMethod=(e,t,r)=>(__accessCheck(e,t,"access private method"),r),require_browser=__commonJS({"node_modules/process/browser.js"(e,t){init_polyfills();var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}function l(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(r){return n.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"===typeof clearTimeout?clearTimeout:s}catch(e){n=s}})();var u,c=[],d=!1,h=-1;function p(){d&&u&&(d=!1,u.length?c=u.concat(c):h=-1,c.length&&f())}function f(){if(!d){var e=a(p);d=!0;var t=c.length;while(t){u=c,c=[];while(++h<t)u&&u[h].run();h=-1,t=c.length}u=null,d=!1,l(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new g(e,t)),1!==c.length||d||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}}),require_shams=__commonJS({"node_modules/has-symbols/shams.js"(e,t){init_polyfills(),t.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;var n=42;for(t in e[t]=n,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==n||!0!==o.enumerable)return!1}return!0}}}),require_has_symbols=__commonJS({"node_modules/has-symbols/index.js"(e,t){init_polyfills();var r="undefined"!==typeof Symbol&&Symbol,n=require_shams();t.exports=function(){return"function"===typeof r&&("function"===typeof Symbol&&("symbol"===typeof r("foo")&&("symbol"===typeof Symbol("bar")&&n())))}}}),require_has_proto=__commonJS({"node_modules/has-proto/index.js"(e,t){init_polyfills();var r={foo:{}},n=Object;t.exports=function(){return{__proto__:r}.foo===r.foo&&!({__proto__:null}instanceof n)}}}),require_implementation=__commonJS({"node_modules/function-bind/implementation.js"(e,t){init_polyfills();var r="Function.prototype.bind called on incompatible ",n=Object.prototype.toString,i=Math.max,o="[object Function]",s=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var i=0;i<t.length;i+=1)r[i+e.length]=t[i];return r},a=function(e,t){for(var r=[],n=t||0,i=0;n<e.length;n+=1,i+=1)r[i]=e[n];return r},l=function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r};t.exports=function(e){var t=this;if("function"!==typeof t||n.apply(t)!==o)throw new TypeError(r+t);for(var u,c=a(arguments,1),d=function(){if(this instanceof u){var r=t.apply(this,s(c,arguments));return Object(r)===r?r:this}return t.apply(e,s(c,arguments))},h=i(0,t.length-c.length),p=[],f=0;f<h;f++)p[f]="$"+f;if(u=Function("binder","return function ("+l(p,",")+"){ return binder.apply(this,arguments); }")(d),t.prototype){var g=function(){};g.prototype=t.prototype,u.prototype=new g,g.prototype=null}return u}}}),require_function_bind=__commonJS({"node_modules/function-bind/index.js"(e,t){init_polyfills();var r=require_implementation();t.exports=Function.prototype.bind||r}}),require_src=__commonJS({"node_modules/has/src/index.js"(e,t){init_polyfills();var r=require_function_bind();t.exports=r.call(Function.call,Object.prototype.hasOwnProperty)}}),require_get_intrinsic=__commonJS({"node_modules/get-intrinsic/index.js"(e,t){var r;init_polyfills();var n=SyntaxError,i=Function,o=TypeError,s=function(e){try{return i('"use strict"; return ('+e+").constructor;")()}catch(t){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(P){a=null}var l,u=function(){throw new o},c=a?function(){try{return u}catch(e){try{return a(arguments,"callee").get}catch(t){return u}}}():u,d=require_has_symbols()(),h=require_has_proto()(),p=Object.getPrototypeOf||(h?function(e){return e.__proto__}:null),f={},g="undefined"!==typeof Uint8Array&&p?p(Uint8Array):r,m={"%AggregateError%":"undefined"===typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":d&&p?p([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"===typeof Atomics?r:Atomics,"%BigInt%":"undefined"===typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"===typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"===typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":i,"%GeneratorFunction%":f,"%Int8Array%":"undefined"===typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d&&p?p(p([][Symbol.iterator]())):r,"%JSON%":"object"===typeof JSON?JSON:r,"%Map%":"undefined"===typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&d&&p?p((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?r:Promise,"%Proxy%":"undefined"===typeof Proxy?r:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&d&&p?p((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d&&p?p(""[Symbol.iterator]()):r,"%Symbol%":d?Symbol:r,"%SyntaxError%":n,"%ThrowTypeError%":c,"%TypedArray%":g,"%TypeError%":o,"%Uint8Array%":"undefined"===typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?r:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?r:WeakSet};if(p)try{null.error}catch(P){l=p(p(P)),m["%Error.prototype%"]=l}var v=function e(t){var r;if("%AsyncFunction%"===t)r=s("async function () {}");else if("%GeneratorFunction%"===t)r=s("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=s("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var i=e("%AsyncGenerator%");i&&p&&(r=p(i.prototype))}return m[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=require_function_bind(),b=require_src(),S=_.call(Function.call,Array.prototype.concat),w=_.call(Function.apply,Array.prototype.splice),C=_.call(Function.call,String.prototype.replace),A=_.call(Function.call,String.prototype.slice),E=_.call(Function.call,RegExp.prototype.exec),x=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,k=function(e){var t=A(e,0,1),r=A(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var i=[];return C(e,x,(function(e,t,r,n){i[i.length]=r?C(n,T,"$1"):t||e})),i},O=function(e,t){var r,i=e;if(b(y,i)&&(r=y[i],i="%"+r[0]+"%"),b(m,i)){var s=m[i];if(s===f&&(s=v(i)),"undefined"===typeof s&&!t)throw new o("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:s}}throw new n("intrinsic "+e+" does not exist!")};t.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new o("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new o('"allowMissing" argument must be a boolean');if(null===E(/^%?[^%]*%?$/,e))throw new n("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=k(e),i=r.length>0?r[0]:"",s=O("%"+i+"%",t),l=s.name,u=s.value,c=!1,d=s.alias;d&&(i=d[0],w(r,S([0,1],d)));for(var h=1,p=!0;h<r.length;h+=1){var f=r[h],g=A(f,0,1),v=A(f,-1);if(('"'===g||"'"===g||"`"===g||'"'===v||"'"===v||"`"===v)&&g!==v)throw new n("property names with quotes must have matching quotes");if("constructor"!==f&&p||(c=!0),i+="."+f,l="%"+i+"%",b(m,l))u=m[l];else if(null!=u){if(!(f in u)){if(!t)throw new o("base intrinsic for "+e+" exists, but the property is not available.");return}if(a&&h+1>=r.length){var y=a(u,f);p=!!y,u=p&&"get"in y&&!("originalValue"in y.get)?y.get:u[f]}else p=b(u,f),u=u[f];p&&!c&&(m[l]=u)}}return u}}}),require_call_bind=__commonJS({"node_modules/call-bind/index.js"(e,t){init_polyfills();var r=require_function_bind(),n=require_get_intrinsic(),i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),s=n("%Reflect.apply%",!0)||r.call(o,i),a=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),u=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch(d){l=null}t.exports=function(e){var t=s(r,o,arguments);if(a&&l){var n=a(t,"length");n.configurable&&l(t,"length",{value:1+u(0,e.length-(arguments.length-1))})}return t};var c=function(){return s(r,i,arguments)};l?l(t.exports,"apply",{value:c}):t.exports.apply=c}}),require_callBound=__commonJS({"node_modules/call-bind/callBound.js"(e,t){init_polyfills();var r=require_get_intrinsic(),n=require_call_bind(),i=n(r("String.prototype.indexOf"));t.exports=function(e,t){var o=r(e,!!t);return"function"===typeof o&&i(e,".prototype.")>-1?n(o):o}}}),require_is_arguments=__commonJS({"node_modules/is-arguments/index.js"(e,t){init_polyfills();var r="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,n=require_callBound(),i=n("Object.prototype.toString"),o=function(e){return!(r&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===i(e)},s=function(e){return!!o(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==i(e)&&"[object Function]"===i(e.callee)},a=function(){return o(arguments)}();o.isLegacyArguments=s,t.exports=a?o:s}}),require_shams2=__commonJS({"node_modules/has-tostringtag/shams.js"(e,t){init_polyfills();var r=require_shams();t.exports=function(){return r()&&!!Symbol.toStringTag}}}),require_is_generator_function=__commonJS({"node_modules/is-generator-function/index.js"(e,t){init_polyfills();var r,n=Object.prototype.toString,i=Function.prototype.toString,o=/^\s*(?:function)?\*/,s=require_shams2()(),a=Object.getPrototypeOf,l=function(){if(!s)return!1;try{return Function("return function*() {}")()}catch(e){}};t.exports=function(e){if("function"!==typeof e)return!1;if(o.test(i.call(e)))return!0;if(!s){var t=n.call(e);return"[object GeneratorFunction]"===t}if(!a)return!1;if("undefined"===typeof r){var u=l();r=!!u&&a(u)}return a(e)===r}}}),require_is_callable=__commonJS({"node_modules/is-callable/index.js"(e,t){init_polyfills();var r,n,i=Function.prototype.toString,o="object"===typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"===typeof o&&"function"===typeof Object.defineProperty)try{r=Object.defineProperty({},"length",{get:function(){throw n}}),n={},o((function(){throw 42}),null,r)}catch(b){b!==n&&(o=null)}else o=null;var s,a=/^\s*class\b/,l=function(e){try{var t=i.call(e);return a.test(t)}catch(r){return!1}},u=function(e){try{return!l(e)&&(i.call(e),!0)}catch(t){return!1}},c=Object.prototype.toString,d="[object Object]",h="[object Function]",p="[object GeneratorFunction]",f="[object HTMLAllCollection]",g="[object HTML document.all class]",m="[object HTMLCollection]",v="function"===typeof Symbol&&!!Symbol.toStringTag,y=!(0 in[,]),_=function(){return!1};"object"===typeof document&&(s=document.all,c.call(s)===c.call(document.all)&&(_=function(e){if((y||!e)&&("undefined"===typeof e||"object"===typeof e))try{var t=c.call(e);return(t===f||t===g||t===m||t===d)&&null==e("")}catch(r){}return!1})),t.exports=o?function(e){if(_(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;try{o(e,null,r)}catch(t){if(t!==n)return!1}return!l(e)&&u(e)}:function(e){if(_(e))return!0;if(!e)return!1;if("function"!==typeof e&&"object"!==typeof e)return!1;if(v)return u(e);if(l(e))return!1;var t=c.call(e);return!(t!==h&&t!==p&&!/^\[object HTML/.test(t))&&u(e)}}}),require_for_each=__commonJS({"node_modules/for-each/index.js"(e,t){init_polyfills();var r=require_is_callable(),n=Object.prototype.toString,i=Object.prototype.hasOwnProperty,o=function(e,t,r){for(var n=0,o=e.length;n<o;n++)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},s=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},a=function(e,t,r){for(var n in e)i.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},l=function(e,t,i){if(!r(t))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=i),"[object Array]"===n.call(e)?o(e,t,l):"string"===typeof e?s(e,t,l):a(e,t,l)};t.exports=l}}),require_available_typed_arrays=__commonJS({"node_modules/available-typed-arrays/index.js"(e,t){init_polyfills();var r=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n=globalThis;t.exports=function(){for(var e=[],t=0;t<r.length;t++)"function"===typeof n[r[t]]&&(e[e.length]=r[t]);return e}}}),require_gopd=__commonJS({"node_modules/gopd/index.js"(e,t){init_polyfills();var r=require_get_intrinsic(),n=r("%Object.getOwnPropertyDescriptor%",!0);if(n)try{n([],"length")}catch(i){n=null}t.exports=n}}),require_which_typed_array=__commonJS({"node_modules/which-typed-array/index.js"(e,t){init_polyfills();var r=require_for_each(),n=require_available_typed_arrays(),i=require_call_bind(),o=require_callBound(),s=require_gopd(),a=o("Object.prototype.toString"),l=require_shams2()(),u=globalThis,c=n(),d=o("String.prototype.slice"),h=Object.getPrototypeOf,p=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},f={__proto__:null};r(c,l&&s&&h?function(e){var t=new u[e];if(Symbol.toStringTag in t){var r=h(t),n=s(r,Symbol.toStringTag);if(!n){var o=h(r);n=s(o,Symbol.toStringTag)}f["$"+e]=i(n.get)}}:function(e){var t=new u[e];f["$"+e]=i(t.slice)});var g=function(e){var t=!1;return r(f,(function(r,n){if(!t)try{"$"+r(e)===n&&(t=d(n,1))}catch(i){}})),t},m=function(e){var t=!1;return r(f,(function(r,n){if(!t)try{r(e),t=d(n,1)}catch(i){}})),t};t.exports=function(e){if(!e||"object"!==typeof e)return!1;if(!l){var t=d(a(e),8,-1);return p(c,t)>-1?t:"Object"===t&&m(e)}return s?g(e):null}}}),require_is_typed_array=__commonJS({"node_modules/is-typed-array/index.js"(e,t){init_polyfills();var r=require_which_typed_array();t.exports=function(e){return!!r(e)}}}),require_types=__commonJS({"node_modules/util/support/types.js"(e){init_polyfills();var t=require_is_arguments(),r=require_is_generator_function(),n=require_which_typed_array(),i=require_is_typed_array();function o(e){return e.call.bind(e)}var s,a,l="undefined"!==typeof BigInt,u="undefined"!==typeof Symbol,c=o(Object.prototype.toString),d=o(Number.prototype.valueOf),h=o(String.prototype.valueOf),p=o(Boolean.prototype.valueOf);function f(e,t){if("object"!==typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function g(e){return"undefined"!==typeof Promise&&e instanceof Promise||null!==e&&"object"===typeof e&&"function"===typeof e.then&&"function"===typeof e.catch}function m(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||j(e)}function v(e){return"Uint8Array"===n(e)}function y(e){return"Uint8ClampedArray"===n(e)}function _(e){return"Uint16Array"===n(e)}function b(e){return"Uint32Array"===n(e)}function S(e){return"Int8Array"===n(e)}function w(e){return"Int16Array"===n(e)}function C(e){return"Int32Array"===n(e)}function A(e){return"Float32Array"===n(e)}function E(e){return"Float64Array"===n(e)}function x(e){return"BigInt64Array"===n(e)}function T(e){return"BigUint64Array"===n(e)}function k(e){return"[object Map]"===c(e)}function O(e){return"undefined"!==typeof Map&&(k.working?k(e):e instanceof Map)}function P(e){return"[object Set]"===c(e)}function R(e){return"undefined"!==typeof Set&&(P.working?P(e):e instanceof Set)}function I(e){return"[object WeakMap]"===c(e)}function L(e){return"undefined"!==typeof WeakMap&&(I.working?I(e):e instanceof WeakMap)}function M(e){return"[object WeakSet]"===c(e)}function N(e){return M(e)}function D(e){return"[object ArrayBuffer]"===c(e)}function B(e){return"undefined"!==typeof ArrayBuffer&&(D.working?D(e):e instanceof ArrayBuffer)}function F(e){return"[object DataView]"===c(e)}function j(e){return"undefined"!==typeof DataView&&(F.working?F(e):e instanceof DataView)}l&&(s=o(BigInt.prototype.valueOf)),u&&(a=o(Symbol.prototype.valueOf)),e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=i,e.isPromise=g,e.isArrayBufferView=m,e.isUint8Array=v,e.isUint8ClampedArray=y,e.isUint16Array=_,e.isUint32Array=b,e.isInt8Array=S,e.isInt16Array=w,e.isInt32Array=C,e.isFloat32Array=A,e.isFloat64Array=E,e.isBigInt64Array=x,e.isBigUint64Array=T,k.working="undefined"!==typeof Map&&k(new Map),e.isMap=O,P.working="undefined"!==typeof Set&&P(new Set),e.isSet=R,I.working="undefined"!==typeof WeakMap&&I(new WeakMap),e.isWeakMap=L,M.working="undefined"!==typeof WeakSet&&M(new WeakSet),e.isWeakSet=N,D.working="undefined"!==typeof ArrayBuffer&&D(new ArrayBuffer),e.isArrayBuffer=B,F.working="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView&&F(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=j;var H="undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function q(e){return"[object SharedArrayBuffer]"===c(e)}function U(e){return"undefined"!==typeof H&&("undefined"===typeof q.working&&(q.working=q(new H)),q.working?q(e):e instanceof H)}function G(e){return"[object AsyncFunction]"===c(e)}function z(e){return"[object Map Iterator]"===c(e)}function V(e){return"[object Set Iterator]"===c(e)}function $(e){return"[object Generator]"===c(e)}function J(e){return"[object WebAssembly.Module]"===c(e)}function W(e){return f(e,d)}function Y(e){return f(e,h)}function K(e){return f(e,p)}function X(e){return l&&f(e,s)}function Q(e){return u&&f(e,a)}function Z(e){return W(e)||Y(e)||K(e)||X(e)||Q(e)}function ee(e){return"undefined"!==typeof Uint8Array&&(B(e)||U(e))}e.isSharedArrayBuffer=U,e.isAsyncFunction=G,e.isMapIterator=z,e.isSetIterator=V,e.isGeneratorObject=$,e.isWebAssemblyCompiledModule=J,e.isNumberObject=W,e.isStringObject=Y,e.isBooleanObject=K,e.isBigIntObject=X,e.isSymbolObject=Q,e.isBoxedPrimitive=Z,e.isAnyArrayBuffer=ee,["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})}))}}),require_isBufferBrowser=__commonJS({"node_modules/util/support/isBufferBrowser.js"(e,t){init_polyfills(),t.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}}}),require_inherits_browser=__commonJS({"node_modules/inherits/inherits_browser.js"(e,t){init_polyfills(),"function"===typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}}),require_util=__commonJS({"node_modules/util/util.js"(e){init_polyfills();var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;e.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var i=arguments,o=i.length,a=String(e).replace(r,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(i[n++]);case"%d":return Number(i[n++]);case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return e}})),l=i[n];n<o;l=i[++n])y(l)||!E(l)?a+=" "+l:a+=" "+s(l);return a},e.deprecate=function(t,r){if("undefined"!==typeof process&&!0===process.noDeprecation)return t;if("undefined"===typeof process)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;function i(){if(!n){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}return i};var n,i={},o=/^$/;function s(t,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&e._extend(n,r),C(n.showHidden)&&(n.showHidden=!1),C(n.depth)&&(n.depth=2),C(n.colors)&&(n.colors=!1),C(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),c(n,t,n.depth)}function a(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function l(e,t){return e}function u(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}function c(t,r,n){if(t.customInspect&&r&&k(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return S(i)||(i=c(t,i,n)),i}var o=d(t,r);if(o)return o;var s=Object.keys(r),a=u(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),T(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(k(r)){var l=r.name?": "+r.name:"";return t.stylize("[Function"+l+"]","special")}if(A(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return t.stylize(Date.prototype.toString.call(r),"date");if(T(r))return h(r)}var v,y="",_=!1,b=["{","}"];if(m(r)&&(_=!0,b=["[","]"]),k(r)){var w=r.name?": "+r.name:"";y=" [Function"+w+"]"}return A(r)&&(y=" "+RegExp.prototype.toString.call(r)),x(r)&&(y=" "+Date.prototype.toUTCString.call(r)),T(r)&&(y=" "+h(r)),0!==s.length||_&&0!=r.length?n<0?A(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),v=_?p(t,r,n,a,s):s.map((function(e){return f(t,r,n,a,e,_)})),t.seen.pop(),g(v,y,b)):b[0]+y+b[1]}function d(e,t){if(C(t))return e.stylize("undefined","undefined");if(S(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return b(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,i){for(var o=[],s=0,a=t.length;s<a;++s)M(t,String(s))?o.push(f(e,t,r,n,String(s),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(f(e,t,r,n,i,!0))})),o}function f(e,t,r,n,i,o){var s,a,l;if(l=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},l.get?a=l.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):l.set&&(a=e.stylize("[Setter]","special")),M(n,i)||(s="["+i+"]"),a||(e.seen.indexOf(l.value)<0?(a=y(r)?c(e,l.value,null):c(e,l.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map((function(e){return"  "+e})).join("\n").slice(2):"\n"+a.split("\n").map((function(e){return"   "+e})).join("\n"))):a=e.stylize("[Circular]","special")),C(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function g(e,t,r){var n=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return n>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function m(e){return Array.isArray(e)}function v(e){return"boolean"===typeof e}function y(e){return null===e}function _(e){return null==e}function b(e){return"number"===typeof e}function S(e){return"string"===typeof e}function w(e){return"symbol"===typeof e}function C(e){return void 0===e}function A(e){return E(e)&&"[object RegExp]"===P(e)}function E(e){return"object"===typeof e&&null!==e}function x(e){return E(e)&&"[object Date]"===P(e)}function T(e){return E(e)&&("[object Error]"===P(e)||e instanceof Error)}function k(e){return"function"===typeof e}function O(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function P(e){return Object.prototype.toString.call(e)}function R(e){return e<10?"0"+e.toString(10):e.toString(10)}process.env.NODE_DEBUG&&(n=process.env.NODE_DEBUG,n=n.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+n+"$","i")),e.debuglog=function(t){if(t=t.toUpperCase(),!i[t])if(o.test(t)){var r=process.pid;i[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else i[t]=function(){};return i[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=require_types(),e.isArray=m,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=_,e.isNumber=b,e.isString=S,e.isSymbol=w,e.isUndefined=C,e.isRegExp=A,e.types.isRegExp=A,e.isObject=E,e.isDate=x,e.types.isDate=x,e.isError=T,e.types.isNativeError=T,e.isFunction=k,e.isPrimitive=O,e.isBuffer=require_isBufferBrowser();var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function L(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),I[e.getMonth()],t].join(" ")}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){console.log("%s - %s",L(),e.format.apply(e,arguments))},e.inherits=require_inherits_browser(),e._extend=function(e,t){if(!t||!E(t))return e;var r=Object.keys(t),n=r.length;while(n--)e[r[n]]=t[r[n]];return e};var N="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function D(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}function B(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return n.apply(i,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(D.bind(null,e,o))}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,t(e)),r}e.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var r=e[N];if("function"!==typeof r)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,N,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(s){r(s)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),N&&Object.defineProperty(r,N,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},e.promisify.custom=N,e.callbackify=B}}),process,util,init_polyfills=__esm({"polyfills.js"(){process=require_browser(),util=require_util()}}),tslib_es6_exports={},extendStatics,__assign,__createBinding,__setModuleDefault,_SuppressedError,tslib_es6_default;function __extends(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function __rest(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function __decorate(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function __param(e,t){return function(r,n){t(r,n,e)}}function __esDecorate(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?n["static"]?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var g in n)f[g]="access"===g?{}:n[g];for(var g in n.access)f.access[g]=n.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[u],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!==typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(d.get=a),(a=s(m.set))&&(d.set=a),(a=s(m.init))&&i.unshift(a)}else(a=s(m))&&("field"===l?i.unshift(a):d[u]=a)}c&&Object.defineProperty(c,n.name,d),h=!0}function __runInitializers(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function __propKey(e){return"symbol"===typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):i(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return l([e,t])}}function l(a){if(r)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(r=1,n&&(i=2&a[0]?n["return"]:a[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(l){a=[6,l],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding(t,e,r)}function __values(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{while((void 0===t||t-- >0)&&!(n=o.next()).done)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function __spreadArray(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{l(i[e](t))}catch(r){d(o[0][3],r)}}function l(e){e.value instanceof __await?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}function u(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await(e[n](t)),done:!1}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"===typeof __values?__values(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){t=e[r](t),i(n,o,t.done,t.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding(t,e,r);return __setModuleDefault(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!==typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function __disposeResources(e){function t(t){e.error=e.hasError?new _SuppressedError(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}function r(){while(e.stack.length){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,(function(e){return t(e),r()}))}catch(o){t(o)}}if(e.hasError)throw e.error}return r()}__export(tslib_es6_exports,{__addDisposableResource:()=>__addDisposableResource,__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>__createBinding,__decorate:()=>__decorate,__disposeResources:()=>__disposeResources,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>__rest,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,default:()=>tslib_es6_default});var init_tslib_es6=__esm({"node_modules/r2-shared-js/node_modules/tslib/tslib.es6.mjs"(){init_polyfills(),extendStatics=function(e,t){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics(e,t)},__assign=function(){return __assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)},__createBinding=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},_SuppressedError="function"===typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n},tslib_es6_default={__extends:__extends,__assign:__assign,__rest:__rest,__decorate:__decorate,__param:__param,__metadata:__metadata,__awaiter:__awaiter,__generator:__generator,__createBinding:__createBinding,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar,__importDefault:__importDefault,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn,__addDisposableResource:__addDisposableResource,__disposeResources:__disposeResources}}}),require_ms=__commonJS({"node_modules/r2-shared-js/node_modules/ms/index.js"(e,t){init_polyfills();var r=1e3,n=60*r,i=60*n,o=24*i,s=7*o,a=365.25*o;function l(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var l=parseFloat(t[1]),u=(t[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return l*a;case"weeks":case"week":case"w":return l*s;case"days":case"day":case"d":return l*o;case"hours":case"hour":case"hrs":case"hr":case"h":return l*i;case"minutes":case"minute":case"mins":case"min":case"m":return l*n;case"seconds":case"second":case"secs":case"sec":case"s":return l*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return l;default:return}}}}function u(e){var t=Math.abs(e);return t>=o?Math.round(e/o)+"d":t>=i?Math.round(e/i)+"h":t>=n?Math.round(e/n)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}function c(e){var t=Math.abs(e);return t>=o?d(e,t,o,"day"):t>=i?d(e,t,i,"hour"):t>=n?d(e,t,n,"minute"):t>=r?d(e,t,r,"second"):e+" ms"}function d(e,t,r,n){var i=t>=1.5*r;return Math.round(e/r)+" "+n+(i?"s":"")}t.exports=function(e,t){t=t||{};var r=typeof e;if("string"===r&&e.length>0)return l(e);if("number"===r&&isFinite(e))return t.long?c(e):u(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}}}),require_common=__commonJS({"node_modules/r2-shared-js/node_modules/debug/src/common.js"(e,t){function r(e){function t(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]}function r(e){let t,i,o,s=null;function a(...e){if(!a.enabled)return;const n=a,i=Number(new Date),o=i-(t||i);n.diff=o,n.prev=t,n.curr=i,t=i,e[0]=r.coerce(e[0]),"string"!==typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";s++;const o=r.formatters[i];if("function"===typeof o){const r=e[s];t=o.call(n,r),e.splice(s,1),s--}return t})),r.formatArgs.call(n,e);const l=n.log||r.log;l.apply(n,e)}return a.namespace=e,a.useColors=r.useColors(),a.color=r.selectColor(e),a.extend=n,a.destroy=r.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==s?s:(i!==r.namespaces&&(i=r.namespaces,o=r.enabled(e)),o),set:e=>{s=e}}),"function"===typeof r.init&&r.init(a),a}function n(e,t){const n=r(this.namespace+("undefined"===typeof t?":":t)+e);return n.log=this.log,n}function i(e){let t;r.save(e),r.namespaces=e,r.names=[],r.skips=[];const n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length;for(t=0;t<i;t++)n[t]&&(e=n[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))}function o(){const e=[...r.names.map(a),...r.skips.map(a).map((e=>"-"+e))].join(",");return r.enable(""),e}function s(e){if("*"===e[e.length-1])return!0;let t,n;for(t=0,n=r.skips.length;t<n;t++)if(r.skips[t].test(e))return!1;for(t=0,n=r.names.length;t<n;t++)if(r.names[t].test(e))return!0;return!1}function a(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}function l(e){return e instanceof Error?e.stack||e.message:e}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.debug=r,r.default=r,r.coerce=l,r.disable=o,r.enable=i,r.enabled=s,r.humanize=require_ms(),r.destroy=u,Object.keys(e).forEach((t=>{r[t]=e[t]})),r.names=[],r.skips=[],r.formatters={},r.selectColor=t,r.enable(r.load()),r}init_polyfills(),t.exports=r}}),require_browser2=__commonJS({"node_modules/r2-shared-js/node_modules/debug/src/browser.js"(e,t){function r(){return!("undefined"===typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"===typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function n(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))})),e.splice(i,0,r)}function i(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(r){}}function o(){let t;try{t=e.storage.getItem("debug")}catch(r){}return!t&&"undefined"!==typeof process&&"env"in process&&(t=process.env.DEBUG),t}function s(){try{return localStorage}catch(e){}}init_polyfills(),e.formatArgs=n,e.save=i,e.load=o,e.useColors=r,e.storage=s(),e.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=require_common()(e);var{formatters:a}=t.exports;a.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}}),require_types2=__commonJS({"node_modules/ta-json-x/dist/cjs/types.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0})}}),require_property_definition=__commonJS({"node_modules/ta-json-x/dist/cjs/classes/property-definition.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.PropertyDefinition=void 0;var t=class{constructor(){this.array=!1,this.set=!1,this.readonly=!1,this.writeonly=!1}};e.PropertyDefinition=t}}),require_object_definition=__commonJS({"node_modules/ta-json-x/dist/cjs/classes/object-definition.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.getTypedInheritanceChain=e.getInheritanceChain=e.getDefinition=e.objectDefinitions=e.ObjectDefinition=void 0;var t=require_property_definition(),r=class{constructor(){this.ctr=()=>{},this.beforeDeserialized=()=>{},this.onDeserialized=()=>{},this.properties=new Map}getProperty(e){let r=this.properties.get(e);return r||(r=new t.PropertyDefinition,this.properties.set(e,r)),r}};function n(t){let n=e.objectDefinitions.get(t);return n||(n=new r,e.objectDefinitions.set(t,n)),n}function i(e){if(!e)return[];const t=Object.getPrototypeOf(e);return[e.constructor].concat(i(t))}function o(t){const r=[];return e.objectDefinitions.forEach(((e,n)=>{const i=Object.getPrototypeOf(n.prototype).constructor;i===t&&r.push([n,e])})),r}function s(t,r){const n=e.objectDefinitions.get(t);let a,l=[];r&&n&&n.discriminatorProperty&&(l=l.concat(o(t)));while(0!==l.length&&!a){const[e,t]=l.shift();if(t.hasOwnProperty("discriminatorValue")){if(r&&n&&t.discriminatorValue===r[n.discriminatorProperty]){if(t.hasOwnProperty("discriminatorProperty"))return s(e,r);a=e}}else l=l.concat(o(e))}a||(a=t);const u=new Set(i(Object.create(a.prototype)));return Array.from(u).filter((t=>e.objectDefinitions.has(t)))}e.ObjectDefinition=r,e.objectDefinitions=new Map,e.getDefinition=n,e.getInheritanceChain=i,e.getTypedInheritanceChain=s}}),require_json_object=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-object.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonObject=void 0;var t=require_object_definition();function r(){return function(e){t.getDefinition(e)}}e.JsonObject=r}}),require_Reflect=__commonJS({"node_modules/reflect-metadata/Reflect.js"(){var e;init_polyfills(),function(e){(function(t){var r="object"===typeof globalThis?globalThis:"object"===typeof self?self:"object"===typeof this?this:Function("return this;")(),n=i(e);function i(e,t){return function(r,n){"function"!==typeof e[r]&&Object.defineProperty(e,r,{configurable:!0,writable:!0,value:n}),t&&t(r,n)}}"undefined"===typeof r.Reflect?r.Reflect=e:n=i(r.Reflect,n),t(n)})((function(e){var t=Object.prototype.hasOwnProperty,r="function"===typeof Symbol,n=r&&"undefined"!==typeof Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&"undefined"!==typeof Symbol.iterator?Symbol.iterator:"@@iterator",o="function"===typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,l={create:o?function(){return ie(Object.create(null))}:s?function(){return ie({__proto__:null})}:function(){return ie({})},has:a?function(e,r){return t.call(e,r)}:function(e,t){return t in e},get:a?function(e,r){return t.call(e,r)?e[r]:void 0}:function(e,t){return e[t]}},u=Object.getPrototypeOf(Function),c="object"===typeof process&&process.env&&"true"===process.env["REFLECT_METADATA_USE_MAP_POLYFILL"],d=c||"function"!==typeof Map||"function"!==typeof Map.prototype.entries?te():Map,h=c||"function"!==typeof Set||"function"!==typeof Set.prototype.entries?re():Set,p=c||"function"!==typeof WeakMap?ne():WeakMap,f=new p;function g(e,t,r,n){if(D(r)){if(!V(e))throw new TypeError;if(!J(t))throw new TypeError;return E(e,t)}if(!V(e))throw new TypeError;if(!j(t))throw new TypeError;if(!j(n)&&!D(n)&&!B(n))throw new TypeError;return B(n)&&(n=void 0),r=z(r),x(e,t,r,n)}function m(e,t){function r(r,n){if(!j(r))throw new TypeError;if(!D(n)&&!W(n))throw new TypeError;I(e,t,r,n)}return r}function v(e,t,r,n){if(!j(r))throw new TypeError;return D(n)||(n=z(n)),I(e,t,r,n)}function y(e,t,r){if(!j(t))throw new TypeError;return D(r)||(r=z(r)),k(e,t,r)}function _(e,t,r){if(!j(t))throw new TypeError;return D(r)||(r=z(r)),O(e,t,r)}function b(e,t,r){if(!j(t))throw new TypeError;return D(r)||(r=z(r)),P(e,t,r)}function S(e,t,r){if(!j(t))throw new TypeError;return D(r)||(r=z(r)),R(e,t,r)}function w(e,t){if(!j(e))throw new TypeError;return D(t)||(t=z(t)),L(e,t)}function C(e,t){if(!j(e))throw new TypeError;return D(t)||(t=z(t)),M(e,t)}function A(e,t,r){if(!j(t))throw new TypeError;D(r)||(r=z(r));var n=T(t,r,!1);if(D(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var i=f.get(t);return i.delete(r),i.size>0||f.delete(t),!0}function E(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r],i=n(t);if(!D(i)&&!B(i)){if(!J(i))throw new TypeError;t=i}}return t}function x(e,t,r,n){for(var i=e.length-1;i>=0;--i){var o=e[i],s=o(t,r,n);if(!D(s)&&!B(s)){if(!j(s))throw new TypeError;n=s}}return n}function T(e,t,r){var n=f.get(e);if(D(n)){if(!r)return;n=new d,f.set(e,n)}var i=n.get(t);if(D(i)){if(!r)return;i=new d,n.set(t,i)}return i}function k(e,t,r){var n=O(e,t,r);if(n)return!0;var i=ee(t);return!B(i)&&k(e,i,r)}function O(e,t,r){var n=T(t,r,!1);return!D(n)&&U(n.has(e))}function P(e,t,r){var n=O(e,t,r);if(n)return R(e,t,r);var i=ee(t);return B(i)?void 0:P(e,i,r)}function R(e,t,r){var n=T(t,r,!1);if(!D(n))return n.get(e)}function I(e,t,r,n){var i=T(r,n,!0);i.set(e,t)}function L(e,t){var r=M(e,t),n=ee(e);if(null===n)return r;var i=L(n,t);if(i.length<=0)return r;if(r.length<=0)return i;for(var o=new h,s=[],a=0,l=r;a<l.length;a++){var u=l[a],c=o.has(u);c||(o.add(u),s.push(u))}for(var d=0,p=i;d<p.length;d++){u=p[d],c=o.has(u);c||(o.add(u),s.push(u))}return s}function M(e,t){var r=[],n=T(e,t,!1);if(D(n))return r;var i=n.keys(),o=K(i),s=0;while(1){var a=Q(o);if(!a)return r.length=s,r;var l=X(a);try{r[s]=l}catch(u){try{Z(o)}finally{throw u}}s++}}function N(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function D(e){return void 0===e}function B(e){return null===e}function F(e){return"symbol"===typeof e}function j(e){return"object"===typeof e?null!==e:"function"===typeof e}function H(e,t){switch(N(e)){case 0:return e;case 1:return e;case 2:return e;case 3:return e;case 4:return e;case 5:return e}var r=3===t?"string":5===t?"number":"default",i=Y(e,n);if(void 0!==i){var o=i.call(e,r);if(j(o))throw new TypeError;return o}return q(e,"default"===r?"number":r)}function q(e,t){if("string"===t){var r=e.toString;if($(r)){var n=r.call(e);if(!j(n))return n}var i=e.valueOf;if($(i)){n=i.call(e);if(!j(n))return n}}else{i=e.valueOf;if($(i)){n=i.call(e);if(!j(n))return n}var o=e.toString;if($(o)){n=o.call(e);if(!j(n))return n}}throw new TypeError}function U(e){return!!e}function G(e){return""+e}function z(e){var t=H(e,3);return F(t)?t:G(t)}function V(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function $(e){return"function"===typeof e}function J(e){return"function"===typeof e}function W(e){switch(N(e)){case 3:return!0;case 4:return!0;default:return!1}}function Y(e,t){var r=e[t];if(void 0!==r&&null!==r){if(!$(r))throw new TypeError;return r}}function K(e){var t=Y(e,i);if(!$(t))throw new TypeError;var r=t.call(e);if(!j(r))throw new TypeError;return r}function X(e){return e.value}function Q(e){var t=e.next();return!t.done&&t}function Z(e){var t=e["return"];t&&t.call(e)}function ee(e){var t=Object.getPrototypeOf(e);if("function"!==typeof e||e===u)return t;if(t!==u)return t;var r=e.prototype,n=r&&Object.getPrototypeOf(r);if(null==n||n===Object.prototype)return t;var i=n.constructor;return"function"!==typeof i||i===e?t:i}function te(){var e={},t=[],r=function(){function e(e,t,r){this._index=0,this._keys=e,this._values=t,this._selector=r}return e.prototype["@@iterator"]=function(){return this},e.prototype[i]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var r=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:r,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var r=this._find(e,!0);return this._values[r]=t,this},t.prototype.delete=function(t){var r=this._find(t,!1);if(r>=0){for(var n=this._keys.length,i=r+1;i<n;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new r(this._keys,this._values,n)},t.prototype.values=function(){return new r(this._keys,this._values,o)},t.prototype.entries=function(){return new r(this._keys,this._values,s)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[i]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function o(e,t){return t}function s(e,t){return[e,t]}}function re(){return function(){function e(){this._map=new d}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[i]=function(){return this.keys()},e}()}function ne(){var e=16,r=l.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=o(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=o(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){var r=o(e,!0);return r[this._key]=t,this},e.prototype.delete=function(e){var t=o(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var e;do{e="@@WeakMap@@"+u()}while(l.has(r,e));return r[e]=!0,e}function o(e,r){if(!t.call(e,n)){if(!r)return;Object.defineProperty(e,n,{value:l.create()})}return e[n]}function s(e,t){for(var r=0;r<t;++r)e[r]=255*Math.random()|0;return e}function a(e){return"function"===typeof Uint8Array?"undefined"!==typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!==typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):s(new Uint8Array(e),e):s(new Array(e),e)}function u(){var t=a(e);t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var r="",n=0;n<e;++n){var i=t[n];4!==n&&6!==n&&8!==n||(r+="-"),i<16&&(r+="0"),r+=i.toString(16).toLowerCase()}return r}}function ie(e){return e.__=void 0,delete e.__,e}e("decorate",g),e("metadata",m),e("defineMetadata",v),e("hasMetadata",y),e("hasOwnMetadata",_),e("getMetadata",b),e("getOwnMetadata",S),e("getMetadataKeys",w),e("getOwnMetadataKeys",C),e("deleteMetadata",A)}))}(e||(e={}))}}),require_json_property=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-property.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonProperty=void 0,require_Reflect();var t=require_object_definition();function r(e){return function(r,n){const i=Reflect.getMetadata("design:type",r,n.toString()),o=t.getDefinition(r.constructor).getProperty(n.toString());o.serializedName=e||n.toString(),o.array=i===Array,o.set=i===Set,o.array||o.set||o.type||(o.type=i)}}e.JsonProperty=r}}),require_json_type=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-type.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonType=void 0;var t=require_object_definition();function r(e){return function(r,n){const i=t.getDefinition(r.constructor).getProperty(n.toString());i.type=e}}e.JsonType=r}}),require_json_element_type=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-element-type.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonElementType=void 0;var t=require_object_definition();function r(e){return function(r,n){const i=t.getDefinition(r.constructor).getProperty(n.toString());i.type=e}}e.JsonElementType=r}}),require_json_converter=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonConverter=void 0;var t=require_object_definition();function r(e){return function(r,n){const i=t.getDefinition(r.constructor).getProperty(n.toString());i.converter="function"===typeof e?new e:e}}e.JsonConverter=r}}),require_json_readonly=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-readonly.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonReadonly=void 0;var t=require_object_definition();function r(){return function(e,r){const n=t.getDefinition(e.constructor).getProperty(r.toString());n.readonly=!0}}e.JsonReadonly=r}}),require_json_writeonly=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-writeonly.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonWriteonly=void 0;var t=require_object_definition();function r(){return function(e,r){const n=t.getDefinition(e.constructor).getProperty(r.toString());n.writeonly=!0}}e.JsonWriteonly=r}}),require_json_discriminator_property=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-discriminator-property.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonDiscriminatorProperty=void 0;var t=require_object_definition();function r(e){return function(r){t.getDefinition(r).discriminatorProperty=e}}e.JsonDiscriminatorProperty=r}}),require_json_discriminator_value=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-discriminator-value.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonDiscriminatorValue=void 0;var t=require_object_definition();function r(e){return function(r){t.getDefinition(r).discriminatorValue=e}}e.JsonDiscriminatorValue=r}}),require_json_constructor=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/json-constructor.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonConstructor=void 0;var t=require_object_definition();function r(){return function(e,r){const n=t.getDefinition(e.constructor);n.ctr=e[r.toString()]}}e.JsonConstructor=r}}),require_before_deserialized=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/before-deserialized.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.BeforeDeserialized=void 0;var t=require_object_definition();function r(){return function(e,r){const n=t.getDefinition(e.constructor);n.beforeDeserialized=e[r.toString()]}}e.BeforeDeserialized=r}}),require_on_deserialized=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/on-deserialized.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.OnDeserialized=void 0;var t=require_object_definition();function r(){return function(e,r){const n=t.getDefinition(e.constructor);n.onDeserialized=e[r.toString()]}}e.OnDeserialized=r}}),require_decorators=__commonJS({"node_modules/ta-json-x/dist/cjs/decorators/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(require_json_object(),e),r(require_json_property(),e),r(require_json_type(),e),r(require_json_element_type(),e),r(require_json_converter(),e),r(require_json_readonly(),e),r(require_json_writeonly(),e),r(require_json_discriminator_property(),e),r(require_json_discriminator_value(),e),r(require_json_constructor(),e),r(require_before_deserialized(),e),r(require_on_deserialized(),e)}}),require_date_converter=__commonJS({"node_modules/ta-json-x/dist/cjs/converters/date-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.DateConverter=void 0;var t=class{serialize(e){return e.toString()}deserialize(e){return new Date(e)}collapseArrayWithSingleItem(){return!1}};e.DateConverter=t}}),require_buffer_converter=__commonJS({"node_modules/ta-json-x/dist/cjs/converters/buffer-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.BufferConverter=void 0;var t=class{constructor(e="json"){this._encoding=e}serialize(e){return"json"===this._encoding?e.toJSON():e.toString(this._encoding)}deserialize(e){return"json"===this._encoding?Buffer.from(e.data):Buffer.from(e,this._encoding)}collapseArrayWithSingleItem(){return!1}};e.BufferConverter=t}}),require_converter=__commonJS({"node_modules/ta-json-x/dist/cjs/converters/converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.propertyConverters=void 0;var t=require_date_converter(),r=require_buffer_converter();e.propertyConverters=new Map,"undefined"===typeof window&&e.propertyConverters.set(Buffer,new r.BufferConverter),e.propertyConverters.set(Date,new t.DateConverter)}}),require_converters=__commonJS({"node_modules/ta-json-x/dist/cjs/converters/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),r(require_converter(),e),r(require_buffer_converter(),e),r(require_date_converter(),e)}}),require_serialize=__commonJS({"node_modules/ta-json-x/dist/cjs/methods/serialize.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;var t=require_util(),r=require_converter(),n=require_object_definition();function i(e,t,r={keyToPreserveUnknownJSON:void 0}){return e.constructor===Array?e.map((e=>o(e,t,r))):o(e,t,r)}function o(e,r=Object.getPrototypeOf(e).constructor,i){const o=n.getTypedInheritanceChain(r);if(0===o.length)return e;const l=o.map((e=>n.objectDefinitions.get(e))).filter((e=>!!e)),u={};if(l.forEach((t=>{t.properties.forEach(((t,r)=>{if(!t.type)throw new Error(`Cannot serialize property '${r}' without type!`);const n=e[r];void 0==n||t.writeonly||(t.set?u[t.serializedName]=s(Array.from(n||[]),t,i):t.array?u[t.serializedName]=s(n,t,i):u[t.serializedName]=a(n,t,i))}))})),i.keyToPreserveUnknownJSON){const r=i.keyToPreserveUnknownJSON;if(e[r]){const n=Object.keys(e[r]);for(const i of n)if(e[r].hasOwnProperty(i)){let n;l.forEach((e=>{e.properties.forEach(((e,t)=>{n||i!==e.serializedName||(n=e)}))})),n||("undefined"!==typeof u[i]&&(console.log(`???!!! TAJSON keyToPreserveUnknownJSON already serialized?! ${r}.${i}`),console.log(t.inspect(u[i],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1})),u[i]!==e[r][i]&&(console.log(`???!!! TAJSON keyToPreserveUnknownJSON already serialized DIFF?! ${r}.${i}`),console.log(t.inspect(e[r][i],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1})))),u[i]=e[r][i])}}}return u}function s(e,t,n){const i=e.map((e=>a(e,t,n)));if(1===i.length){const e=t.converter||r.propertyConverters.get(t.type);if(e&&e.collapseArrayWithSingleItem())return i[0]}return i}function a(e,t,o){const s=t.type===String||t.type===Boolean||t.type===Number,a=e,l=t.converter||r.propertyConverters.get(t.type);if(l)return l.serialize(a);if(!s){const e=n.objectDefinitions.get(t.type);if(e)return a instanceof t.type?i(a,void 0,o):i(a,t.type,o)}return a}e.serialize=i}}),require_deserialize=__commonJS({"node_modules/ta-json-x/dist/cjs/methods/deserialize.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.deserialize=void 0;var t=require_util(),r=require_object_definition(),n=require_converter();function i(e,t,r={runConstructor:!1,keyToPreserveUnknownJSON:void 0}){return e&&e.constructor===Array?e.map((e=>o(e,t,r))):o(e,t,r)}function o(e,n=Object,i){if(!r.objectDefinitions.has(n))return e;const o=e,[l,...u]=r.getTypedInheritanceChain(n,o),c=Object.create(l.prototype),d=[...u.reverse(),l].map((e=>r.objectDefinitions.get(e))).filter((e=>!!e));if(d.forEach((e=>{i.runConstructor&&e.ctr.call(c),e.beforeDeserialized.call(c),e.properties.forEach(((e,t)=>{if(!e.type)throw new Error(`Cannot deserialize property '${t}' without type!`);const r=o[e.serializedName];if(void 0!=r&&!e.readonly)return e.array||e.set?(c[t]=s(r,e,i),void(e.set&&(c[t]=new Set(c[t])))):void(c[t]=a(r,e,i))})),e.onDeserialized.call(c)})),i.keyToPreserveUnknownJSON){const e=i.keyToPreserveUnknownJSON;Object.keys(o).forEach((r=>{if(o.hasOwnProperty(r)){let n;d.forEach((i=>{i.properties.forEach(((e,t)=>{n||r!==e.serializedName||(n=e)})),n?c[e]&&"undefined"!==typeof c[e][r]&&delete c[e][r]:(c[e]||(c[e]={}),"undefined"!==typeof c[e][r]&&c[e][r]!==o[r]&&(console.log(`???!!! TAJSON keyToPreserveUnknownJSON already deserialized DIFF?! ${e}.${r}`),console.log(t.inspect(o[r],{showHidden:!1,depth:1e3,colors:!0,customInspect:!1}))),c[e][r]=o[r])}))}})),c[e]&&!Object.keys(c[e]).length&&delete c[e]}return c}function s(e,t,r){const i=t.converter||n.propertyConverters.get(t.type),o=e instanceof Array?e:i&&i.collapseArrayWithSingleItem()?[e]:e;return o.map((e=>a(e,t,r)))}function a(e,t,o){const s=t.type===String||t.type===Boolean||t.type===Number,a=e,l=t.converter||n.propertyConverters.get(t.type);if(l)return l.deserialize(a);if(!s){const e=r.objectDefinitions.get(t.type);if(e)return i(a,t.type,o)}return a}e.deserialize=i}}),require_ta_json=__commonJS({"node_modules/ta-json-x/dist/cjs/ta-json.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.TaJson=void 0;var t=require_serialize(),r=require_deserialize(),n=class{static deserialize(e,t,n){return r.deserialize(e,t,n)}static parse(e,t,r){return this.deserialize(JSON.parse(e),t,r)}static serialize(e,r){return t.serialize(e,void 0,r)}static stringify(e,t){return JSON.stringify(this.serialize(e,t))}};e.TaJson=n}}),require_cjs=__commonJS({"node_modules/ta-json-x/dist/cjs/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.TaJson=e.JSON=void 0,r(require_types2(),e),r(require_decorators(),e),r(require_converters(),e);var n=require_ta_json();Object.defineProperty(e,"JSON",{enumerable:!0,get:function(){return n.TaJson}}),Object.defineProperty(e,"TaJson",{enumerable:!0,get:function(){return n.TaJson}})}}),require_ta_json_string_converter=__commonJS({"node_modules/r2-utils-js/dist/es6-es2015/src/_utils/ta-json-string-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonStringConverter=void 0;var t=class{serialize(e){return e}deserialize(e){return e}collapseArrayWithSingleItem(){return!0}};e.JsonStringConverter=t}}),require_decodeURI=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/_utils/decodeURI.js"(e){function t(e){if(!e)return null;try{return decodeURIComponent(e)}catch(t){console.log(e),console.log(t)}return e}init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.tryDecodeURI=void 0,e.tryDecodeURI=t}}),tslib_es6_exports2={},extendStatics2,__assign2,__createBinding2,__setModuleDefault2,_SuppressedError2,tslib_es6_default2;function __extends2(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}extendStatics2(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function __rest2(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}function __decorate2(e,t,r,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function __param2(e,t){return function(r,n){t(r,n,e)}}function __esDecorate2(e,t,r,n,i,o){function s(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var a,l=n.kind,u="getter"===l?"get":"setter"===l?"set":"value",c=!t&&e?n["static"]?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var g in n)f[g]="access"===g?{}:n[g];for(var g in n.access)f.access[g]=n.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[u],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!==typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(d.get=a),(a=s(m.set))&&(d.set=a),(a=s(m.init))&&i.unshift(a)}else(a=s(m))&&("field"===l?i.unshift(a):d[u]=a)}c&&Object.defineProperty(c,n.name,d),h=!0}function __runInitializers2(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function __propKey2(e){return"symbol"===typeof e?e:"".concat(e)}function __setFunctionName2(e,t,r){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata2(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter2(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):i(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))}function __generator2(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(e){return function(t){return l([e,t])}}function l(a){if(r)throw new TypeError("Generator is already executing.");while(o&&(o=0,a[0]&&(s=0)),s)try{if(r=1,n&&(i=2&a[0]?n["return"]:a[0]?n["throw"]||((i=n["return"])&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(l){a=[6,l],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function __exportStar2(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||__createBinding2(t,e,r)}function __values2(e){var t="function"===typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read2(e,t){var r="function"===typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,o=r.call(e),s=[];try{while((void 0===t||t-- >0)&&!(n=o.next()).done)s.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=o["return"])&&r.call(o)}finally{if(i)throw i.error}}return s}function __spread2(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read2(arguments[t]));return e}function __spreadArrays2(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n}function __spreadArray2(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}function __await2(e){return this instanceof __await2?(this.v=e,this):new __await2(e)}function __asyncGenerator2(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(e,t||[]),o=[];return n={},s("next"),s("throw"),s("return"),n[Symbol.asyncIterator]=function(){return this},n;function s(e){i[e]&&(n[e]=function(t){return new Promise((function(r,n){o.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{l(i[e](t))}catch(r){d(o[0][3],r)}}function l(e){e.value instanceof __await2?Promise.resolve(e.value.v).then(u,c):d(o[0][2],e)}function u(e){a("next",e)}function c(e){a("throw",e)}function d(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function __asyncDelegator2(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,i){t[n]=e[n]?function(t){return(r=!r)?{value:__await2(e[n](t)),done:!1}:i?i(t):t}:i}}function __asyncValues2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"===typeof __values2?__values2(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){t=e[r](t),i(n,o,t.done,t.value)}))}}function i(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}}function __makeTemplateObject2(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function __importStar2(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&__createBinding2(t,e,r);return __setModuleDefault2(t,e),t}function __importDefault2(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet2(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function __classPrivateFieldSet2(e,t,r,n,i){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r}function __classPrivateFieldIn2(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function __addDisposableResource2(e,t,r){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var n;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose]}if("function"!==typeof n)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function __disposeResources2(e){function t(t){e.error=e.hasError?new _SuppressedError2(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}function r(){while(e.stack.length){var n=e.stack.pop();try{var i=n.dispose&&n.dispose.call(n.value);if(n.async)return Promise.resolve(i).then(r,(function(e){return t(e),r()}))}catch(o){t(o)}}if(e.hasError)throw e.error}return r()}__export(tslib_es6_exports2,{__addDisposableResource:()=>__addDisposableResource2,__assign:()=>__assign2,__asyncDelegator:()=>__asyncDelegator2,__asyncGenerator:()=>__asyncGenerator2,__asyncValues:()=>__asyncValues2,__await:()=>__await2,__awaiter:()=>__awaiter2,__classPrivateFieldGet:()=>__classPrivateFieldGet2,__classPrivateFieldIn:()=>__classPrivateFieldIn2,__classPrivateFieldSet:()=>__classPrivateFieldSet2,__createBinding:()=>__createBinding2,__decorate:()=>__decorate2,__disposeResources:()=>__disposeResources2,__esDecorate:()=>__esDecorate2,__exportStar:()=>__exportStar2,__extends:()=>__extends2,__generator:()=>__generator2,__importDefault:()=>__importDefault2,__importStar:()=>__importStar2,__makeTemplateObject:()=>__makeTemplateObject2,__metadata:()=>__metadata2,__param:()=>__param2,__propKey:()=>__propKey2,__read:()=>__read2,__rest:()=>__rest2,__runInitializers:()=>__runInitializers2,__setFunctionName:()=>__setFunctionName2,__spread:()=>__spread2,__spreadArray:()=>__spreadArray2,__spreadArrays:()=>__spreadArrays2,__values:()=>__values2,default:()=>tslib_es6_default2});var init_tslib_es62=__esm({"node_modules/r2-lcp-js/node_modules/tslib/tslib.es6.mjs"(){init_polyfills(),extendStatics2=function(e,t){return extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},extendStatics2(e,t)},__assign2=function(){return __assign2=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign2.apply(this,arguments)},__createBinding2=Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]},__setModuleDefault2=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},_SuppressedError2="function"===typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n},tslib_es6_default2={__extends:__extends2,__assign:__assign2,__rest:__rest2,__decorate:__decorate2,__param:__param2,__metadata:__metadata2,__awaiter:__awaiter2,__generator:__generator2,__createBinding:__createBinding2,__exportStar:__exportStar2,__values:__values2,__read:__read2,__spread:__spread2,__spreadArrays:__spreadArrays2,__spreadArray:__spreadArray2,__await:__await2,__asyncGenerator:__asyncGenerator2,__asyncDelegator:__asyncDelegator2,__asyncValues:__asyncValues2,__makeTemplateObject:__makeTemplateObject2,__importStar:__importStar2,__importDefault:__importDefault2,__classPrivateFieldGet:__classPrivateFieldGet2,__classPrivateFieldSet:__classPrivateFieldSet2,__classPrivateFieldIn:__classPrivateFieldIn2,__addDisposableResource:__addDisposableResource2,__disposeResources:__disposeResources2}}}),require_metadata_encrypted=__commonJS({"node_modules/r2-lcp-js/dist/es6-es2015/src/models/metadata-encrypted.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Encrypted=void 0;var t=(init_tslib_es62(),__toCommonJS(tslib_es6_exports2)),r=require_cjs(),n=e.Encrypted=class{constructor(){this.DecryptedLengthBeforeInflate=-1,this.CypherBlockPadding=-1}get OriginalLength(){return"undefined"!==typeof this.OriginalLength2?this.OriginalLength2:this.OriginalLength1}set OriginalLength(e){"undefined"!==typeof e&&(this.OriginalLength1=void 0,this.OriginalLength2=e)}};t.__decorate([(0,r.JsonProperty)("scheme"),t.__metadata("design:type",String)],n.prototype,"Scheme",void 0),t.__decorate([(0,r.JsonProperty)("profile"),t.__metadata("design:type",String)],n.prototype,"Profile",void 0),t.__decorate([(0,r.JsonProperty)("algorithm"),t.__metadata("design:type",String)],n.prototype,"Algorithm",void 0),t.__decorate([(0,r.JsonProperty)("compression"),t.__metadata("design:type",String)],n.prototype,"Compression",void 0),t.__decorate([(0,r.JsonProperty)("originalLength"),t.__metadata("design:type",Number)],n.prototype,"OriginalLength2",void 0),t.__decorate([(0,r.JsonProperty)("original-length"),t.__metadata("design:type",Object)],n.prototype,"OriginalLength1",void 0),e.Encrypted=n=t.__decorate([(0,r.JsonObject)()],n)}}),require_metadata_properties=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-properties.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Properties=e.PropertiesSupportedKeys=e.SpreadEnum=e.PageEnum=e.OverflowEnum=e.OrientationEnum=e.LayoutEnum=void 0;var t,r,n,i,o,s=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),a=require_cjs(),l=require_metadata_encrypted();(function(e){e["Fixed"]="fixed",e["Reflowable"]="reflowable"})(t||(e.LayoutEnum=t={})),function(e){e["Auto"]="auto",e["Landscape"]="landscape",e["Portrait"]="portrait"}(r||(e.OrientationEnum=r={})),function(e){e["Auto"]="auto",e["Paginated"]="paginated",e["Scrolled"]="scrolled",e["ScrolledContinuous"]="scrolled-continuous"}(n||(e.OverflowEnum=n={})),function(e){e["Left"]="left",e["Right"]="right",e["Center"]="center"}(i||(e.PageEnum=i={})),function(e){e["Auto"]="auto",e["Both"]="both",e["None"]="none",e["Landscape"]="landscape"}(o||(e.SpreadEnum=o={})),e.PropertiesSupportedKeys=["contains","layout","orientation","overflow","page","spread","encrypted","media-overlay"];var u=e.Properties=class{};s.__decorate([(0,a.JsonProperty)("contains"),(0,a.JsonElementType)(String),s.__metadata("design:type",Array)],u.prototype,"Contains",void 0),s.__decorate([(0,a.JsonProperty)("layout"),s.__metadata("design:type",String)],u.prototype,"Layout",void 0),s.__decorate([(0,a.JsonProperty)("orientation"),s.__metadata("design:type",String)],u.prototype,"Orientation",void 0),s.__decorate([(0,a.JsonProperty)("overflow"),s.__metadata("design:type",String)],u.prototype,"Overflow",void 0),s.__decorate([(0,a.JsonProperty)("page"),s.__metadata("design:type",String)],u.prototype,"Page",void 0),s.__decorate([(0,a.JsonProperty)("spread"),s.__metadata("design:type",String)],u.prototype,"Spread",void 0),s.__decorate([(0,a.JsonProperty)("encrypted"),s.__metadata("design:type",l.Encrypted)],u.prototype,"Encrypted",void 0),s.__decorate([(0,a.JsonProperty)("media-overlay"),s.__metadata("design:type",String)],u.prototype,"MediaOverlay",void 0),e.Properties=u=s.__decorate([(0,a.JsonObject)()],u)}}),require_publication_link=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/publication-link.js"(e){var t;init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Link=void 0;var r=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),n=require_cjs(),i=require_ta_json_string_converter(),o=require_decodeURI(),s=require_metadata_properties(),a="properties",l="children",u="alternate",c=e.Link=t=class{get Href(){return this.Href1}set Href(e){this.Href1=e,this._urlDecoded=void 0}get HrefDecoded(){if(this._urlDecoded)return this._urlDecoded;if(null!==this._urlDecoded){if(this.Href)return this._urlDecoded=(0,o.tryDecodeURI)(this.Href),this._urlDecoded?this._urlDecoded:void 0;this._urlDecoded=null}}set HrefDecoded(e){this._urlDecoded=e}setHrefDecoded(e){this.Href=e,this.HrefDecoded=e}AddRels(e){e.forEach((e=>{this.AddRel(e)}))}AddRel(e){this.HasRel(e)||(this.Rel?this.Rel.push(e):this.Rel=[e])}HasRel(e){return this.Rel&&this.Rel.indexOf(e)>=0}_OnDeserialized(){this.Href||this.Children&&this.Children.length||console.log("Link.Href is not set! (and no child Links)")}};r.__decorate([(0,n.JsonProperty)("type"),r.__metadata("design:type",String)],c.prototype,"TypeLink",void 0),r.__decorate([(0,n.JsonProperty)("height"),r.__metadata("design:type",Number)],c.prototype,"Height",void 0),r.__decorate([(0,n.JsonProperty)("width"),r.__metadata("design:type",Number)],c.prototype,"Width",void 0),r.__decorate([(0,n.JsonProperty)("title"),r.__metadata("design:type",String)],c.prototype,"Title",void 0),r.__decorate([(0,n.JsonProperty)(a),r.__metadata("design:type",s.Properties)],c.prototype,"Properties",void 0),r.__decorate([(0,n.JsonProperty)("duration"),r.__metadata("design:type",Number)],c.prototype,"Duration",void 0),r.__decorate([(0,n.JsonProperty)("bitrate"),r.__metadata("design:type",Number)],c.prototype,"Bitrate",void 0),r.__decorate([(0,n.JsonProperty)("templated"),r.__metadata("design:type",Boolean)],c.prototype,"Templated",void 0),r.__decorate([(0,n.JsonProperty)(l),(0,n.JsonElementType)(t),r.__metadata("design:type",Array)],c.prototype,"Children",void 0),r.__decorate([(0,n.JsonProperty)(u),(0,n.JsonElementType)(t),r.__metadata("design:type",Array)],c.prototype,"Alternate",void 0),r.__decorate([(0,n.JsonProperty)("rel"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],c.prototype,"Rel",void 0),r.__decorate([(0,n.JsonProperty)("href"),r.__metadata("design:type",String)],c.prototype,"Href1",void 0),r.__decorate([(0,n.OnDeserialized)(),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[]),r.__metadata("design:returntype",void 0)],c.prototype,"_OnDeserialized",null),e.Link=c=t=r.__decorate([(0,n.JsonObject)()],c)}}),require_metadata_contributor=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-contributor.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Contributor=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=require_ta_json_string_converter(),i=require_publication_link(),o="links",s=e.Contributor=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(e){e&&(this.SortAs1=void 0,this.SortAs2=e)}_OnDeserialized(){this.Name||console.log("Contributor.Name is not set!")}};t.__decorate([(0,r.JsonProperty)("name"),t.__metadata("design:type",Object)],s.prototype,"Name",void 0),t.__decorate([(0,r.JsonProperty)("sortAs"),t.__metadata("design:type",String)],s.prototype,"SortAs2",void 0),t.__decorate([(0,r.JsonProperty)("sort_as"),t.__metadata("design:type",Object)],s.prototype,"SortAs1",void 0),t.__decorate([(0,r.JsonProperty)("role"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],s.prototype,"Role",void 0),t.__decorate([(0,r.JsonProperty)("identifier"),t.__metadata("design:type",String)],s.prototype,"Identifier",void 0),t.__decorate([(0,r.JsonProperty)("position"),t.__metadata("design:type",Number)],s.prototype,"Position",void 0),t.__decorate([(0,r.JsonProperty)(o),(0,r.JsonElementType)(i.Link),t.__metadata("design:type",Array)],s.prototype,"Links",void 0),t.__decorate([(0,r.OnDeserialized)(),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[]),t.__metadata("design:returntype",void 0)],s.prototype,"_OnDeserialized",null),e.Contributor=s=t.__decorate([(0,r.JsonObject)()],s)}}),require_serializable=__commonJS({"node_modules/r2-lcp-js/dist/es6-es2015/src/serializable.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.TaJsonSerialize=e.TaJsonDeserialize=e.KeyToPreserveUnknownJSON=void 0;var t=require_cjs();function r(r,n){return t.JSON.deserialize(r,n,{keyToPreserveUnknownJSON:e.KeyToPreserveUnknownJSON})}function n(r){return t.JSON.serialize(r,{keyToPreserveUnknownJSON:e.KeyToPreserveUnknownJSON})}e.KeyToPreserveUnknownJSON="AdditionalJSON",e.TaJsonDeserialize=r,e.TaJsonSerialize=n}}),require_metadata_contributor_json_converter=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-contributor-json-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonContributorConverter=void 0;var t=require_serializable(),r=require_metadata_contributor(),n=class{serialize(e){return!e.Name||e.SortAs||e.Role&&e.Role.length||e.Identifier||"undefined"!==typeof e.Position||e.Links&&e.Links.length||"string"!==typeof e.Name?(0,t.TaJsonSerialize)(e):e.Name}deserialize(e){if("string"===typeof e){const t=new r.Contributor;return t.Name=e,t}return(0,t.TaJsonDeserialize)(e,r.Contributor)}collapseArrayWithSingleItem(){return!0}};e.JsonContributorConverter=n}}),require_metadata_belongsto=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-belongsto.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.BelongsTo=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=require_metadata_contributor(),i=require_metadata_contributor_json_converter(),o="series",s="collection",a=e.BelongsTo=class{};t.__decorate([(0,r.JsonProperty)(o),(0,r.JsonElementType)(n.Contributor),(0,r.JsonConverter)(i.JsonContributorConverter),t.__metadata("design:type",Array)],a.prototype,"Series",void 0),t.__decorate([(0,r.JsonProperty)(s),(0,r.JsonElementType)(n.Contributor),(0,r.JsonConverter)(i.JsonContributorConverter),t.__metadata("design:type",Array)],a.prototype,"Collection",void 0),e.BelongsTo=a=t.__decorate([(0,r.JsonObject)()],a)}}),require_metadata_media_overlay=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-media-overlay.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.MediaOverlay=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=e.MediaOverlay=class{};t.__decorate([(0,r.JsonProperty)("active-class"),t.__metadata("design:type",String)],n.prototype,"ActiveClass",void 0),t.__decorate([(0,r.JsonProperty)("playback-active-class"),t.__metadata("design:type",String)],n.prototype,"PlaybackActiveClass",void 0),e.MediaOverlay=n=t.__decorate([(0,r.JsonObject)()],n)}}),require_metadata_subject=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-subject.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Subject=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=require_publication_link(),i="links",o=e.Subject=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(e){e&&(this.SortAs1=void 0,this.SortAs2=e)}_OnDeserialized(){this.Name||console.log("Subject.Name is not set!")}};t.__decorate([(0,r.JsonProperty)("name"),t.__metadata("design:type",Object)],o.prototype,"Name",void 0),t.__decorate([(0,r.JsonProperty)("sortAs"),t.__metadata("design:type",String)],o.prototype,"SortAs2",void 0),t.__decorate([(0,r.JsonProperty)("sort_as"),t.__metadata("design:type",Object)],o.prototype,"SortAs1",void 0),t.__decorate([(0,r.JsonProperty)("scheme"),t.__metadata("design:type",String)],o.prototype,"Scheme",void 0),t.__decorate([(0,r.JsonProperty)("code"),t.__metadata("design:type",String)],o.prototype,"Code",void 0),t.__decorate([(0,r.JsonProperty)(i),(0,r.JsonElementType)(n.Link),t.__metadata("design:type",Array)],o.prototype,"Links",void 0),t.__decorate([(0,r.OnDeserialized)(),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[]),t.__metadata("design:returntype",void 0)],o.prototype,"_OnDeserialized",null),e.Subject=o=t.__decorate([(0,r.JsonObject)()],o)}}),require_metadata_subject_json_converter=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-subject-json-converter.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.JsonSubjectConverter=void 0;var t=require_serializable(),r=require_metadata_subject(),n=class{serialize(e){return!e.Name||e.SortAs||e.Scheme||e.Code||e.Links&&e.Links.length||"string"!==typeof e.Name?(0,t.TaJsonSerialize)(e):e.Name}deserialize(e){if("string"===typeof e){const t=new r.Subject;return t.Name=e,t}return(0,t.TaJsonDeserialize)(e,r.Subject)}collapseArrayWithSingleItem(){return!0}};e.JsonSubjectConverter=n}}),require_metadata_accessibility_certification=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-accessibility-certification.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityCertification=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=require_ta_json_string_converter(),i=e.AccessibilityCertification=class{};t.__decorate([(0,r.JsonProperty)("certifiedBy"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],i.prototype,"CertifiedBy",void 0),t.__decorate([(0,r.JsonProperty)("credential"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],i.prototype,"Credential",void 0),t.__decorate([(0,r.JsonProperty)("report"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],i.prototype,"Report",void 0),e.AccessibilityCertification=i=t.__decorate([(0,r.JsonObject)()],i)}}),require_metadata_accessibility=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata-accessibility.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityMetadata=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_cjs(),n=require_ta_json_string_converter(),i=require_metadata_accessibility_certification(),o=e.AccessibilityMetadata=class{};t.__decorate([(0,r.JsonProperty)("certification"),t.__metadata("design:type",i.AccessibilityCertification)],o.prototype,"Certification",void 0),t.__decorate([(0,r.JsonProperty)("conformsTo"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],o.prototype,"ConformsTo",void 0),t.__decorate([(0,r.JsonProperty)("summary"),t.__metadata("design:type",Object)],o.prototype,"Summary",void 0),t.__decorate([(0,r.JsonProperty)("accessMode"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],o.prototype,"AccessMode",void 0),t.__decorate([(0,r.JsonProperty)("accessModeSufficient"),(0,r.JsonElementType)(Array),t.__metadata("design:type",Array)],o.prototype,"AccessModeSufficient",void 0),t.__decorate([(0,r.JsonProperty)("feature"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],o.prototype,"Feature",void 0),t.__decorate([(0,r.JsonProperty)("hazard"),(0,r.JsonConverter)(n.JsonStringConverter),(0,r.JsonElementType)(String),t.__metadata("design:type",Array)],o.prototype,"Hazard",void 0),e.AccessibilityMetadata=o=t.__decorate([(0,r.JsonObject)()],o)}}),require_metadata=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/metadata.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=e.MetadataSupportedKeys=e.DirectionEnum=void 0;var t,r=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),n=require_cjs(),i=require_ta_json_string_converter(),o=require_metadata_belongsto(),s=require_metadata_contributor(),a=require_metadata_contributor_json_converter(),l=require_metadata_media_overlay(),u=require_metadata_properties(),c=require_metadata_subject(),d=require_metadata_subject_json_converter(),h=require_metadata_accessibility();(function(e){e["Auto"]="auto",e["RTL"]="rtl",e["LTR"]="ltr"})(t||(e.DirectionEnum=t={})),e.MetadataSupportedKeys=["cover","dtb:totalTime","media:duration","media:narrator","media:active-class","media:playback-active-class","dcterms:modified","dcterms:creator","dcterms:contributor","schema:accessMode","schema:accessibilityFeature","schema:accessibilityHazard","schema:accessibilitySummary","schema:accessModeSufficient","schema:accessibilityAPI","schema:accessibilityControl","a11y:certifiedBy","a11y:certifierCredential","a11y:certifierReport","dcterms:conformsTo","title","subtitle","identifier","author","translator","editor","artist","illustrator","letterer","penciler","colorist","inker","narrator","contributor","publisher","imprint","language","modified","published","sortAs","description","readingProgression","direction","belongsTo","duration","numberOfPages","rights","rendition","source","subject"];var p=e.Metadata=class{get SortAs(){return this.SortAs2?this.SortAs2:this.SortAs1}set SortAs(e){e&&(this.SortAs1=void 0,this.SortAs2=e)}get Direction(){return this.Direction2?this.Direction2:this.Direction1}set Direction(e){e&&(this.Direction1=void 0,this.Direction2=e)}get BelongsTo(){return this.BelongsTo2?this.BelongsTo2:this.BelongsTo1}set BelongsTo(e){e&&(this.BelongsTo1=void 0,this.BelongsTo2=e)}_OnDeserialized(){this.Title||console.log("Metadata.Title is not set!")}};r.__decorate([(0,n.JsonProperty)("accessibility"),r.__metadata("design:type",h.AccessibilityMetadata)],p.prototype,"Accessibility",void 0),r.__decorate([(0,n.JsonProperty)("accessMode"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"AccessMode",void 0),r.__decorate([(0,n.JsonProperty)("accessibilityFeature"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"AccessibilityFeature",void 0),r.__decorate([(0,n.JsonProperty)("accessibilityHazard"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"AccessibilityHazard",void 0),r.__decorate([(0,n.JsonProperty)("accessibilitySummary"),r.__metadata("design:type",Object)],p.prototype,"AccessibilitySummary",void 0),r.__decorate([(0,n.JsonProperty)("accessModeSufficient"),(0,n.JsonElementType)(Array),r.__metadata("design:type",Array)],p.prototype,"AccessModeSufficient",void 0),r.__decorate([(0,n.JsonProperty)("accessibilityAPI"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"AccessibilityAPI",void 0),r.__decorate([(0,n.JsonProperty)("accessibilityControl"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"AccessibilityControl",void 0),r.__decorate([(0,n.JsonProperty)("certifiedBy"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"CertifiedBy",void 0),r.__decorate([(0,n.JsonProperty)("certifierCredential"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"CertifierCredential",void 0),r.__decorate([(0,n.JsonProperty)("certifierReport"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"CertifierReport",void 0),r.__decorate([(0,n.JsonProperty)("conformsTo"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],p.prototype,"ConformsTo",void 0),r.__decorate([(0,n.JsonProperty)("@type"),r.__metadata("design:type",String)],p.prototype,"RDFType",void 0),r.__decorate([(0,n.JsonProperty)("title"),r.__metadata("design:type",Object)],p.prototype,"Title",void 0),r.__decorate([(0,n.JsonProperty)("subtitle"),r.__metadata("design:type",Object)],p.prototype,"SubTitle",void 0),r.__decorate([(0,n.JsonProperty)("identifier"),r.__metadata("design:type",String)],p.prototype,"Identifier",void 0),r.__decorate([(0,n.JsonProperty)("author"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Author",void 0),r.__decorate([(0,n.JsonProperty)("translator"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Translator",void 0),r.__decorate([(0,n.JsonProperty)("editor"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Editor",void 0),r.__decorate([(0,n.JsonProperty)("artist"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Artist",void 0),r.__decorate([(0,n.JsonProperty)("illustrator"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Illustrator",void 0),r.__decorate([(0,n.JsonProperty)("letterer"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Letterer",void 0),r.__decorate([(0,n.JsonProperty)("penciler"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Penciler",void 0),r.__decorate([(0,n.JsonProperty)("colorist"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Colorist",void 0),r.__decorate([(0,n.JsonProperty)("inker"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Inker",void 0),r.__decorate([(0,n.JsonProperty)("narrator"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Narrator",void 0),r.__decorate([(0,n.JsonProperty)("contributor"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Contributor",void 0),r.__decorate([(0,n.JsonProperty)("publisher"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Publisher",void 0),r.__decorate([(0,n.JsonProperty)("imprint"),(0,n.JsonElementType)(s.Contributor),(0,n.JsonConverter)(a.JsonContributorConverter),r.__metadata("design:type",Array)],p.prototype,"Imprint",void 0),r.__decorate([(0,n.JsonProperty)("language"),(0,n.JsonElementType)(String),(0,n.JsonConverter)(i.JsonStringConverter),r.__metadata("design:type",Array)],p.prototype,"Language",void 0),r.__decorate([(0,n.JsonProperty)("modified"),r.__metadata("design:type",Date)],p.prototype,"Modified",void 0),r.__decorate([(0,n.JsonProperty)("published"),r.__metadata("design:type",Date)],p.prototype,"PublicationDate",void 0),r.__decorate([(0,n.JsonProperty)("sortAs"),r.__metadata("design:type",String)],p.prototype,"SortAs2",void 0),r.__decorate([(0,n.JsonProperty)("sort_as"),r.__metadata("design:type",Object)],p.prototype,"SortAs1",void 0),r.__decorate([(0,n.JsonProperty)("description"),r.__metadata("design:type",String)],p.prototype,"Description",void 0),r.__decorate([(0,n.JsonProperty)("readingProgression"),r.__metadata("design:type",String)],p.prototype,"Direction2",void 0),r.__decorate([(0,n.JsonProperty)("direction"),r.__metadata("design:type",Object)],p.prototype,"Direction1",void 0),r.__decorate([(0,n.JsonProperty)("belongsTo"),r.__metadata("design:type",o.BelongsTo)],p.prototype,"BelongsTo2",void 0),r.__decorate([(0,n.JsonProperty)("belongs_to"),r.__metadata("design:type",Object)],p.prototype,"BelongsTo1",void 0),r.__decorate([(0,n.JsonProperty)("duration"),r.__metadata("design:type",Number)],p.prototype,"Duration",void 0),r.__decorate([(0,n.JsonProperty)("numberOfPages"),r.__metadata("design:type",Number)],p.prototype,"NumberOfPages",void 0),r.__decorate([(0,n.JsonProperty)("media-overlay"),r.__metadata("design:type",l.MediaOverlay)],p.prototype,"MediaOverlay",void 0),r.__decorate([(0,n.JsonProperty)("rights"),r.__metadata("design:type",String)],p.prototype,"Rights",void 0),r.__decorate([(0,n.JsonProperty)("rendition"),r.__metadata("design:type",u.Properties)],p.prototype,"Rendition",void 0),r.__decorate([(0,n.JsonProperty)("source"),r.__metadata("design:type",String)],p.prototype,"Source",void 0),r.__decorate([(0,n.JsonProperty)("subject"),(0,n.JsonConverter)(d.JsonSubjectConverter),(0,n.JsonElementType)(c.Subject),r.__metadata("design:type",Array)],p.prototype,"Subject",void 0),r.__decorate([(0,n.OnDeserialized)(),r.__metadata("design:type",Function),r.__metadata("design:paramtypes",[]),r.__metadata("design:returntype",void 0)],p.prototype,"_OnDeserialized",null),e.Metadata=p=r.__decorate([(0,n.JsonObject)()],p)}}),require_publication=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/publication.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Publication=void 0;var t=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),r=require_browser2(),n=require_cjs(),i=require_ta_json_string_converter(),o=require_metadata(),s=require_publication_link(),a=r("r2:shared#models/publication"),l="metadata",u="links",c="readingOrder",d="spine",h="resources",p="toc",f="page-list",g="pageList",m="landmarks",v="loi",y="loa",_="lov",b="lot",S=e.Publication=class{get Spine(){return this.Spine2?this.Spine2:this.Spine1}set Spine(e){e&&(this.Spine1=void 0,this.Spine2=e)}get PageList(){return this.PageList2?this.PageList2:this.PageList1}set PageList(e){e&&(this.PageList1=void 0,this.PageList2=e)}freeDestroy(){if(a("freeDestroy: Publication"),this.Internal){const e=this.findFromInternal("zip");if(e){const t=e.Value;t.freeDestroy()}}}findFromInternal(e){if(this.Internal){const t=this.Internal.find((t=>t.Name===e));if(t)return t}}AddToInternal(e,t){const r=this.findFromInternal(e);if(r)r.Value=t;else{this.Internal||(this.Internal=[]);const r={Name:e,Value:t};this.Internal.push(r)}}GetCover(){return this.searchLinkByRel("cover")}GetNavDoc(){return this.searchLinkByRel("contents")}searchLinkByRel(e){if(this.Resources){const t=this.Resources.find((t=>t.HasRel(e)));if(t)return t}if(this.Spine){const t=this.Spine.find((t=>t.HasRel(e)));if(t)return t}if(this.Links){const t=this.Links.find((t=>t.HasRel(e)));if(t)return t}}AddLink(e,t,r,n){const i=new s.Link;i.AddRels(t),i.setHrefDecoded(r),i.TypeLink=e,"undefined"!==typeof n&&(i.Templated=n),this.Links||(this.Links=[]),this.Links.push(i)}_OnDeserialized(){this.Metadata||console.log("Publication.Metadata is not set!"),this.Spine||console.log("Publication.Spine/ReadingOrder is not set!")}};t.__decorate([(0,n.JsonProperty)("@context"),(0,n.JsonElementType)(String),(0,n.JsonConverter)(i.JsonStringConverter),t.__metadata("design:type",Array)],S.prototype,"Context",void 0),t.__decorate([(0,n.JsonProperty)(l),t.__metadata("design:type",o.Metadata)],S.prototype,"Metadata",void 0),t.__decorate([(0,n.JsonProperty)(u),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"Links",void 0),t.__decorate([(0,n.JsonProperty)(c),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"Spine2",void 0),t.__decorate([(0,n.JsonProperty)(d),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Object)],S.prototype,"Spine1",void 0),t.__decorate([(0,n.JsonProperty)(h),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"Resources",void 0),t.__decorate([(0,n.JsonProperty)(p),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"TOC",void 0),t.__decorate([(0,n.JsonProperty)(g),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"PageList2",void 0),t.__decorate([(0,n.JsonProperty)(f),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Object)],S.prototype,"PageList1",void 0),t.__decorate([(0,n.JsonProperty)(m),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"Landmarks",void 0),t.__decorate([(0,n.JsonProperty)(v),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"LOI",void 0),t.__decorate([(0,n.JsonProperty)(y),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"LOA",void 0),t.__decorate([(0,n.JsonProperty)(_),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"LOV",void 0),t.__decorate([(0,n.JsonProperty)(b),(0,n.JsonElementType)(s.Link),t.__metadata("design:type",Array)],S.prototype,"LOT",void 0),t.__decorate([(0,n.OnDeserialized)(),t.__metadata("design:type",Function),t.__metadata("design:paramtypes",[]),t.__metadata("design:returntype",void 0)],S.prototype,"_OnDeserialized",null),e.Publication=S=t.__decorate([(0,n.JsonObject)()],S)}}),require_decode_data_html=__commonJS({"node_modules/entities/lib/generated/decode-data-html.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((function(e){return e.charCodeAt(0)})))}}),require_decode_data_xml=__commonJS({"node_modules/entities/lib/generated/decode-data-xml.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((function(e){return e.charCodeAt(0)})))}}),require_decode_codepoint=__commonJS({"node_modules/entities/lib/decode_codepoint.js"(e){var t;init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.replaceCodePoint=e.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function n(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=r.get(e))&&void 0!==t?t:e}function i(t){return(0,e.fromCodePoint)(n(t))}e.fromCodePoint=null!==(t=String.fromCodePoint)&&void 0!==t?t:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+=String.fromCharCode(e),t},e.replaceCodePoint=n,e.default=i}}),require_decode=__commonJS({"node_modules/entities/lib/decode.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),n=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXML=e.decodeHTMLStrict=e.decodeHTMLAttribute=e.decodeHTML=e.determineBranch=e.EntityDecoder=e.DecodingMode=e.BinTrieFlags=e.fromCodePoint=e.replaceCodePoint=e.decodeCodePoint=e.xmlDecodeTree=e.htmlDecodeTree=void 0;var o=i(require_decode_data_html());e.htmlDecodeTree=o.default;var s=i(require_decode_data_xml());e.xmlDecodeTree=s.default;var a=n(require_decode_codepoint());e.decodeCodePoint=a.default;var l,u=require_decode_codepoint();Object.defineProperty(e,"replaceCodePoint",{enumerable:!0,get:function(){return u.replaceCodePoint}}),Object.defineProperty(e,"fromCodePoint",{enumerable:!0,get:function(){return u.fromCodePoint}}),function(e){e[e["NUM"]=35]="NUM",e[e["SEMI"]=59]="SEMI",e[e["EQUALS"]=61]="EQUALS",e[e["ZERO"]=48]="ZERO",e[e["NINE"]=57]="NINE",e[e["LOWER_A"]=97]="LOWER_A",e[e["LOWER_F"]=102]="LOWER_F",e[e["LOWER_X"]=120]="LOWER_X",e[e["LOWER_Z"]=122]="LOWER_Z",e[e["UPPER_A"]=65]="UPPER_A",e[e["UPPER_F"]=70]="UPPER_F",e[e["UPPER_Z"]=90]="UPPER_Z"}(l||(l={}));var c,d,h,p=32;function f(e){return e>=l.ZERO&&e<=l.NINE}function g(e){return e>=l.UPPER_A&&e<=l.UPPER_F||e>=l.LOWER_A&&e<=l.LOWER_F}function m(e){return e>=l.UPPER_A&&e<=l.UPPER_Z||e>=l.LOWER_A&&e<=l.LOWER_Z||f(e)}function v(e){return e===l.EQUALS||m(e)}(function(e){e[e["VALUE_LENGTH"]=49152]="VALUE_LENGTH",e[e["BRANCH_LENGTH"]=16256]="BRANCH_LENGTH",e[e["JUMP_TABLE"]=127]="JUMP_TABLE"})(c=e.BinTrieFlags||(e.BinTrieFlags={})),function(e){e[e["EntityStart"]=0]="EntityStart",e[e["NumericStart"]=1]="NumericStart",e[e["NumericDecimal"]=2]="NumericDecimal",e[e["NumericHex"]=3]="NumericHex",e[e["NamedEntity"]=4]="NamedEntity"}(d||(d={})),function(e){e[e["Legacy"]=0]="Legacy",e[e["Strict"]=1]="Strict",e[e["Attribute"]=2]="Attribute"}(h=e.DecodingMode||(e.DecodingMode={}));var y=function(){function e(e,t,r){this.decodeTree=e,this.emitCodePoint=t,this.errors=r,this.state=d.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=h.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=d.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case d.EntityStart:return e.charCodeAt(t)===l.NUM?(this.state=d.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=d.NamedEntity,this.stateNamedEntity(e,t));case d.NumericStart:return this.stateNumericStart(e,t);case d.NumericDecimal:return this.stateNumericDecimal(e,t);case d.NumericHex:return this.stateNumericHex(e,t);case d.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(e.charCodeAt(t)|p)===l.LOWER_X?(this.state=d.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=d.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,r,n){if(t!==r){var i=r-t;this.result=this.result*Math.pow(n,i)+parseInt(e.substr(t,i),n),this.consumed+=i}},e.prototype.stateNumericHex=function(e,t){var r=t;while(t<e.length){var n=e.charCodeAt(t);if(!f(n)&&!g(n))return this.addToNumericResult(e,r,t,16),this.emitNumericEntity(n,3);t+=1}return this.addToNumericResult(e,r,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){var r=t;while(t<e.length){var n=e.charCodeAt(t);if(!f(n))return this.addToNumericResult(e,r,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,r,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var r;if(this.consumed<=t)return null===(r=this.errors)||void 0===r||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===l.SEMI)this.consumed+=1;else if(this.decodeMode===h.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==l.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var r=this.decodeTree,n=r[this.treeIndex],i=(n&c.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var o=e.charCodeAt(t);if(this.treeIndex=b(r,n,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return 0===this.result||this.decodeMode===h.Attribute&&(0===i||v(o))?0:this.emitNotTerminatedNamedEntity();if(n=r[this.treeIndex],i=(n&c.VALUE_LENGTH)>>14,0!==i){if(o===l.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==h.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this,r=t.result,n=t.decodeTree,i=(n[r]&c.VALUE_LENGTH)>>14;return this.emitNamedEntityData(r,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,r){var n=this.decodeTree;return this.emitCodePoint(1===t?n[e]&~c.VALUE_LENGTH:n[e+1],r),3===t&&this.emitCodePoint(n[e+2],r),r},e.prototype.end=function(){var e;switch(this.state){case d.NamedEntity:return 0===this.result||this.decodeMode===h.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case d.NumericDecimal:return this.emitNumericEntity(0,2);case d.NumericHex:return this.emitNumericEntity(0,3);case d.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case d.EntityStart:return 0}},e}();function _(e){var t="",r=new y(e,(function(e){return t+=(0,a.fromCodePoint)(e)}));return function(e,n){var i=0,o=0;while((o=e.indexOf("&",o))>=0){t+=e.slice(i,o),r.startEntity(n);var s=r.write(e,o+1);if(s<0){i=o+r.end();break}i=o+s,o=0===s?i+1:i}var a=t+e.slice(i);return t="",a}}function b(e,t,r,n){var i=(t&c.BRANCH_LENGTH)>>7,o=t&c.JUMP_TABLE;if(0===i)return 0!==o&&n===o?r:-1;if(o){var s=n-o;return s<0||s>=i?-1:e[r+s]-1}var a=r,l=a+i-1;while(a<=l){var u=a+l>>>1,d=e[u];if(d<n)a=u+1;else{if(!(d>n))return e[u+i];l=u-1}}return-1}e.EntityDecoder=y,e.determineBranch=b;var S=_(o.default),w=_(s.default);function C(e,t){return void 0===t&&(t=h.Legacy),S(e,t)}function A(e){return S(e,h.Attribute)}function E(e){return S(e,h.Strict)}function x(e){return w(e,h.Strict)}e.decodeHTML=C,e.decodeHTMLAttribute=A,e.decodeHTMLStrict=E,e.decodeXML=x}}),require_Tokenizer=__commonJS({"node_modules/htmlparser2/lib/Tokenizer.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.QuoteType=void 0;var t,r,n,i=require_decode();function o(e){return e===t.Space||e===t.NewLine||e===t.Tab||e===t.FormFeed||e===t.CarriageReturn}function s(e){return e===t.Slash||e===t.Gt||o(e)}function a(e){return e>=t.Zero&&e<=t.Nine}function l(e){return e>=t.LowerA&&e<=t.LowerZ||e>=t.UpperA&&e<=t.UpperZ}function u(e){return e>=t.UpperA&&e<=t.UpperF||e>=t.LowerA&&e<=t.LowerF}(function(e){e[e["Tab"]=9]="Tab",e[e["NewLine"]=10]="NewLine",e[e["FormFeed"]=12]="FormFeed",e[e["CarriageReturn"]=13]="CarriageReturn",e[e["Space"]=32]="Space",e[e["ExclamationMark"]=33]="ExclamationMark",e[e["Number"]=35]="Number",e[e["Amp"]=38]="Amp",e[e["SingleQuote"]=39]="SingleQuote",e[e["DoubleQuote"]=34]="DoubleQuote",e[e["Dash"]=45]="Dash",e[e["Slash"]=47]="Slash",e[e["Zero"]=48]="Zero",e[e["Nine"]=57]="Nine",e[e["Semi"]=59]="Semi",e[e["Lt"]=60]="Lt",e[e["Eq"]=61]="Eq",e[e["Gt"]=62]="Gt",e[e["Questionmark"]=63]="Questionmark",e[e["UpperA"]=65]="UpperA",e[e["LowerA"]=97]="LowerA",e[e["UpperF"]=70]="UpperF",e[e["LowerF"]=102]="LowerF",e[e["UpperZ"]=90]="UpperZ",e[e["LowerZ"]=122]="LowerZ",e[e["LowerX"]=120]="LowerX",e[e["OpeningSquareBracket"]=91]="OpeningSquareBracket"})(t||(t={})),function(e){e[e["Text"]=1]="Text",e[e["BeforeTagName"]=2]="BeforeTagName",e[e["InTagName"]=3]="InTagName",e[e["InSelfClosingTag"]=4]="InSelfClosingTag",e[e["BeforeClosingTagName"]=5]="BeforeClosingTagName",e[e["InClosingTagName"]=6]="InClosingTagName",e[e["AfterClosingTagName"]=7]="AfterClosingTagName",e[e["BeforeAttributeName"]=8]="BeforeAttributeName",e[e["InAttributeName"]=9]="InAttributeName",e[e["AfterAttributeName"]=10]="AfterAttributeName",e[e["BeforeAttributeValue"]=11]="BeforeAttributeValue",e[e["InAttributeValueDq"]=12]="InAttributeValueDq",e[e["InAttributeValueSq"]=13]="InAttributeValueSq",e[e["InAttributeValueNq"]=14]="InAttributeValueNq",e[e["BeforeDeclaration"]=15]="BeforeDeclaration",e[e["InDeclaration"]=16]="InDeclaration",e[e["InProcessingInstruction"]=17]="InProcessingInstruction",e[e["BeforeComment"]=18]="BeforeComment",e[e["CDATASequence"]=19]="CDATASequence",e[e["InSpecialComment"]=20]="InSpecialComment",e[e["InCommentLike"]=21]="InCommentLike",e[e["BeforeSpecialS"]=22]="BeforeSpecialS",e[e["SpecialStartSequence"]=23]="SpecialStartSequence",e[e["InSpecialTag"]=24]="InSpecialTag",e[e["BeforeEntity"]=25]="BeforeEntity",e[e["BeforeNumericEntity"]=26]="BeforeNumericEntity",e[e["InNamedEntity"]=27]="InNamedEntity",e[e["InNumericEntity"]=28]="InNumericEntity",e[e["InHexEntity"]=29]="InHexEntity"}(r||(r={})),function(e){e[e["NoValue"]=0]="NoValue",e[e["Unquoted"]=1]="Unquoted",e[e["Single"]=2]="Single",e[e["Double"]=3]="Double"}(n=e.QuoteType||(e.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function e(e,t){var n=e.xmlMode,o=void 0!==n&&n,s=e.decodeEntities,a=void 0===s||s;this.cbs=t,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=o,this.decodeEntities=a,this.entityTrie=o?i.xmlDecodeTree:i.htmlDecodeTree}return e.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===t.Lt||!this.decodeEntities&&this.fastForwardTo(t.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===t.Amp&&(this.state=r.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length,n=t?s(e):(32|e)===this.currentSequence[this.sequenceIndex];if(n){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===t.Gt||o(e)){var n=this.index-this.currentSequence.length;if(this.sectionStart<n){var i=this.index;this.index=n,this.cbs.ontext(this.sectionStart,n),this.index=i}return this.isSpecial=!1,this.sectionStart=n+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===c.TitleEnd?this.decodeEntities&&e===t.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(t.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===t.Lt)},e.prototype.stateCDATASequence=function(e){e===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){while(++this.index<this.buffer.length+this.offset)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!s(e):l(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=r.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===t.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===t.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var n=32|e;this.sectionStart=this.index,this.xmlMode||n!==c.TitleEnd[2]?this.state=this.xmlMode||n!==c.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(c.TitleEnd,3)}else e===t.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){s(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){o(e)||(e===t.Gt?this.state=r.Text:(this.state=this.isTagStartChar(e)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===t.Gt||o(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===t.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===t.Slash?this.state=r.InSelfClosingTag:o(e)||(this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===t.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):o(e)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===t.Eq||s(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===t.Eq?this.state=r.BeforeAttributeValue:e===t.Slash||e===t.Gt?(this.cbs.onattribend(n.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):o(e)||(this.cbs.onattribend(n.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===t.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):e===t.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):o(e)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,i){e===i||!this.decodeEntities&&this.fastForwardTo(i)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i===t.DoubleQuote?n.Double:n.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,t.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,t.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){o(e)||e===t.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(n.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===t.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===t.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=e===t.Dash?r.BeforeComment:r.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===t.Dash?(this.state=r.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===t.Gt||this.fastForwardTo(t.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):t===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===t.Number?this.state=r.BeforeNumericEntity:e===t.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,i.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var r=this.trieCurrent&i.BinTrieFlags.VALUE_LENGTH;if(r){var n=(r>>14)-1;if(this.allowLegacyEntity()||e===t.Semi){var o=this.index-this.entityExcess+1;o>this.sectionStart&&this.emitPartial(this.sectionStart,o),this.entityResult=this.trieIndex,this.trieIndex+=n,this.entityExcess=0,this.sectionStart=this.index+1,0===n&&this.emitNamedEntity()}else this.trieIndex+=n}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult){var e=(this.entityTrie[this.entityResult]&i.BinTrieFlags.VALUE_LENGTH)>>14;switch(e){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~i.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===t.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1,n=t+2+Number(this.state===r.InHexEntity);n!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,i.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):a(e)?(this.entityResult=10*this.entityResult+(e-t.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===t.Semi?this.emitNumericEntity(!0):a(e)?(this.entityResult=16*this.entityResult+(e-t.Zero),this.entityExcess++):u(e)?(this.entityResult=16*this.entityResult+((32|e)-t.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==r.InAttributeValueDq&&this.state!==r.InAttributeValueSq&&this.state!==r.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){while(this.shouldContinue()){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(e);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case r.InSpecialTag:this.stateInSpecialTag(e);break;case r.CDATASequence:this.stateCDATASequence(e);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case r.InAttributeName:this.stateInAttributeName(e);break;case r.InCommentLike:this.stateInCommentLike(e);break;case r.InSpecialComment:this.stateInSpecialComment(e);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case r.InTagName:this.stateInTagName(e);break;case r.InClosingTagName:this.stateInClosingTagName(e);break;case r.BeforeTagName:this.stateBeforeTagName(e);break;case r.AfterAttributeName:this.stateAfterAttributeName(e);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case r.InDeclaration:this.stateInDeclaration(e);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case r.BeforeComment:this.stateBeforeComment(e);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case r.InNamedEntity:this.stateInNamedEntity(e);break;case r.BeforeEntity:this.stateBeforeEntity(e);break;case r.InHexEntity:this.stateInHexEntity(e);break;case r.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()||this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();e.default=d}}),require_Parser=__commonJS({"node_modules/htmlparser2/lib/Parser.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),n=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n};Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var i=n(require_Tokenizer()),o=require_decode(),s=new Set(["input","option","optgroup","select","button","datalist","textarea"]),a=new Set(["p"]),l=new Set(["thead","tbody"]),u=new Set(["dd","dt"]),c=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",a],["h1",a],["h2",a],["h3",a],["h4",a],["h5",a],["h6",a],["select",s],["input",s],["output",s],["button",s],["datalist",s],["textarea",s],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",u],["dt",u],["address",a],["article",a],["aside",a],["blockquote",a],["details",a],["div",a],["dl",a],["fieldset",a],["figcaption",a],["figure",a],["footer",a],["form",a],["header",a],["hr",a],["main",a],["nav",a],["ol",a],["pre",a],["section",a],["table",a],["ul",a],["rt",c],["rp",c],["tbody",l],["tfoot",l]]),h=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),p=new Set(["math","svg"]),f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),g=/\s|\//,m=function(){function e(e,t){var r,n,o,s,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!==e&&void 0!==e?e:{},this.lowerCaseTagNames=null!==(r=t.lowerCaseTags)&&void 0!==r?r:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(o=t.Tokenizer)&&void 0!==o?o:i.default)(this.options,this),null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}return e.prototype.ontext=function(e,t){var r,n,i=this.getSlice(e,t);this.endIndex=t-1,null===(n=(r=this.cbs).ontext)||void 0===n||n.call(r,i),this.startIndex=t},e.prototype.ontextentity=function(e){var t,r,n=this.tokenizer.getSectionStart();this.endIndex=n-1,null===(r=(t=this.cbs).ontext)||void 0===r||r.call(t,(0,o.fromCodePoint)(e)),this.startIndex=n},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&h.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);this.lowerCaseTagNames&&(r=r.toLowerCase()),this.emitOpenTag(r)},e.prototype.emitOpenTag=function(e){var t,r,n,i;this.openTagStart=this.startIndex,this.tagname=e;var o=!this.options.xmlMode&&d.get(e);if(o)while(this.stack.length>0&&o.has(this.stack[this.stack.length-1])){var s=this.stack.pop();null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,s,!0)}this.isVoidElement(e)||(this.stack.push(e),p.has(e)?this.foreignContext.push(!0):f.has(e)&&this.foreignContext.push(!1)),null===(i=(n=this.cbs).onopentagname)||void 0===i||i.call(n,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,r;this.startIndex=this.openTagStart,this.attribs&&(null===(r=(t=this.cbs).onopentag)||void 0===r||r.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var r,n,i,o,s,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(p.has(l)||f.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(n=(r=this.cbs).onopentagname)||void 0===n||n.call(r,"br"),null===(o=(i=this.cbs).onopentag)||void 0===o||o.call(i,"br",{},!0),null===(a=(s=this.cbs).onclosetag)||void 0===a||a.call(s,"br",!1));else{var u=this.stack.lastIndexOf(l);if(-1!==u)if(this.cbs.onclosetag){var c=this.stack.length-u;while(c--)this.cbs.onclosetag(this.stack.pop(),0!==c)}else this.stack.length=u;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,r,n=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===n&&(null===(r=(t=this.cbs).onclosetag)||void 0===r||r.call(t,n,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var r=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?r.toLowerCase():r},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,o.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var r,n;this.endIndex=t,null===(n=(r=this.cbs).onattribute)||void 0===n||n.call(r,this.attribname,this.attribvalue,e===i.QuoteType.Double?'"':e===i.QuoteType.Single?"'":e===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(g),r=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(r=r.toLowerCase()),r},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(r))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var r=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(r);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(r))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,r){var n,i,o,s;this.endIndex=t,null===(i=(n=this.cbs).oncomment)||void 0===i||i.call(n,this.getSlice(e,t-r)),null===(s=(o=this.cbs).oncommentend)||void 0===s||s.call(o),this.startIndex=t+1},e.prototype.oncdata=function(e,t,r){var n,i,o,s,a,l,u,c,d,h;this.endIndex=t;var p=this.getSlice(e,t-r);this.options.xmlMode||this.options.recognizeCDATA?(null===(i=(n=this.cbs).oncdatastart)||void 0===i||i.call(n),null===(s=(o=this.cbs).ontext)||void 0===s||s.call(o,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(c=(u=this.cbs).oncomment)||void 0===c||c.call(u,"[CDATA[".concat(p,"]]")),null===(h=(d=this.cbs).oncommentend)||void 0===h||h.call(d)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var r=this.stack.length;r>0;this.cbs.onclosetag(this.stack[--r],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,r,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(r=this.cbs).onparserinit)||void 0===n||n.call(r,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){while(e-this.bufferOffset>=this.buffers[0].length)this.shiftBuffer();var r=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);while(t-this.bufferOffset>this.buffers[0].length)this.shiftBuffer(),r+=this.buffers[0].slice(0,t-this.bufferOffset);return r},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,r;this.ended?null===(r=(t=this.cbs).onerror)||void 0===r||r.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){this.tokenizer.resume();while(this.tokenizer.running&&this.writeIndex<this.buffers.length)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();e.Parser=m}}),require_lib=__commonJS({"node_modules/domelementtype/lib/index.js"(e){var t;function r(e){return e.type===t.Tag||e.type===t.Script||e.type===t.Style}init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0,function(e){e["Root"]="root",e["Text"]="text",e["Directive"]="directive",e["Comment"]="comment",e["Script"]="script",e["Style"]="style",e["Tag"]="tag",e["CDATA"]="cdata",e["Doctype"]="doctype"}(t=e.ElementType||(e.ElementType={})),e.isTag=r,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype}}),require_node=__commonJS({"node_modules/domhandler/lib/node.js"(e){init_polyfills();var t=e&&e.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),r=e&&e.__assign||function(){return r=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.cloneNode=e.hasChildren=e.isDocument=e.isDirective=e.isComment=e.isText=e.isCDATA=e.isTag=e.Element=e.Document=e.CDATA=e.NodeWithChildren=e.ProcessingInstruction=e.Comment=e.Text=e.DataNode=e.Node=void 0;var n=require_lib(),i=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),b(this,e)},e}();e.Node=i;var o=function(e){function r(t){var r=e.call(this)||this;return r.data=t,r}return t(r,e),Object.defineProperty(r.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),r}(i);e.DataNode=o;var s=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.ElementType.Text,t}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),r}(o);e.Text=s;var a=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.ElementType.Comment,t}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),r}(o);e.Comment=a;var l=function(e){function r(t,r){var i=e.call(this,r)||this;return i.name=t,i.type=n.ElementType.Directive,i}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),r}(o);e.ProcessingInstruction=l;var u=function(e){function r(t){var r=e.call(this)||this;return r.children=t,r}return t(r,e),Object.defineProperty(r.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),r}(i);e.NodeWithChildren=u;var c=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.ElementType.CDATA,t}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),r}(u);e.CDATA=c;var d=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=n.ElementType.Root,t}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),r}(u);e.Document=d;var h=function(e){function r(t,r,i,o){void 0===i&&(i=[]),void 0===o&&(o="script"===t?n.ElementType.Script:"style"===t?n.ElementType.Style:n.ElementType.Tag);var s=e.call(this,i)||this;return s.name=t,s.attribs=r,s.type=o,s}return t(r,e),Object.defineProperty(r.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var r,n;return{name:t,value:e.attribs[t],namespace:null===(r=e["x-attribsNamespace"])||void 0===r?void 0:r[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}}))},enumerable:!1,configurable:!0}),r}(u);function p(e){return(0,n.isTag)(e)}function f(e){return e.type===n.ElementType.CDATA}function g(e){return e.type===n.ElementType.Text}function m(e){return e.type===n.ElementType.Comment}function v(e){return e.type===n.ElementType.Directive}function y(e){return e.type===n.ElementType.Root}function _(e){return Object.prototype.hasOwnProperty.call(e,"children")}function b(e,t){var n;if(void 0===t&&(t=!1),g(e))n=new s(e.data);else if(m(e))n=new a(e.data);else if(p(e)){var i=t?S(e.children):[],o=new h(e.name,r({},e.attribs),i);i.forEach((function(e){return e.parent=o})),null!=e.namespace&&(o.namespace=e.namespace),e["x-attribsNamespace"]&&(o["x-attribsNamespace"]=r({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(o["x-attribsPrefix"]=r({},e["x-attribsPrefix"])),n=o}else if(f(e)){i=t?S(e.children):[];var u=new c(i);i.forEach((function(e){return e.parent=u})),n=u}else if(y(e)){i=t?S(e.children):[];var _=new d(i);i.forEach((function(e){return e.parent=_})),e["x-mode"]&&(_["x-mode"]=e["x-mode"]),n=_}else{if(!v(e))throw new Error("Not implemented yet: ".concat(e.type));var b=new l(e.name,e.data);null!=e["x-name"]&&(b["x-name"]=e["x-name"],b["x-publicId"]=e["x-publicId"],b["x-systemId"]=e["x-systemId"]),n=b}return n.startIndex=e.startIndex,n.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(n.sourceCodeLocation=e.sourceCodeLocation),n}function S(e){for(var t=e.map((function(e){return b(e,!0)})),r=1;r<t.length;r++)t[r].prev=t[r-1],t[r-1].next=t[r];return t}e.Element=h,e.isTag=p,e.isCDATA=f,e.isText=g,e.isComment=m,e.isDirective=v,e.isDocument=y,e.hasChildren=_,e.cloneNode=b}}),require_lib2=__commonJS({"node_modules/domhandler/lib/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var n=require_lib(),i=require_node();r(require_node(),e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=function(){function e(e,t,r){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"===typeof t&&(r=t,t=o),"object"===typeof e&&(t=e,e=void 0),this.callback=null!==e&&void 0!==e?e:null,this.options=null!==t&&void 0!==t?t:o,this.elementCB=null!==r&&void 0!==r?r:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var r=this.options.xmlMode?n.ElementType.Tag:void 0,o=new i.Element(e,t,void 0,r);this.addNode(o),this.tagStack.push(o)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===n.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var r=new i.Text(e);this.addNode(r),this.lastNode=r}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment)this.lastNode.data+=e;else{var t=new i.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new i.Text(""),t=new i.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var r=new i.ProcessingInstruction(e,t);this.addNode(r)},e.prototype.handleCallback=function(e){if("function"===typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],r=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),r&&(e.prev=r,r.next=e),e.parent=t,this.lastNode=null},e}();e.DomHandler=s,e.default=s}}),require_encode_html=__commonJS({"node_modules/entities/lib/generated/encode-html.js"(e){function t(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.default=new Map(t([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(t([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(t([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(t([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))}}),require_escape=__commonJS({"node_modules/entities/lib/escape.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.getCodePoint=e.xmlReplacer=void 0,e.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var t=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function r(r){var n,i="",o=0;while(null!==(n=e.xmlReplacer.exec(r))){var s=n.index,a=r.charCodeAt(s),l=t.get(a);void 0!==l?(i+=r.substring(o,s)+l,o=s+1):(i+="".concat(r.substring(o,s),"&#x").concat((0,e.getCodePoint)(r,s).toString(16),";"),o=e.xmlReplacer.lastIndex+=Number(55296===(64512&a)))}return i+r.substr(o)}function n(e,t){return function(r){var n,i=0,o="";while(n=e.exec(r))i!==n.index&&(o+=r.substring(i,n.index)),o+=t.get(n[0].charCodeAt(0)),i=n.index+1;return o+r.substring(i)}}e.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296===(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},e.encodeXML=r,e.escape=r,e.escapeUTF8=n(/[&<>'"]/g,t),e.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),e.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))}}),require_encode=__commonJS({"node_modules/entities/lib/encode.js"(e){init_polyfills();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.encodeNonAsciiHTML=e.encodeHTML=void 0;var r=t(require_encode_html()),n=require_escape(),i=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function o(e){return a(i,e)}function s(e){return a(n.xmlReplacer,e)}function a(e,t){var i,o="",s=0;while(null!==(i=e.exec(t))){var a=i.index;o+=t.substring(s,a);var l=t.charCodeAt(a),u=r.default.get(l);if("object"===typeof u){if(a+1<t.length){var c=t.charCodeAt(a+1),d="number"===typeof u.n?u.n===c?u.o:void 0:u.n.get(c);if(void 0!==d){o+=d,s=e.lastIndex+=1;continue}}u=u.v}if(void 0!==u)o+=u,s=a+1;else{var h=(0,n.getCodePoint)(t,a);o+="&#x".concat(h.toString(16),";"),s=e.lastIndex+=Number(h!==l)}}return o+t.substr(s)}e.encodeHTML=o,e.encodeNonAsciiHTML=s}}),require_lib3=__commonJS({"node_modules/entities/lib/index.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.decodeXMLStrict=e.decodeHTML5Strict=e.decodeHTML4Strict=e.decodeHTML5=e.decodeHTML4=e.decodeHTMLAttribute=e.decodeHTMLStrict=e.decodeHTML=e.decodeXML=e.DecodingMode=e.EntityDecoder=e.encodeHTML5=e.encodeHTML4=e.encodeNonAsciiHTML=e.encodeHTML=e.escapeText=e.escapeAttribute=e.escapeUTF8=e.escape=e.encodeXML=e.encode=e.decodeStrict=e.decode=e.EncodingMode=e.EntityLevel=void 0;var t,r,n=require_decode(),i=require_encode(),o=require_escape();function s(e,r){void 0===r&&(r=t.XML);var i="number"===typeof r?r:r.level;if(i===t.HTML){var o="object"===typeof r?r.mode:void 0;return(0,n.decodeHTML)(e,o)}return(0,n.decodeXML)(e)}function a(e,r){var i;void 0===r&&(r=t.XML);var o="number"===typeof r?{level:r}:r;return null!==(i=o.mode)&&void 0!==i||(o.mode=n.DecodingMode.Strict),s(e,o)}function l(e,n){void 0===n&&(n=t.XML);var s="number"===typeof n?{level:n}:n;return s.mode===r.UTF8?(0,o.escapeUTF8)(e):s.mode===r.Attribute?(0,o.escapeAttribute)(e):s.mode===r.Text?(0,o.escapeText)(e):s.level===t.HTML?s.mode===r.ASCII?(0,i.encodeNonAsciiHTML)(e):(0,i.encodeHTML)(e):(0,o.encodeXML)(e)}(function(e){e[e["XML"]=0]="XML",e[e["HTML"]=1]="HTML"})(t=e.EntityLevel||(e.EntityLevel={})),function(e){e[e["UTF8"]=0]="UTF8",e[e["ASCII"]=1]="ASCII",e[e["Extensive"]=2]="Extensive",e[e["Attribute"]=3]="Attribute",e[e["Text"]=4]="Text"}(r=e.EncodingMode||(e.EncodingMode={})),e.decode=s,e.decodeStrict=a,e.encode=l;var u=require_escape();Object.defineProperty(e,"encodeXML",{enumerable:!0,get:function(){return u.encodeXML}}),Object.defineProperty(e,"escape",{enumerable:!0,get:function(){return u.escape}}),Object.defineProperty(e,"escapeUTF8",{enumerable:!0,get:function(){return u.escapeUTF8}}),Object.defineProperty(e,"escapeAttribute",{enumerable:!0,get:function(){return u.escapeAttribute}}),Object.defineProperty(e,"escapeText",{enumerable:!0,get:function(){return u.escapeText}});var c=require_encode();Object.defineProperty(e,"encodeHTML",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(e,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return c.encodeNonAsciiHTML}}),Object.defineProperty(e,"encodeHTML4",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(e,"encodeHTML5",{enumerable:!0,get:function(){return c.encodeHTML}});var d=require_decode();Object.defineProperty(e,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(e,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(e,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(e,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(e,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(e,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(e,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})}}),require_foreignNames=__commonJS({"node_modules/dom-serializer/lib/foreignNames.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.attributeNames=e.elementNames=void 0,e.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((function(e){return[e.toLowerCase(),e]}))),e.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((function(e){return[e.toLowerCase(),e]})))}}),require_lib4=__commonJS({"node_modules/dom-serializer/lib/index.js"(e){init_polyfills();var t=e&&e.__assign||function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)},r=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),n=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(e,"__esModule",{value:!0}),e.render=void 0;var o=i(require_lib()),s=require_lib3(),a=require_foreignNames(),l=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function u(e){return e.replace(/"/g,"&quot;")}function c(e,t){var r;if(e){var n=!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)?u:t.xmlMode||"utf8"!==t.encodeEntities?s.encodeXML:s.escapeAttribute;return Object.keys(e).map((function(r){var i,o,s=null!==(i=e[r])&&void 0!==i?i:"";return"foreign"===t.xmlMode&&(r=null!==(o=a.attributeNames.get(r))&&void 0!==o?o:r),t.emptyAttrs||t.xmlMode||""!==s?"".concat(r,'="').concat(n(s),'"'):r})).join(" ")}}var d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function h(e,t){void 0===t&&(t={});for(var r=("length"in e?e:[e]),n="",i=0;i<r.length;i++)n+=p(r[i],t);return n}function p(e,t){switch(e.type){case o.Root:return h(e.children,t);case o.Doctype:case o.Directive:return v(e);case o.Comment:return b(e);case o.CDATA:return _(e);case o.Script:case o.Style:case o.Tag:return m(e,t);case o.Text:return y(e,t)}}e.render=h,e.default=h;var f=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"]);function m(e,r){var n;"foreign"===r.xmlMode&&(e.name=null!==(n=a.elementNames.get(e.name))&&void 0!==n?n:e.name,e.parent&&f.has(e.parent.name)&&(r=t(t({},r),{xmlMode:!1}))),!r.xmlMode&&g.has(e.name)&&(r=t(t({},r),{xmlMode:"foreign"}));var i="<".concat(e.name),o=c(e.attribs,r);return o&&(i+=" ".concat(o)),0===e.children.length&&(r.xmlMode?!1!==r.selfClosingTags:r.selfClosingTags&&d.has(e.name))?(r.xmlMode||(i+=" "),i+="/>"):(i+=">",e.children.length>0&&(i+=h(e.children,r)),!r.xmlMode&&d.has(e.name)||(i+="</".concat(e.name,">"))),i}function v(e){return"<".concat(e.data,">")}function y(e,t){var r,n=e.data||"";return!1===(null!==(r=t.encodeEntities)&&void 0!==r?r:t.decodeEntities)||!t.xmlMode&&e.parent&&l.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?(0,s.encodeXML)(n):(0,s.escapeText)(n)),n}function _(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}function b(e){return"\x3c!--".concat(e.data,"--\x3e")}}}),require_stringify=__commonJS({"node_modules/domutils/lib/stringify.js"(e){init_polyfills();var t=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.innerText=e.textContent=e.getText=e.getInnerHTML=e.getOuterHTML=void 0;var r=require_lib2(),n=t(require_lib4()),i=require_lib();function o(e,t){return(0,n.default)(e,t)}function s(e,t){return(0,r.hasChildren)(e)?e.children.map((function(e){return o(e,t)})).join(""):""}function a(e){return Array.isArray(e)?e.map(a).join(""):(0,r.isTag)(e)?"br"===e.name?"\n":a(e.children):(0,r.isCDATA)(e)?a(e.children):(0,r.isText)(e)?e.data:""}function l(e){return Array.isArray(e)?e.map(l).join(""):(0,r.hasChildren)(e)&&!(0,r.isComment)(e)?l(e.children):(0,r.isText)(e)?e.data:""}function u(e){return Array.isArray(e)?e.map(u).join(""):(0,r.hasChildren)(e)&&(e.type===i.ElementType.Tag||(0,r.isCDATA)(e))?u(e.children):(0,r.isText)(e)?e.data:""}e.getOuterHTML=o,e.getInnerHTML=s,e.getText=a,e.textContent=l,e.innerText=u}}),require_traversal=__commonJS({"node_modules/domutils/lib/traversal.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.prevElementSibling=e.nextElementSibling=e.getName=e.hasAttrib=e.getAttributeValue=e.getSiblings=e.getParent=e.getChildren=void 0;var t=require_lib2();function r(e){return(0,t.hasChildren)(e)?e.children:[]}function n(e){return e.parent||null}function i(e){var t,i,o=n(e);if(null!=o)return r(o);var s=[e],a=e.prev,l=e.next;while(null!=a)s.unshift(a),t=a,a=t.prev;while(null!=l)s.push(l),i=l,l=i.next;return s}function o(e,t){var r;return null===(r=e.attribs)||void 0===r?void 0:r[t]}function s(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]}function a(e){return e.name}function l(e){var r,n=e.next;while(null!==n&&!(0,t.isTag)(n))r=n,n=r.next;return n}function u(e){var r,n=e.prev;while(null!==n&&!(0,t.isTag)(n))r=n,n=r.prev;return n}e.getChildren=r,e.getParent=n,e.getSiblings=i,e.getAttributeValue=o,e.hasAttrib=s,e.getName=a,e.nextElementSibling=l,e.prevElementSibling=u}}),require_manipulation=__commonJS({"node_modules/domutils/lib/manipulation.js"(e){function t(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,r=t.lastIndexOf(e);r>=0&&t.splice(r,1)}e.next=null,e.prev=null,e.parent=null}function r(e,t){var r=t.prev=e.prev;r&&(r.next=t);var n=t.next=e.next;n&&(n.prev=t);var i=t.parent=e.parent;if(i){var o=i.children;o[o.lastIndexOf(e)]=t,e.parent=null}}function n(e,r){if(t(r),r.next=null,r.parent=e,e.children.push(r)>1){var n=e.children[e.children.length-2];n.next=r,r.prev=n}else r.prev=null}function i(e,r){t(r);var n=e.parent,i=e.next;if(r.next=i,r.prev=e,e.next=r,r.parent=n,i){if(i.prev=r,n){var o=n.children;o.splice(o.lastIndexOf(i),0,r)}}else n&&n.children.push(r)}function o(e,r){if(t(r),r.parent=e,r.prev=null,1!==e.children.unshift(r)){var n=e.children[1];n.prev=r,r.next=n}else r.next=null}function s(e,r){t(r);var n=e.parent;if(n){var i=n.children;i.splice(i.indexOf(e),0,r)}e.prev&&(e.prev.next=r),r.parent=n,r.prev=e.prev,r.next=e,e.prev=r}init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=e.prependChild=e.append=e.appendChild=e.replaceElement=e.removeElement=void 0,e.removeElement=t,e.replaceElement=r,e.appendChild=n,e.append=i,e.prependChild=o,e.prepend=s}}),require_querying=__commonJS({"node_modules/domutils/lib/querying.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.findAll=e.existsOne=e.findOne=e.findOneChild=e.find=e.filter=void 0;var t=require_lib2();function r(e,t,r,i){return void 0===r&&(r=!0),void 0===i&&(i=1/0),n(e,Array.isArray(t)?t:[t],r,i)}function n(e,r,n,i){for(var o=[],s=[r],a=[0];;)if(a[0]>=s[0].length){if(1===a.length)return o;s.shift(),a.shift()}else{var l=s[0][a[0]++];if(e(l)&&(o.push(l),--i<=0))return o;n&&(0,t.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),s.unshift(l.children))}}function i(e,t){return t.find(e)}function o(e,r,n){void 0===n&&(n=!0);for(var i=null,s=0;s<r.length&&!i;s++){var a=r[s];(0,t.isTag)(a)&&(e(a)?i=a:n&&a.children.length>0&&(i=o(e,a.children,!0)))}return i}function s(e,r){return r.some((function(r){return(0,t.isTag)(r)&&(e(r)||s(e,r.children))}))}function a(e,r){for(var n=[],i=[r],o=[0];;)if(o[0]>=i[0].length){if(1===i.length)return n;i.shift(),o.shift()}else{var s=i[0][o[0]++];(0,t.isTag)(s)&&(e(s)&&n.push(s),s.children.length>0&&(o.unshift(0),i.unshift(s.children)))}}e.filter=r,e.find=n,e.findOneChild=i,e.findOne=o,e.existsOne=s,e.findAll=a}}),require_legacy=__commonJS({"node_modules/domutils/lib/legacy.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.getElementsByTagType=e.getElementsByTagName=e.getElementById=e.getElements=e.testElement=void 0;var t=require_lib2(),r=require_querying(),n={tag_name:function(e){return"function"===typeof e?function(r){return(0,t.isTag)(r)&&e(r.name)}:"*"===e?t.isTag:function(r){return(0,t.isTag)(r)&&r.name===e}},tag_type:function(e){return"function"===typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"===typeof e?function(r){return(0,t.isText)(r)&&e(r.data)}:function(r){return(0,t.isText)(r)&&r.data===e}}};function i(e,r){return"function"===typeof r?function(n){return(0,t.isTag)(n)&&r(n.attribs[e])}:function(n){return(0,t.isTag)(n)&&n.attribs[e]===r}}function o(e,t){return function(r){return e(r)||t(r)}}function s(e){var t=Object.keys(e).map((function(t){var r=e[t];return Object.prototype.hasOwnProperty.call(n,t)?n[t](r):i(t,r)}));return 0===t.length?null:t.reduce(o)}function a(e,t){var r=s(e);return!r||r(t)}function l(e,t,n,i){void 0===i&&(i=1/0);var o=s(e);return o?(0,r.filter)(o,t,n,i):[]}function u(e,t,n){return void 0===n&&(n=!0),Array.isArray(t)||(t=[t]),(0,r.findOne)(i("id",e),t,n)}function c(e,t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=1/0),(0,r.filter)(n["tag_name"](e),t,i,o)}function d(e,t,i,o){return void 0===i&&(i=!0),void 0===o&&(o=1/0),(0,r.filter)(n["tag_type"](e),t,i,o)}e.testElement=a,e.getElements=l,e.getElementById=u,e.getElementsByTagName=c,e.getElementsByTagType=d}}),require_helpers=__commonJS({"node_modules/domutils/lib/helpers.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.DocumentPosition=e.removeSubsets=void 0;var t,r=require_lib2();function n(e){var t=e.length;while(--t>=0){var r=e[t];if(t>0&&e.lastIndexOf(r,t-1)>=0)e.splice(t,1);else for(var n=r.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e}function i(e,n){var i=[],o=[];if(e===n)return 0;var s=(0,r.hasChildren)(e)?e:e.parent;while(s)i.unshift(s),s=s.parent;s=(0,r.hasChildren)(n)?n:n.parent;while(s)o.unshift(s),s=s.parent;var a=Math.min(i.length,o.length),l=0;while(l<a&&i[l]===o[l])l++;if(0===l)return t.DISCONNECTED;var u=i[l-1],c=u.children,d=i[l],h=o[l];return c.indexOf(d)>c.indexOf(h)?u===n?t.FOLLOWING|t.CONTAINED_BY:t.FOLLOWING:u===e?t.PRECEDING|t.CONTAINS:t.PRECEDING}function o(e){return e=e.filter((function(e,t,r){return!r.includes(e,t+1)})),e.sort((function(e,r){var n=i(e,r);return n&t.PRECEDING?-1:n&t.FOLLOWING?1:0})),e}e.removeSubsets=n,function(e){e[e["DISCONNECTED"]=1]="DISCONNECTED",e[e["PRECEDING"]=2]="PRECEDING",e[e["FOLLOWING"]=4]="FOLLOWING",e[e["CONTAINS"]=8]="CONTAINS",e[e["CONTAINED_BY"]=16]="CONTAINED_BY"}(t=e.DocumentPosition||(e.DocumentPosition={})),e.compareDocumentPosition=i,e.uniqueSort=o}}),require_feeds=__commonJS({"node_modules/domutils/lib/feeds.js"(e){init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.getFeed=void 0;var t=require_stringify(),r=require_legacy();function n(e){var t=u(h,e);return t?"feed"===t.name?i(t):o(t):null}function i(e){var t,n=e.children,i={type:"atom",items:(0,r.getElementsByTagName)("entry",n).map((function(e){var t,r=e.children,n={media:l(r)};d(n,"id","id",r),d(n,"title","title",r);var i=null===(t=u("link",r))||void 0===t?void 0:t.attribs["href"];i&&(n.link=i);var o=c("summary",r)||c("content",r);o&&(n.description=o);var s=c("updated",r);return s&&(n.pubDate=new Date(s)),n}))};d(i,"id","id",n),d(i,"title","title",n);var o=null===(t=u("link",n))||void 0===t?void 0:t.attribs["href"];o&&(i.link=o),d(i,"description","subtitle",n);var s=c("updated",n);return s&&(i.updated=new Date(s)),d(i,"author","email",n,!0),i}function o(e){var t,n,i=null!==(n=null===(t=u("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==n?n:[],o={type:e.name.substr(0,3),id:"",items:(0,r.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,r={media:l(t)};d(r,"id","guid",t),d(r,"title","title",t),d(r,"link","link",t),d(r,"description","description",t);var n=c("pubDate",t)||c("dc:date",t);return n&&(r.pubDate=new Date(n)),r}))};d(o,"title","title",i),d(o,"link","link",i),d(o,"description","description",i);var s=c("lastBuildDate",i);return s&&(o.updated=new Date(s)),d(o,"author","managingEditor",i,!0),o}e.getFeed=n;var s=["url","type","lang"],a=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function l(e){return(0,r.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,r={medium:t["medium"],isDefault:!!t["isDefault"]},n=0,i=s;n<i.length;n++){var o=i[n];t[o]&&(r[o]=t[o])}for(var l=0,u=a;l<u.length;l++){o=u[l];t[o]&&(r[o]=parseInt(t[o],10))}return t["expression"]&&(r.expression=t["expression"]),r}))}function u(e,t){return(0,r.getElementsByTagName)(e,t,!0,1)[0]}function c(e,n,i){return void 0===i&&(i=!1),(0,t.textContent)((0,r.getElementsByTagName)(e,n,i,1)).trim()}function d(e,t,r,n,i){void 0===i&&(i=!1);var o=c(r,n,i);o&&(e[t]=o)}function h(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}}}),require_lib5=__commonJS({"node_modules/domutils/lib/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.hasChildren=e.isDocument=e.isComment=e.isText=e.isCDATA=e.isTag=void 0,r(require_stringify(),e),r(require_traversal(),e),r(require_manipulation(),e),r(require_querying(),e),r(require_legacy(),e),r(require_helpers(),e),r(require_feeds(),e);var n=require_lib2();Object.defineProperty(e,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(e,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(e,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(e,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(e,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(e,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})}}),require_lib6=__commonJS({"node_modules/htmlparser2/lib/index.js"(e){init_polyfills();var t=e&&e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=e&&e.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t}),n=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&t(n,e,i);return r(n,e),n},i=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomUtils=e.parseFeed=e.getFeed=e.ElementType=e.Tokenizer=e.createDomStream=e.parseDOM=e.parseDocument=e.DefaultHandler=e.DomHandler=e.Parser=void 0;var o=require_Parser(),s=require_Parser();Object.defineProperty(e,"Parser",{enumerable:!0,get:function(){return s.Parser}});var a=require_lib2(),l=require_lib2();function u(e,t){var r=new a.DomHandler(void 0,t);return new o.Parser(r,t).end(e),r.root}function c(e,t){return u(e,t).children}function d(e,t,r){var n=new a.DomHandler(e,t,r);return new o.Parser(n,t)}Object.defineProperty(e,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(e,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}}),e.parseDocument=u,e.parseDOM=c,e.createDomStream=d;var h=require_Tokenizer();Object.defineProperty(e,"Tokenizer",{enumerable:!0,get:function(){return i(h).default}}),e.ElementType=n(require_lib());var p=require_lib5(),f=require_lib5();Object.defineProperty(e,"getFeed",{enumerable:!0,get:function(){return f.getFeed}});var g={xmlMode:!0};function m(e,t){return void 0===t&&(t=g),(0,p.getFeed)(c(e,t))}e.parseFeed=m,e.DomUtils=n(require_lib5())}}),require_escape_string_regexp=__commonJS({"node_modules/escape-string-regexp/index.js"(e,t){init_polyfills(),t.exports=e=>{if("string"!==typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}}}),require_is_plain_object=__commonJS({"node_modules/is-plain-object/dist/is-plain-object.js"(e){function t(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){var r,n;return!1!==t(e)&&(r=e.constructor,void 0===r||(n=r.prototype,!1!==t(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.isPlainObject=r}}),require_cjs2=__commonJS({"node_modules/deepmerge/dist/cjs.js"(e,t){init_polyfills();var r=function(e){return n(e)&&!i(e)};function n(e){return!!e&&"object"===typeof e}function i(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||a(e)}var o="function"===typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103;function a(e){return e.$$typeof===s}function l(e){return Array.isArray(e)?[]:{}}function u(e,t){return!1!==t.clone&&t.isMergeableObject(e)?v(l(e),e,t):e}function c(e,t,r){return e.concat(t).map((function(e){return u(e,r)}))}function d(e,t){if(!t.customMerge)return v;var r=t.customMerge(e);return"function"===typeof r?r:v}function h(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}function p(e){return Object.keys(e).concat(h(e))}function f(e,t){try{return t in e}catch(r){return!1}}function g(e,t){return f(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function m(e,t,r){var n={};return r.isMergeableObject(e)&&p(e).forEach((function(t){n[t]=u(e[t],r)})),p(t).forEach((function(i){g(e,i)||(f(e,i)&&r.isMergeableObject(t[i])?n[i]=d(i,r)(e[i],t[i],r):n[i]=u(t[i],r))})),n}function v(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||c,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=u;var i=Array.isArray(t),o=Array.isArray(e),s=i===o;return s?i?n.arrayMerge(e,t,n):m(e,t,n):u(t,n)}v.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return v(e,r,t)}),{})};var y=v;t.exports=y}}),require_parse_srcset=__commonJS({"node_modules/parse-srcset/src/parse-srcset.js"(e,t){init_polyfills(),function(e,r){"function"===typeof define&&__webpack_require__.amdO?define([],r):"object"===typeof t&&t.exports?t.exports=r():e.parseSrcset=r()}(e,(function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function r(t){var r,n=t.exec(e.substring(g));if(n)return r=n[0],g+=r.length,r}var n,i,o,s,a,l=e.length,u=/^[ \t\n\r\u000c]+/,c=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,h=/[,]+$/,p=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,g=0,m=[];while(1){if(r(c),g>=l)return m;n=r(d),i=[],","===n.slice(-1)?(n=n.replace(h,""),y()):v()}function v(){r(u),o="",s="in descriptor";while(1){if(a=e.charAt(g),"in descriptor"===s)if(t(a))o&&(i.push(o),o="",s="after descriptor");else{if(","===a)return g+=1,o&&i.push(o),void y();if("("===a)o+=a,s="in parens";else{if(""===a)return o&&i.push(o),void y();o+=a}}else if("in parens"===s)if(")"===a)o+=a,s="in descriptor";else{if(""===a)return i.push(o),void y();o+=a}else if("after descriptor"===s)if(t(a));else{if(""===a)return void y();s="in descriptor",g-=1}g+=1}}function y(){var t,r,o,s,a,l,u,c,d,h=!1,g={};for(s=0;s<i.length;s++)a=i[s],l=a[a.length-1],u=a.substring(0,a.length-1),c=parseInt(u,10),d=parseFloat(u),p.test(u)&&"w"===l?((t||r)&&(h=!0),0===c?h=!0:t=c):f.test(u)&&"x"===l?((t||r||o)&&(h=!0),d<0?h=!0:r=d):p.test(u)&&"h"===l?((o||r)&&(h=!0),0===c?h=!0:o=c):h=!0;h?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(g.url=n,t&&(g.w=t),r&&(g.d=r),o&&(g.h=o),m.push(g))}}}))}}),require_picocolors_browser=__commonJS({"node_modules/picocolors/picocolors.browser.js"(e,t){init_polyfills();var r=String,n=function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r}};t.exports=n(),t.exports.createColors=n}}),require_terminal_highlight=__commonJS({"(disabled):node_modules/postcss/lib/terminal-highlight"(){init_polyfills()}}),require_css_syntax_error=__commonJS({"node_modules/postcss/lib/css-syntax-error.js"(e,t){init_polyfills();var r=require_picocolors_browser(),n=require_terminal_highlight(),i=class e extends Error{constructor(t,r,n,i,o,s){super(t),this.name="CssSyntaxError",this.reason=t,o&&(this.file=o),i&&(this.source=i),s&&(this.plugin=s),"undefined"!==typeof r&&"undefined"!==typeof n&&("number"===typeof r?(this.line=r,this.column=n):(this.line=r.line,this.column=r.column,this.endLine=n.line,this.endColumn=n.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,e)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>","undefined"!==typeof this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=r.isColorSupported),n&&e&&(t=n(t));let i,o,s=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,s.length),u=String(l).length;if(e){let{bold:e,gray:t,red:n}=r.createColors(!0);i=t=>e(n(t)),o=e=>t(e)}else i=o=e=>e;return s.slice(a,l).map(((e,t)=>{let r=a+1+t,n=" "+(" "+r).slice(-u)+" | ";if(r===this.line){let t=o(n.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+o(n)+e+"\n "+t+i("^")}return" "+o(n)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}};t.exports=i,i.default=i}}),require_symbols=__commonJS({"node_modules/postcss/lib/symbols.js"(e,t){init_polyfills(),t.exports.isClean=Symbol("isClean"),t.exports.my=Symbol("my")}}),require_stringifier=__commonJS({"node_modules/postcss/lib/stringifier.js"(e,t){init_polyfills();var r={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function n(e){return e[0].toUpperCase()+e.slice(1)}var i=class{constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if("undefined"!==typeof e.raws.afterName?r+=e.raws.afterName:n&&(r+=" "),e.nodes)this.block(e,r+n);else{let i=(e.raws.between||"")+(t?";":"");this.builder(r+n+i,e)}}beforeAfter(e,t){let r;r="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,i=0;while(n&&"root"!==n.type)i+=1,n=n.parent;if(r.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<i;e++)r+=t}return r}block(e,t){let r,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),r=this.raw(e,"after")):r=this.raw(e,"after","emptyBody"),r&&this.builder(r),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;while(t>0){if("comment"!==e.nodes[t].type)break;t-=1}let r=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let i=e.nodes[n],o=this.raw(i,"before");o&&this.builder(o),this.stringify(i,t!==n||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),n=e.prop+r+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,t,i){let o;if(i||(i=t),t&&(o=e.raws[t],"undefined"!==typeof o))return o;let s=e.parent;if("before"===i){if(!s||"root"===s.type&&s.first===e)return"";if(s&&"document"===s.type)return""}if(!s)return r[i];let a=e.root();if(a.rawCache||(a.rawCache={}),"undefined"!==typeof a.rawCache[i])return a.rawCache[i];if("before"===i||"after"===i)return this.beforeAfter(e,i);{let r="raw"+n(i);this[r]?o=this[r](a,e):a.walk((e=>{if(o=e.raws[t],"undefined"!==typeof o)return!1}))}return"undefined"===typeof o&&(o=r[i]),a.rawCache[i]=o,o}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&"undefined"!==typeof e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments((e=>{if("undefined"!==typeof e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),"undefined"===typeof r?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls((e=>{if("undefined"!==typeof e.raws.before)return r=e.raws.before,r.includes("\n")&&(r=r.replace(/[^\n]+$/,"")),!1})),"undefined"===typeof r?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,"undefined"!==typeof t))return!1})),t}rawBeforeRule(e){let t;return e.walk((r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&"undefined"!==typeof r.raws.before)return t=r.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if("undefined"!==typeof e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,"undefined"!==typeof t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((r=>{let n=r.parent;if(n&&n!==e&&n.parent&&n.parent===e&&"undefined"!==typeof r.raws.before){let e=r.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,"undefined"!==typeof t))return!1})),t}rawValue(e,t){let r=e[t],n=e.raws[t];return n&&n.value===r?n.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}};t.exports=i,i.default=i}}),require_stringify2=__commonJS({"node_modules/postcss/lib/stringify.js"(e,t){init_polyfills();var r=require_stringifier();function n(e,t){let n=new r(t);n.stringify(e)}t.exports=n,n.default=n}}),require_node2=__commonJS({"node_modules/postcss/lib/node.js"(e,t){init_polyfills();var{isClean:r,my:n}=require_symbols(),i=require_css_syntax_error(),o=require_stringifier(),s=require_stringify2();function a(e,t){let r=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let i=e[n],o=typeof i;"parent"===n&&"object"===o?t&&(r[n]=t):"source"===n?r[n]=i:Array.isArray(i)?r[n]=i.map((e=>a(e,r))):("object"===o&&null!==i&&(i=a(i)),r[n]=i)}return r}var l=class{constructor(e={}){this.raws={},this[r]=!1,this[n]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let r of e[t])"function"===typeof r.clone?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=a(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:r.column,line:r.line},t)}return new i(e)}getProxyProcessor(){return{get(e,t){return"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0}}}markDirty(){if(this[r]){this[r]=!1;let e=this;while(e=e.parent)e[r]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let n=t.indexOf(e.word);-1!==n&&(r=this.positionInside(n,t))}return r}positionInside(e,t){let r=t||this.toString(),n=this.source.start.column,i=this.source.start.line;for(let o=0;o<e;o++)"\n"===r[o]?(n=1,i+=1):n+=1;return{column:n,line:i}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),i=n.indexOf(e.word);-1!==i&&(t=this.positionInside(i,n),r=this.positionInside(i+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:e.endIndex?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){let r=new o;return r.raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let n of e)n===this?r=!0:r?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);r||this.remove()}return this}root(){let e=this;while(e.parent&&"document"!==e.parent.type)e=e.parent;return e}toJSON(e,t){let r={},n=null==t;t=t||new Map;let i=0;for(let o in this){if(!Object.prototype.hasOwnProperty.call(this,o))continue;if("parent"===o||"proxyCache"===o)continue;let e=this[o];if(Array.isArray(e))r[o]=e.map((e=>"object"===typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"===typeof e&&e.toJSON)r[o]=e.toJSON(null,t);else if("source"===o){let n=t.get(e.input);null==n&&(n=i,t.set(e.input,i),i++),r[o]={end:e.end,inputId:n,start:e.start}}else r[o]=e}return n&&(r.inputs=[...t.keys()].map((e=>e.toJSON()))),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=s){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,r){let n={node:this};for(let i in r)n[i]=r[i];return e.warn(t,n)}get proxyOf(){return this}};t.exports=l,l.default=l}}),require_declaration=__commonJS({"node_modules/postcss/lib/declaration.js"(e,t){init_polyfills();var r=require_node2(),n=class extends r{constructor(e){e&&"undefined"!==typeof e.value&&"string"!==typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}};t.exports=n,n.default=n}}),require_source_map=__commonJS({"(disabled):node_modules/source-map-js/source-map.js"(){init_polyfills()}}),require_path=__commonJS({"(disabled):node_modules/path/path.js"(){init_polyfills()}}),require_url=__commonJS({"(disabled):url"(){init_polyfills()}}),require_non_secure=__commonJS({"node_modules/postcss/node_modules/nanoid/non-secure/index.cjs"(e,t){init_polyfills();var r="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",n=(e,t=21)=>(r=t)=>{let n="",i=r;while(i--)n+=e[Math.random()*e.length|0];return n},i=(e=21)=>{let t="",n=e;while(n--)t+=r[64*Math.random()|0];return t};t.exports={nanoid:i,customAlphabet:n}}}),require_fs=__commonJS({"(disabled):fs"(){init_polyfills()}}),require_previous_map=__commonJS({"node_modules/postcss/lib/previous-map.js"(e,t){init_polyfills();var{SourceMapConsumer:r,SourceMapGenerator:n}=require_source_map(),{existsSync:i,readFileSync:o}=require_fs(),{dirname:s,join:a}=require_path();function l(e){return Buffer?Buffer.from(e,"base64").toString():window.atob(e)}var u=class{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,n=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=s(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new r(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,n=/^data:application\/json;charset=utf-?8,/,i=/^data:application\/json,/;if(n.test(e)||i.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return l(e.substr(RegExp.lastMatch.length));let o=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+o)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"===typeof e&&("string"===typeof e.mappings||"string"===typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),n=e.indexOf("*/",r);r>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,n)))}loadFile(e){if(this.root=s(e),i(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"===typeof t)return t;if("function"!==typeof t){if(t instanceof r)return n.fromSourceMap(t).toString();if(t instanceof n)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let r=t(e);if(r){let e=this.loadFile(r);if(!e)throw new Error("Unable to load previous source map: "+r.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=a(s(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}};t.exports=u,u.default=u}}),require_input=__commonJS({"node_modules/postcss/lib/input.js"(e,t){init_polyfills();var{SourceMapConsumer:r,SourceMapGenerator:n}=require_source_map(),{fileURLToPath:i,pathToFileURL:o}=require_url(),{isAbsolute:s,resolve:a}=require_path(),{nanoid:l}=require_non_secure(),u=require_terminal_highlight(),c=require_css_syntax_error(),d=require_previous_map(),h=Symbol("fromOffsetCache"),p=Boolean(r&&n),f=Boolean(a&&s),g=class{constructor(e,t={}){if(null===e||"undefined"===typeof e||"object"===typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!f||/^\w+:\/\//.test(t.from)||s(t.from)?this.file=t.from:this.file=a(t.from)),f&&p){let e=new d(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+l(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,n={}){let i,s,a;if(t&&"object"===typeof t){let e=t,n=r;if("number"===typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,r=n.col}else t=e.line,r=e.column;if("number"===typeof n.offset){let e=this.fromOffset(n.offset);s=e.line,a=e.col}else s=n.line,a=n.column}else if(!r){let e=this.fromOffset(t);t=e.line,r=e.col}let l=this.origin(t,r,s,a);return i=l?new c(e,void 0===l.endLine?l.line:{column:l.column,line:l.line},void 0===l.endLine?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,n.plugin):new c(e,void 0===s?t:{column:r,line:t},void 0===s?r:{column:a,line:s},this.css,this.file,n.plugin),i.input={column:r,endColumn:a,endLine:s,line:t,source:this.css},this.file&&(o&&(i.input.url=o(this.file).toString()),i.input.file=this.file),i}fromOffset(e){let t,r;if(this[h])r=this[h];else{let e=this.css.split("\n");r=new Array(e.length);let t=0;for(let n=0,i=e.length;n<i;n++)r[n]=t,t+=e[n].length+1;this[h]=r}t=r[r.length-1];let n=0;if(e>=t)n=r.length-1;else{let t,i=r.length-2;while(n<i)if(t=n+(i-n>>1),e<r[t])i=t-1;else{if(!(e>=r[t+1])){n=t;break}n=t+1}}return{col:e-r[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:a(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,n){if(!this.map)return!1;let a,l,u=this.map.consumer(),c=u.originalPositionFor({column:t,line:e});if(!c.source)return!1;"number"===typeof r&&(a=u.originalPositionFor({column:n,line:r})),l=s(c.source)?o(c.source):new URL(c.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let d={column:c.column,endColumn:a&&a.column,endLine:a&&a.line,line:c.line,url:l.toString()};if("file:"===l.protocol){if(!i)throw new Error("file: protocol is not available in this PostCSS build");d.file=i(l)}let h=u.sourceContentFor(c.source);return h&&(d.source=h),d}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}};t.exports=g,g.default=g,u&&u.registerInput&&u.registerInput(g)}}),require_map_generator=__commonJS({"node_modules/postcss/lib/map-generator.js"(e,t){init_polyfills();var{SourceMapConsumer:r,SourceMapGenerator:n}=require_source_map(),{dirname:i,relative:o,resolve:s,sep:a}=require_path(),{pathToFileURL:l}=require_url(),u=require_input(),c=Boolean(r&&n),d=Boolean(i&&s&&o&&a),h=class{constructor(e,t,r,n){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"===typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"===typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,n=this.toUrl(this.path(e.file)),o=e.root||i(e.file);!1===this.mapOpts.sourcesContent?(t=new r(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,n,this.toUrl(this.path(o)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),d&&c&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=n.fromSourceMap(e)}else this.map=new n({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new n({file:this.outputFile()});let e,t,r=1,i=1,o="<no source>",s={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((n,a,l)=>{if(this.css+=n,a&&"end"!==l&&(s.generated.line=r,s.generated.column=i-1,a.source&&a.source.start?(s.source=this.sourcePath(a),s.original.line=a.source.start.line,s.original.column=a.source.start.column-1,this.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,this.map.addMapping(s))),e=n.match(/\n/g),e?(r+=e.length,t=n.lastIndexOf("\n"),i=n.length-t):i+=n.length,a&&"start"!==l){let e=a.parent||{raws:{}},t="decl"===a.type||"atrule"===a.type&&!a.nodes;t&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(s.source=this.sourcePath(a),s.original.line=a.source.end.line,s.original.column=a.source.end.column-1,s.generated.line=r,s.generated.column=i-2,this.map.addMapping(s)):(s.source=o,s.original.line=1,s.original.column=0,s.generated.line=r,s.generated.column=i-1,this.map.addMapping(s)))}}))}isAnnotation(){return!!this.isInline()||("undefined"!==typeof this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if("undefined"!==typeof this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return("undefined"===typeof e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return"undefined"!==typeof this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return"undefined"!==typeof this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?i(this.opts.to):".";"string"===typeof this.mapOpts.annotation&&(r=i(s(r,this.mapOpts.annotation)));let n=o(r,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new u(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let n=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(l){let t=l(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===a&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}};t.exports=h}}),require_comment=__commonJS({"node_modules/postcss/lib/comment.js"(e,t){init_polyfills();var r=require_node2(),n=class extends r{constructor(e){super(e),this.type="comment"}};t.exports=n,n.default=n}}),require_container=__commonJS({"node_modules/postcss/lib/container.js"(e,t){init_polyfills();var r,n,i,o,{isClean:s,my:a}=require_symbols(),l=require_declaration(),u=require_comment(),c=require_node2();function d(e){return e.map((e=>(e.nodes&&(e.nodes=d(e.nodes)),delete e.source,e)))}function h(e){if(e[s]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)h(t)}var p=class e extends c{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,r,n=this.getIterator();while(this.indexes[n]<this.proxyOf.nodes.length){if(t=this.indexes[n],r=e(this.proxyOf.nodes[t],t),!1===r)break;this.indexes[n]+=1}return delete this.indexes[n],r}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return"proxyOf"===t?e:e[t]?"each"===t||"string"===typeof t&&t.startsWith("walk")?(...r)=>e[t](...r.map((e=>"function"===typeof e?(t,r)=>e(t.toProxy(),r):e))):"every"===t||"some"===t?r=>e[t](((e,...t)=>r(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0}}}index(e){return"number"===typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r,n=this.index(e),i=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let o of i)this.proxyOf.nodes.splice(n+1,0,o);for(let o in this.indexes)r=this.indexes[o],n<r&&(this.indexes[o]=r+i.length);return this.markDirty(),this}insertBefore(e,t){let r,n=this.index(e),i=0===n&&"prepend",o=this.normalize(t,this.proxyOf.nodes[n],i).reverse();n=this.index(e);for(let s of o)this.proxyOf.nodes.splice(n,0,s);for(let s in this.indexes)r=this.indexes[s],n<=r&&(this.indexes[s]=r+o.length);return this.markDirty(),this}normalize(t,o){if("string"===typeof t)t=d(r(t).nodes);else if(Array.isArray(t)){t=t.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if("root"===t.type&&"document"!==this.type){t=t.nodes.slice(0);for(let e of t)e.parent&&e.parent.removeChild(e,"ignore")}else if(t.type)t=[t];else if(t.prop){if("undefined"===typeof t.value)throw new Error("Value field is missed in node creation");"string"!==typeof t.value&&(t.value=String(t.value)),t=[new l(t)]}else if(t.selector)t=[new n(t)];else if(t.name)t=[new i(t)];else{if(!t.text)throw new Error("Unknown node type in node creation");t=[new u(t)]}let c=t.map((t=>(t[a]||e.rebuild(t),t=t.proxyOf,t.parent&&t.parent.removeChild(t),t[s]&&h(t),"undefined"===typeof t.raws.before&&o&&"undefined"!==typeof o.raws.before&&(t.raws.before=o.raws.before.replace(/\S/g,"")),t.parent=this.proxyOf,t)));return c}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,r))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,r)=>{let n;try{n=e(t,r)}catch(i){throw t.addToError(i)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("atrule"===r.type&&e.test(r.name))return t(r,n)})):this.walk(((r,n)=>{if("atrule"===r.type&&r.name===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("atrule"===e.type)return t(e,r)})))}walkComments(e){return this.walk(((t,r)=>{if("comment"===t.type)return e(t,r)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("decl"===r.type&&e.test(r.prop))return t(r,n)})):this.walk(((r,n)=>{if("decl"===r.type&&r.prop===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("decl"===e.type)return t(e,r)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((r,n)=>{if("rule"===r.type&&e.test(r.selector))return t(r,n)})):this.walk(((r,n)=>{if("rule"===r.type&&r.selector===e)return t(r,n)})):(t=e,this.walk(((e,r)=>{if("rule"===e.type)return t(e,r)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};p.registerParse=e=>{r=e},p.registerRule=e=>{n=e},p.registerAtRule=e=>{i=e},p.registerRoot=e=>{o=e},t.exports=p,p.default=p,p.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,i.prototype):"rule"===e.type?Object.setPrototypeOf(e,n.prototype):"decl"===e.type?Object.setPrototypeOf(e,l.prototype):"comment"===e.type?Object.setPrototypeOf(e,u.prototype):"root"===e.type&&Object.setPrototypeOf(e,o.prototype),e[a]=!0,e.nodes&&e.nodes.forEach((e=>{p.rebuild(e)}))}}}),require_document=__commonJS({"node_modules/postcss/lib/document.js"(e,t){init_polyfills();var r,n,i=require_container(),o=class extends i{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){let t=new r(new n,this,e);return t.stringify()}};o.registerLazyResult=e=>{r=e},o.registerProcessor=e=>{n=e},t.exports=o,o.default=o}}),require_warn_once=__commonJS({"node_modules/postcss/lib/warn-once.js"(e,t){init_polyfills();var r={};t.exports=function(e){r[e]||(r[e]=!0,"undefined"!==typeof console&&console.warn&&console.warn(e))}}}),require_warning=__commonJS({"node_modules/postcss/lib/warning.js"(e,t){init_polyfills();var r=class{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}};t.exports=r,r.default=r}}),require_result=__commonJS({"node_modules/postcss/lib/result.js"(e,t){init_polyfills();var r=require_warning(),n=class{constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let n=new r(e,t);return this.messages.push(n),n}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}};t.exports=n,n.default=n}}),require_tokenize=__commonJS({"node_modules/postcss/lib/tokenize.js"(e,t){init_polyfills();var r="'".charCodeAt(0),n='"'.charCodeAt(0),i="\\".charCodeAt(0),o="/".charCodeAt(0),s="\n".charCodeAt(0),a=" ".charCodeAt(0),l="\f".charCodeAt(0),u="\t".charCodeAt(0),c="\r".charCodeAt(0),d="[".charCodeAt(0),h="]".charCodeAt(0),p="(".charCodeAt(0),f=")".charCodeAt(0),g="{".charCodeAt(0),m="}".charCodeAt(0),v=";".charCodeAt(0),y="*".charCodeAt(0),_=":".charCodeAt(0),b="@".charCodeAt(0),S=/[\t\n\f\r "#'()/;[\\\]{}]/g,w=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,C=/.[\r\n"'(/\\]/,A=/[\da-f]/i;t.exports=function(e,t={}){let E,x,T,k,O,P,R,I,L,M,N=e.css.valueOf(),D=t.ignoreErrors,B=N.length,F=0,j=[],H=[];function q(){return F}function U(t){throw e.error("Unclosed "+t,F)}function G(){return 0===H.length&&F>=B}function z(e){if(H.length)return H.pop();if(F>=B)return;let t=!!e&&e.ignoreUnclosed;switch(E=N.charCodeAt(F),E){case s:case a:case u:case c:case l:x=F;do{x+=1,E=N.charCodeAt(x)}while(E===a||E===s||E===u||E===c||E===l);M=["space",N.slice(F,x)],F=x-1;break;case d:case h:case g:case m:case _:case v:case f:{let e=String.fromCharCode(E);M=[e,e,F];break}case p:if(I=j.length?j.pop()[1]:"",L=N.charCodeAt(F+1),"url"===I&&L!==r&&L!==n&&L!==a&&L!==s&&L!==u&&L!==l&&L!==c){x=F;do{if(P=!1,x=N.indexOf(")",x+1),-1===x){if(D||t){x=F;break}U("bracket")}R=x;while(N.charCodeAt(R-1)===i)R-=1,P=!P}while(P);M=["brackets",N.slice(F,x+1),F,x],F=x}else x=N.indexOf(")",F+1),k=N.slice(F,x+1),-1===x||C.test(k)?M=["(","(",F]:(M=["brackets",k,F,x],F=x);break;case r:case n:T=E===r?"'":'"',x=F;do{if(P=!1,x=N.indexOf(T,x+1),-1===x){if(D||t){x=F+1;break}U("string")}R=x;while(N.charCodeAt(R-1)===i)R-=1,P=!P}while(P);M=["string",N.slice(F,x+1),F,x],F=x;break;case b:S.lastIndex=F+1,S.test(N),x=0===S.lastIndex?N.length-1:S.lastIndex-2,M=["at-word",N.slice(F,x+1),F,x],F=x;break;case i:x=F,O=!0;while(N.charCodeAt(x+1)===i)x+=1,O=!O;if(E=N.charCodeAt(x+1),O&&E!==o&&E!==a&&E!==s&&E!==u&&E!==c&&E!==l&&(x+=1,A.test(N.charAt(x)))){while(A.test(N.charAt(x+1)))x+=1;N.charCodeAt(x+1)===a&&(x+=1)}M=["word",N.slice(F,x+1),F,x],F=x;break;default:E===o&&N.charCodeAt(F+1)===y?(x=N.indexOf("*/",F+2)+1,0===x&&(D||t?x=N.length:U("comment")),M=["comment",N.slice(F,x+1),F,x],F=x):(w.lastIndex=F+1,w.test(N),x=0===w.lastIndex?N.length-1:w.lastIndex-2,M=["word",N.slice(F,x+1),F,x],j.push(M),F=x);break}return F++,M}function V(e){H.push(e)}return{back:V,endOfFile:G,nextToken:z,position:q}}}}),require_at_rule=__commonJS({"node_modules/postcss/lib/at-rule.js"(e,t){init_polyfills();var r=require_container(),n=class extends r{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}};t.exports=n,n.default=n,r.registerAtRule(n)}}),require_root=__commonJS({"node_modules/postcss/lib/root.js"(e,t){init_polyfills();var r,n,i=require_container(),o=class extends i{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let n=super.normalize(e);if(t)if("prepend"===r)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let i of n)i.raws.before=t.raws.before;return n}removeChild(e,t){let r=this.index(e);return!t&&0===r&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){let t=new r(new n,this,e);return t.stringify()}};o.registerLazyResult=e=>{r=e},o.registerProcessor=e=>{n=e},t.exports=o,o.default=o,i.registerRoot(o)}}),require_list=__commonJS({"node_modules/postcss/lib/list.js"(e,t){init_polyfills();var r={comma(e){return r.split(e,[","],!0)},space(e){let t=[" ","\n","\t"];return r.split(e,t)},split(e,t,r){let n=[],i="",o=!1,s=0,a=!1,l="",u=!1;for(let c of e)u?u=!1:"\\"===c?u=!0:a?c===l&&(a=!1):'"'===c||"'"===c?(a=!0,l=c):"("===c?s+=1:")"===c?s>0&&(s-=1):0===s&&t.includes(c)&&(o=!0),o?(""!==i&&n.push(i.trim()),i="",o=!1):i+=c;return(r||""!==i)&&n.push(i.trim()),n}};t.exports=r,r.default=r}}),require_rule=__commonJS({"node_modules/postcss/lib/rule.js"(e,t){init_polyfills();var r=require_container(),n=require_list(),i=class extends r{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return n.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}};t.exports=i,i.default=i,r.registerRule(i)}}),require_parser=__commonJS({"node_modules/postcss/lib/parser.js"(e,t){init_polyfills();var r=require_declaration(),n=require_tokenize(),i=require_comment(),o=require_at_rule(),s=require_root(),a=require_rule(),l={empty:!0,space:!0};function u(e){for(let t=e.length-1;t>=0;t--){let r=e[t],n=r[3]||r[2];if(n)return n}}var c=class{constructor(e){this.input=e,this.root=new s,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,r,n,i=new o;i.name=e[1].slice(1),""===i.name&&this.unnamedAtrule(i,e),this.init(i,e[2]);let s=!1,a=!1,l=[],u=[];while(!this.tokenizer.endOfFile()){if(e=this.tokenizer.nextToken(),t=e[0],"("===t||"["===t?u.push("("===t?")":"]"):"{"===t&&u.length>0?u.push("}"):t===u[u.length-1]&&u.pop(),0===u.length){if(";"===t){i.source.end=this.getPosition(e[2]),i.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){n=l.length-1,r=l[n];while(r&&"space"===r[0])r=l[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]),i.source.end.offset++)}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(i.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(i,"params",l),s&&(e=l[l.length-1],i.source.end=this.getPosition(e[3]||e[2]),i.source.end.offset++,this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let r,n=0;for(let i=t-1;i>=0;i--)if(r=e[i],"space"!==r[0]&&(n+=1,2===n))break;throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}colon(e){let t,r,n,i=0;for(let[o,s]of e.entries()){if(t=s,r=t[0],"("===r&&(i+=1),")"===r&&(i-=1),0===i&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return o}this.doubleColon(t)}n=t}return!1}comment(e){let t=new i;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let e=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=n(this.input)}decl(e,t){let n=new r;this.init(n,e[0][2]);let i,o=e[e.length-1];";"===o[0]&&(this.semicolon=!0,e.pop()),n.source.end=this.getPosition(o[3]||o[2]||u(e)),n.source.end.offset++;while("word"!==e[0][0])1===e.length&&this.unknownWord(e),n.raws.before+=e.shift()[1];n.source.start=this.getPosition(e[0][2]),n.prop="";while(e.length){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;n.prop+=e.shift()[1]}n.raws.between="";while(e.length){if(i=e.shift(),":"===i[0]){n.raws.between+=i[1];break}"word"===i[0]&&/\w/.test(i[1])&&this.unknownWord([i]),n.raws.between+=i[1]}"_"!==n.prop[0]&&"*"!==n.prop[0]||(n.raws.before+=n.prop[0],n.prop=n.prop.slice(1));let s,a=[];while(e.length){if(s=e[0][0],"space"!==s&&"comment"!==s)break;a.push(e.shift())}this.precheckMissedSemicolon(e);for(let r=e.length-1;r>=0;r--){if(i=e[r],"!important"===i[1].toLowerCase()){n.important=!0;let t=this.stringFrom(e,r);t=this.spacesFromEnd(e)+t," !important"!==t&&(n.raws.important=t);break}if("important"===i[1].toLowerCase()){let t=e.slice(0),i="";for(let e=r;e>0;e--){let r=t[e][0];if(0===i.trim().indexOf("!")&&"space"!==r)break;i=t.pop()[1]+i}0===i.trim().indexOf("!")&&(n.important=!0,n.raws.important=i,e=t)}if("space"!==i[0]&&"comment"!==i[0])break}let l=e.some((e=>"space"!==e[0]&&"comment"!==e[0]));l&&(n.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(n,"value",a.concat(e),t),n.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new a;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,r=null,n=!1,i=null,o=[],s=e[1].startsWith("--"),a=[],l=e;while(l){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),o.push("("===r?")":"]");else if(s&&n&&"{"===r)i||(i=l),o.push("}");else if(0===o.length){if(";"===r){if(n)return void this.decl(a,s);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),t=!0;break}":"===r&&(n=!0)}else r===o[o.length-1]&&(o.pop(),0===o.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),o.length>0&&this.unclosedBracket(i),t&&n){if(!s)while(a.length){if(l=a[a.length-1][0],"space"!==l&&"comment"!==l)break;this.tokenizer.back(a.pop())}this.decl(a,s)}else this.unknownWord(a)}parse(){let e;while(!this.tokenizer.endOfFile())switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,n){let i,o,s,a,u=r.length,c="",d=!0;for(let h=0;h<u;h+=1)i=r[h],o=i[0],"space"!==o||h!==u-1||n?"comment"===o?(a=r[h-1]?r[h-1][0]:"empty",s=r[h+1]?r[h+1][0]:"empty",l[a]||l[s]||","===c.slice(-1)?d=!1:c+=i[1]):c+=i[1]:d=!1;if(!d){let n=r.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:c}}e[t]=c}rule(e){e.pop();let t=new a;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";while(e.length){if(t=e[e.length-1][0],"space"!==t&&"comment"!==t)break;r=e.pop()[1]+r}return r}spacesAndCommentsFromStart(e){let t,r="";while(e.length){if(t=e[0][0],"space"!==t&&"comment"!==t)break;r+=e.shift()[1]}return r}spacesFromEnd(e){let t,r="";while(e.length){if(t=e[e.length-1][0],"space"!==t)break;r=e.pop()[1]+r}return r}stringFrom(e,t){let r="";for(let n=t;n<e.length;n++)r+=e[n][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}};t.exports=c}}),require_parse=__commonJS({"node_modules/postcss/lib/parse.js"(e,t){init_polyfills();var r=require_container(),n=require_parser(),i=require_input();function o(e,t){let r=new i(e,t),o=new n(r);try{o.parse()}catch(s){throw s}return o.root}t.exports=o,o.default=o,r.registerParse(o)}}),require_lazy_result=__commonJS({"node_modules/postcss/lib/lazy-result.js"(e,t){init_polyfills();var{isClean:r,my:n}=require_symbols(),i=require_map_generator(),o=require_stringify2(),s=require_container(),a=require_document(),l=(require_warn_once(),require_result()),u=require_parse(),c=require_root(),d={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},h={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},p={Once:!0,postcssPlugin:!0,prepare:!0},f=0;function g(e){return"object"===typeof e&&"function"===typeof e.then}function m(e){let t=!1,r=d[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[r,r+"-"+t,f,r+"Exit",r+"Exit-"+t]:t?[r,r+"-"+t,r+"Exit",r+"Exit-"+t]:e.append?[r,f,r+"Exit"]:[r,r+"Exit"]}function v(e){let t;return t="document"===e.type?["Document",f,"DocumentExit"]:"root"===e.type?["Root",f,"RootExit"]:m(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function y(e){return e[r]=!1,e.nodes&&e.nodes.forEach((e=>y(e))),e}var _={},b=class e{constructor(t,r,i){let o;if(this.stringified=!1,this.processed=!1,"object"!==typeof r||null===r||"root"!==r.type&&"document"!==r.type)if(r instanceof e||r instanceof l)o=y(r.root),r.map&&("undefined"===typeof i.map&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=r.map);else{let e=u;i.syntax&&(e=i.syntax.parse),i.parser&&(e=i.parser),e.parse&&(e=e.parse);try{o=e(r,i)}catch(a){this.processed=!0,this.error=a}o&&!o[n]&&s.rebuild(o)}else o=y(r);this.result=new l(t,o,i),this.helpers={..._,postcss:_,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"===typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?r.postcssVersion:(e.plugin=r.postcssPlugin,e.setMessage())}catch(n){console&&console.error&&console.error(n)}return e}prepareVisitors(){this.listeners={};let e=(e,t,r)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,r])};for(let t of this.plugins)if("object"===typeof t)for(let r in t){if(!h[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!p[r])if("object"===typeof t[r])for(let n in t[r])e(t,"*"===n?r:r+"-"+n.toLowerCase(),t[r][n]);else"function"===typeof t[r]&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let r=0;r<this.plugins.length;r++){let t=this.plugins[r],n=this.runOnRoot(t);if(g(n))try{await n}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;while(!e[r]){e[r]=!0;let n=[v(e)];while(n.length>0){let e=this.visitTick(n);if(g(e))try{await e}catch(t){let e=n[n.length-1].node;throw this.handleError(t,e)}}}if(this.listeners.OnceExit)for(let[r,n]of this.listeners.OnceExit){this.result.lastPlugin=r;try{if("document"===e.type){let t=e.nodes.map((e=>n(e,this.helpers)));await Promise.all(t)}else await n(e,this.helpers)}catch(t){throw this.handleError(t)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"===typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return g(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"===typeof e)return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let r=new i(t,this.result.root,this.result.opts),n=r.generate();return this.result.css=n[0],this.result.map=n[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(g(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;while(!e[r])e[r]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[n,i]of e){let e;this.result.lastPlugin=n;try{e=i(t,this.helpers)}catch(r){throw this.handleError(r,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(g(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:n,visitors:i}=t;if("root"!==n.type&&"document"!==n.type&&!n.parent)return void e.pop();if(i.length>0&&t.visitorIndex<i.length){let[e,r]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return r(n.toProxy(),this.helpers)}catch(s){throw this.handleError(s,n)}}if(0!==t.iterator){let i,o=t.iterator;while(i=n.nodes[n.indexes[o]])if(n.indexes[o]+=1,!i[r])return i[r]=!0,void e.push(v(i));t.iterator=0,delete n.indexes[o]}let o=t.events;while(t.eventIndex<o.length){let e=o[t.eventIndex];if(t.eventIndex+=1,e===f)return void(n.nodes&&n.nodes.length&&(n[r]=!0,t.iterator=n.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[r]=!0;let t=m(e);for(let n of t)if(n===f)e.nodes&&e.each((e=>{e[r]||this.walkSync(e)}));else{let t=this.listeners[n];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};b.registerPostcss=e=>{_=e},t.exports=b,b.default=b,c.registerLazyResult(b),a.registerLazyResult(b)}}),require_no_work_result=__commonJS({"node_modules/postcss/lib/no-work-result.js"(e,t){init_polyfills();var r=require_map_generator(),n=require_stringify2(),i=(require_warn_once(),require_parse()),o=require_result(),s=class{constructor(e,t,i){let s;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=i,this._map=void 0;let a=n;this.result=new o(this._processor,s,this._opts),this.result.css=t;let l=this;Object.defineProperty(this.result,"root",{get(){return l.root}});let u=new r(a,s,this._opts,t);if(u.isMap()){let[e,t]=u.generate();e&&(this.result.css=e),t&&(this.result.map=t)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=i;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}};t.exports=s,s.default=s}}),require_processor=__commonJS({"node_modules/postcss/lib/processor.js"(e,t){init_polyfills();var r=require_no_work_result(),n=require_lazy_result(),i=require_document(),o=require_root(),s=class{constructor(e=[]){this.version="8.4.31",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"===typeof r&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if("object"===typeof r&&r.postcssPlugin)t.push(r);else if("function"===typeof r)t.push(r);else{if("object"!==typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return t}process(e,t={}){return 0===this.plugins.length&&"undefined"===typeof t.parser&&"undefined"===typeof t.stringifier&&"undefined"===typeof t.syntax?new r(this,e,t):new n(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}};t.exports=s,s.default=s,o.registerProcessor(s),i.registerProcessor(s)}}),require_fromJSON=__commonJS({"node_modules/postcss/lib/fromJSON.js"(e,t){init_polyfills();var r=require_declaration(),n=require_previous_map(),i=require_comment(),o=require_at_rule(),s=require_input(),a=require_root(),l=require_rule();function u(e,t){if(Array.isArray(e))return e.map((e=>u(e)));let{inputs:c,...d}=e;if(c){t=[];for(let e of c){let r={...e,__proto__:s.prototype};r.map&&(r.map={...r.map,__proto__:n.prototype}),t.push(r)}}if(d.nodes&&(d.nodes=e.nodes.map((e=>u(e,t)))),d.source){let{inputId:e,...r}=d.source;d.source=r,null!=e&&(d.source.input=t[e])}if("root"===d.type)return new a(d);if("decl"===d.type)return new r(d);if("rule"===d.type)return new l(d);if("comment"===d.type)return new i(d);if("atrule"===d.type)return new o(d);throw new Error("Unknown node type: "+e.type)}t.exports=u,u.default=u}}),require_postcss=__commonJS({"node_modules/postcss/lib/postcss.js"(e,t){init_polyfills();var r=require_css_syntax_error(),n=require_declaration(),i=require_lazy_result(),o=require_container(),s=require_processor(),a=require_stringify2(),l=require_fromJSON(),u=require_document(),c=require_warning(),d=require_comment(),h=require_at_rule(),p=require_result(),f=require_input(),g=require_parse(),m=require_list(),v=require_rule(),y=require_root(),_=require_node2();function b(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new s(e)}b.plugin=function(e,t){let r,n=!1;function i(...r){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let i=t(...r);return i.postcssPlugin=e,i.postcssVersion=(new s).version,i}return Object.defineProperty(i,"postcss",{get(){return r||(r=i()),r}}),i.process=function(e,t,r){return b([i(r)]).process(e,t)},i},b.stringify=a,b.parse=g,b.fromJSON=l,b.list=m,b.comment=e=>new d(e),b.atRule=e=>new h(e),b.decl=e=>new n(e),b.rule=e=>new v(e),b.root=e=>new y(e),b.document=e=>new u(e),b.CssSyntaxError=r,b.Declaration=n,b.Container=o,b.Processor=s,b.Document=u,b.Comment=d,b.Warning=c,b.AtRule=h,b.Result=p,b.Input=f,b.Rule=v,b.Root=y,b.Node=_,i.registerPostcss(b),t.exports=b,b.default=b}}),require_sanitize_html=__commonJS({"node_modules/sanitize-html/index.js"(e,t){init_polyfills();var r=require_lib6(),n=require_escape_string_regexp(),{isPlainObject:i}=require_is_plain_object(),o=require_cjs2(),s=require_parse_srcset(),{parse:a}=require_postcss(),l=["img","audio","video","picture","svg","object","map","iframe","embed"],u=["script","style"];function c(e,t){e&&Object.keys(e).forEach((function(r){t(e[r],r)}))}function d(e,t){return{}.hasOwnProperty.call(e,t)}function h(e,t){const r=[];return c(e,(function(e){t(e)&&r.push(e)})),r}function p(e){for(const t in e)if(d(e,t))return!1;return!0}function f(e){return e.map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", ")}t.exports=m;var g=/^[^\0\t\n\f\r /<=>]+$/;function m(e,t,y){if(null==e)return"";"number"===typeof e&&(e=e.toString());let _="",b="";function S(e,t){const r=this;this.tag=e,this.attribs=t||{},this.tagPosition=_.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){if(I.length){const e=I[I.length-1];e.text+=r.text}},this.updateParentNodeMediaChildren=function(){if(I.length&&l.includes(this.tag)){const e=I[I.length-1];e.mediaChildren.push(this.tag)}}}t=Object.assign({},m.defaults,t),t.parser=Object.assign({},v,t.parser);const w=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};u.forEach((function(e){w(e)&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const C=t.nonTextTags||["script","style","textarea","option"];let A,E;t.allowedAttributes&&(A={},E={},c(t.allowedAttributes,(function(e,t){A[t]=[];const r=[];e.forEach((function(e){"string"===typeof e&&e.indexOf("*")>=0?r.push(n(e).replace(/\\\*/g,".*")):A[t].push(e)})),r.length&&(E[t]=new RegExp("^("+r.join("|")+")$"))})));const x={},T={},k={};c(t.allowedClasses,(function(e,t){if(A&&(d(A,t)||(A[t]=[]),A[t].push("class")),x[t]=e,Array.isArray(e)){const r=[];x[t]=[],k[t]=[],e.forEach((function(e){"string"===typeof e&&e.indexOf("*")>=0?r.push(n(e).replace(/\\\*/g,".*")):e instanceof RegExp?k[t].push(e):x[t].push(e)})),r.length&&(T[t]=new RegExp("^("+r.join("|")+")$"))}}));const O={};let P,R,I,L,M,N,D;c(t.transformTags,(function(e,t){let r;"function"===typeof e?r=e:"string"===typeof e&&(r=m.simpleTransform(e)),"*"===t?P=r:O[t]=r}));let B=!1;j();const F=new r.Parser({onopentag:function(e,r){if(t.enforceHtmlBoundary&&"html"===e&&j(),N)return void D++;const n=new S(e,r);I.push(n);let l=!1;const u=!!n.text;let m;if(d(O,e)&&(m=O[e](e,r),n.attribs=r=m.attribs,void 0!==m.text&&(n.innerText=m.text),e!==m.tagName&&(n.name=e=m.tagName,M[R]=m.tagName)),P&&(m=P(e,r),n.attribs=r=m.attribs,e!==m.tagName&&(n.name=e=m.tagName,M[R]=m.tagName)),(!w(e)||"recursiveEscape"===t.disallowedTagsMode&&!p(L)||null!=t.nestingLimit&&R>=t.nestingLimit)&&(l=!0,L[R]=!0,"discard"===t.disallowedTagsMode&&-1!==C.indexOf(e)&&(N=!0,D=1),L[R]=!0),R++,l){if("discard"===t.disallowedTagsMode)return;b=_,_=""}_+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(n.innerText=""),(!A||d(A,e)||A["*"])&&c(r,(function(r,l){if(!g.test(l))return void delete n.attribs[l];if(""===r&&(t.nonBooleanAttributes.includes(l)||t.nonBooleanAttributes.includes("*")))return void delete n.attribs[l];let u=!1;if(!A||d(A,e)&&-1!==A[e].indexOf(l)||A["*"]&&-1!==A["*"].indexOf(l)||d(E,e)&&E[e].test(l)||E["*"]&&E["*"].test(l))u=!0;else if(A&&A[e])for(const t of A[e])if(i(t)&&t.name&&t.name===l){u=!0;let e="";if(!0===t.multiple){const n=r.split(" ");for(const r of n)-1!==t.values.indexOf(r)&&(""===e?e=r:e+=" "+r)}else t.values.indexOf(r)>=0&&(e=r);r=e}if(u){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(l)&&q(e,r))return void delete n.attribs[l];if("script"===e&&"src"===l){let e=!0;try{const n=U(r);if(t.allowedScriptHostnames||t.allowedScriptDomains){const r=(t.allowedScriptHostnames||[]).find((function(e){return e===n.url.hostname})),i=(t.allowedScriptDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=r||i}}catch(c){e=!1}if(!e)return void delete n.attribs[l]}if("iframe"===e&&"src"===l){let e=!0;try{const n=U(r);if(n.isRelativeUrl)e=d(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const r=(t.allowedIframeHostnames||[]).find((function(e){return e===n.url.hostname})),i=(t.allowedIframeDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=r||i}}catch(c){e=!1}if(!e)return void delete n.attribs[l]}if("srcset"===l)try{let e=s(r);if(e.forEach((function(e){q("srcset",e.url)&&(e.evil=!0)})),e=h(e,(function(e){return!e.evil})),!e.length)return void delete n.attribs[l];r=f(h(e,(function(e){return!e.evil}))),n.attribs[l]=r}catch(c){return void delete n.attribs[l]}if("class"===l){const t=x[e],i=x["*"],s=T[e],a=k[e],u=T["*"],c=[s,u].concat(a).filter((function(e){return e}));if(r=$(r,t&&i?o(t,i):t||i,c),!r.length)return void delete n.attribs[l]}if("style"===l)if(t.parseStyleAttributes)try{const i=a(e+" {"+r+"}"),o=G(i,t.allowedStyles);if(r=z(o),0===r.length)return void delete n.attribs[l]}catch(c){return"undefined"!==typeof window&&console.warn('Failed to parse "'+e+" {"+r+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete n.attribs[l]}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");_+=" "+l,r&&r.length&&(_+='="'+H(r,!0)+'"')}else delete n.attribs[l]})),-1!==t.selfClosing.indexOf(e)?_+=" />":(_+=">",!n.innerText||u||t.textFilter||(_+=H(n.innerText),B=!0)),l&&(_=b+H(_),b="")},ontext:function(e){if(N)return;const r=I[I.length-1];let n;if(r&&(n=r.tag,e=void 0!==r.innerText?r.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==n&&"style"!==n){const r=H(e,!1);t.textFilter&&!B?_+=t.textFilter(r,n):B||(_+=r)}else _+=e;if(I.length){const t=I[I.length-1];t.text+=e}},onclosetag:function(e,r){if(N){if(D--,D)return;N=!1}const n=I.pop();if(!n)return;if(n.tag!==e)return void I.push(n);N=!!t.enforceHtmlBoundary&&"html"===e,R--;const i=L[R];if(i){if(delete L[R],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();b=_,_=""}M[R]&&(e=M[R],delete M[R]),t.exclusiveFilter&&t.exclusiveFilter(n)?_=_.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||r&&!w(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0?i&&(_=b,b=""):(_+="</"+e+">",i&&(_=b+H(_),b=""),B=!1))}},t.parser);return F.write(e),F.end(),_;function j(){_="",R=0,I=[],L={},M={},N=!1,D=0}function H(e,r){return"string"!==typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),r&&(e=e.replace(/"/g,"&quot;")),e}function q(e,r){r=r.replace(/[\x00-\x20]+/g,"");while(1){const e=r.indexOf("\x3c!--");if(-1===e)break;const t=r.indexOf("--\x3e",e+4);if(-1===t)break;r=r.substring(0,e)+r.substring(t+3)}const n=r.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!n)return!!r.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const i=n[1].toLowerCase();return d(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(i):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(i)}function U(e){if(e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),e.startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let i=0;i<100;i++)t+=`/${i}`;const r=new URL(e,t),n=r&&"relative-site"===r.hostname&&"relative:"===r.protocol;return{isRelativeUrl:n,url:r}}function G(e,t){if(!t)return e;const r=e.nodes[0];let n;return n=t[r.selector]&&t["*"]?o(t[r.selector],t["*"]):t[r.selector]||t["*"],n&&(e.nodes[0].nodes=r.nodes.reduce(V(n),[])),e}function z(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e}),[]).join(";")}function V(e){return function(t,r){if(d(e,r.prop)){const n=e[r.prop].some((function(e){return e.test(r.value)}));n&&t.push(r)}return t}}function $(e,t,r){return t?(e=e.split(/\s+/),e.filter((function(e){return-1!==t.indexOf(e)||r.some((function(t){return t.test(e)}))})).join(" ")):e}}var v={decodeEntities:!0};m.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},m.simpleTransform=function(e,t,r){return r=void 0===r||r,t=t||{},function(n,i){let o;if(r)for(o in t)i[o]=t[o];else i=t;return{tagName:e,attribs:i}}}}}),require_loglevel=__commonJS({"node_modules/loglevel/lib/loglevel.js"(e,t){init_polyfills(),function(e,r){"function"===typeof define&&__webpack_require__.amdO?define(r):"object"===typeof t&&t.exports?t.exports=r():e.log=r()}(e,(function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"===typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function a(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function l(e,r,n){return function(){typeof console!==t&&(a.call(this,r,n),this[e].apply(this,arguments))}}function u(e,t,r){return s(e)||l.apply(this,arguments)}function c(e,r,i){var o,s=this;r=null==r?"WARN":r;var l="loglevel";function c(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(i){}}}function d(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(i){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(i){}return void 0===s.levels[e]&&(e=void 0),e}}function h(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}"string"===typeof e?l+=":"+e:"symbol"===typeof e&&(l=void 0),s.name=e,s.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},s.methodFactory=i||u,s.getLevel=function(){return o},s.setLevel=function(r,n){if("string"===typeof r&&void 0!==s.levels[r.toUpperCase()]&&(r=s.levels[r.toUpperCase()]),!("number"===typeof r&&r>=0&&r<=s.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==n&&c(r),a.call(s,r,e),typeof console===t&&r<s.levels.SILENT)return"No console available for logging"},s.setDefaultLevel=function(e){r=e,d()||s.setLevel(e,!1)},s.resetLevel=function(){s.setLevel(r,!1),h()},s.enableAll=function(e){s.setLevel(s.levels.TRACE,e)},s.disableAll=function(e){s.setLevel(s.levels.SILENT,e)};var p=d();null==p&&(p=r),s.setLevel(p,!1)}var d=new c,h={};d.getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=h[e];return t||(t=h[e]=new c(e,d.getLevel(),d.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=p),d},d.getLoggers=function(){return h},d["default"]=d,d}))}}),require_debounce=__commonJS({"node_modules/debounce/index.js"(e,t){function r(e,t,r){var n,i,o,s,a;function l(){var u=Date.now()-s;u<t&&u>=0?n=setTimeout(l,t-u):(n=null,r||(a=e.apply(o,i),o=i=null))}null==t&&(t=100);var u=function(){o=this,i=arguments,s=Date.now();var u=r&&!n;return n||(n=setTimeout(l,t)),u&&(a=e.apply(o,i),o=i=null),a};return u.clear=function(){n&&(clearTimeout(n),n=null)},u.flush=function(){n&&(a=e.apply(o,i),o=i=null,clearTimeout(n),n=null)},u}init_polyfills(),r.debounce=r,t.exports=r}}),require_cssesc=__commonJS({"node_modules/cssesc/cssesc.js"(e,t){init_polyfills();var r={},n=r.hasOwnProperty,i=function(e,t){if(!e)return t;var r={};for(var i in t)r[i]=n.call(e,i)?e[i]:t[i];return r},o=/[ -,\.\/:-@\[-\^`\{-~]/,s=/[ -,\.\/:-@\[\]\^`\{-~]/,a=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,l=function e(t,r){r=i(r,e.options),"single"!=r.quotes&&"double"!=r.quotes&&(r.quotes="single");var n="double"==r.quotes?'"':"'",l=r.isIdentifier,u=t.charAt(0),c="",d=0,h=t.length;while(d<h){var p=t.charAt(d++),f=p.charCodeAt(),g=void 0;if(f<32||f>126){if(f>=55296&&f<=56319&&d<h){var m=t.charCodeAt(d++);56320==(64512&m)?f=((1023&f)<<10)+(1023&m)+65536:d--}g="\\"+f.toString(16).toUpperCase()+" "}else g=r.escapeEverything?o.test(p)?"\\"+p:"\\"+f.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(p)?"\\"+f.toString(16).toUpperCase()+" ":"\\"==p||!l&&('"'==p&&n==p||"'"==p&&n==p)||l&&s.test(p)?"\\"+p:p;c+=g}return l&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(u)&&(c="\\3"+u+" "+c.slice(1))),c=c.replace(a,(function(e,t,r){return t&&t.length%2?e:(t||"")+r})),!l&&r.wrap?n+c+n:c};l.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1},l.version="3.0.0",t.exports=l}}),require_lodash=__commonJS({"node_modules/lodash/lodash.js"(e,t){init_polyfills(),function(){var r,n="4.17.21",i=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",d=1,h=2,p=4,f=1,g=2,m=1,v=2,y=4,_=8,b=16,S=32,w=64,C=128,A=256,E=512,x=30,T="...",k=800,O=16,P=1,R=2,I=3,L=1/0,M=9007199254740991,N=17976931348623157e292,D=NaN,B=4294967295,F=B-1,j=B>>>1,H=[["ary",C],["bind",m],["bindKey",v],["curry",_],["curryRight",b],["flip",E],["partial",S],["partialRight",w],["rearg",A]],q="[object Arguments]",U="[object Array]",G="[object AsyncFunction]",z="[object Boolean]",V="[object Date]",$="[object DOMException]",J="[object Error]",W="[object Function]",Y="[object GeneratorFunction]",K="[object Map]",X="[object Number]",Q="[object Null]",Z="[object Object]",ee="[object Promise]",te="[object Proxy]",re="[object RegExp]",ne="[object Set]",ie="[object String]",oe="[object Symbol]",se="[object Undefined]",ae="[object WeakMap]",le="[object WeakSet]",ue="[object ArrayBuffer]",ce="[object DataView]",de="[object Float32Array]",he="[object Float64Array]",pe="[object Int8Array]",fe="[object Int16Array]",ge="[object Int32Array]",me="[object Uint8Array]",ve="[object Uint8ClampedArray]",ye="[object Uint16Array]",_e="[object Uint32Array]",be=/\b__p \+= '';/g,Se=/\b(__p \+=) '' \+/g,we=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ce=/&(?:amp|lt|gt|quot|#39);/g,Ae=/[&<>"']/g,Ee=RegExp(Ce.source),xe=RegExp(Ae.source),Te=/<%-([\s\S]+?)%>/g,ke=/<%([\s\S]+?)%>/g,Oe=/<%=([\s\S]+?)%>/g,Pe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Ie=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Le=/[\\^$.*+?()[\]{}|]/g,Me=RegExp(Le.source),Ne=/^\s+/,De=/\s/,Be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Fe=/\{\n\/\* \[wrapped with (.+)\] \*/,je=/,? & /,He=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,qe=/[()=,{}\[\]\/\s]/,Ue=/\\(\\)?/g,Ge=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ze=/\w*$/,Ve=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,Je=/^\[object .+?Constructor\]$/,We=/^0o[0-7]+$/i,Ye=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xe=/($^)/,Qe=/['\n\r\u2028\u2029\\]/g,Ze="\\ud800-\\udfff",et="\\u0300-\\u036f",tt="\\ufe20-\\ufe2f",rt="\\u20d0-\\u20ff",nt=et+tt+rt,it="\\u2700-\\u27bf",ot="a-z\\xdf-\\xf6\\xf8-\\xff",st="\\xac\\xb1\\xd7\\xf7",at="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",lt="\\u2000-\\u206f",ut=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ct="A-Z\\xc0-\\xd6\\xd8-\\xde",dt="\\ufe0e\\ufe0f",ht=st+at+lt+ut,pt="['’]",ft="["+Ze+"]",gt="["+ht+"]",mt="["+nt+"]",vt="\\d+",yt="["+it+"]",_t="["+ot+"]",bt="[^"+Ze+ht+vt+it+ot+ct+"]",St="\\ud83c[\\udffb-\\udfff]",wt="(?:"+mt+"|"+St+")",Ct="[^"+Ze+"]",At="(?:\\ud83c[\\udde6-\\uddff]){2}",Et="[\\ud800-\\udbff][\\udc00-\\udfff]",xt="["+ct+"]",Tt="\\u200d",kt="(?:"+_t+"|"+bt+")",Ot="(?:"+xt+"|"+bt+")",Pt="(?:"+pt+"(?:d|ll|m|re|s|t|ve))?",Rt="(?:"+pt+"(?:D|LL|M|RE|S|T|VE))?",It=wt+"?",Lt="["+dt+"]?",Mt="(?:"+Tt+"(?:"+[Ct,At,Et].join("|")+")"+Lt+It+")*",Nt="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Bt=Lt+It+Mt,Ft="(?:"+[yt,At,Et].join("|")+")"+Bt,jt="(?:"+[Ct+mt+"?",mt,At,Et,ft].join("|")+")",Ht=RegExp(pt,"g"),qt=RegExp(mt,"g"),Ut=RegExp(St+"(?="+St+")|"+jt+Bt,"g"),Gt=RegExp([xt+"?"+_t+"+"+Pt+"(?="+[gt,xt,"$"].join("|")+")",Ot+"+"+Rt+"(?="+[gt,xt+kt,"$"].join("|")+")",xt+"?"+kt+"+"+Pt,xt+"+"+Rt,Dt,Nt,vt,Ft].join("|"),"g"),zt=RegExp("["+Tt+Ze+nt+dt+"]"),Vt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$t=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Jt=-1,Wt={};Wt[de]=Wt[he]=Wt[pe]=Wt[fe]=Wt[ge]=Wt[me]=Wt[ve]=Wt[ye]=Wt[_e]=!0,Wt[q]=Wt[U]=Wt[ue]=Wt[z]=Wt[ce]=Wt[V]=Wt[J]=Wt[W]=Wt[K]=Wt[X]=Wt[Z]=Wt[re]=Wt[ne]=Wt[ie]=Wt[ae]=!1;var Yt={};Yt[q]=Yt[U]=Yt[ue]=Yt[ce]=Yt[z]=Yt[V]=Yt[de]=Yt[he]=Yt[pe]=Yt[fe]=Yt[ge]=Yt[K]=Yt[X]=Yt[Z]=Yt[re]=Yt[ne]=Yt[ie]=Yt[oe]=Yt[me]=Yt[ve]=Yt[ye]=Yt[_e]=!0,Yt[J]=Yt[W]=Yt[ae]=!1;var Kt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Xt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},er=parseFloat,tr=parseInt,rr="object"==typeof globalThis&&globalThis&&globalThis.Object===Object&&globalThis,nr="object"==typeof self&&self&&self.Object===Object&&self,ir=rr||nr||Function("return this")(),or="object"==typeof e&&e&&!e.nodeType&&e,sr=or&&"object"==typeof t&&t&&!t.nodeType&&t,ar=sr&&sr.exports===or,lr=ar&&rr.process,ur=function(){try{var e=sr&&sr.require&&sr.require("util").types;return e||lr&&lr.binding&&lr.binding("util")}catch(t){}}(),cr=ur&&ur.isArrayBuffer,dr=ur&&ur.isDate,hr=ur&&ur.isMap,pr=ur&&ur.isRegExp,fr=ur&&ur.isSet,gr=ur&&ur.isTypedArray;function mr(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function vr(e,t,r,n){var i=-1,o=null==e?0:e.length;while(++i<o){var s=e[i];t(n,s,r(s),e)}return n}function yr(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(!1===t(e[r],r,e))break;return e}function _r(e,t){var r=null==e?0:e.length;while(r--)if(!1===t(e[r],r,e))break;return e}function br(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(!t(e[r],r,e))return!1;return!0}function Sr(e,t){var r=-1,n=null==e?0:e.length,i=0,o=[];while(++r<n){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}function wr(e,t){var r=null==e?0:e.length;return!!r&&Mr(e,t,0)>-1}function Cr(e,t,r){var n=-1,i=null==e?0:e.length;while(++n<i)if(r(t,e[n]))return!0;return!1}function Ar(e,t){var r=-1,n=null==e?0:e.length,i=Array(n);while(++r<n)i[r]=t(e[r],r,e);return i}function Er(e,t){var r=-1,n=t.length,i=e.length;while(++r<n)e[i+r]=t[r];return e}function xr(e,t,r,n){var i=-1,o=null==e?0:e.length;n&&o&&(r=e[++i]);while(++i<o)r=t(r,e[i],i,e);return r}function Tr(e,t,r,n){var i=null==e?0:e.length;n&&i&&(r=e[--i]);while(i--)r=t(r,e[i],i,e);return r}function kr(e,t){var r=-1,n=null==e?0:e.length;while(++r<n)if(t(e[r],r,e))return!0;return!1}var Or=Fr("length");function Pr(e){return e.split("")}function Rr(e){return e.match(He)||[]}function Ir(e,t,r){var n;return r(e,(function(e,r,i){if(t(e,r,i))return n=r,!1})),n}function Lr(e,t,r,n){var i=e.length,o=r+(n?1:-1);while(n?o--:++o<i)if(t(e[o],o,e))return o;return-1}function Mr(e,t,r){return t===t?dn(e,t,r):Lr(e,Dr,r)}function Nr(e,t,r,n){var i=r-1,o=e.length;while(++i<o)if(n(e[i],t))return i;return-1}function Dr(e){return e!==e}function Br(e,t){var r=null==e?0:e.length;return r?Ur(e,t)/r:D}function Fr(e){return function(t){return null==t?r:t[e]}}function jr(e){return function(t){return null==e?r:e[t]}}function Hr(e,t,r,n,i){return i(e,(function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)})),r}function qr(e,t){var r=e.length;e.sort(t);while(r--)e[r]=e[r].value;return e}function Ur(e,t){var n,i=-1,o=e.length;while(++i<o){var s=t(e[i]);s!==r&&(n=n===r?s:n+s)}return n}function Gr(e,t){var r=-1,n=Array(e);while(++r<e)n[r]=t(r);return n}function zr(e,t){return Ar(t,(function(t){return[t,e[t]]}))}function Vr(e){return e?e.slice(0,gn(e)+1).replace(Ne,""):e}function $r(e){return function(t){return e(t)}}function Jr(e,t){return Ar(t,(function(t){return e[t]}))}function Wr(e,t){return e.has(t)}function Yr(e,t){var r=-1,n=e.length;while(++r<n&&Mr(t,e[r],0)>-1);return r}function Kr(e,t){var r=e.length;while(r--&&Mr(t,e[r],0)>-1);return r}function Xr(e,t){var r=e.length,n=0;while(r--)e[r]===t&&++n;return n}var Qr=jr(Kt),Zr=jr(Xt);function en(e){return"\\"+Zt[e]}function tn(e,t){return null==e?r:e[t]}function rn(e){return zt.test(e)}function nn(e){return Vt.test(e)}function on(e){var t,r=[];while(!(t=e.next()).done)r.push(t.value);return r}function sn(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function an(e,t){return function(r){return e(t(r))}}function ln(e,t){var r=-1,n=e.length,i=0,o=[];while(++r<n){var s=e[r];s!==t&&s!==c||(e[r]=c,o[i++]=r)}return o}function un(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function cn(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function dn(e,t,r){var n=r-1,i=e.length;while(++n<i)if(e[n]===t)return n;return-1}function hn(e,t,r){var n=r+1;while(n--)if(e[n]===t)return n;return n}function pn(e){return rn(e)?vn(e):Or(e)}function fn(e){return rn(e)?yn(e):Pr(e)}function gn(e){var t=e.length;while(t--&&De.test(e.charAt(t)));return t}var mn=jr(Qt);function vn(e){var t=Ut.lastIndex=0;while(Ut.test(e))++t;return t}function yn(e){return e.match(Ut)||[]}function _n(e){return e.match(Gt)||[]}var bn=function e(t){t=null==t?ir:Sn.defaults(ir.Object(),t,Sn.pick(ir,$t));var De=t.Array,He=t.Date,Ze=t.Error,et=t.Function,tt=t.Math,rt=t.Object,nt=t.RegExp,it=t.String,ot=t.TypeError,st=De.prototype,at=et.prototype,lt=rt.prototype,ut=t["__core-js_shared__"],ct=at.toString,dt=lt.hasOwnProperty,ht=0,pt=function(){var e=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ft=lt.toString,gt=ct.call(rt),mt=ir._,vt=nt("^"+ct.call(dt).replace(Le,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=ar?t.Buffer:r,_t=t.Symbol,bt=t.Uint8Array,St=yt?yt.allocUnsafe:r,wt=an(rt.getPrototypeOf,rt),Ct=rt.create,At=lt.propertyIsEnumerable,Et=st.splice,xt=_t?_t.isConcatSpreadable:r,Tt=_t?_t.iterator:r,kt=_t?_t.toStringTag:r,Ot=function(){try{var e=Js(rt,"defineProperty");return e({},"",{}),e}catch(t){}}(),Pt=t.clearTimeout!==ir.clearTimeout&&t.clearTimeout,Rt=He&&He.now!==ir.Date.now&&He.now,It=t.setTimeout!==ir.setTimeout&&t.setTimeout,Lt=tt.ceil,Mt=tt.floor,Nt=rt.getOwnPropertySymbols,Dt=yt?yt.isBuffer:r,Bt=t.isFinite,Ft=st.join,jt=an(rt.keys,rt),Ut=tt.max,Gt=tt.min,zt=He.now,Vt=t.parseInt,Kt=tt.random,Xt=st.reverse,Qt=Js(t,"DataView"),Zt=Js(t,"Map"),rr=Js(t,"Promise"),nr=Js(t,"Set"),or=Js(t,"WeakMap"),sr=Js(rt,"create"),lr=or&&new or,ur={},Or=Ia(Qt),Pr=Ia(Zt),jr=Ia(rr),dn=Ia(nr),vn=Ia(or),yn=_t?_t.prototype:r,bn=yn?yn.valueOf:r,wn=yn?yn.toString:r;function Cn(e){if(Ec(e)&&!lc(e)&&!(e instanceof Tn)){if(e instanceof xn)return e;if(dt.call(e,"__wrapped__"))return Ma(e)}return new xn(e)}var An=function(){function e(){}return function(t){if(!Ac(t))return{};if(Ct)return Ct(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function En(){}function xn(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function Tn(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function kn(){var e=new Tn(this.__wrapped__);return e.__actions__=is(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=is(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=is(this.__views__),e}function On(){if(this.__filtered__){var e=new Tn(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Pn(){var e=this.__wrapped__.value(),t=this.__dir__,r=lc(e),n=t<0,i=r?e.length:0,o=Qs(0,i,this.__views__),s=o.start,a=o.end,l=a-s,u=n?a:s-1,c=this.__iteratees__,d=c.length,h=0,p=Gt(l,this.__takeCount__);if(!r||!n&&i==l&&p==l)return jo(e,this.__actions__);var f=[];e:while(l--&&h<p){u+=t;var g=-1,m=e[u];while(++g<d){var v=c[g],y=v.iteratee,_=v.type,b=y(m);if(_==R)m=b;else if(!b){if(_==P)continue e;break e}}f[h++]=m}return f}function Rn(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function In(){this.__data__=sr?sr(null):{},this.size=0}function Ln(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Mn(e){var t=this.__data__;if(sr){var n=t[e];return n===l?r:n}return dt.call(t,e)?t[e]:r}function Nn(e){var t=this.__data__;return sr?t[e]!==r:dt.call(t,e)}function Dn(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sr&&t===r?l:t,this}function Bn(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function Fn(){this.__data__=[],this.size=0}function jn(e){var t=this.__data__,r=ci(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():Et.call(t,r,1),--this.size,!0}function Hn(e){var t=this.__data__,n=ci(t,e);return n<0?r:t[n][1]}function qn(e){return ci(this.__data__,e)>-1}function Un(e,t){var r=this.__data__,n=ci(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}function Gn(e){var t=-1,r=null==e?0:e.length;this.clear();while(++t<r){var n=e[t];this.set(n[0],n[1])}}function zn(){this.size=0,this.__data__={hash:new Rn,map:new(Zt||Bn),string:new Rn}}function Vn(e){var t=Vs(this,e)["delete"](e);return this.size-=t?1:0,t}function $n(e){return Vs(this,e).get(e)}function Jn(e){return Vs(this,e).has(e)}function Wn(e,t){var r=Vs(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}function Yn(e){var t=-1,r=null==e?0:e.length;this.__data__=new Gn;while(++t<r)this.add(e[t])}function Kn(e){return this.__data__.set(e,l),this}function Xn(e){return this.__data__.has(e)}function Qn(e){var t=this.__data__=new Bn(e);this.size=t.size}function Zn(){this.__data__=new Bn,this.size=0}function ei(e){var t=this.__data__,r=t["delete"](e);return this.size=t.size,r}function ti(e){return this.__data__.get(e)}function ri(e){return this.__data__.has(e)}function ni(e,t){var r=this.__data__;if(r instanceof Bn){var n=r.__data__;if(!Zt||n.length<i-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gn(n)}return r.set(e,t),this.size=r.size,this}function ii(e,t){var r=lc(e),n=!r&&ac(e),i=!r&&!n&&pc(e),o=!r&&!n&&!i&&Hc(e),s=r||n||i||o,a=s?Gr(e.length,it):[],l=a.length;for(var u in e)!t&&!dt.call(e,u)||s&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||sa(u,l))||a.push(u);return a}function oi(e){var t=e.length;return t?e[yo(0,t-1)]:r}function si(e,t){return Oa(is(e),mi(t,0,e.length))}function ai(e){return Oa(is(e))}function li(e,t,n){(n!==r&&!ic(e[t],n)||n===r&&!(t in e))&&fi(e,t,n)}function ui(e,t,n){var i=e[t];dt.call(e,t)&&ic(i,n)&&(n!==r||t in e)||fi(e,t,n)}function ci(e,t){var r=e.length;while(r--)if(ic(e[r][0],t))return r;return-1}function di(e,t,r,n){return wi(e,(function(e,i,o){t(n,e,r(e),o)})),n}function hi(e,t){return e&&os(t,wd(t),e)}function pi(e,t){return e&&os(t,Cd(t),e)}function fi(e,t,r){"__proto__"==t&&Ot?Ot(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function gi(e,t){var n=-1,i=t.length,o=De(i),s=null==e;while(++n<i)o[n]=s?r:md(e,t[n]);return o}function mi(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function vi(e,t,n,i,o,s){var a,l=t&d,u=t&h,c=t&p;if(n&&(a=o?n(e,i,o,s):n(e)),a!==r)return a;if(!Ac(e))return e;var f=lc(e);if(f){if(a=ta(e),!l)return is(e,a)}else{var g=Xs(e),m=g==W||g==Y;if(pc(e))return Wo(e,l);if(g==Z||g==q||m&&!o){if(a=u||m?{}:ra(e),!l)return u?as(e,pi(a,e)):ss(e,hi(a,e))}else{if(!Yt[g])return o?e:{};a=na(e,g,l)}}s||(s=new Qn);var v=s.get(e);if(v)return v;s.set(e,a),Bc(e)?e.forEach((function(r){a.add(vi(r,t,n,r,e,s))})):xc(e)&&e.forEach((function(r,i){a.set(i,vi(r,t,n,i,e,s))}));var y=c?u?Hs:js:u?Cd:wd,_=f?r:y(e);return yr(_||e,(function(r,i){_&&(i=r,r=e[i]),ui(a,i,vi(r,t,n,i,e,s))})),a}function yi(e){var t=wd(e);return function(r){return _i(r,e,t)}}function _i(e,t,n){var i=n.length;if(null==e)return!i;e=rt(e);while(i--){var o=n[i],s=t[o],a=e[o];if(a===r&&!(o in e)||!s(a))return!1}return!0}function bi(e,t,n){if("function"!=typeof e)throw new ot(s);return Ea((function(){e.apply(r,n)}),t)}function Si(e,t,r,n){var o=-1,s=wr,a=!0,l=e.length,u=[],c=t.length;if(!l)return u;r&&(t=Ar(t,$r(r))),n?(s=Cr,a=!1):t.length>=i&&(s=Wr,a=!1,t=new Yn(t));e:while(++o<l){var d=e[o],h=null==r?d:r(d);if(d=n||0!==d?d:0,a&&h===h){var p=c;while(p--)if(t[p]===h)continue e;u.push(d)}else s(t,h,n)||u.push(d)}return u}Cn.templateSettings={escape:Te,evaluate:ke,interpolate:Oe,variable:"",imports:{_:Cn}},Cn.prototype=En.prototype,Cn.prototype.constructor=Cn,xn.prototype=An(En.prototype),xn.prototype.constructor=xn,Tn.prototype=An(En.prototype),Tn.prototype.constructor=Tn,Rn.prototype.clear=In,Rn.prototype["delete"]=Ln,Rn.prototype.get=Mn,Rn.prototype.has=Nn,Rn.prototype.set=Dn,Bn.prototype.clear=Fn,Bn.prototype["delete"]=jn,Bn.prototype.get=Hn,Bn.prototype.has=qn,Bn.prototype.set=Un,Gn.prototype.clear=zn,Gn.prototype["delete"]=Vn,Gn.prototype.get=$n,Gn.prototype.has=Jn,Gn.prototype.set=Wn,Yn.prototype.add=Yn.prototype.push=Kn,Yn.prototype.has=Xn,Qn.prototype.clear=Zn,Qn.prototype["delete"]=ei,Qn.prototype.get=ti,Qn.prototype.has=ri,Qn.prototype.set=ni;var wi=cs(Ri),Ci=cs(Ii,!0);function Ai(e,t){var r=!0;return wi(e,(function(e,n,i){return r=!!t(e,n,i),r})),r}function Ei(e,t,n){var i=-1,o=e.length;while(++i<o){var s=e[i],a=t(s);if(null!=a&&(l===r?a===a&&!jc(a):n(a,l)))var l=a,u=s}return u}function xi(e,t,n,i){var o=e.length;n=Wc(n),n<0&&(n=-n>o?0:o+n),i=i===r||i>o?o:Wc(i),i<0&&(i+=o),i=n>i?0:Yc(i);while(n<i)e[n++]=t;return e}function Ti(e,t){var r=[];return wi(e,(function(e,n,i){t(e,n,i)&&r.push(e)})),r}function ki(e,t,r,n,i){var o=-1,s=e.length;r||(r=oa),i||(i=[]);while(++o<s){var a=e[o];t>0&&r(a)?t>1?ki(a,t-1,r,n,i):Er(i,a):n||(i[i.length]=a)}return i}var Oi=ds(),Pi=ds(!0);function Ri(e,t){return e&&Oi(e,t,wd)}function Ii(e,t){return e&&Pi(e,t,wd)}function Li(e,t){return Sr(t,(function(t){return Sc(e[t])}))}function Mi(e,t){t=zo(t,e);var n=0,i=t.length;while(null!=e&&n<i)e=e[Ra(t[n++])];return n&&n==i?e:r}function Ni(e,t,r){var n=t(e);return lc(e)?n:Er(n,r(e))}function Di(e){return null==e?e===r?se:Q:kt&&kt in rt(e)?Ws(e):_a(e)}function Bi(e,t){return e>t}function Fi(e,t){return null!=e&&dt.call(e,t)}function ji(e,t){return null!=e&&t in rt(e)}function Hi(e,t,r){return e>=Gt(t,r)&&e<Ut(t,r)}function qi(e,t,n){var i=n?Cr:wr,o=e[0].length,s=e.length,a=s,l=De(s),u=1/0,c=[];while(a--){var d=e[a];a&&t&&(d=Ar(d,$r(t))),u=Gt(d.length,u),l[a]=!n&&(t||o>=120&&d.length>=120)?new Yn(a&&d):r}d=e[0];var h=-1,p=l[0];e:while(++h<o&&c.length<u){var f=d[h],g=t?t(f):f;if(f=n||0!==f?f:0,!(p?Wr(p,g):i(c,g,n))){a=s;while(--a){var m=l[a];if(!(m?Wr(m,g):i(e[a],g,n)))continue e}p&&p.push(g),c.push(f)}}return c}function Ui(e,t,r,n){return Ri(e,(function(e,i,o){t(n,r(e),i,o)})),n}function Gi(e,t,n){t=zo(t,e),e=Sa(e,t);var i=null==e?e:e[Ra(ol(t))];return null==i?r:mr(i,e,n)}function zi(e){return Ec(e)&&Di(e)==q}function Vi(e){return Ec(e)&&Di(e)==ue}function $i(e){return Ec(e)&&Di(e)==V}function Ji(e,t,r,n,i){return e===t||(null==e||null==t||!Ec(e)&&!Ec(t)?e!==e&&t!==t:Wi(e,t,r,n,Ji,i))}function Wi(e,t,r,n,i,o){var s=lc(e),a=lc(t),l=s?U:Xs(e),u=a?U:Xs(t);l=l==q?Z:l,u=u==q?Z:u;var c=l==Z,d=u==Z,h=l==u;if(h&&pc(e)){if(!pc(t))return!1;s=!0,c=!1}if(h&&!c)return o||(o=new Qn),s||Hc(e)?Ns(e,t,r,n,i,o):Ds(e,t,l,r,n,i,o);if(!(r&f)){var p=c&&dt.call(e,"__wrapped__"),g=d&&dt.call(t,"__wrapped__");if(p||g){var m=p?e.value():e,v=g?t.value():t;return o||(o=new Qn),i(m,v,r,n,o)}}return!!h&&(o||(o=new Qn),Bs(e,t,r,n,i,o))}function Yi(e){return Ec(e)&&Xs(e)==K}function Ki(e,t,n,i){var o=n.length,s=o,a=!i;if(null==e)return!s;e=rt(e);while(o--){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}while(++o<s){l=n[o];var u=l[0],c=e[u],d=l[1];if(a&&l[2]){if(c===r&&!(u in e))return!1}else{var h=new Qn;if(i)var p=i(c,d,u,e,t,h);if(!(p===r?Ji(d,c,f|g,i,h):p))return!1}}return!0}function Xi(e){if(!Ac(e)||da(e))return!1;var t=Sc(e)?vt:Je;return t.test(Ia(e))}function Qi(e){return Ec(e)&&Di(e)==re}function Zi(e){return Ec(e)&&Xs(e)==ne}function eo(e){return Ec(e)&&Cc(e.length)&&!!Wt[Di(e)]}function to(e){return"function"==typeof e?e:null==e?Ph:"object"==typeof e?lc(e)?ao(e[0],e[1]):so(e):Gh(e)}function ro(e){if(!pa(e))return jt(e);var t=[];for(var r in rt(e))dt.call(e,r)&&"constructor"!=r&&t.push(r);return t}function no(e){if(!Ac(e))return ya(e);var t=pa(e),r=[];for(var n in e)("constructor"!=n||!t&&dt.call(e,n))&&r.push(n);return r}function io(e,t){return e<t}function oo(e,t){var r=-1,n=cc(e)?De(e.length):[];return wi(e,(function(e,i,o){n[++r]=t(e,i,o)})),n}function so(e){var t=$s(e);return 1==t.length&&t[0][2]?ga(t[0][0],t[0][1]):function(r){return r===e||Ki(r,e,t)}}function ao(e,t){return la(e)&&fa(t)?ga(Ra(e),t):function(n){var i=md(n,e);return i===r&&i===t?yd(n,e):Ji(t,i,f|g)}}function lo(e,t,n,i,o){e!==t&&Oi(t,(function(s,a){if(o||(o=new Qn),Ac(s))uo(e,t,a,n,lo,i,o);else{var l=i?i(Ca(e,a),s,a+"",e,t,o):r;l===r&&(l=s),li(e,a,l)}}),Cd)}function uo(e,t,n,i,o,s,a){var l=Ca(e,n),u=Ca(t,n),c=a.get(u);if(c)li(e,n,c);else{var d=s?s(l,u,n+"",e,t,a):r,h=d===r;if(h){var p=lc(u),f=!p&&pc(u),g=!p&&!f&&Hc(u);d=u,p||f||g?lc(l)?d=l:dc(l)?d=is(l):f?(h=!1,d=Wo(u,!0)):g?(h=!1,d=Zo(u,!0)):d=[]:Mc(u)||ac(u)?(d=l,ac(l)?d=Xc(l):Ac(l)&&!Sc(l)||(d=ra(u))):h=!1}h&&(a.set(u,d),o(d,u,i,s,a),a["delete"](u)),li(e,n,d)}}function co(e,t){var n=e.length;if(n)return t+=t<0?n:0,sa(t,n)?e[t]:r}function ho(e,t,r){t=t.length?Ar(t,(function(e){return lc(e)?function(t){return Mi(t,1===e.length?e[0]:e)}:e})):[Ph];var n=-1;t=Ar(t,$r(zs()));var i=oo(e,(function(e,r,i){var o=Ar(t,(function(t){return t(e)}));return{criteria:o,index:++n,value:e}}));return qr(i,(function(e,t){return ts(e,t,r)}))}function po(e,t){return fo(e,t,(function(t,r){return yd(e,r)}))}function fo(e,t,r){var n=-1,i=t.length,o={};while(++n<i){var s=t[n],a=Mi(e,s);r(a,s)&&Ao(o,zo(s,e),a)}return o}function go(e){return function(t){return Mi(t,e)}}function mo(e,t,r,n){var i=n?Nr:Mr,o=-1,s=t.length,a=e;e===t&&(t=is(t)),r&&(a=Ar(e,$r(r)));while(++o<s){var l=0,u=t[o],c=r?r(u):u;while((l=i(a,c,l,n))>-1)a!==e&&Et.call(a,l,1),Et.call(e,l,1)}return e}function vo(e,t){var r=e?t.length:0,n=r-1;while(r--){var i=t[r];if(r==n||i!==o){var o=i;sa(i)?Et.call(e,i,1):Do(e,i)}}return e}function yo(e,t){return e+Mt(Kt()*(t-e+1))}function _o(e,t,r,n){var i=-1,o=Ut(Lt((t-e)/(r||1)),0),s=De(o);while(o--)s[n?o:++i]=e,e+=r;return s}function bo(e,t){var r="";if(!e||t<1||t>M)return r;do{t%2&&(r+=e),t=Mt(t/2),t&&(e+=e)}while(t);return r}function So(e,t){return xa(ba(e,t,Ph),e+"")}function wo(e){return oi(qd(e))}function Co(e,t){var r=qd(e);return Oa(r,mi(t,0,r.length))}function Ao(e,t,n,i){if(!Ac(e))return e;t=zo(t,e);var o=-1,s=t.length,a=s-1,l=e;while(null!=l&&++o<s){var u=Ra(t[o]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(o!=a){var d=l[u];c=i?i(d,u,l):r,c===r&&(c=Ac(d)?d:sa(t[o+1])?[]:{})}ui(l,u,c),l=l[u]}return e}var Eo=lr?function(e,t){return lr.set(e,t),e}:Ph,xo=Ot?function(e,t){return Ot(e,"toString",{configurable:!0,enumerable:!1,value:xh(t),writable:!0})}:Ph;function To(e){return Oa(qd(e))}function ko(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;var o=De(i);while(++n<i)o[n]=e[n+t];return o}function Oo(e,t){var r;return wi(e,(function(e,n,i){return r=t(e,n,i),!r})),!!r}function Po(e,t,r){var n=0,i=null==e?n:e.length;if("number"==typeof t&&t===t&&i<=j){while(n<i){var o=n+i>>>1,s=e[o];null!==s&&!jc(s)&&(r?s<=t:s<t)?n=o+1:i=o}return i}return Ro(e,t,Ph,r)}function Ro(e,t,n,i){var o=0,s=null==e?0:e.length;if(0===s)return 0;t=n(t);var a=t!==t,l=null===t,u=jc(t),c=t===r;while(o<s){var d=Mt((o+s)/2),h=n(e[d]),p=h!==r,f=null===h,g=h===h,m=jc(h);if(a)var v=i||g;else v=c?g&&(i||p):l?g&&p&&(i||!f):u?g&&p&&!f&&(i||!m):!f&&!m&&(i?h<=t:h<t);v?o=d+1:s=d}return Gt(s,F)}function Io(e,t){var r=-1,n=e.length,i=0,o=[];while(++r<n){var s=e[r],a=t?t(s):s;if(!r||!ic(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function Lo(e){return"number"==typeof e?e:jc(e)?D:+e}function Mo(e){if("string"==typeof e)return e;if(lc(e))return Ar(e,Mo)+"";if(jc(e))return wn?wn.call(e):"";var t=e+"";return"0"==t&&1/e==-L?"-0":t}function No(e,t,r){var n=-1,o=wr,s=e.length,a=!0,l=[],u=l;if(r)a=!1,o=Cr;else if(s>=i){var c=t?null:Os(e);if(c)return un(c);a=!1,o=Wr,u=new Yn}else u=t?[]:l;e:while(++n<s){var d=e[n],h=t?t(d):d;if(d=r||0!==d?d:0,a&&h===h){var p=u.length;while(p--)if(u[p]===h)continue e;t&&u.push(h),l.push(d)}else o(u,h,r)||(u!==l&&u.push(h),l.push(d))}return l}function Do(e,t){return t=zo(t,e),e=Sa(e,t),null==e||delete e[Ra(ol(t))]}function Bo(e,t,r,n){return Ao(e,t,r(Mi(e,t)),n)}function Fo(e,t,r,n){var i=e.length,o=n?i:-1;while((n?o--:++o<i)&&t(e[o],o,e));return r?ko(e,n?0:o,n?o+1:i):ko(e,n?o+1:0,n?i:o)}function jo(e,t){var r=e;return r instanceof Tn&&(r=r.value()),xr(t,(function(e,t){return t.func.apply(t.thisArg,Er([e],t.args))}),r)}function Ho(e,t,r){var n=e.length;if(n<2)return n?No(e[0]):[];var i=-1,o=De(n);while(++i<n){var s=e[i],a=-1;while(++a<n)a!=i&&(o[i]=Si(o[i]||s,e[a],t,r))}return No(ki(o,1),t,r)}function qo(e,t,n){var i=-1,o=e.length,s=t.length,a={};while(++i<o){var l=i<s?t[i]:r;n(a,e[i],l)}return a}function Uo(e){return dc(e)?e:[]}function Go(e){return"function"==typeof e?e:Ph}function zo(e,t){return lc(e)?e:la(e,t)?[e]:Pa(Zc(e))}var Vo=So;function $o(e,t,n){var i=e.length;return n=n===r?i:n,!t&&n>=i?e:ko(e,t,n)}var Jo=Pt||function(e){return ir.clearTimeout(e)};function Wo(e,t){if(t)return e.slice();var r=e.length,n=St?St(r):new e.constructor(r);return e.copy(n),n}function Yo(e){var t=new e.constructor(e.byteLength);return new bt(t).set(new bt(e)),t}function Ko(e,t){var r=t?Yo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}function Xo(e){var t=new e.constructor(e.source,ze.exec(e));return t.lastIndex=e.lastIndex,t}function Qo(e){return bn?rt(bn.call(e)):{}}function Zo(e,t){var r=t?Yo(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function es(e,t){if(e!==t){var n=e!==r,i=null===e,o=e===e,s=jc(e),a=t!==r,l=null===t,u=t===t,c=jc(t);if(!l&&!c&&!s&&e>t||s&&a&&u&&!l&&!c||i&&a&&u||!n&&u||!o)return 1;if(!i&&!s&&!c&&e<t||c&&n&&o&&!i&&!s||l&&n&&o||!a&&o||!u)return-1}return 0}function ts(e,t,r){var n=-1,i=e.criteria,o=t.criteria,s=i.length,a=r.length;while(++n<s){var l=es(i[n],o[n]);if(l){if(n>=a)return l;var u=r[n];return l*("desc"==u?-1:1)}}return e.index-t.index}function rs(e,t,r,n){var i=-1,o=e.length,s=r.length,a=-1,l=t.length,u=Ut(o-s,0),c=De(l+u),d=!n;while(++a<l)c[a]=t[a];while(++i<s)(d||i<o)&&(c[r[i]]=e[i]);while(u--)c[a++]=e[i++];return c}function ns(e,t,r,n){var i=-1,o=e.length,s=-1,a=r.length,l=-1,u=t.length,c=Ut(o-a,0),d=De(c+u),h=!n;while(++i<c)d[i]=e[i];var p=i;while(++l<u)d[p+l]=t[l];while(++s<a)(h||i<o)&&(d[p+r[s]]=e[i++]);return d}function is(e,t){var r=-1,n=e.length;t||(t=De(n));while(++r<n)t[r]=e[r];return t}function os(e,t,n,i){var o=!n;n||(n={});var s=-1,a=t.length;while(++s<a){var l=t[s],u=i?i(n[l],e[l],l,n,e):r;u===r&&(u=e[l]),o?fi(n,l,u):ui(n,l,u)}return n}function ss(e,t){return os(e,Ys(e),t)}function as(e,t){return os(e,Ks(e),t)}function ls(e,t){return function(r,n){var i=lc(r)?vr:di,o=t?t():{};return i(r,e,zs(n,2),o)}}function us(e){return So((function(t,n){var i=-1,o=n.length,s=o>1?n[o-1]:r,a=o>2?n[2]:r;s=e.length>3&&"function"==typeof s?(o--,s):r,a&&aa(n[0],n[1],a)&&(s=o<3?r:s,o=1),t=rt(t);while(++i<o){var l=n[i];l&&e(t,l,i,s)}return t}))}function cs(e,t){return function(r,n){if(null==r)return r;if(!cc(r))return e(r,n);var i=r.length,o=t?i:-1,s=rt(r);while(t?o--:++o<i)if(!1===n(s[o],o,s))break;return r}}function ds(e){return function(t,r,n){var i=-1,o=rt(t),s=n(t),a=s.length;while(a--){var l=s[e?a:++i];if(!1===r(o[l],l,o))break}return t}}function hs(e,t,r){var n=t&m,i=gs(e);function o(){var t=this&&this!==ir&&this instanceof o?i:e;return t.apply(n?r:this,arguments)}return o}function ps(e){return function(t){t=Zc(t);var n=rn(t)?fn(t):r,i=n?n[0]:t.charAt(0),o=n?$o(n,1).join(""):t.slice(1);return i[e]()+o}}function fs(e){return function(t){return xr(Sh(Wd(t).replace(Ht,"")),e,"")}}function gs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=An(e.prototype),n=e.apply(r,t);return Ac(n)?n:r}}function ms(e,t,n){var i=gs(e);function o(){var s=arguments.length,a=De(s),l=s,u=Gs(o);while(l--)a[l]=arguments[l];var c=s<3&&a[0]!==u&&a[s-1]!==u?[]:ln(a,u);if(s-=c.length,s<n)return Ts(e,t,_s,o.placeholder,r,a,c,r,r,n-s);var d=this&&this!==ir&&this instanceof o?i:e;return mr(d,this,a)}return o}function vs(e){return function(t,n,i){var o=rt(t);if(!cc(t)){var s=zs(n,3);t=wd(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,i);return a>-1?o[s?t[a]:a]:r}}function ys(e){return Fs((function(t){var n=t.length,i=n,o=xn.prototype.thru;e&&t.reverse();while(i--){var a=t[i];if("function"!=typeof a)throw new ot(s);if(o&&!l&&"wrapper"==Us(a))var l=new xn([],!0)}i=l?i:n;while(++i<n){a=t[i];var u=Us(a),c="wrapper"==u?qs(a):r;l=c&&ca(c[0])&&c[1]==(C|_|S|A)&&!c[4].length&&1==c[9]?l[Us(c[0])].apply(l,c[3]):1==a.length&&ca(a)?l[u]():l.thru(a)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&lc(r))return l.plant(r).value();var i=0,o=n?t[i].apply(this,e):r;while(++i<n)o=t[i].call(this,o);return o}}))}function _s(e,t,n,i,o,s,a,l,u,c){var d=t&C,h=t&m,p=t&v,f=t&(_|b),g=t&E,y=p?r:gs(e);function S(){var r=arguments.length,m=De(r),v=r;while(v--)m[v]=arguments[v];if(f)var _=Gs(S),b=Xr(m,_);if(i&&(m=rs(m,i,o,f)),s&&(m=ns(m,s,a,f)),r-=b,f&&r<c){var w=ln(m,_);return Ts(e,t,_s,S.placeholder,n,m,w,l,u,c-r)}var C=h?n:this,A=p?C[e]:e;return r=m.length,l?m=wa(m,l):g&&r>1&&m.reverse(),d&&u<r&&(m.length=u),this&&this!==ir&&this instanceof S&&(A=y||gs(A)),A.apply(C,m)}return S}function bs(e,t){return function(r,n){return Ui(r,e,t(n),{})}}function Ss(e,t){return function(n,i){var o;if(n===r&&i===r)return t;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=Mo(n),i=Mo(i)):(n=Lo(n),i=Lo(i)),o=e(n,i)}return o}}function ws(e){return Fs((function(t){return t=Ar(t,$r(zs())),So((function(r){var n=this;return e(t,(function(e){return mr(e,n,r)}))}))}))}function Cs(e,t){t=t===r?" ":Mo(t);var n=t.length;if(n<2)return n?bo(t,e):t;var i=bo(t,Lt(e/pn(t)));return rn(t)?$o(fn(i),0,e).join(""):i.slice(0,e)}function As(e,t,r,n){var i=t&m,o=gs(e);function s(){var t=-1,a=arguments.length,l=-1,u=n.length,c=De(u+a),d=this&&this!==ir&&this instanceof s?o:e;while(++l<u)c[l]=n[l];while(a--)c[l++]=arguments[++t];return mr(d,i?r:this,c)}return s}function Es(e){return function(t,n,i){return i&&"number"!=typeof i&&aa(t,n,i)&&(n=i=r),t=Jc(t),n===r?(n=t,t=0):n=Jc(n),i=i===r?t<n?1:-1:Jc(i),_o(t,n,i,e)}}function xs(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=Kc(t),r=Kc(r)),e(t,r)}}function Ts(e,t,n,i,o,s,a,l,u,c){var d=t&_,h=d?a:r,p=d?r:a,f=d?s:r,g=d?r:s;t|=d?S:w,t&=~(d?w:S),t&y||(t&=~(m|v));var b=[e,t,o,f,h,g,p,l,u,c],C=n.apply(r,b);return ca(e)&&Aa(C,b),C.placeholder=i,Ta(C,e,t)}function ks(e){var t=tt[e];return function(e,r){if(e=Kc(e),r=null==r?0:Gt(Wc(r),292),r&&Bt(e)){var n=(Zc(e)+"e").split("e"),i=t(n[0]+"e"+(+n[1]+r));return n=(Zc(i)+"e").split("e"),+(n[0]+"e"+(+n[1]-r))}return t(e)}}var Os=nr&&1/un(new nr([,-0]))[1]==L?function(e){return new nr(e)}:Fh;function Ps(e){return function(t){var r=Xs(t);return r==K?sn(t):r==ne?cn(t):zr(t,e(t))}}function Rs(e,t,n,i,o,a,l,u){var c=t&v;if(!c&&"function"!=typeof e)throw new ot(s);var d=i?i.length:0;if(d||(t&=~(S|w),i=o=r),l=l===r?l:Ut(Wc(l),0),u=u===r?u:Wc(u),d-=o?o.length:0,t&w){var h=i,p=o;i=o=r}var f=c?r:qs(e),g=[e,t,n,i,o,h,p,a,l,u];if(f&&va(g,f),e=g[0],t=g[1],n=g[2],i=g[3],o=g[4],u=g[9]=g[9]===r?c?0:e.length:Ut(g[9]-d,0),!u&&t&(_|b)&&(t&=~(_|b)),t&&t!=m)y=t==_||t==b?ms(e,t,u):t!=S&&t!=(m|S)||o.length?_s.apply(r,g):As(e,t,n,i);else var y=hs(e,t,n);var C=f?Eo:Aa;return Ta(C(y,g),e,t)}function Is(e,t,n,i){return e===r||ic(e,lt[n])&&!dt.call(i,n)?t:e}function Ls(e,t,n,i,o,s){return Ac(e)&&Ac(t)&&(s.set(t,e),lo(e,t,r,Ls,s),s["delete"](t)),e}function Ms(e){return Mc(e)?r:e}function Ns(e,t,n,i,o,s){var a=n&f,l=e.length,u=t.length;if(l!=u&&!(a&&u>l))return!1;var c=s.get(e),d=s.get(t);if(c&&d)return c==t&&d==e;var h=-1,p=!0,m=n&g?new Yn:r;s.set(e,t),s.set(t,e);while(++h<l){var v=e[h],y=t[h];if(i)var _=a?i(y,v,h,t,e,s):i(v,y,h,e,t,s);if(_!==r){if(_)continue;p=!1;break}if(m){if(!kr(t,(function(e,t){if(!Wr(m,t)&&(v===e||o(v,e,n,i,s)))return m.push(t)}))){p=!1;break}}else if(v!==y&&!o(v,y,n,i,s)){p=!1;break}}return s["delete"](e),s["delete"](t),p}function Ds(e,t,r,n,i,o,s){switch(r){case ce:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ue:return!(e.byteLength!=t.byteLength||!o(new bt(e),new bt(t)));case z:case V:case X:return ic(+e,+t);case J:return e.name==t.name&&e.message==t.message;case re:case ie:return e==t+"";case K:var a=sn;case ne:var l=n&f;if(a||(a=un),e.size!=t.size&&!l)return!1;var u=s.get(e);if(u)return u==t;n|=g,s.set(e,t);var c=Ns(a(e),a(t),n,i,o,s);return s["delete"](e),c;case oe:if(bn)return bn.call(e)==bn.call(t)}return!1}function Bs(e,t,n,i,o,s){var a=n&f,l=js(e),u=l.length,c=js(t),d=c.length;if(u!=d&&!a)return!1;var h=u;while(h--){var p=l[h];if(!(a?p in t:dt.call(t,p)))return!1}var g=s.get(e),m=s.get(t);if(g&&m)return g==t&&m==e;var v=!0;s.set(e,t),s.set(t,e);var y=a;while(++h<u){p=l[h];var _=e[p],b=t[p];if(i)var S=a?i(b,_,p,t,e,s):i(_,b,p,e,t,s);if(!(S===r?_===b||o(_,b,n,i,s):S)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=e.constructor,C=t.constructor;w==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof C&&C instanceof C||(v=!1)}return s["delete"](e),s["delete"](t),v}function Fs(e){return xa(ba(e,r,Wa),e+"")}function js(e){return Ni(e,wd,Ys)}function Hs(e){return Ni(e,Cd,Ks)}var qs=lr?function(e){return lr.get(e)}:Fh;function Us(e){var t=e.name+"",r=ur[t],n=dt.call(ur,t)?r.length:0;while(n--){var i=r[n],o=i.func;if(null==o||o==e)return i.name}return t}function Gs(e){var t=dt.call(Cn,"placeholder")?Cn:e;return t.placeholder}function zs(){var e=Cn.iteratee||Rh;return e=e===Rh?to:e,arguments.length?e(arguments[0],arguments[1]):e}function Vs(e,t){var r=e.__data__;return ua(t)?r["string"==typeof t?"string":"hash"]:r.map}function $s(e){var t=wd(e),r=t.length;while(r--){var n=t[r],i=e[n];t[r]=[n,i,fa(i)]}return t}function Js(e,t){var n=tn(e,t);return Xi(n)?n:r}function Ws(e){var t=dt.call(e,kt),n=e[kt];try{e[kt]=r;var i=!0}catch(s){}var o=ft.call(e);return i&&(t?e[kt]=n:delete e[kt]),o}var Ys=Nt?function(e){return null==e?[]:(e=rt(e),Sr(Nt(e),(function(t){return At.call(e,t)})))}:Jh,Ks=Nt?function(e){var t=[];while(e)Er(t,Ys(e)),e=wt(e);return t}:Jh,Xs=Di;function Qs(e,t,r){var n=-1,i=r.length;while(++n<i){var o=r[n],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Gt(t,e+s);break;case"takeRight":e=Ut(e,t-s);break}}return{start:e,end:t}}function Zs(e){var t=e.match(Fe);return t?t[1].split(je):[]}function ea(e,t,r){t=zo(t,e);var n=-1,i=t.length,o=!1;while(++n<i){var s=Ra(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:(i=null==e?0:e.length,!!i&&Cc(i)&&sa(s,i)&&(lc(e)||ac(e)))}function ta(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&dt.call(e,"index")&&(r.index=e.index,r.input=e.input),r}function ra(e){return"function"!=typeof e.constructor||pa(e)?{}:An(wt(e))}function na(e,t,r){var n=e.constructor;switch(t){case ue:return Yo(e);case z:case V:return new n(+e);case ce:return Ko(e,r);case de:case he:case pe:case fe:case ge:case me:case ve:case ye:case _e:return Zo(e,r);case K:return new n;case X:case ie:return new n(e);case re:return Xo(e);case ne:return new n;case oe:return Qo(e)}}function ia(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(Be,"{\n/* [wrapped with "+t+"] */\n")}function oa(e){return lc(e)||ac(e)||!!(xt&&e&&e[xt])}function sa(e,t){var r=typeof e;return t=null==t?M:t,!!t&&("number"==r||"symbol"!=r&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function aa(e,t,r){if(!Ac(r))return!1;var n=typeof t;return!!("number"==n?cc(r)&&sa(t,r.length):"string"==n&&t in r)&&ic(r[t],e)}function la(e,t){if(lc(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!jc(e))||(Re.test(e)||!Pe.test(e)||null!=t&&e in rt(t))}function ua(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ca(e){var t=Us(e),r=Cn[t];if("function"!=typeof r||!(t in Tn.prototype))return!1;if(e===r)return!0;var n=qs(r);return!!n&&e===n[0]}function da(e){return!!pt&&pt in e}(Qt&&Xs(new Qt(new ArrayBuffer(1)))!=ce||Zt&&Xs(new Zt)!=K||rr&&Xs(rr.resolve())!=ee||nr&&Xs(new nr)!=ne||or&&Xs(new or)!=ae)&&(Xs=function(e){var t=Di(e),n=t==Z?e.constructor:r,i=n?Ia(n):"";if(i)switch(i){case Or:return ce;case Pr:return K;case jr:return ee;case dn:return ne;case vn:return ae}return t});var ha=ut?Sc:Wh;function pa(e){var t=e&&e.constructor,r="function"==typeof t&&t.prototype||lt;return e===r}function fa(e){return e===e&&!Ac(e)}function ga(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in rt(n)))}}function ma(e){var t=Hu(e,(function(e){return r.size===u&&r.clear(),e})),r=t.cache;return t}function va(e,t){var r=e[1],n=t[1],i=r|n,o=i<(m|v|C),s=n==C&&r==_||n==C&&r==A&&e[7].length<=t[8]||n==(C|A)&&t[7].length<=t[8]&&r==_;if(!o&&!s)return e;n&m&&(e[2]=t[2],i|=r&m?0:y);var a=t[3];if(a){var l=e[3];e[3]=l?rs(l,a,t[4]):a,e[4]=l?ln(e[3],c):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?ns(l,a,t[6]):a,e[6]=l?ln(e[5],c):t[6]),a=t[7],a&&(e[7]=a),n&C&&(e[8]=null==e[8]?t[8]:Gt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ya(e){var t=[];if(null!=e)for(var r in rt(e))t.push(r);return t}function _a(e){return ft.call(e)}function ba(e,t,n){return t=Ut(t===r?e.length-1:t,0),function(){var r=arguments,i=-1,o=Ut(r.length-t,0),s=De(o);while(++i<o)s[i]=r[t+i];i=-1;var a=De(t+1);while(++i<t)a[i]=r[i];return a[t]=n(s),mr(e,this,a)}}function Sa(e,t){return t.length<2?e:Mi(e,ko(t,0,-1))}function wa(e,t){var n=e.length,i=Gt(t.length,n),o=is(e);while(i--){var s=t[i];e[i]=sa(s,n)?o[s]:r}return e}function Ca(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Aa=ka(Eo),Ea=It||function(e,t){return ir.setTimeout(e,t)},xa=ka(xo);function Ta(e,t,r){var n=t+"";return xa(e,ia(n,La(Zs(n),r)))}function ka(e){var t=0,n=0;return function(){var i=zt(),o=O-(i-n);if(n=i,o>0){if(++t>=k)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Oa(e,t){var n=-1,i=e.length,o=i-1;t=t===r?i:t;while(++n<t){var s=yo(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Pa=ma((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ie,(function(e,r,n,i){t.push(n?i.replace(Ue,"$1"):r||e)})),t}));function Ra(e){if("string"==typeof e||jc(e))return e;var t=e+"";return"0"==t&&1/e==-L?"-0":t}function Ia(e){if(null!=e){try{return ct.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function La(e,t){return yr(H,(function(r){var n="_."+r[0];t&r[1]&&!wr(e,n)&&e.push(n)})),e.sort()}function Ma(e){if(e instanceof Tn)return e.clone();var t=new xn(e.__wrapped__,e.__chain__);return t.__actions__=is(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Na(e,t,n){t=(n?aa(e,t,n):t===r)?1:Ut(Wc(t),0);var i=null==e?0:e.length;if(!i||t<1)return[];var o=0,s=0,a=De(Lt(i/t));while(o<i)a[s++]=ko(e,o,o+=t);return a}function Da(e){var t=-1,r=null==e?0:e.length,n=0,i=[];while(++t<r){var o=e[t];o&&(i[n++]=o)}return i}function Ba(){var e=arguments.length;if(!e)return[];var t=De(e-1),r=arguments[0],n=e;while(n--)t[n-1]=arguments[n];return Er(lc(r)?is(r):[r],ki(t,1))}var Fa=So((function(e,t){return dc(e)?Si(e,ki(t,1,dc,!0)):[]})),ja=So((function(e,t){var n=ol(t);return dc(n)&&(n=r),dc(e)?Si(e,ki(t,1,dc,!0),zs(n,2)):[]})),Ha=So((function(e,t){var n=ol(t);return dc(n)&&(n=r),dc(e)?Si(e,ki(t,1,dc,!0),r,n):[]}));function qa(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===r?1:Wc(t),ko(e,t<0?0:t,i)):[]}function Ua(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===r?1:Wc(t),t=i-t,ko(e,0,t<0?0:t)):[]}function Ga(e,t){return e&&e.length?Fo(e,zs(t,3),!0,!0):[]}function za(e,t){return e&&e.length?Fo(e,zs(t,3),!0):[]}function Va(e,t,r,n){var i=null==e?0:e.length;return i?(r&&"number"!=typeof r&&aa(e,t,r)&&(r=0,n=i),xi(e,t,r,n)):[]}function $a(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Wc(r);return i<0&&(i=Ut(n+i,0)),Lr(e,zs(t,3),i)}function Ja(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i-1;return n!==r&&(o=Wc(n),o=n<0?Ut(i+o,0):Gt(o,i-1)),Lr(e,zs(t,3),o,!0)}function Wa(e){var t=null==e?0:e.length;return t?ki(e,1):[]}function Ya(e){var t=null==e?0:e.length;return t?ki(e,L):[]}function Ka(e,t){var n=null==e?0:e.length;return n?(t=t===r?1:Wc(t),ki(e,t)):[]}function Xa(e){var t=-1,r=null==e?0:e.length,n={};while(++t<r){var i=e[t];n[i[0]]=i[1]}return n}function Qa(e){return e&&e.length?e[0]:r}function Za(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var i=null==r?0:Wc(r);return i<0&&(i=Ut(n+i,0)),Mr(e,t,i)}function el(e){var t=null==e?0:e.length;return t?ko(e,0,-1):[]}var tl=So((function(e){var t=Ar(e,Uo);return t.length&&t[0]===e[0]?qi(t):[]})),rl=So((function(e){var t=ol(e),n=Ar(e,Uo);return t===ol(n)?t=r:n.pop(),n.length&&n[0]===e[0]?qi(n,zs(t,2)):[]})),nl=So((function(e){var t=ol(e),n=Ar(e,Uo);return t="function"==typeof t?t:r,t&&n.pop(),n.length&&n[0]===e[0]?qi(n,r,t):[]}));function il(e,t){return null==e?"":Ft.call(e,t)}function ol(e){var t=null==e?0:e.length;return t?e[t-1]:r}function sl(e,t,n){var i=null==e?0:e.length;if(!i)return-1;var o=i;return n!==r&&(o=Wc(n),o=o<0?Ut(i+o,0):Gt(o,i-1)),t===t?hn(e,t,o):Lr(e,Dr,o,!0)}function al(e,t){return e&&e.length?co(e,Wc(t)):r}var ll=So(ul);function ul(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function cl(e,t,r){return e&&e.length&&t&&t.length?mo(e,t,zs(r,2)):e}function dl(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,r,n):e}var hl=Fs((function(e,t){var r=null==e?0:e.length,n=gi(e,t);return vo(e,Ar(t,(function(e){return sa(e,r)?+e:e})).sort(es)),n}));function pl(e,t){var r=[];if(!e||!e.length)return r;var n=-1,i=[],o=e.length;t=zs(t,3);while(++n<o){var s=e[n];t(s,n,e)&&(r.push(s),i.push(n))}return vo(e,i),r}function fl(e){return null==e?e:Xt.call(e)}function gl(e,t,n){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&aa(e,t,n)?(t=0,n=i):(t=null==t?0:Wc(t),n=n===r?i:Wc(n)),ko(e,t,n)):[]}function ml(e,t){return Po(e,t)}function vl(e,t,r){return Ro(e,t,zs(r,2))}function yl(e,t){var r=null==e?0:e.length;if(r){var n=Po(e,t);if(n<r&&ic(e[n],t))return n}return-1}function _l(e,t){return Po(e,t,!0)}function bl(e,t,r){return Ro(e,t,zs(r,2),!0)}function Sl(e,t){var r=null==e?0:e.length;if(r){var n=Po(e,t,!0)-1;if(ic(e[n],t))return n}return-1}function wl(e){return e&&e.length?Io(e):[]}function Cl(e,t){return e&&e.length?Io(e,zs(t,2)):[]}function Al(e){var t=null==e?0:e.length;return t?ko(e,1,t):[]}function El(e,t,n){return e&&e.length?(t=n||t===r?1:Wc(t),ko(e,0,t<0?0:t)):[]}function xl(e,t,n){var i=null==e?0:e.length;return i?(t=n||t===r?1:Wc(t),t=i-t,ko(e,t<0?0:t,i)):[]}function Tl(e,t){return e&&e.length?Fo(e,zs(t,3),!1,!0):[]}function kl(e,t){return e&&e.length?Fo(e,zs(t,3)):[]}var Ol=So((function(e){return No(ki(e,1,dc,!0))})),Pl=So((function(e){var t=ol(e);return dc(t)&&(t=r),No(ki(e,1,dc,!0),zs(t,2))})),Rl=So((function(e){var t=ol(e);return t="function"==typeof t?t:r,No(ki(e,1,dc,!0),r,t)}));function Il(e){return e&&e.length?No(e):[]}function Ll(e,t){return e&&e.length?No(e,zs(t,2)):[]}function Ml(e,t){return t="function"==typeof t?t:r,e&&e.length?No(e,r,t):[]}function Nl(e){if(!e||!e.length)return[];var t=0;return e=Sr(e,(function(e){if(dc(e))return t=Ut(e.length,t),!0})),Gr(t,(function(t){return Ar(e,Fr(t))}))}function Dl(e,t){if(!e||!e.length)return[];var n=Nl(e);return null==t?n:Ar(n,(function(e){return mr(t,r,e)}))}var Bl=So((function(e,t){return dc(e)?Si(e,t):[]})),Fl=So((function(e){return Ho(Sr(e,dc))})),jl=So((function(e){var t=ol(e);return dc(t)&&(t=r),Ho(Sr(e,dc),zs(t,2))})),Hl=So((function(e){var t=ol(e);return t="function"==typeof t?t:r,Ho(Sr(e,dc),r,t)})),ql=So(Nl);function Ul(e,t){return qo(e||[],t||[],ui)}function Gl(e,t){return qo(e||[],t||[],Ao)}var zl=So((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,Dl(e,n)}));function Vl(e){var t=Cn(e);return t.__chain__=!0,t}function $l(e,t){return t(e),e}function Jl(e,t){return t(e)}var Wl=Fs((function(e){var t=e.length,n=t?e[0]:0,i=this.__wrapped__,o=function(t){return gi(t,e)};return!(t>1||this.__actions__.length)&&i instanceof Tn&&sa(n)?(i=i.slice(n,+n+(t?1:0)),i.__actions__.push({func:Jl,args:[o],thisArg:r}),new xn(i,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(o)}));function Yl(){return Vl(this)}function Kl(){return new xn(this.value(),this.__chain__)}function Xl(){this.__values__===r&&(this.__values__=$c(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Ql(){return this}function Zl(e){var t,n=this;while(n instanceof En){var i=Ma(n);i.__index__=0,i.__values__=r,t?o.__wrapped__=i:t=i;var o=i;n=n.__wrapped__}return o.__wrapped__=e,t}function eu(){var e=this.__wrapped__;if(e instanceof Tn){var t=e;return this.__actions__.length&&(t=new Tn(this)),t=t.reverse(),t.__actions__.push({func:Jl,args:[fl],thisArg:r}),new xn(t,this.__chain__)}return this.thru(fl)}function tu(){return jo(this.__wrapped__,this.__actions__)}var ru=ls((function(e,t,r){dt.call(e,r)?++e[r]:fi(e,r,1)}));function nu(e,t,n){var i=lc(e)?br:Ai;return n&&aa(e,t,n)&&(t=r),i(e,zs(t,3))}function iu(e,t){var r=lc(e)?Sr:Ti;return r(e,zs(t,3))}var ou=vs($a),su=vs(Ja);function au(e,t){return ki(mu(e,t),1)}function lu(e,t){return ki(mu(e,t),L)}function uu(e,t,n){return n=n===r?1:Wc(n),ki(mu(e,t),n)}function cu(e,t){var r=lc(e)?yr:wi;return r(e,zs(t,3))}function du(e,t){var r=lc(e)?_r:Ci;return r(e,zs(t,3))}var hu=ls((function(e,t,r){dt.call(e,r)?e[r].push(t):fi(e,r,[t])}));function pu(e,t,r,n){e=cc(e)?e:qd(e),r=r&&!n?Wc(r):0;var i=e.length;return r<0&&(r=Ut(i+r,0)),Fc(e)?r<=i&&e.indexOf(t,r)>-1:!!i&&Mr(e,t,r)>-1}var fu=So((function(e,t,r){var n=-1,i="function"==typeof t,o=cc(e)?De(e.length):[];return wi(e,(function(e){o[++n]=i?mr(t,e,r):Gi(e,t,r)})),o})),gu=ls((function(e,t,r){fi(e,r,t)}));function mu(e,t){var r=lc(e)?Ar:oo;return r(e,zs(t,3))}function vu(e,t,n,i){return null==e?[]:(lc(t)||(t=null==t?[]:[t]),n=i?r:n,lc(n)||(n=null==n?[]:[n]),ho(e,t,n))}var yu=ls((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));function _u(e,t,r){var n=lc(e)?xr:Hr,i=arguments.length<3;return n(e,zs(t,4),r,i,wi)}function bu(e,t,r){var n=lc(e)?Tr:Hr,i=arguments.length<3;return n(e,zs(t,4),r,i,Ci)}function Su(e,t){var r=lc(e)?Sr:Ti;return r(e,qu(zs(t,3)))}function wu(e){var t=lc(e)?oi:wo;return t(e)}function Cu(e,t,n){t=(n?aa(e,t,n):t===r)?1:Wc(t);var i=lc(e)?si:Co;return i(e,t)}function Au(e){var t=lc(e)?ai:To;return t(e)}function Eu(e){if(null==e)return 0;if(cc(e))return Fc(e)?pn(e):e.length;var t=Xs(e);return t==K||t==ne?e.size:ro(e).length}function xu(e,t,n){var i=lc(e)?kr:Oo;return n&&aa(e,t,n)&&(t=r),i(e,zs(t,3))}var Tu=So((function(e,t){if(null==e)return[];var r=t.length;return r>1&&aa(e,t[0],t[1])?t=[]:r>2&&aa(t[0],t[1],t[2])&&(t=[t[0]]),ho(e,ki(t,1),[])})),ku=Rt||function(){return ir.Date.now()};function Ou(e,t){if("function"!=typeof t)throw new ot(s);return e=Wc(e),function(){if(--e<1)return t.apply(this,arguments)}}function Pu(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Rs(e,C,r,r,r,r,t)}function Ru(e,t){var n;if("function"!=typeof t)throw new ot(s);return e=Wc(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var Iu=So((function(e,t,r){var n=m;if(r.length){var i=ln(r,Gs(Iu));n|=S}return Rs(e,n,t,r,i)})),Lu=So((function(e,t,r){var n=m|v;if(r.length){var i=ln(r,Gs(Lu));n|=S}return Rs(t,n,e,r,i)}));function Mu(e,t,n){t=n?r:t;var i=Rs(e,_,r,r,r,r,r,t);return i.placeholder=Mu.placeholder,i}function Nu(e,t,n){t=n?r:t;var i=Rs(e,b,r,r,r,r,r,t);return i.placeholder=Nu.placeholder,i}function Du(e,t,n){var i,o,a,l,u,c,d=0,h=!1,p=!1,f=!0;if("function"!=typeof e)throw new ot(s);function g(t){var n=i,s=o;return i=o=r,d=t,l=e.apply(s,n),l}function m(e){return d=e,u=Ea(_,t),h?g(e):l}function v(e){var r=e-c,n=e-d,i=t-r;return p?Gt(i,a-n):i}function y(e){var n=e-c,i=e-d;return c===r||n>=t||n<0||p&&i>=a}function _(){var e=ku();if(y(e))return b(e);u=Ea(_,v(e))}function b(e){return u=r,f&&i?g(e):(i=o=r,l)}function S(){u!==r&&Jo(u),d=0,i=c=o=u=r}function w(){return u===r?l:b(ku())}function C(){var e=ku(),n=y(e);if(i=arguments,o=this,c=e,n){if(u===r)return m(c);if(p)return Jo(u),u=Ea(_,t),g(c)}return u===r&&(u=Ea(_,t)),l}return t=Kc(t)||0,Ac(n)&&(h=!!n.leading,p="maxWait"in n,a=p?Ut(Kc(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),C.cancel=S,C.flush=w,C}var Bu=So((function(e,t){return bi(e,1,t)})),Fu=So((function(e,t,r){return bi(e,Kc(t)||0,r)}));function ju(e){return Rs(e,E)}function Hu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(s);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(Hu.Cache||Gn),r}function qu(e){if("function"!=typeof e)throw new ot(s);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Uu(e){return Ru(2,e)}Hu.Cache=Gn;var Gu=Vo((function(e,t){t=1==t.length&&lc(t[0])?Ar(t[0],$r(zs())):Ar(ki(t,1),$r(zs()));var r=t.length;return So((function(n){var i=-1,o=Gt(n.length,r);while(++i<o)n[i]=t[i].call(this,n[i]);return mr(e,this,n)}))})),zu=So((function(e,t){var n=ln(t,Gs(zu));return Rs(e,S,r,t,n)})),Vu=So((function(e,t){var n=ln(t,Gs(Vu));return Rs(e,w,r,t,n)})),$u=Fs((function(e,t){return Rs(e,A,r,r,r,t)}));function Ju(e,t){if("function"!=typeof e)throw new ot(s);return t=t===r?t:Wc(t),So(e,t)}function Wu(e,t){if("function"!=typeof e)throw new ot(s);return t=null==t?0:Ut(Wc(t),0),So((function(r){var n=r[t],i=$o(r,0,t);return n&&Er(i,n),mr(e,this,i)}))}function Yu(e,t,r){var n=!0,i=!0;if("function"!=typeof e)throw new ot(s);return Ac(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Du(e,t,{leading:n,maxWait:t,trailing:i})}function Ku(e){return Pu(e,1)}function Xu(e,t){return zu(Go(t),e)}function Qu(){if(!arguments.length)return[];var e=arguments[0];return lc(e)?e:[e]}function Zu(e){return vi(e,p)}function ec(e,t){return t="function"==typeof t?t:r,vi(e,p,t)}function tc(e){return vi(e,d|p)}function rc(e,t){return t="function"==typeof t?t:r,vi(e,d|p,t)}function nc(e,t){return null==t||_i(e,t,wd(t))}function ic(e,t){return e===t||e!==e&&t!==t}var oc=xs(Bi),sc=xs((function(e,t){return e>=t})),ac=zi(function(){return arguments}())?zi:function(e){return Ec(e)&&dt.call(e,"callee")&&!At.call(e,"callee")},lc=De.isArray,uc=cr?$r(cr):Vi;function cc(e){return null!=e&&Cc(e.length)&&!Sc(e)}function dc(e){return Ec(e)&&cc(e)}function hc(e){return!0===e||!1===e||Ec(e)&&Di(e)==z}var pc=Dt||Wh,fc=dr?$r(dr):$i;function gc(e){return Ec(e)&&1===e.nodeType&&!Mc(e)}function mc(e){if(null==e)return!0;if(cc(e)&&(lc(e)||"string"==typeof e||"function"==typeof e.splice||pc(e)||Hc(e)||ac(e)))return!e.length;var t=Xs(e);if(t==K||t==ne)return!e.size;if(pa(e))return!ro(e).length;for(var r in e)if(dt.call(e,r))return!1;return!0}function vc(e,t){return Ji(e,t)}function yc(e,t,n){n="function"==typeof n?n:r;var i=n?n(e,t):r;return i===r?Ji(e,t,r,n):!!i}function _c(e){if(!Ec(e))return!1;var t=Di(e);return t==J||t==$||"string"==typeof e.message&&"string"==typeof e.name&&!Mc(e)}function bc(e){return"number"==typeof e&&Bt(e)}function Sc(e){if(!Ac(e))return!1;var t=Di(e);return t==W||t==Y||t==G||t==te}function wc(e){return"number"==typeof e&&e==Wc(e)}function Cc(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=M}function Ac(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ec(e){return null!=e&&"object"==typeof e}var xc=hr?$r(hr):Yi;function Tc(e,t){return e===t||Ki(e,t,$s(t))}function kc(e,t,n){return n="function"==typeof n?n:r,Ki(e,t,$s(t),n)}function Oc(e){return Lc(e)&&e!=+e}function Pc(e){if(ha(e))throw new Ze(o);return Xi(e)}function Rc(e){return null===e}function Ic(e){return null==e}function Lc(e){return"number"==typeof e||Ec(e)&&Di(e)==X}function Mc(e){if(!Ec(e)||Di(e)!=Z)return!1;var t=wt(e);if(null===t)return!0;var r=dt.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&ct.call(r)==gt}var Nc=pr?$r(pr):Qi;function Dc(e){return wc(e)&&e>=-M&&e<=M}var Bc=fr?$r(fr):Zi;function Fc(e){return"string"==typeof e||!lc(e)&&Ec(e)&&Di(e)==ie}function jc(e){return"symbol"==typeof e||Ec(e)&&Di(e)==oe}var Hc=gr?$r(gr):eo;function qc(e){return e===r}function Uc(e){return Ec(e)&&Xs(e)==ae}function Gc(e){return Ec(e)&&Di(e)==le}var zc=xs(io),Vc=xs((function(e,t){return e<=t}));function $c(e){if(!e)return[];if(cc(e))return Fc(e)?fn(e):is(e);if(Tt&&e[Tt])return on(e[Tt]());var t=Xs(e),r=t==K?sn:t==ne?un:qd;return r(e)}function Jc(e){if(!e)return 0===e?e:0;if(e=Kc(e),e===L||e===-L){var t=e<0?-1:1;return t*N}return e===e?e:0}function Wc(e){var t=Jc(e),r=t%1;return t===t?r?t-r:t:0}function Yc(e){return e?mi(Wc(e),0,B):0}function Kc(e){if("number"==typeof e)return e;if(jc(e))return D;if(Ac(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ac(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Vr(e);var r=$e.test(e);return r||We.test(e)?tr(e.slice(2),r?2:8):Ve.test(e)?D:+e}function Xc(e){return os(e,Cd(e))}function Qc(e){return e?mi(Wc(e),-M,M):0===e?e:0}function Zc(e){return null==e?"":Mo(e)}var ed=us((function(e,t){if(pa(t)||cc(t))os(t,wd(t),e);else for(var r in t)dt.call(t,r)&&ui(e,r,t[r])})),td=us((function(e,t){os(t,Cd(t),e)})),rd=us((function(e,t,r,n){os(t,Cd(t),e,n)})),nd=us((function(e,t,r,n){os(t,wd(t),e,n)})),id=Fs(gi);function od(e,t){var r=An(e);return null==t?r:hi(r,t)}var sd=So((function(e,t){e=rt(e);var n=-1,i=t.length,o=i>2?t[2]:r;o&&aa(t[0],t[1],o)&&(i=1);while(++n<i){var s=t[n],a=Cd(s),l=-1,u=a.length;while(++l<u){var c=a[l],d=e[c];(d===r||ic(d,lt[c])&&!dt.call(e,c))&&(e[c]=s[c])}}return e})),ad=So((function(e){return e.push(r,Ls),mr(Td,r,e)}));function ld(e,t){return Ir(e,zs(t,3),Ri)}function ud(e,t){return Ir(e,zs(t,3),Ii)}function cd(e,t){return null==e?e:Oi(e,zs(t,3),Cd)}function dd(e,t){return null==e?e:Pi(e,zs(t,3),Cd)}function hd(e,t){return e&&Ri(e,zs(t,3))}function pd(e,t){return e&&Ii(e,zs(t,3))}function fd(e){return null==e?[]:Li(e,wd(e))}function gd(e){return null==e?[]:Li(e,Cd(e))}function md(e,t,n){var i=null==e?r:Mi(e,t);return i===r?n:i}function vd(e,t){return null!=e&&ea(e,t,Fi)}function yd(e,t){return null!=e&&ea(e,t,ji)}var _d=bs((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),e[t]=r}),xh(Ph)),bd=bs((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=ft.call(t)),dt.call(e,t)?e[t].push(r):e[t]=[r]}),zs),Sd=So(Gi);function wd(e){return cc(e)?ii(e):ro(e)}function Cd(e){return cc(e)?ii(e,!0):no(e)}function Ad(e,t){var r={};return t=zs(t,3),Ri(e,(function(e,n,i){fi(r,t(e,n,i),e)})),r}function Ed(e,t){var r={};return t=zs(t,3),Ri(e,(function(e,n,i){fi(r,n,t(e,n,i))})),r}var xd=us((function(e,t,r){lo(e,t,r)})),Td=us((function(e,t,r,n){lo(e,t,r,n)})),kd=Fs((function(e,t){var r={};if(null==e)return r;var n=!1;t=Ar(t,(function(t){return t=zo(t,e),n||(n=t.length>1),t})),os(e,Hs(e),r),n&&(r=vi(r,d|h|p,Ms));var i=t.length;while(i--)Do(r,t[i]);return r}));function Od(e,t){return Rd(e,qu(zs(t)))}var Pd=Fs((function(e,t){return null==e?{}:po(e,t)}));function Rd(e,t){if(null==e)return{};var r=Ar(Hs(e),(function(e){return[e]}));return t=zs(t),fo(e,r,(function(e,r){return t(e,r[0])}))}function Id(e,t,n){t=zo(t,e);var i=-1,o=t.length;o||(o=1,e=r);while(++i<o){var s=null==e?r:e[Ra(t[i])];s===r&&(i=o,s=n),e=Sc(s)?s.call(e):s}return e}function Ld(e,t,r){return null==e?e:Ao(e,t,r)}function Md(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Ao(e,t,n,i)}var Nd=Ps(wd),Dd=Ps(Cd);function Bd(e,t,r){var n=lc(e),i=n||pc(e)||Hc(e);if(t=zs(t,4),null==r){var o=e&&e.constructor;r=i?n?new o:[]:Ac(e)&&Sc(o)?An(wt(e)):{}}return(i?yr:Ri)(e,(function(e,n,i){return t(r,e,n,i)})),r}function Fd(e,t){return null==e||Do(e,t)}function jd(e,t,r){return null==e?e:Bo(e,t,Go(r))}function Hd(e,t,n,i){return i="function"==typeof i?i:r,null==e?e:Bo(e,t,Go(n),i)}function qd(e){return null==e?[]:Jr(e,wd(e))}function Ud(e){return null==e?[]:Jr(e,Cd(e))}function Gd(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Kc(n),n=n===n?n:0),t!==r&&(t=Kc(t),t=t===t?t:0),mi(Kc(e),t,n)}function zd(e,t,n){return t=Jc(t),n===r?(n=t,t=0):n=Jc(n),e=Kc(e),Hi(e,t,n)}function Vd(e,t,n){if(n&&"boolean"!=typeof n&&aa(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Jc(e),t===r?(t=e,e=0):t=Jc(t)),e>t){var i=e;e=t,t=i}if(n||e%1||t%1){var o=Kt();return Gt(e+o*(t-e+er("1e-"+((o+"").length-1))),t)}return yo(e,t)}var $d=fs((function(e,t,r){return t=t.toLowerCase(),e+(r?Jd(t):t)}));function Jd(e){return bh(Zc(e).toLowerCase())}function Wd(e){return e=Zc(e),e&&e.replace(Ke,Qr).replace(qt,"")}function Yd(e,t,n){e=Zc(e),t=Mo(t);var i=e.length;n=n===r?i:mi(Wc(n),0,i);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function Kd(e){return e=Zc(e),e&&xe.test(e)?e.replace(Ae,Zr):e}function Xd(e){return e=Zc(e),e&&Me.test(e)?e.replace(Le,"\\$&"):e}var Qd=fs((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),Zd=fs((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),eh=ps("toLowerCase");function th(e,t,r){e=Zc(e),t=Wc(t);var n=t?pn(e):0;if(!t||n>=t)return e;var i=(t-n)/2;return Cs(Mt(i),r)+e+Cs(Lt(i),r)}function rh(e,t,r){e=Zc(e),t=Wc(t);var n=t?pn(e):0;return t&&n<t?e+Cs(t-n,r):e}function nh(e,t,r){e=Zc(e),t=Wc(t);var n=t?pn(e):0;return t&&n<t?Cs(t-n,r)+e:e}function ih(e,t,r){return r||null==t?t=0:t&&(t=+t),Vt(Zc(e).replace(Ne,""),t||0)}function oh(e,t,n){return t=(n?aa(e,t,n):t===r)?1:Wc(t),bo(Zc(e),t)}function sh(){var e=arguments,t=Zc(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ah=fs((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));function lh(e,t,n){return n&&"number"!=typeof n&&aa(e,t,n)&&(t=n=r),n=n===r?B:n>>>0,n?(e=Zc(e),e&&("string"==typeof t||null!=t&&!Nc(t))&&(t=Mo(t),!t&&rn(e))?$o(fn(e),0,n):e.split(t,n)):[]}var uh=fs((function(e,t,r){return e+(r?" ":"")+bh(t)}));function ch(e,t,r){return e=Zc(e),r=null==r?0:mi(Wc(r),0,e.length),t=Mo(t),e.slice(r,r+t.length)==t}function dh(e,t,n){var i=Cn.templateSettings;n&&aa(e,t,n)&&(t=r),e=Zc(e),t=rd({},t,i,Is);var o,s,l=rd({},t.imports,i.imports,Is),u=wd(l),c=Jr(l,u),d=0,h=t.interpolate||Xe,p="__p += '",f=nt((t.escape||Xe).source+"|"+h.source+"|"+(h===Oe?Ge:Xe).source+"|"+(t.evaluate||Xe).source+"|$","g"),g="//# sourceURL="+(dt.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Jt+"]")+"\n";e.replace(f,(function(t,r,n,i,a,l){return n||(n=i),p+=e.slice(d,l).replace(Qe,en),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),a&&(s=!0,p+="';\n"+a+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),d=l+t.length,t})),p+="';\n";var m=dt.call(t,"variable")&&t.variable;if(m){if(qe.test(m))throw new Ze(a)}else p="with (obj) {\n"+p+"\n}\n";p=(s?p.replace(be,""):p).replace(Se,"$1").replace(we,"$1;"),p="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var v=wh((function(){return et(u,g+"return "+p).apply(r,c)}));if(v.source=p,_c(v))throw v;return v}function hh(e){return Zc(e).toLowerCase()}function ph(e){return Zc(e).toUpperCase()}function fh(e,t,n){if(e=Zc(e),e&&(n||t===r))return Vr(e);if(!e||!(t=Mo(t)))return e;var i=fn(e),o=fn(t),s=Yr(i,o),a=Kr(i,o)+1;return $o(i,s,a).join("")}function gh(e,t,n){if(e=Zc(e),e&&(n||t===r))return e.slice(0,gn(e)+1);if(!e||!(t=Mo(t)))return e;var i=fn(e),o=Kr(i,fn(t))+1;return $o(i,0,o).join("")}function mh(e,t,n){if(e=Zc(e),e&&(n||t===r))return e.replace(Ne,"");if(!e||!(t=Mo(t)))return e;var i=fn(e),o=Yr(i,fn(t));return $o(i,o).join("")}function vh(e,t){var n=x,i=T;if(Ac(t)){var o="separator"in t?t.separator:o;n="length"in t?Wc(t.length):n,i="omission"in t?Mo(t.omission):i}e=Zc(e);var s=e.length;if(rn(e)){var a=fn(e);s=a.length}if(n>=s)return e;var l=n-pn(i);if(l<1)return i;var u=a?$o(a,0,l).join(""):e.slice(0,l);if(o===r)return u+i;if(a&&(l+=u.length-l),Nc(o)){if(e.slice(l).search(o)){var c,d=u;o.global||(o=nt(o.source,Zc(ze.exec(o))+"g")),o.lastIndex=0;while(c=o.exec(d))var h=c.index;u=u.slice(0,h===r?l:h)}}else if(e.indexOf(Mo(o),l)!=l){var p=u.lastIndexOf(o);p>-1&&(u=u.slice(0,p))}return u+i}function yh(e){return e=Zc(e),e&&Ee.test(e)?e.replace(Ce,mn):e}var _h=fs((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),bh=ps("toUpperCase");function Sh(e,t,n){return e=Zc(e),t=n?r:t,t===r?nn(e)?_n(e):Rr(e):e.match(t)||[]}var wh=So((function(e,t){try{return mr(e,r,t)}catch(n){return _c(n)?n:new Ze(n)}})),Ch=Fs((function(e,t){return yr(t,(function(t){t=Ra(t),fi(e,t,Iu(e[t],e))})),e}));function Ah(e){var t=null==e?0:e.length,r=zs();return e=t?Ar(e,(function(e){if("function"!=typeof e[1])throw new ot(s);return[r(e[0]),e[1]]})):[],So((function(r){var n=-1;while(++n<t){var i=e[n];if(mr(i[0],this,r))return mr(i[1],this,r)}}))}function Eh(e){return yi(vi(e,d))}function xh(e){return function(){return e}}function Th(e,t){return null==e||e!==e?t:e}var kh=ys(),Oh=ys(!0);function Ph(e){return e}function Rh(e){return to("function"==typeof e?e:vi(e,d))}function Ih(e){return so(vi(e,d))}function Lh(e,t){return ao(e,vi(t,d))}var Mh=So((function(e,t){return function(r){return Gi(r,e,t)}})),Nh=So((function(e,t){return function(r){return Gi(e,r,t)}}));function Dh(e,t,r){var n=wd(t),i=Li(t,n);null!=r||Ac(t)&&(i.length||!n.length)||(r=t,t=e,e=this,i=Li(t,wd(t)));var o=!(Ac(r)&&"chain"in r)||!!r.chain,s=Sc(e);return yr(i,(function(r){var n=t[r];e[r]=n,s&&(e.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=e(this.__wrapped__),i=r.__actions__=is(this.__actions__);return i.push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Er([this.value()],arguments))})})),e}function Bh(){return ir._===this&&(ir._=mt),this}function Fh(){}function jh(e){return e=Wc(e),So((function(t){return co(t,e)}))}var Hh=ws(Ar),qh=ws(br),Uh=ws(kr);function Gh(e){return la(e)?Fr(Ra(e)):go(e)}function zh(e){return function(t){return null==e?r:Mi(e,t)}}var Vh=Es(),$h=Es(!0);function Jh(){return[]}function Wh(){return!1}function Yh(){return{}}function Kh(){return""}function Xh(){return!0}function Qh(e,t){if(e=Wc(e),e<1||e>M)return[];var r=B,n=Gt(e,B);t=zs(t),e-=B;var i=Gr(n,t);while(++r<e)t(r);return i}function Zh(e){return lc(e)?Ar(e,Ra):jc(e)?[e]:is(Pa(Zc(e)))}function ep(e){var t=++ht;return Zc(e)+t}var tp=Ss((function(e,t){return e+t}),0),rp=ks("ceil"),np=Ss((function(e,t){return e/t}),1),ip=ks("floor");function op(e){return e&&e.length?Ei(e,Ph,Bi):r}function sp(e,t){return e&&e.length?Ei(e,zs(t,2),Bi):r}function ap(e){return Br(e,Ph)}function lp(e,t){return Br(e,zs(t,2))}function up(e){return e&&e.length?Ei(e,Ph,io):r}function cp(e,t){return e&&e.length?Ei(e,zs(t,2),io):r}var dp=Ss((function(e,t){return e*t}),1),hp=ks("round"),pp=Ss((function(e,t){return e-t}),0);function fp(e){return e&&e.length?Ur(e,Ph):0}function gp(e,t){return e&&e.length?Ur(e,zs(t,2)):0}return Cn.after=Ou,Cn.ary=Pu,Cn.assign=ed,Cn.assignIn=td,Cn.assignInWith=rd,Cn.assignWith=nd,Cn.at=id,Cn.before=Ru,Cn.bind=Iu,Cn.bindAll=Ch,Cn.bindKey=Lu,Cn.castArray=Qu,Cn.chain=Vl,Cn.chunk=Na,Cn.compact=Da,Cn.concat=Ba,Cn.cond=Ah,Cn.conforms=Eh,Cn.constant=xh,Cn.countBy=ru,Cn.create=od,Cn.curry=Mu,Cn.curryRight=Nu,Cn.debounce=Du,Cn.defaults=sd,Cn.defaultsDeep=ad,Cn.defer=Bu,Cn.delay=Fu,Cn.difference=Fa,Cn.differenceBy=ja,Cn.differenceWith=Ha,Cn.drop=qa,Cn.dropRight=Ua,Cn.dropRightWhile=Ga,Cn.dropWhile=za,Cn.fill=Va,Cn.filter=iu,Cn.flatMap=au,Cn.flatMapDeep=lu,Cn.flatMapDepth=uu,Cn.flatten=Wa,Cn.flattenDeep=Ya,Cn.flattenDepth=Ka,Cn.flip=ju,Cn.flow=kh,Cn.flowRight=Oh,Cn.fromPairs=Xa,Cn.functions=fd,Cn.functionsIn=gd,Cn.groupBy=hu,Cn.initial=el,Cn.intersection=tl,Cn.intersectionBy=rl,Cn.intersectionWith=nl,Cn.invert=_d,Cn.invertBy=bd,Cn.invokeMap=fu,Cn.iteratee=Rh,Cn.keyBy=gu,Cn.keys=wd,Cn.keysIn=Cd,Cn.map=mu,Cn.mapKeys=Ad,Cn.mapValues=Ed,Cn.matches=Ih,Cn.matchesProperty=Lh,Cn.memoize=Hu,Cn.merge=xd,Cn.mergeWith=Td,Cn.method=Mh,Cn.methodOf=Nh,Cn.mixin=Dh,Cn.negate=qu,Cn.nthArg=jh,Cn.omit=kd,Cn.omitBy=Od,Cn.once=Uu,Cn.orderBy=vu,Cn.over=Hh,Cn.overArgs=Gu,Cn.overEvery=qh,Cn.overSome=Uh,Cn.partial=zu,Cn.partialRight=Vu,Cn.partition=yu,Cn.pick=Pd,Cn.pickBy=Rd,Cn.property=Gh,Cn.propertyOf=zh,Cn.pull=ll,Cn.pullAll=ul,Cn.pullAllBy=cl,Cn.pullAllWith=dl,Cn.pullAt=hl,Cn.range=Vh,Cn.rangeRight=$h,Cn.rearg=$u,Cn.reject=Su,Cn.remove=pl,Cn.rest=Ju,Cn.reverse=fl,Cn.sampleSize=Cu,Cn.set=Ld,Cn.setWith=Md,Cn.shuffle=Au,Cn.slice=gl,Cn.sortBy=Tu,Cn.sortedUniq=wl,Cn.sortedUniqBy=Cl,Cn.split=lh,Cn.spread=Wu,Cn.tail=Al,Cn.take=El,Cn.takeRight=xl,Cn.takeRightWhile=Tl,Cn.takeWhile=kl,Cn.tap=$l,Cn.throttle=Yu,Cn.thru=Jl,Cn.toArray=$c,Cn.toPairs=Nd,Cn.toPairsIn=Dd,Cn.toPath=Zh,Cn.toPlainObject=Xc,Cn.transform=Bd,Cn.unary=Ku,Cn.union=Ol,Cn.unionBy=Pl,Cn.unionWith=Rl,Cn.uniq=Il,Cn.uniqBy=Ll,Cn.uniqWith=Ml,Cn.unset=Fd,Cn.unzip=Nl,Cn.unzipWith=Dl,Cn.update=jd,Cn.updateWith=Hd,Cn.values=qd,Cn.valuesIn=Ud,Cn.without=Bl,Cn.words=Sh,Cn.wrap=Xu,Cn.xor=Fl,Cn.xorBy=jl,Cn.xorWith=Hl,Cn.zip=ql,Cn.zipObject=Ul,Cn.zipObjectDeep=Gl,Cn.zipWith=zl,Cn.entries=Nd,Cn.entriesIn=Dd,Cn.extend=td,Cn.extendWith=rd,Dh(Cn,Cn),Cn.add=tp,Cn.attempt=wh,Cn.camelCase=$d,Cn.capitalize=Jd,Cn.ceil=rp,Cn.clamp=Gd,Cn.clone=Zu,Cn.cloneDeep=tc,Cn.cloneDeepWith=rc,Cn.cloneWith=ec,Cn.conformsTo=nc,Cn.deburr=Wd,Cn.defaultTo=Th,Cn.divide=np,Cn.endsWith=Yd,Cn.eq=ic,Cn.escape=Kd,Cn.escapeRegExp=Xd,Cn.every=nu,Cn.find=ou,Cn.findIndex=$a,Cn.findKey=ld,Cn.findLast=su,Cn.findLastIndex=Ja,Cn.findLastKey=ud,Cn.floor=ip,Cn.forEach=cu,Cn.forEachRight=du,Cn.forIn=cd,Cn.forInRight=dd,Cn.forOwn=hd,Cn.forOwnRight=pd,Cn.get=md,Cn.gt=oc,Cn.gte=sc,Cn.has=vd,Cn.hasIn=yd,Cn.head=Qa,Cn.identity=Ph,Cn.includes=pu,Cn.indexOf=Za,Cn.inRange=zd,Cn.invoke=Sd,Cn.isArguments=ac,Cn.isArray=lc,Cn.isArrayBuffer=uc,Cn.isArrayLike=cc,Cn.isArrayLikeObject=dc,Cn.isBoolean=hc,Cn.isBuffer=pc,Cn.isDate=fc,Cn.isElement=gc,Cn.isEmpty=mc,Cn.isEqual=vc,Cn.isEqualWith=yc,Cn.isError=_c,Cn.isFinite=bc,Cn.isFunction=Sc,Cn.isInteger=wc,Cn.isLength=Cc,Cn.isMap=xc,Cn.isMatch=Tc,Cn.isMatchWith=kc,Cn.isNaN=Oc,Cn.isNative=Pc,Cn.isNil=Ic,Cn.isNull=Rc,Cn.isNumber=Lc,Cn.isObject=Ac,Cn.isObjectLike=Ec,Cn.isPlainObject=Mc,Cn.isRegExp=Nc,Cn.isSafeInteger=Dc,Cn.isSet=Bc,Cn.isString=Fc,Cn.isSymbol=jc,Cn.isTypedArray=Hc,Cn.isUndefined=qc,Cn.isWeakMap=Uc,Cn.isWeakSet=Gc,Cn.join=il,Cn.kebabCase=Qd,Cn.last=ol,Cn.lastIndexOf=sl,Cn.lowerCase=Zd,Cn.lowerFirst=eh,Cn.lt=zc,Cn.lte=Vc,Cn.max=op,Cn.maxBy=sp,Cn.mean=ap,Cn.meanBy=lp,Cn.min=up,Cn.minBy=cp,Cn.stubArray=Jh,Cn.stubFalse=Wh,Cn.stubObject=Yh,Cn.stubString=Kh,Cn.stubTrue=Xh,Cn.multiply=dp,Cn.nth=al,Cn.noConflict=Bh,Cn.noop=Fh,Cn.now=ku,Cn.pad=th,Cn.padEnd=rh,Cn.padStart=nh,Cn.parseInt=ih,Cn.random=Vd,Cn.reduce=_u,Cn.reduceRight=bu,Cn.repeat=oh,Cn.replace=sh,Cn.result=Id,Cn.round=hp,Cn.runInContext=e,Cn.sample=wu,Cn.size=Eu,Cn.snakeCase=ah,Cn.some=xu,Cn.sortedIndex=ml,Cn.sortedIndexBy=vl,Cn.sortedIndexOf=yl,Cn.sortedLastIndex=_l,Cn.sortedLastIndexBy=bl,Cn.sortedLastIndexOf=Sl,Cn.startCase=uh,Cn.startsWith=ch,Cn.subtract=pp,Cn.sum=fp,Cn.sumBy=gp,Cn.template=dh,Cn.times=Qh,Cn.toFinite=Jc,Cn.toInteger=Wc,Cn.toLength=Yc,Cn.toLower=hh,Cn.toNumber=Kc,Cn.toSafeInteger=Qc,Cn.toString=Zc,Cn.toUpper=ph,Cn.trim=fh,Cn.trimEnd=gh,Cn.trimStart=mh,Cn.truncate=vh,Cn.unescape=yh,Cn.uniqueId=ep,Cn.upperCase=_h,Cn.upperFirst=bh,Cn.each=cu,Cn.eachRight=du,Cn.first=Qa,Dh(Cn,function(){var e={};return Ri(Cn,(function(t,r){dt.call(Cn.prototype,r)||(e[r]=t)})),e}(),{chain:!1}),Cn.VERSION=n,yr(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Cn[e].placeholder=Cn})),yr(["drop","take"],(function(e,t){Tn.prototype[e]=function(n){n=n===r?1:Ut(Wc(n),0);var i=this.__filtered__&&!t?new Tn(this):this.clone();return i.__filtered__?i.__takeCount__=Gt(n,i.__takeCount__):i.__views__.push({size:Gt(n,B),type:e+(i.__dir__<0?"Right":"")}),i},Tn.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),yr(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=r==P||r==I;Tn.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:zs(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),yr(["head","last"],(function(e,t){var r="take"+(t?"Right":"");Tn.prototype[e]=function(){return this[r](1).value()[0]}})),yr(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");Tn.prototype[e]=function(){return this.__filtered__?new Tn(this):this[r](1)}})),Tn.prototype.compact=function(){return this.filter(Ph)},Tn.prototype.find=function(e){return this.filter(e).head()},Tn.prototype.findLast=function(e){return this.reverse().find(e)},Tn.prototype.invokeMap=So((function(e,t){return"function"==typeof e?new Tn(this):this.map((function(r){return Gi(r,e,t)}))})),Tn.prototype.reject=function(e){return this.filter(qu(zs(e)))},Tn.prototype.slice=function(e,t){e=Wc(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Tn(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=Wc(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Tn.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Tn.prototype.toArray=function(){return this.take(B)},Ri(Tn.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Cn[i?"take"+("last"==t?"Right":""):t],s=i||/^find/.test(t);o&&(Cn.prototype[t]=function(){var t=this.__wrapped__,a=i?[1]:arguments,l=t instanceof Tn,u=a[0],c=l||lc(t),d=function(e){var t=o.apply(Cn,Er([e],a));return i&&h?t[0]:t};c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,p=!!this.__actions__.length,f=s&&!h,g=l&&!p;if(!s&&c){t=g?t:new Tn(this);var m=e.apply(t,a);return m.__actions__.push({func:Jl,args:[d],thisArg:r}),new xn(m,h)}return f&&g?e.apply(this,a):(m=this.thru(d),f?i?m.value()[0]:m.value():m)})})),yr(["pop","push","shift","sort","splice","unshift"],(function(e){var t=st[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Cn.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var i=this.value();return t.apply(lc(i)?i:[],e)}return this[r]((function(r){return t.apply(lc(r)?r:[],e)}))}})),Ri(Tn.prototype,(function(e,t){var r=Cn[t];if(r){var n=r.name+"";dt.call(ur,n)||(ur[n]=[]),ur[n].push({name:t,func:r})}})),ur[_s(r,v).name]=[{name:"wrapper",func:r}],Tn.prototype.clone=kn,Tn.prototype.reverse=On,Tn.prototype.value=Pn,Cn.prototype.at=Wl,Cn.prototype.chain=Yl,Cn.prototype.commit=Kl,Cn.prototype.next=Xl,Cn.prototype.plant=Zl,Cn.prototype.reverse=eu,Cn.prototype.toJSON=Cn.prototype.valueOf=Cn.prototype.value=tu,Cn.prototype.first=Cn.prototype.head,Tt&&(Cn.prototype[Tt]=Ql),Cn},Sn=bn();"function"==typeof define&&__webpack_require__.amdO?(ir._=Sn,define((function(){return Sn}))):sr?((sr.exports=Sn)._=Sn,or._=Sn):ir._=Sn}.call(e)}}),require_rng_browser=__commonJS({"node_modules/uuid/lib/rng-browser.js"(e,t){init_polyfills();var r,n,i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);i?(r=new Uint8Array(16),t.exports=function(){return i(r),r}):(n=new Array(16),t.exports=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n})}}),require_bytesToUuid=__commonJS({"node_modules/uuid/lib/bytesToUuid.js"(e,t){init_polyfills();var r,n=[];for(r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);function i(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}t.exports=i}}),require_v1=__commonJS({"node_modules/uuid/v1.js"(e,t){init_polyfills();var r,n,i=require_rng_browser(),o=require_bytesToUuid(),s=0,a=0;function l(e,t,l){var u=t&&l||0,c=t||[];e=e||{};var d=e.node||r,h=void 0!==e.clockseq?e.clockseq:n;if(null==d||null==h){var p=i();null==d&&(d=r=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==h&&(h=n=16383&(p[6]<<8|p[7]))}var f=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:a+1,m=f-s+(g-a)/1e4;if(m<0&&void 0===e.clockseq&&(h=h+1&16383),(m<0||f>s)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=f,a=g,n=h,f+=122192928e5;var v=(1e4*(268435455&f)+g)%4294967296;c[u++]=v>>>24&255,c[u++]=v>>>16&255,c[u++]=v>>>8&255,c[u++]=255&v;var y=f/4294967296*1e4&268435455;c[u++]=y>>>8&255,c[u++]=255&y,c[u++]=y>>>24&15|16,c[u++]=y>>>16&255,c[u++]=h>>>8|128,c[u++]=255&h;for(var _=0;_<6;++_)c[u+_]=d[_];return t||o(c)}t.exports=l}}),require_v4=__commonJS({"node_modules/uuid/v4.js"(e,t){init_polyfills();var r=require_rng_browser(),n=require_bytesToUuid();function i(e,t,i){var o=t&&i||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null),e=e||{};var s=e.random||(e.rng||r)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t)for(var a=0;a<16;++a)t[o+a]=s[a];return t||n(s)}t.exports=i}}),require_uuid=__commonJS({"node_modules/uuid/index.js"(e,t){init_polyfills();var r=require_v1(),n=require_v4(),i=n;i.v1=r,i.v4=n,t.exports=i}}),require_media_overlay=__commonJS({"node_modules/r2-shared-js/dist/es6-es2015/src/models/media-overlay.js"(e){var t;init_polyfills(),Object.defineProperty(e,"__esModule",{value:!0}),e.MediaOverlayNode=e.timeStrToSeconds=void 0;var r=(init_tslib_es6(),__toCommonJS(tslib_es6_exports)),n=require_cjs(),i=require_ta_json_string_converter();function o(e){if(!e)return 0;e=e.replace("npt=","");let t=0,r=0,n=0;try{const i=e.indexOf("min");if(i>0){const t=e.substr(0,i);r=parseFloat(t)}else{const i=e.indexOf("ms");if(i>0){const t=e.substr(0,i),r=parseFloat(t);n=r/1e3}else{const i=e.indexOf("s");if(i>0){const t=e.substr(0,i);n=parseFloat(t)}else{const i=e.indexOf("h");if(i>0){const r=e.substr(0,i);t=parseFloat(r)}else{const i=e.split(":");1===i.length?n=parseFloat(i[0]):2===i.length?(r=parseFloat(i[0]),n=parseFloat(i[1])):3===i.length?(t=parseFloat(i[0]),r=parseFloat(i[1]),n=parseFloat(i[2])):(console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR ??"),console.log(e))}}}}}catch(i){return console.log(i),console.log("SMIL TIME CLOCK SYNTAX PARSING ERROR!"),console.log(e),0}return 3600*t+60*r+n}e.timeStrToSeconds=o;var s=e.MediaOverlayNode=t=class{constructor(){this.initialized=!1}};r.__decorate([(0,n.JsonProperty)("text"),r.__metadata("design:type",String)],s.prototype,"Text",void 0),r.__decorate([(0,n.JsonProperty)("audio"),r.__metadata("design:type",String)],s.prototype,"Audio",void 0),r.__decorate([(0,n.JsonProperty)("role"),(0,n.JsonConverter)(i.JsonStringConverter),(0,n.JsonElementType)(String),r.__metadata("design:type",Array)],s.prototype,"Role",void 0),r.__decorate([(0,n.JsonProperty)("narration"),(0,n.JsonElementType)(t),r.__metadata("design:type",Array)],s.prototype,"Children",void 0),e.MediaOverlayNode=s=t=r.__decorate([(0,n.JsonObject)()],s)}}),require_devtools_detector=__commonJS({"node_modules/devtools-detector/lib/devtools-detector.js"(e,t){init_polyfills(),function(r,n){"object"==typeof e&&"object"==typeof t?t.exports=n():"function"==typeof define&&__webpack_require__.amdO?define([],n):"object"==typeof e?e.devtoolsDetector=n():r.devtoolsDetector=n()}("undefined"!=typeof self?self:e,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){r.d(t,"j",(function(){return c})),r.d(t,"e",(function(){return d})),r.d(t,"f",(function(){return h})),r.d(t,"d",(function(){return p})),r.d(t,"i",(function(){return f})),r.d(t,"g",(function(){return g})),r.d(t,"c",(function(){return m})),r.d(t,"h",(function(){return v})),t.a=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return(null===u||void 0===u?void 0:u.document)?(e=u.document).createElement.apply(e,t):{}},r.d(t,"b",(function(){return y}));var n,i,o,s,a,l=r(1),u=Object(l.a)(),c=(null===(n=null===u||void 0===u?void 0:u.navigator)||void 0===n?void 0:n.userAgent)||"unknown",d="InstallTrigger"in((null===u||void 0===u?void 0:u.window)||{})||/firefox/i.test(c),h=/trident/i.test(c)||/msie/i.test(c),p=/edge/i.test(c),f=/webkit/i.test(c)&&!p,g=/IqiyiApp/.test(c),m=void 0!==(null===(i=null===u||void 0===u?void 0:u.window)||void 0===i?void 0:i.chrome)||/chrome/i.test(c)||/CriOS/i.test(c),v="[object SafariRemoteNotification]"===((null===(s=null===(o=null===u||void 0===u?void 0:u.window)||void 0===o?void 0:o.safari)||void 0===s?void 0:s.pushNotification)||!1).toString()||/safari/i.test(c)&&!m,y="function"==typeof(null===(a=u.document)||void 0===a?void 0:a.createElement)},function(e,t,r){(function(e){t.c=function(){return"undefined"!=typeof performance?performance.now():Date.now()},t.b=function(e){void 0===e&&(e={});for(var t=e.includes,r=void 0===t?[]:t,n=e.excludes,i=void 0===n?[]:n,o=!1,s=!1,a=0,l=r;a<l.length;a++){var u=l[a];if(!0===u){o=!0;break}}for(var c=0,d=i;c<d.length;c++){u=d[c];if(!0===u){s=!0;break}}return o&&!s},t.d=function(e,t,r){var o=i.a[e];return void 0!==o&&Object(n.compare)(o,t,r)},t.a=function(){return"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:this};var n=r(8),i=(r.n(n),r(4))}).call(t,r(7))},function(e,t,r){r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return a}));var n=r(0);function i(e){if(console){if(!n.f&&!n.d)return console[e];if("log"===e||"clear"===e)return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];console[e].apply(console,t)}}return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}}var o=i("log"),s=i("table"),a=i("clear")},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.addListener=function(e){c.addListener(e)},t.removeListener=function(e){c.removeListener(e)},t.isLaunch=function(){return c.isLaunch()},t.launch=function(){c.launch()},t.stop=function(){c.stop()},t.setDetectDelay=function(e){c.setDetectDelay(e)};var n=r(6),i=r(9);r.d(t,"DevtoolsDetector",(function(){return n.a})),r.d(t,"checkers",(function(){return i}));var o=r(1);r.d(t,"match",(function(){return o.b})),r.d(t,"specificVersionMatch",(function(){return o.d}));var s=r(0);r.d(t,"userAgent",(function(){return s.j})),r.d(t,"isFirefox",(function(){return s.e})),r.d(t,"isIE",(function(){return s.f})),r.d(t,"isEdge",(function(){return s.d})),r.d(t,"isWebkit",(function(){return s.i})),r.d(t,"isIqiyiApp",(function(){return s.g})),r.d(t,"isChrome",(function(){return s.c})),r.d(t,"isSafari",(function(){return s.h})),r.d(t,"createElement",(function(){return s.a})),r.d(t,"inBrowser",(function(){return s.b}));var a=r(2);r.d(t,"log",(function(){return a.b})),r.d(t,"table",(function(){return a.c})),r.d(t,"clear",(function(){return a.a}));var l=r(4);r.d(t,"versionMap",(function(){return l.a}));var u=r(5);r.d(t,"isMac",(function(){return u.d})),r.d(t,"isIpad",(function(){return u.b})),r.d(t,"isIphone",(function(){return u.c})),r.d(t,"isAndroid",(function(){return u.a})),r.d(t,"isWindows",(function(){return u.e}));var c=new n.a({checkers:[i.erudaChecker,i.elementIdChecker,i.regToStringChecker,i.functionToStringChecker,i.depRegToStringChecker,i.dateToStringChecker,i.performanceChecker,i.debuggerChecker]});t.default=c},function(e,t,r){r.d(t,"a",(function(){return n}));for(var n={},i=0,o=(r(0).j||"").match(/\w+\/(\d|\.)+(\s|$)/gi)||[];i<o.length;i++){var s=o[i].split("/"),a=s[0],l=s[1];n[a]=l}},function(e,t,r){r.d(t,"d",(function(){return i})),r.d(t,"b",(function(){return o})),r.d(t,"c",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return l}));var n=r(0),i=/macintosh/i.test(n.j),o=/ipad/i.test(n.j)||i&&navigator.maxTouchPoints>1,s=/iphone/i.test(n.j),a=/android/i.test(n.j),l=/windows/i.test(n.j)},function(e,t,r){r.d(t,"a",(function(){return s}));var n=r(0),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s=function(){function e(e){var t=e.checkers;this._listeners=[],this._isOpen=!1,this._detectLoopStopped=!0,this._detectLoopDelay=500,this._checkers=t.slice()}return e.prototype.launch=function(){n.b&&(this._detectLoopDelay<=0&&this.setDetectDelay(500),this._detectLoopStopped&&(this._detectLoopStopped=!1,this._detectLoop()))},e.prototype.stop=function(){this._detectLoopStopped||(this._detectLoopStopped=!0,clearTimeout(this._timer))},e.prototype.isLaunch=function(){return!this._detectLoopStopped},e.prototype.setDetectDelay=function(e){this._detectLoopDelay=e},e.prototype.addListener=function(e){this._listeners.push(e)},e.prototype.removeListener=function(e){this._listeners=this._listeners.filter((function(t){return t!==e}))},e.prototype._broadcast=function(e){for(var t=0,r=this._listeners;t<r.length;t++){var n=r[t];try{n(e.isOpen,e)}catch(i){}}},e.prototype._detectLoop=function(){return i(this,void 0,void 0,(function(){var e,t,r,n,i,s=this;return o(this,(function(o){switch(o.label){case 0:e=!1,t="",r=0,n=this._checkers,o.label=1;case 1:return r<n.length?[4,(i=n[r]).isEnable()]:[3,6];case 2:return o.sent()?(t=i.name,[4,i.isOpen()]):[3,4];case 3:e=o.sent(),o.label=4;case 4:if(e)return[3,6];o.label=5;case 5:return r++,[3,1];case 6:return e!=this._isOpen&&(this._isOpen=e,this._broadcast({isOpen:e,checkerName:t})),this._detectLoopDelay>0&&!this._detectLoopStopped?this._timer=setTimeout((function(){return s._detectLoop()}),this._detectLoopDelay):this.stop(),[2]}}))}))},e}()},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(n){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n,i,o;!function(r,s){i=[],void 0===(o="function"==typeof(n=s)?n.apply(t,i):n)||(e.exports=o)}(0,(function(){var e=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function t(e){var t=e.replace(/^v/,"").replace(/\+.*$/,""),r=function(e,t){return-1===e.indexOf(t)?e.length:e.indexOf(t)}(t,"-"),n=t.substring(0,r).split(".");return n.push(t.substring(r+1)),n}function r(e){return isNaN(Number(e))?e:Number(e)}function n(t){if("string"!=typeof t)throw new TypeError("Invalid argument expected string");if(!e.test(t))throw new Error("Invalid argument not valid semver ('"+t+"' received)")}function i(e,i){[e,i].forEach(n);for(var o=t(e),s=t(i),a=0;a<Math.max(o.length-1,s.length-1);a++){var l=parseInt(o[a]||0,10),u=parseInt(s[a]||0,10);if(l>u)return 1;if(u>l)return-1}var c=o[o.length-1],d=s[s.length-1];if(c&&d){var h=c.split(".").map(r),p=d.split(".").map(r);for(a=0;a<Math.max(h.length,p.length);a++){if(void 0===h[a]||"string"==typeof p[a]&&"number"==typeof h[a])return-1;if(void 0===p[a]||"string"==typeof h[a]&&"number"==typeof p[a])return 1;if(h[a]>p[a])return 1;if(p[a]>h[a])return-1}}else if(c||d)return c?-1:1;return 0}var o=[">",">=","=","<","<="],s={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};return i.validate=function(t){return"string"==typeof t&&e.test(t)},i.compare=function(e,t,r){!function(e){if("string"!=typeof e)throw new TypeError("Invalid operator type, expected string but got "+typeof e);if(-1===o.indexOf(e))throw new TypeError("Invalid operator, expected one of "+o.join("|"))}(r);var n=i(e,t);return s[r].indexOf(n)>-1},i}))},function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=r(10);r.d(t,"depRegToStringChecker",(function(){return n.a}));var i=r(11);r.d(t,"elementIdChecker",(function(){return i.a}));var o=r(12);r.d(t,"functionToStringChecker",(function(){return o.a}));var s=r(13);r.d(t,"regToStringChecker",(function(){return s.a}));var a=r(14);r.d(t,"debuggerChecker",(function(){return a.a}));var l=r(15);r.d(t,"dateToStringChecker",(function(){return l.a}));var u=r(16);r.d(t,"performanceChecker",(function(){return u.a}));var c=r(17);r.d(t,"erudaChecker",(function(){return c.a}))},function(e,t,r){r.d(t,"a",(function(){return c}));var n=r(0),i=r(2),o=r(1),s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=/ /,u=!1;l.toString=function(){return u=!0,c.name};var c={name:"dep-reg-to-string",isOpen:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return u=!1,Object(i.c)({dep:l}),Object(i.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,Object(o.b)({includes:[!0],excludes:[n.e,n.f]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return c}));var n=r(0),i=r(2),o=r(1),s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=Object(n.a)("div"),u=!1;Object.defineProperty(l,"id",{get:function(){return u=!0,c.name},configurable:!0});var c={name:"element-id",isOpen:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return u=!1,Object(i.b)(l),Object(i.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,Object(o.b)({includes:[!0],excludes:[n.f,n.d,n.e]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return d}));var n=r(0),i=r(2),o=r(5),s=r(1),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}};function u(){}var c=0;u.toString=function(){return c++,""};var d={name:"function-to-string",isOpen:function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){return c=0,Object(i.b)(u),Object(i.a)(),[2,2===c]}))}))},isEnable:function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(s.b)({includes:[!0],excludes:[n.g,n.e,(o.b||o.c)&&n.c]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return c}));var n=r(2),i=r(0),o=r(1),s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=/ /,u=!1;l.toString=function(){return u=!0,c.name};var c={name:"reg-to-string",isOpen:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return u=!1,Object(n.b)(l),Object(n.a)(),[2,u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,Object(o.b)({includes:[!0],excludes:[i.i]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return s}));var n=r(1),i=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},s={name:"debugger-checker",isOpen:function(){return i(this,void 0,void 0,(function(){var e;return o(this,(function(t){return e=Object(n.c)(),function(){}.constructor("debugger")(),[2,Object(n.c)()-e>100]}))}))},isEnable:function(){return i(this,void 0,void 0,(function(){return o(this,(function(e){return[2,!0]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return d}));var n=r(0),i=r(2),o=r(1),s=r(3),a=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},l=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},u=new Date,c=0;u.toString=function(){return c++,""};var d={name:"date-to-string",isOpen:function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){return c=0,Object(i.b)(u),Object(i.a)(),[2,2===c]}))}))},isEnable:function(){return a(this,void 0,void 0,(function(){return l(this,(function(e){return[2,Object(o.b)({includes:[n.c],excludes:[(s.isIpad||s.isIphone)&&n.c]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return c}));var n=r(0),i=r(2),o=r(1),s=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},l=null,u=0,c={name:"performance",isOpen:function(){return s(this,void 0,void 0,(function(){var e,t;return a(this,(function(r){return null===l&&(l=function(){for(var e=function(){for(var e={},t=0;t<500;t++)e["".concat(t)]="".concat(t);return e}(),t=[],r=0;r<50;r++)t.push(e);return t}()),e=function(){var e=Object(o.c)();return Object(i.c)(l),Object(o.c)()-e}(),t=function(){var e=Object(o.c)();return Object(i.b)(l),Object(o.c)()-e}(),u=Math.max(u,t),Object(i.a)(),0===e||0===u?[2,!1]:[2,e>10*u]}))}))},isEnable:function(){return s(this,void 0,void 0,(function(){return a(this,(function(e){return[2,Object(o.b)({includes:[n.c],excludes:[]})]}))}))}}},function(e,t,r){r.d(t,"a",(function(){return o}));var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?i(e.value):function(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(a){o=[6,a],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},o={name:"eruda",isOpen:function(){var e;return n(this,void 0,void 0,(function(){return i(this,(function(t){return"undefined"!=typeof eruda?[2,!0===(null===(e=null===eruda||void 0===eruda?void 0:eruda._devTools)||void 0===e?void 0:e._isShow)]:[2,!1]}))}))},isEnable:function(){return n(this,void 0,void 0,(function(){return i(this,(function(e){return[2,!0]}))}))}}}])}))}}),require_envs=__commonJS({"node_modules/node-releases/data/processed/envs.json"(e,t){t.exports=[{name:"nodejs",version:"0.2.0",date:"2011-08-26",lts:!1,security:!1,v8:"2.3.8.0"},{name:"nodejs",version:"0.3.0",date:"2011-08-26",lts:!1,security:!1,v8:"2.5.1.0"},{name:"nodejs",version:"0.4.0",date:"2011-08-26",lts:!1,security:!1,v8:"3.1.2.0"},{name:"nodejs",version:"0.5.0",date:"2011-08-26",lts:!1,security:!1,v8:"3.1.8.25"},{name:"nodejs",version:"0.6.0",date:"2011-11-04",lts:!1,security:!1,v8:"3.6.6.6"},{name:"nodejs",version:"0.7.0",date:"2012-01-17",lts:!1,security:!1,v8:"3.8.6.0"},{name:"nodejs",version:"0.8.0",date:"2012-06-22",lts:!1,security:!1,v8:"3.11.10.10"},{name:"nodejs",version:"0.9.0",date:"2012-07-20",lts:!1,security:!1,v8:"3.11.10.15"},{name:"nodejs",version:"0.10.0",date:"2013-03-11",lts:!1,security:!1,v8:"3.14.5.8"},{name:"nodejs",version:"0.11.0",date:"2013-03-28",lts:!1,security:!1,v8:"3.17.13.0"},{name:"nodejs",version:"0.12.0",date:"2015-02-06",lts:!1,security:!1,v8:"3.28.73.0"},{name:"nodejs",version:"4.0.0",date:"2015-09-08",lts:!1,security:!1,v8:"4.5.103.30"},{name:"nodejs",version:"4.1.0",date:"2015-09-17",lts:!1,security:!1,v8:"4.5.103.33"},{name:"nodejs",version:"4.2.0",date:"2015-10-12",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.3.0",date:"2016-02-09",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.4.0",date:"2016-03-08",lts:"Argon",security:!1,v8:"4.5.103.35"},{name:"nodejs",version:"4.5.0",date:"2016-08-16",lts:"Argon",security:!1,v8:"4.5.103.37"},{name:"nodejs",version:"4.6.0",date:"2016-09-27",lts:"Argon",security:!0,v8:"4.5.103.37"},{name:"nodejs",version:"4.7.0",date:"2016-12-06",lts:"Argon",security:!1,v8:"4.5.103.43"},{name:"nodejs",version:"4.8.0",date:"2017-02-21",lts:"Argon",security:!1,v8:"4.5.103.45"},{name:"nodejs",version:"4.9.0",date:"2018-03-28",lts:"Argon",security:!0,v8:"4.5.103.53"},{name:"nodejs",version:"5.0.0",date:"2015-10-29",lts:!1,security:!1,v8:"4.6.85.28"},{name:"nodejs",version:"5.1.0",date:"2015-11-17",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.2.0",date:"2015-12-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.3.0",date:"2015-12-15",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.4.0",date:"2016-01-06",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.5.0",date:"2016-01-21",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.6.0",date:"2016-02-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.7.0",date:"2016-02-23",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.8.0",date:"2016-03-09",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.9.0",date:"2016-03-16",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.10.0",date:"2016-04-01",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.11.0",date:"2016-04-21",lts:!1,security:!1,v8:"4.6.85.31"},{name:"nodejs",version:"5.12.0",date:"2016-06-23",lts:!1,security:!1,v8:"4.6.85.32"},{name:"nodejs",version:"6.0.0",date:"2016-04-26",lts:!1,security:!1,v8:"5.0.71.35"},{name:"nodejs",version:"6.1.0",date:"2016-05-05",lts:!1,security:!1,v8:"5.0.71.35"},{name:"nodejs",version:"6.2.0",date:"2016-05-17",lts:!1,security:!1,v8:"5.0.71.47"},{name:"nodejs",version:"6.3.0",date:"2016-07-06",lts:!1,security:!1,v8:"5.0.71.52"},{name:"nodejs",version:"6.4.0",date:"2016-08-12",lts:!1,security:!1,v8:"5.0.71.60"},{name:"nodejs",version:"6.5.0",date:"2016-08-26",lts:!1,security:!1,v8:"5.1.281.81"},{name:"nodejs",version:"6.6.0",date:"2016-09-14",lts:!1,security:!1,v8:"5.1.281.83"},{name:"nodejs",version:"6.7.0",date:"2016-09-27",lts:!1,security:!0,v8:"5.1.281.83"},{name:"nodejs",version:"6.8.0",date:"2016-10-12",lts:!1,security:!1,v8:"5.1.281.84"},{name:"nodejs",version:"6.9.0",date:"2016-10-18",lts:"Boron",security:!1,v8:"5.1.281.84"},{name:"nodejs",version:"6.10.0",date:"2017-02-21",lts:"Boron",security:!1,v8:"5.1.281.93"},{name:"nodejs",version:"6.11.0",date:"2017-06-06",lts:"Boron",security:!1,v8:"5.1.281.102"},{name:"nodejs",version:"6.12.0",date:"2017-11-06",lts:"Boron",security:!1,v8:"5.1.281.108"},{name:"nodejs",version:"6.13.0",date:"2018-02-10",lts:"Boron",security:!1,v8:"5.1.281.111"},{name:"nodejs",version:"6.14.0",date:"2018-03-28",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"6.15.0",date:"2018-11-27",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"6.16.0",date:"2018-12-26",lts:"Boron",security:!1,v8:"5.1.281.111"},{name:"nodejs",version:"6.17.0",date:"2019-02-28",lts:"Boron",security:!0,v8:"5.1.281.111"},{name:"nodejs",version:"7.0.0",date:"2016-10-25",lts:!1,security:!1,v8:"5.4.500.36"},{name:"nodejs",version:"7.1.0",date:"2016-11-08",lts:!1,security:!1,v8:"5.4.500.36"},{name:"nodejs",version:"7.2.0",date:"2016-11-22",lts:!1,security:!1,v8:"5.4.500.43"},{name:"nodejs",version:"7.3.0",date:"2016-12-20",lts:!1,security:!1,v8:"5.4.500.45"},{name:"nodejs",version:"7.4.0",date:"2017-01-04",lts:!1,security:!1,v8:"5.4.500.45"},{name:"nodejs",version:"7.5.0",date:"2017-01-31",lts:!1,security:!1,v8:"5.4.500.48"},{name:"nodejs",version:"7.6.0",date:"2017-02-21",lts:!1,security:!1,v8:"5.5.372.40"},{name:"nodejs",version:"7.7.0",date:"2017-02-28",lts:!1,security:!1,v8:"5.5.372.41"},{name:"nodejs",version:"7.8.0",date:"2017-03-29",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"7.9.0",date:"2017-04-11",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"7.10.0",date:"2017-05-02",lts:!1,security:!1,v8:"5.5.372.43"},{name:"nodejs",version:"8.0.0",date:"2017-05-30",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.1.0",date:"2017-06-08",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.2.0",date:"2017-07-19",lts:!1,security:!1,v8:"5.8.283.41"},{name:"nodejs",version:"8.3.0",date:"2017-08-08",lts:!1,security:!1,v8:"6.0.286.52"},{name:"nodejs",version:"8.4.0",date:"2017-08-15",lts:!1,security:!1,v8:"6.0.286.52"},{name:"nodejs",version:"8.5.0",date:"2017-09-12",lts:!1,security:!1,v8:"6.0.287.53"},{name:"nodejs",version:"8.6.0",date:"2017-09-26",lts:!1,security:!1,v8:"6.0.287.53"},{name:"nodejs",version:"8.7.0",date:"2017-10-11",lts:!1,security:!1,v8:"6.1.534.42"},{name:"nodejs",version:"8.8.0",date:"2017-10-24",lts:!1,security:!1,v8:"6.1.534.42"},{name:"nodejs",version:"8.9.0",date:"2017-10-31",lts:"Carbon",security:!1,v8:"6.1.534.46"},{name:"nodejs",version:"8.10.0",date:"2018-03-06",lts:"Carbon",security:!1,v8:"6.2.414.50"},{name:"nodejs",version:"8.11.0",date:"2018-03-28",lts:"Carbon",security:!0,v8:"6.2.414.50"},{name:"nodejs",version:"8.12.0",date:"2018-09-10",lts:"Carbon",security:!1,v8:"6.2.414.66"},{name:"nodejs",version:"8.13.0",date:"2018-11-20",lts:"Carbon",security:!1,v8:"6.2.414.72"},{name:"nodejs",version:"8.14.0",date:"2018-11-27",lts:"Carbon",security:!0,v8:"6.2.414.72"},{name:"nodejs",version:"8.15.0",date:"2018-12-26",lts:"Carbon",security:!1,v8:"6.2.414.75"},{name:"nodejs",version:"8.16.0",date:"2019-04-16",lts:"Carbon",security:!1,v8:"6.2.414.77"},{name:"nodejs",version:"8.17.0",date:"2019-12-17",lts:"Carbon",security:!0,v8:"6.2.414.78"},{name:"nodejs",version:"9.0.0",date:"2017-10-31",lts:!1,security:!1,v8:"6.2.414.32"},{name:"nodejs",version:"9.1.0",date:"2017-11-07",lts:!1,security:!1,v8:"6.2.414.32"},{name:"nodejs",version:"9.2.0",date:"2017-11-14",lts:!1,security:!1,v8:"6.2.414.44"},{name:"nodejs",version:"9.3.0",date:"2017-12-12",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.4.0",date:"2018-01-10",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.5.0",date:"2018-01-31",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.6.0",date:"2018-02-21",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.7.0",date:"2018-03-01",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.8.0",date:"2018-03-07",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.9.0",date:"2018-03-21",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"9.10.0",date:"2018-03-28",lts:!1,security:!0,v8:"6.2.414.46"},{name:"nodejs",version:"9.11.0",date:"2018-04-04",lts:!1,security:!1,v8:"6.2.414.46"},{name:"nodejs",version:"10.0.0",date:"2018-04-24",lts:!1,security:!1,v8:"6.6.346.24"},{name:"nodejs",version:"10.1.0",date:"2018-05-08",lts:!1,security:!1,v8:"6.6.346.27"},{name:"nodejs",version:"10.2.0",date:"2018-05-23",lts:!1,security:!1,v8:"6.6.346.32"},{name:"nodejs",version:"10.3.0",date:"2018-05-29",lts:!1,security:!1,v8:"6.6.346.32"},{name:"nodejs",version:"10.4.0",date:"2018-06-06",lts:!1,security:!1,v8:"6.7.288.43"},{name:"nodejs",version:"10.5.0",date:"2018-06-20",lts:!1,security:!1,v8:"6.7.288.46"},{name:"nodejs",version:"10.6.0",date:"2018-07-04",lts:!1,security:!1,v8:"6.7.288.46"},{name:"nodejs",version:"10.7.0",date:"2018-07-18",lts:!1,security:!1,v8:"6.7.288.49"},{name:"nodejs",version:"10.8.0",date:"2018-08-01",lts:!1,security:!1,v8:"6.7.288.49"},{name:"nodejs",version:"10.9.0",date:"2018-08-15",lts:!1,security:!1,v8:"6.8.275.24"},{name:"nodejs",version:"10.10.0",date:"2018-09-06",lts:!1,security:!1,v8:"6.8.275.30"},{name:"nodejs",version:"10.11.0",date:"2018-09-19",lts:!1,security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.12.0",date:"2018-10-10",lts:!1,security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.13.0",date:"2018-10-30",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.14.0",date:"2018-11-27",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.15.0",date:"2018-12-26",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.16.0",date:"2019-05-28",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.17.0",date:"2019-10-22",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.18.0",date:"2019-12-17",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.19.0",date:"2020-02-05",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.20.0",date:"2020-03-26",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.21.0",date:"2020-06-02",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"10.22.0",date:"2020-07-21",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.23.0",date:"2020-10-27",lts:"Dubnium",security:!1,v8:"6.8.275.32"},{name:"nodejs",version:"10.24.0",date:"2021-02-23",lts:"Dubnium",security:!0,v8:"6.8.275.32"},{name:"nodejs",version:"11.0.0",date:"2018-10-23",lts:!1,security:!1,v8:"7.0.276.28"},{name:"nodejs",version:"11.1.0",date:"2018-10-30",lts:!1,security:!1,v8:"7.0.276.32"},{name:"nodejs",version:"11.2.0",date:"2018-11-15",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.3.0",date:"2018-11-27",lts:!1,security:!0,v8:"7.0.276.38"},{name:"nodejs",version:"11.4.0",date:"2018-12-07",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.5.0",date:"2018-12-18",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.6.0",date:"2018-12-26",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.7.0",date:"2019-01-17",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.8.0",date:"2019-01-24",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.9.0",date:"2019-01-30",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.10.0",date:"2019-02-14",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.11.0",date:"2019-03-05",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.12.0",date:"2019-03-14",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.13.0",date:"2019-03-28",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.14.0",date:"2019-04-10",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"11.15.0",date:"2019-04-30",lts:!1,security:!1,v8:"7.0.276.38"},{name:"nodejs",version:"12.0.0",date:"2019-04-23",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.1.0",date:"2019-04-29",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.2.0",date:"2019-05-07",lts:!1,security:!1,v8:"7.4.288.21"},{name:"nodejs",version:"12.3.0",date:"2019-05-21",lts:!1,security:!1,v8:"7.4.288.27"},{name:"nodejs",version:"12.4.0",date:"2019-06-04",lts:!1,security:!1,v8:"7.4.288.27"},{name:"nodejs",version:"12.5.0",date:"2019-06-26",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.6.0",date:"2019-07-03",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.7.0",date:"2019-07-23",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.8.0",date:"2019-08-06",lts:!1,security:!1,v8:"7.5.288.22"},{name:"nodejs",version:"12.9.0",date:"2019-08-20",lts:!1,security:!1,v8:"7.6.303.29"},{name:"nodejs",version:"12.10.0",date:"2019-09-04",lts:!1,security:!1,v8:"7.6.303.29"},{name:"nodejs",version:"12.11.0",date:"2019-09-25",lts:!1,security:!1,v8:"7.7.299.11"},{name:"nodejs",version:"12.12.0",date:"2019-10-11",lts:!1,security:!1,v8:"7.7.299.13"},{name:"nodejs",version:"12.13.0",date:"2019-10-21",lts:"Erbium",security:!1,v8:"7.7.299.13"},{name:"nodejs",version:"12.14.0",date:"2019-12-17",lts:"Erbium",security:!0,v8:"7.7.299.13"},{name:"nodejs",version:"12.15.0",date:"2020-02-05",lts:"Erbium",security:!0,v8:"7.7.299.13"},{name:"nodejs",version:"12.16.0",date:"2020-02-11",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.17.0",date:"2020-05-26",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.18.0",date:"2020-06-02",lts:"Erbium",security:!0,v8:"7.8.279.23"},{name:"nodejs",version:"12.19.0",date:"2020-10-06",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.20.0",date:"2020-11-24",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"12.21.0",date:"2021-02-23",lts:"Erbium",security:!0,v8:"7.8.279.23"},{name:"nodejs",version:"12.22.0",date:"2021-03-30",lts:"Erbium",security:!1,v8:"7.8.279.23"},{name:"nodejs",version:"13.0.0",date:"2019-10-22",lts:!1,security:!1,v8:"7.8.279.17"},{name:"nodejs",version:"13.1.0",date:"2019-11-05",lts:!1,security:!1,v8:"7.8.279.17"},{name:"nodejs",version:"13.2.0",date:"2019-11-21",lts:!1,security:!1,v8:"7.9.317.23"},{name:"nodejs",version:"13.3.0",date:"2019-12-03",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.4.0",date:"2019-12-17",lts:!1,security:!0,v8:"7.9.317.25"},{name:"nodejs",version:"13.5.0",date:"2019-12-18",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.6.0",date:"2020-01-07",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.7.0",date:"2020-01-21",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.8.0",date:"2020-02-05",lts:!1,security:!0,v8:"7.9.317.25"},{name:"nodejs",version:"13.9.0",date:"2020-02-18",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.10.0",date:"2020-03-04",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.11.0",date:"2020-03-12",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.12.0",date:"2020-03-26",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.13.0",date:"2020-04-14",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"13.14.0",date:"2020-04-29",lts:!1,security:!1,v8:"7.9.317.25"},{name:"nodejs",version:"14.0.0",date:"2020-04-21",lts:!1,security:!1,v8:"8.1.307.30"},{name:"nodejs",version:"14.1.0",date:"2020-04-29",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.2.0",date:"2020-05-05",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.3.0",date:"2020-05-19",lts:!1,security:!1,v8:"8.1.307.31"},{name:"nodejs",version:"14.4.0",date:"2020-06-02",lts:!1,security:!0,v8:"8.1.307.31"},{name:"nodejs",version:"14.5.0",date:"2020-06-30",lts:!1,security:!1,v8:"8.3.110.9"},{name:"nodejs",version:"14.6.0",date:"2020-07-20",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.7.0",date:"2020-07-29",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.8.0",date:"2020-08-11",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.9.0",date:"2020-08-27",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.10.0",date:"2020-09-08",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.11.0",date:"2020-09-15",lts:!1,security:!0,v8:"8.4.371.19"},{name:"nodejs",version:"14.12.0",date:"2020-09-22",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.13.0",date:"2020-09-29",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.14.0",date:"2020-10-15",lts:!1,security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.15.0",date:"2020-10-27",lts:"Fermium",security:!1,v8:"8.4.371.19"},{name:"nodejs",version:"14.16.0",date:"2021-02-23",lts:"Fermium",security:!0,v8:"8.4.371.19"},{name:"nodejs",version:"14.17.0",date:"2021-05-11",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.18.0",date:"2021-09-28",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.19.0",date:"2022-02-01",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"14.20.0",date:"2022-07-07",lts:"Fermium",security:!0,v8:"8.4.371.23"},{name:"nodejs",version:"14.21.0",date:"2022-11-01",lts:"Fermium",security:!1,v8:"8.4.371.23"},{name:"nodejs",version:"15.0.0",date:"2020-10-20",lts:!1,security:!1,v8:"8.6.395.16"},{name:"nodejs",version:"15.1.0",date:"2020-11-04",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.2.0",date:"2020-11-10",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.3.0",date:"2020-11-24",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.4.0",date:"2020-12-09",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.5.0",date:"2020-12-22",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.6.0",date:"2021-01-14",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.7.0",date:"2021-01-25",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.8.0",date:"2021-02-02",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.9.0",date:"2021-02-18",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.10.0",date:"2021-02-23",lts:!1,security:!0,v8:"8.6.395.17"},{name:"nodejs",version:"15.11.0",date:"2021-03-03",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.12.0",date:"2021-03-17",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.13.0",date:"2021-03-31",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"15.14.0",date:"2021-04-06",lts:!1,security:!1,v8:"8.6.395.17"},{name:"nodejs",version:"16.0.0",date:"2021-04-20",lts:!1,security:!1,v8:"9.0.257.17"},{name:"nodejs",version:"16.1.0",date:"2021-05-04",lts:!1,security:!1,v8:"9.0.257.24"},{name:"nodejs",version:"16.2.0",date:"2021-05-19",lts:!1,security:!1,v8:"9.0.257.25"},{name:"nodejs",version:"16.3.0",date:"2021-06-03",lts:!1,security:!1,v8:"9.0.257.25"},{name:"nodejs",version:"16.4.0",date:"2021-06-23",lts:!1,security:!1,v8:"9.1.269.36"},{name:"nodejs",version:"16.5.0",date:"2021-07-14",lts:!1,security:!1,v8:"9.1.269.38"},{name:"nodejs",version:"16.6.0",date:"2021-07-29",lts:!1,security:!0,v8:"9.2.230.21"},{name:"nodejs",version:"16.7.0",date:"2021-08-18",lts:!1,security:!1,v8:"9.2.230.21"},{name:"nodejs",version:"16.8.0",date:"2021-08-25",lts:!1,security:!1,v8:"9.2.230.21"},{name:"nodejs",version:"16.9.0",date:"2021-09-07",lts:!1,security:!1,v8:"9.3.345.16"},{name:"nodejs",version:"16.10.0",date:"2021-09-22",lts:!1,security:!1,v8:"9.3.345.19"},{name:"nodejs",version:"16.11.0",date:"2021-10-08",lts:!1,security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.12.0",date:"2021-10-20",lts:!1,security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.13.0",date:"2021-10-26",lts:"Gallium",security:!1,v8:"9.4.146.19"},{name:"nodejs",version:"16.14.0",date:"2022-02-08",lts:"Gallium",security:!1,v8:"9.4.146.24"},{name:"nodejs",version:"16.15.0",date:"2022-04-26",lts:"Gallium",security:!1,v8:"9.4.146.24"},{name:"nodejs",version:"16.16.0",date:"2022-07-07",lts:"Gallium",security:!0,v8:"9.4.146.24"},{name:"nodejs",version:"16.17.0",date:"2022-08-16",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.18.0",date:"2022-10-12",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.19.0",date:"2022-12-13",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"16.20.0",date:"2023-03-28",lts:"Gallium",security:!1,v8:"9.4.146.26"},{name:"nodejs",version:"17.0.0",date:"2021-10-19",lts:!1,security:!1,v8:"9.5.172.21"},{name:"nodejs",version:"17.1.0",date:"2021-11-09",lts:!1,security:!1,v8:"9.5.172.25"},{name:"nodejs",version:"17.2.0",date:"2021-11-30",lts:!1,security:!1,v8:"9.6.180.14"},{name:"nodejs",version:"17.3.0",date:"2021-12-17",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.4.0",date:"2022-01-18",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.5.0",date:"2022-02-10",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.6.0",date:"2022-02-22",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.7.0",date:"2022-03-09",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.8.0",date:"2022-03-22",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"17.9.0",date:"2022-04-07",lts:!1,security:!1,v8:"9.6.180.15"},{name:"nodejs",version:"18.0.0",date:"2022-04-18",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.1.0",date:"2022-05-03",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.2.0",date:"2022-05-17",lts:!1,security:!1,v8:"10.1.124.8"},{name:"nodejs",version:"18.3.0",date:"2022-06-02",lts:!1,security:!1,v8:"10.2.154.4"},{name:"nodejs",version:"18.4.0",date:"2022-06-16",lts:!1,security:!1,v8:"10.2.154.4"},{name:"nodejs",version:"18.5.0",date:"2022-07-06",lts:!1,security:!0,v8:"10.2.154.4"},{name:"nodejs",version:"18.6.0",date:"2022-07-13",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.7.0",date:"2022-07-26",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.8.0",date:"2022-08-24",lts:!1,security:!1,v8:"10.2.154.13"},{name:"nodejs",version:"18.9.0",date:"2022-09-07",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.10.0",date:"2022-09-28",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.11.0",date:"2022-10-13",lts:!1,security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.12.0",date:"2022-10-25",lts:"Hydrogen",security:!1,v8:"10.2.154.15"},{name:"nodejs",version:"18.13.0",date:"2023-01-05",lts:"Hydrogen",security:!1,v8:"10.2.154.23"},{name:"nodejs",version:"18.14.0",date:"2023-02-01",lts:"Hydrogen",security:!1,v8:"10.2.154.23"},{name:"nodejs",version:"18.15.0",date:"2023-03-05",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"18.16.0",date:"2023-04-12",lts:"Hydrogen",security:!1,v8:"10.2.154.26"},{name:"nodejs",version:"19.0.0",date:"2022-10-17",lts:!1,security:!1,v8:"10.7.193.13"},{name:"nodejs",version:"19.1.0",date:"2022-11-14",lts:!1,security:!1,v8:"10.7.193.20"},{name:"nodejs",version:"19.2.0",date:"2022-11-29",lts:!1,security:!1,v8:"10.8.168.20"},{name:"nodejs",version:"19.3.0",date:"2022-12-14",lts:!1,security:!1,v8:"10.8.168.21"},{name:"nodejs",version:"19.4.0",date:"2023-01-05",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.5.0",date:"2023-01-24",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.6.0",date:"2023-02-01",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.7.0",date:"2023-02-21",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.8.0",date:"2023-03-14",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"19.9.0",date:"2023-04-10",lts:!1,security:!1,v8:"10.8.168.25"},{name:"nodejs",version:"20.0.0",date:"2023-04-17",lts:!1,security:!1,v8:"11.3.244.4"},{name:"nodejs",version:"20.1.0",date:"2023-05-03",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.2.0",date:"2023-05-16",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.3.0",date:"2023-06-08",lts:!1,security:!1,v8:"11.3.244.8"},{name:"nodejs",version:"20.4.0",date:"2023-07-04",lts:!1,security:!1,v8:"11.3.244.8"}]}}),require_browsers=__commonJS({"node_modules/caniuse-lite/data/browsers.js"(e,t){init_polyfills(),t.exports={A:"ie",B:"edge",C:"firefox",D:"chrome",E:"safari",F:"opera",G:"ios_saf",H:"op_mini",I:"android",J:"bb",K:"op_mob",L:"and_chr",M:"and_ff",N:"ie_mob",O:"and_uc",P:"samsung",Q:"and_qq",R:"baidu",S:"kaios"}}}),require_browsers2=__commonJS({"node_modules/caniuse-lite/dist/unpacker/browsers.js"(e,t){init_polyfills(),t.exports.browsers=require_browsers()}}),require_browserVersions=__commonJS({"node_modules/caniuse-lite/data/browserVersions.js"(e,t){init_polyfills(),t.exports={0:"113",1:"114",2:"115",3:"116",4:"5",5:"19",6:"23",7:"24",8:"25",9:"26",A:"10",B:"11",C:"12",D:"117",E:"7",F:"8",G:"9",H:"15",I:"4",J:"6",K:"13",L:"14",M:"16",N:"17",O:"18",P:"79",Q:"80",R:"81",S:"83",T:"84",U:"85",V:"86",W:"87",X:"88",Y:"89",Z:"90",a:"91",b:"92",c:"93",d:"94",e:"95",f:"96",g:"97",h:"98",i:"99",j:"100",k:"101",l:"102",m:"20",n:"21",o:"22",p:"73",q:"103",r:"104",s:"105",t:"106",u:"107",v:"108",w:"109",x:"110",y:"111",z:"112",AB:"27",BB:"28",CB:"29",DB:"30",EB:"31",FB:"32",GB:"33",HB:"34",IB:"35",JB:"36",KB:"37",LB:"38",MB:"39",NB:"40",OB:"41",PB:"42",QB:"43",RB:"44",SB:"45",TB:"46",UB:"47",VB:"48",WB:"49",XB:"50",YB:"51",ZB:"52",aB:"53",bB:"54",cB:"55",dB:"56",eB:"57",fB:"58",gB:"60",hB:"62",iB:"63",jB:"64",kB:"65",lB:"66",mB:"67",nB:"68",oB:"69",pB:"70",qB:"71",rB:"72",sB:"74",tB:"75",uB:"76",vB:"77",wB:"78",xB:"11.1",yB:"12.1",zB:"15.5","0B":"16.0","1B":"17.0","2B":"3","3B":"59","4B":"61","5B":"82","6B":"118","7B":"119","8B":"120","9B":"3.2",AC:"10.1",BC:"13.1",CC:"15.2-15.3",DC:"15.4",EC:"16.1",FC:"16.2",GC:"16.3",HC:"16.4",IC:"16.5",JC:"16.6",KC:"17.1",LC:"11.5",MC:"4.2-4.3",NC:"5.5",OC:"2",PC:"3.5",QC:"3.6",RC:"3.1",SC:"5.1",TC:"6.1",UC:"7.1",VC:"9.1",WC:"14.1",XC:"15.1",YC:"15.6",ZC:"TP",aC:"9.5-9.6",bC:"10.0-10.1",cC:"10.5",dC:"10.6",eC:"11.6",fC:"4.0-4.1",gC:"5.0-5.1",hC:"6.0-6.1",iC:"7.0-7.1",jC:"8.1-8.4",kC:"9.0-9.2",lC:"9.3",mC:"10.0-10.2",nC:"10.3",oC:"11.0-11.2",pC:"11.3-11.4",qC:"12.0-12.1",rC:"12.2-12.5",sC:"13.0-13.1",tC:"13.2",uC:"13.3",vC:"13.4-13.7",wC:"14.0-14.4",xC:"14.5-14.8",yC:"15.0-15.1",zC:"15.6-15.7","0C":"all","1C":"2.1","2C":"2.2","3C":"2.3","4C":"4.1","5C":"4.4","6C":"4.4.3-4.4.4","7C":"5.0-5.4","8C":"6.2-6.4","9C":"7.2-7.4",AD:"8.2",BD:"9.2",CD:"11.1-11.2",DD:"12.0",ED:"13.0",FD:"14.0",GD:"15.0",HD:"18.0",ID:"19.0",JD:"13.18",KD:"2.5",LD:"3.0-3.1"}}}),require_browserVersions2=__commonJS({"node_modules/caniuse-lite/dist/unpacker/browserVersions.js"(e,t){init_polyfills(),t.exports.browserVersions=require_browserVersions()}}),require_agents=__commonJS({"node_modules/caniuse-lite/data/agents.js"(e,t){init_polyfills(),t.exports={A:{A:{J:0,E:0,F:.0268696,G:.0537391,A:0,B:.416478,NC:0},B:"ms",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","NC","J","E","F","G","A","B","","",""],E:"IE",F:{NC:962323200,J:998870400,E:1161129600,F:1237420800,G:1300060800,A:1346716800,B:1381968e3}},B:{A:{0:.035192,1:.607062,2:3.20687,3:1.03376,C:.004399,K:.004399,L:.004399,H:.004399,M:0,N:.004399,O:.008798,P:0,Q:.004399,R:.004399,S:.004399,T:.008798,U:.004399,V:.008798,W:.004399,X:.004399,Y:.004399,Z:.008798,a:0,b:.013197,c:0,d:0,e:0,f:0,g:0,h:0,i:.017596,j:0,k:0,l:0,q:0,r:0,s:0,t:0,u:.008798,v:.013197,w:.083581,x:.013197,y:.092379,z:.096778,D:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","C","K","L","H","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","q","r","s","t","u","v","w","x","y","z","0","1","2","3","D","","",""],E:"Edge",F:{0:1683158400,1:1685664e3,2:1689897600,3:1692576e3,C:1438128e3,K:1447286400,L:1470096e3,H:1491868800,M:1508198400,N:1525046400,O:1542067200,P:1579046400,Q:1581033600,R:1586736e3,S:1590019200,T:1594857600,U:1598486400,V:1602201600,W:1605830400,X:161136e4,Y:1614816e3,Z:1618358400,a:1622073600,b:1626912e3,c:1630627200,d:1632441600,e:1634774400,f:1637539200,g:1641427200,h:1643932800,i:1646265600,j:1649635200,k:1651190400,l:1653955200,q:1655942400,r:1659657600,s:1661990400,t:1664755200,u:1666915200,v:1670198400,w:1673481600,x:1675900800,y:1678665600,z:1680825600,D:1694649600},D:{C:"ms",K:"ms",L:"ms",H:"ms",M:"ms",N:"ms",O:"ms"}},C:{A:{0:.026394,1:.030793,2:.580668,3:1.39008,4:0,5:0,6:0,7:0,8:0,9:0,OC:0,"2B":0,I:0,J:0,E:0,F:0,G:0,A:0,B:.008798,C:0,K:0,L:0,H:0,M:0,N:0,O:0,m:0,n:0,o:0,AB:0,BB:0,CB:0,DB:0,EB:0,FB:0,GB:0,HB:0,IB:0,JB:0,KB:0,LB:0,MB:0,NB:0,OB:0,PB:0,QB:.008798,RB:.004399,SB:0,TB:0,UB:0,VB:.004399,WB:0,XB:.008798,YB:0,ZB:.052788,aB:.004399,bB:.004399,cB:0,dB:.008798,eB:0,fB:0,"3B":.004399,gB:0,"4B":0,hB:0,iB:0,jB:0,kB:0,lB:0,mB:0,nB:0,oB:0,pB:0,qB:0,rB:.030793,p:0,sB:0,tB:0,uB:0,vB:0,wB:.039591,P:0,Q:0,R:0,"5B":0,S:.008798,T:0,U:0,V:0,W:0,X:.004399,Y:0,Z:.004399,a:.008798,b:0,c:0,d:.013197,e:0,f:0,g:0,h:0,i:0,j:0,k:0,l:.118773,q:.017596,r:0,s:.004399,t:.004399,u:.004399,v:.008798,w:.008798,x:.008798,y:.013197,z:.065985,D:.052788,"6B":0,"7B":0,"8B":0,PC:0,QC:0},B:"moz",C:["OC","2B","PC","QC","I","4","J","E","F","G","A","B","C","K","L","H","M","N","O","5","m","n","o","6","7","8","9","AB","BB","CB","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","3B","gB","4B","hB","iB","jB","kB","lB","mB","nB","oB","pB","qB","rB","p","sB","tB","uB","vB","wB","P","Q","R","5B","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","q","r","s","t","u","v","w","x","y","z","0","1","2","3","D","6B","7B","8B"],E:"Firefox",F:{0:1683590400,1:1686009600,2:1688428800,3:1690848e3,4:1308614400,5:1357603200,6:1372118400,7:1375747200,8:1379376e3,9:1386633600,OC:1161648e3,"2B":1213660800,PC:124632e4,QC:1264032e3,I:1300752e3,J:1313452800,E:1317081600,F:1317081600,G:1320710400,A:1324339200,B:1327968e3,C:1331596800,K:1335225600,L:1338854400,H:1342483200,M:1346112e3,N:1349740800,O:1353628800,m:1361232e3,n:1364860800,o:1368489600,AB:1391472e3,BB:1395100800,CB:1398729600,DB:1402358400,EB:1405987200,FB:1409616e3,GB:1413244800,HB:1417392e3,IB:1421107200,JB:1424736e3,KB:1428278400,LB:1431475200,MB:1435881600,NB:1439251200,OB:144288e4,PB:1446508800,QB:1450137600,RB:1453852800,SB:1457395200,TB:1461628800,UB:1465257600,VB:1470096e3,WB:1474329600,XB:1479168e3,YB:1485216e3,ZB:1488844800,aB:149256e4,bB:1497312e3,cB:1502150400,dB:1506556800,eB:1510617600,fB:1516665600,"3B":1520985600,gB:1525824e3,"4B":1529971200,hB:1536105600,iB:1540252800,jB:1544486400,kB:154872e4,lB:1552953600,mB:1558396800,nB:1562630400,oB:1567468800,pB:1571788800,qB:1575331200,rB:1578355200,p:1581379200,sB:1583798400,tB:1586304e3,uB:1588636800,vB:1591056e3,wB:1593475200,P:1595894400,Q:1598313600,R:1600732800,"5B":1603152e3,S:1605571200,T:1607990400,U:1611619200,V:1614038400,W:1616457600,X:1618790400,Y:1622505600,Z:1626134400,a:1628553600,b:1630972800,c:1633392e3,d:1635811200,e:1638835200,f:1641859200,g:1644364800,h:1646697600,i:1649116800,j:1651536e3,k:1653955200,l:1656374400,q:1658793600,r:1661212800,s:1663632e3,t:1666051200,u:1668470400,v:1670889600,w:1673913600,x:1676332800,y:1678752e3,z:1681171200,D:1693267200,"6B":null,"7B":null,"8B":null}},D:{A:{0:.255142,1:2.10712,2:12.8099,3:5.7231,4:0,5:0,6:0,7:0,8:0,9:0,I:0,J:0,E:0,F:0,G:0,A:0,B:0,C:0,K:0,L:0,H:0,M:0,N:0,O:0,m:0,n:0,o:0,AB:0,BB:0,CB:0,DB:0,EB:0,FB:0,GB:0,HB:.004399,IB:0,JB:0,KB:0,LB:.013197,MB:0,NB:0,OB:0,PB:0,QB:0,RB:0,SB:0,TB:0,UB:.004399,VB:.017596,WB:.030793,XB:.013197,YB:0,ZB:0,aB:.008798,bB:0,cB:.004399,dB:.048389,eB:.004399,fB:0,"3B":0,gB:.021995,"4B":.004399,hB:.004399,iB:.008798,jB:0,kB:.008798,lB:.026394,mB:.004399,nB:.039591,oB:.065985,pB:.039591,qB:.021995,rB:.026394,p:.030793,sB:.048389,tB:.048389,uB:.096778,vB:.026394,wB:.039591,P:.202354,Q:.079182,R:.057187,S:.114374,T:.030793,U:.083581,V:.092379,W:.08798,X:.048389,Y:.039591,Z:.048389,a:.061586,b:.035192,c:.127571,d:.030793,e:.017596,f:.026394,g:.026394,h:.061586,i:.04399,j:.035192,k:.035192,l:.039591,q:.211152,r:.052788,s:.048389,t:.052788,u:.123172,v:.180359,w:1.83878,x:.149566,y:.285935,z:.228748,D:.017596,"6B":.004399,"7B":0,"8B":0},B:"webkit",C:["","","","","","I","4","J","E","F","G","A","B","C","K","L","H","M","N","O","5","m","n","o","6","7","8","9","AB","BB","CB","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","3B","gB","4B","hB","iB","jB","kB","lB","mB","nB","oB","pB","qB","rB","p","sB","tB","uB","vB","wB","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","q","r","s","t","u","v","w","x","y","z","0","1","2","3","D","6B","7B","8B"],E:"Chrome",F:{0:1682985600,1:1685404800,2:1689724800,3:1692057600,4:1274745600,5:1332892800,6:1348531200,7:1352246400,8:1357862400,9:1361404800,I:1264377600,J:1283385600,E:1287619200,F:1291248e3,G:1296777600,A:1299542400,B:1303862400,C:1307404800,K:1312243200,L:1316131200,H:1316131200,M:1319500800,N:1323734400,O:1328659200,m:133704e4,n:1340668800,o:1343692800,AB:1364428800,BB:1369094400,CB:1374105600,DB:1376956800,EB:1384214400,FB:1389657600,GB:1392940800,HB:1397001600,IB:1400544e3,JB:1405468800,KB:1409011200,LB:141264e4,MB:1416268800,NB:1421798400,OB:1425513600,PB:1429401600,QB:143208e4,RB:1437523200,SB:1441152e3,TB:1444780800,UB:1449014400,VB:1453248e3,WB:1456963200,XB:1460592e3,YB:1464134400,ZB:1469059200,aB:1472601600,bB:1476230400,cB:1480550400,dB:1485302400,eB:1489017600,fB:149256e4,"3B":1496707200,gB:1500940800,"4B":1504569600,hB:1508198400,iB:1512518400,jB:1516752e3,kB:1520294400,lB:1523923200,mB:1527552e3,nB:1532390400,oB:1536019200,pB:1539648e3,qB:1543968e3,rB:154872e4,p:1552348800,sB:1555977600,tB:1559606400,uB:1564444800,vB:1568073600,wB:1571702400,P:1575936e3,Q:1580860800,R:1586304e3,S:1589846400,T:1594684800,U:1598313600,V:1601942400,W:1605571200,X:1611014400,Y:1614556800,Z:1618272e3,a:1621987200,b:1626739200,c:1630368e3,d:1632268800,e:1634601600,f:1637020800,g:1641340800,h:1643673600,i:1646092800,j:1648512e3,k:1650931200,l:1653350400,q:1655769600,r:1659398400,s:1661817600,t:1664236800,u:1666656e3,v:166968e4,w:1673308800,x:1675728e3,y:1678147200,z:1680566400,D:1694476800,"6B":null,"7B":null,"8B":null}},E:{A:{4:0,I:0,J:0,E:0,F:0,G:0,A:0,B:0,C:0,K:.017596,L:.105576,H:.017596,RC:0,"9B":0,SC:.008798,TC:0,UC:0,VC:.140768,AC:0,xB:.004399,yB:.030793,BC:.136369,WC:.255142,XC:.039591,CC:.035192,DC:.070384,zB:.123172,YC:.576269,"0B":.171561,EC:.180359,FC:.184758,GC:.422304,HC:.189157,IC:1.15254,JC:1.65402,"1B":.026394,KC:0,ZC:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","RC","9B","I","4","SC","J","TC","E","UC","F","G","VC","A","AC","B","xB","C","yB","K","BC","L","WC","H","XC","CC","DC","zB","YC","0B","EC","FC","GC","HC","IC","JC","1B","KC","ZC"],E:"Safari",F:{4:1275868800,RC:1205798400,"9B":1226534400,I:1244419200,SC:131112e4,J:1343174400,TC:13824e5,E:13824e5,UC:1410998400,F:1413417600,G:1443657600,VC:1458518400,A:1474329600,AC:1490572800,B:1505779200,xB:1522281600,C:1537142400,yB:1553472e3,K:1568851200,BC:1585008e3,L:1600214400,WC:1619395200,H:1632096e3,XC:1635292800,CC:1639353600,DC:1647216e3,zB:1652745600,YC:1658275200,"0B":1662940800,EC:1666569600,FC:1670889600,GC:1674432e3,HC:1679875200,IC:1684368e3,JC:1690156800,"1B":null,KC:null,ZC:null}},F:{A:{5:0,6:0,7:0,8:0,9:0,G:0,B:0,C:0,H:0,M:0,N:0,O:0,m:0,n:0,o:0,AB:0,BB:.004399,CB:0,DB:0,EB:0,FB:0,GB:0,HB:0,IB:0,JB:0,KB:0,LB:0,MB:0,NB:0,OB:0,PB:0,QB:0,RB:0,SB:0,TB:.013197,UB:0,VB:0,WB:0,XB:0,YB:0,ZB:0,aB:0,bB:0,cB:0,dB:0,eB:0,fB:0,gB:0,hB:0,iB:0,jB:0,kB:0,lB:0,mB:0,nB:0,oB:0,pB:0,qB:0,rB:0,p:0,sB:0,tB:0,uB:0,vB:0,wB:0,P:0,Q:0,R:0,"5B":0,S:0,T:0,U:.004399,V:0,W:0,X:0,Y:0,Z:0,a:0,b:0,c:0,d:0,e:.057187,f:0,g:.079182,h:0,i:.030793,j:.83581,k:.466294,l:.008798,aC:0,bC:0,cC:0,dC:0,xB:0,LC:0,eC:0,yB:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","G","aC","bC","cC","dC","B","xB","LC","eC","C","yB","H","M","N","O","5","m","n","o","6","7","8","9","AB","BB","CB","DB","EB","FB","GB","HB","IB","JB","KB","LB","MB","NB","OB","PB","QB","RB","SB","TB","UB","VB","WB","XB","YB","ZB","aB","bB","cB","dB","eB","fB","gB","hB","iB","jB","kB","lB","mB","nB","oB","pB","qB","rB","p","sB","tB","uB","vB","wB","P","Q","R","5B","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","","",""],E:"Opera",F:{5:1390867200,6:1405987200,7:1409616e3,8:1413331200,9:1417132800,G:1150761600,aC:1223424e3,bC:1251763200,cC:1267488e3,dC:1277942400,B:1292457600,xB:1302566400,LC:1309219200,eC:1323129600,C:1323129600,yB:1352073600,H:1372723200,M:1377561600,N:1381104e3,O:1386288e3,m:1393891200,n:1399334400,o:1401753600,AB:1422316800,BB:1425945600,CB:1430179200,DB:1433808e3,EB:1438646400,FB:1442448e3,GB:1445904e3,HB:1449100800,IB:1454371200,JB:1457308800,KB:146232e4,LB:1465344e3,MB:1470096e3,NB:1474329600,OB:1477267200,PB:1481587200,QB:1486425600,RB:1490054400,SB:1494374400,TB:1498003200,UB:1502236800,VB:1506470400,WB:1510099200,XB:1515024e3,YB:1517961600,ZB:1521676800,aB:1525910400,bB:1530144e3,cB:1534982400,dB:1537833600,eB:1543363200,fB:1548201600,gB:1554768e3,hB:1561593600,iB:1566259200,jB:1570406400,kB:1573689600,lB:1578441600,mB:1583971200,nB:1587513600,oB:1592956800,pB:1595894400,qB:1600128e3,rB:1603238400,p:161352e4,sB:1612224e3,tB:1616544e3,uB:1619568e3,vB:1623715200,wB:1627948800,P:1631577600,Q:1633392e3,R:1635984e3,"5B":1638403200,S:1642550400,T:1644969600,U:1647993600,V:1650412800,W:1652745600,X:1654646400,Y:1657152e3,Z:1660780800,a:1663113600,b:1668816e3,c:1668643200,d:1671062400,e:1675209600,f:1677024e3,g:1679529600,h:1681948800,i:1684195200,j:1687219200,k:1690329600,l:1692748800},D:{G:"o",B:"o",C:"o",aC:"o",bC:"o",cC:"o",dC:"o",xB:"o",LC:"o",eC:"o",yB:"o"}},G:{A:{F:0,"9B":0,fC:0,MC:.00279764,gC:.00419646,hC:.00279764,iC:.0125894,jC:.00419646,kC:.00839291,lC:.0391669,mC:.00279764,nC:.0545539,oC:.0223811,pC:.0195835,qC:.015387,rC:.257383,sC:.00699409,tC:.0111905,uC:.0181846,vC:.0573516,wC:.149674,xC:.257383,yC:.0965185,CC:.10631,DC:.120298,zB:.170656,zC:1.13864,"0B":.43783,EC:.863071,FC:.440628,GC:.879857,HC:.211222,IC:2.6032,JC:5.87084,"1B":.0965185,KC:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","9B","fC","MC","gC","hC","iC","F","jC","kC","lC","mC","nC","oC","pC","qC","rC","sC","tC","uC","vC","wC","xC","yC","CC","DC","zB","zC","0B","EC","FC","GC","HC","IC","JC","1B","KC","",""],E:"Safari on iOS",F:{"9B":1270252800,fC:1283904e3,MC:1299628800,gC:1331078400,hC:1359331200,iC:1394409600,F:1410912e3,jC:1413763200,kC:1442361600,lC:1458518400,mC:1473724800,nC:1490572800,oC:1505779200,pC:1522281600,qC:1537142400,rC:1553472e3,sC:1568851200,tC:1572220800,uC:1580169600,vC:1585008e3,wC:1600214400,xC:1619395200,yC:1632096e3,CC:1639353600,DC:1647216e3,zB:1652659200,zC:1658275200,"0B":1662940800,EC:1666569600,FC:1670889600,GC:1674432e3,HC:1679875200,IC:1684368e3,JC:1690156800,"1B":1694995200,KC:null}},H:{A:{"0C":1.08194},B:"o",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","0C","","",""],E:"Opera Mini",F:{"0C":1426464e3}},I:{A:{"2B":0,I:.0136938,D:0,"1C":0,"2C":.00684689,"3C":0,"4C":.0273876,MC:.0479282,"5C":0,"6C":.212254},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","1C","2C","3C","2B","I","4C","MC","5C","6C","D","","",""],E:"Android Browser",F:{"1C":1256515200,"2C":1274313600,"3C":1291593600,"2B":1298332800,I:1318896e3,"4C":1341792e3,MC:1374624e3,"5C":1386547200,"6C":1401667200,D:1694476800}},J:{A:{E:0,A:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","E","A","","",""],E:"Blackberry Browser",F:{E:1325376e3,A:1359504e3}},K:{A:{A:0,B:0,C:0,p:0,xB:0,LC:0,yB:0},B:"o",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","A","B","xB","LC","C","yB","p","","",""],E:"Opera Mobile",F:{A:1287100800,B:1300752e3,xB:1314835200,LC:1318291200,C:1330300800,yB:1349740800,p:1673827200},D:{p:"webkit"}},L:{A:{D:37.5486},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","D","","",""],E:"Chrome for Android",F:{D:1694476800}},M:{A:{D:.263294},B:"moz",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","D","","",""],E:"Firefox for Android",F:{D:1693267200}},N:{A:{A:0,B:0},B:"ms",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","A","B","","",""],E:"IE Mobile",F:{A:1340150400,B:1353456e3}},O:{A:{zB:1.00276},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","zB","","",""],E:"UC Browser for Android",F:{zB:1687132800},D:{zB:"webkit"}},P:{A:{I:.115947,m:.0843248,n:.210812,o:0,"7C":0,"8C":0,"9C":.0421624,AD:0,BD:0,AC:0,CD:.0105406,DD:0,ED:.0210812,FD:.0210812,GD:0,"0B":.0316218,"1B":.0316218,HD:.0316218,ID:.052703},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","I","7C","8C","9C","AD","BD","AC","CD","DD","ED","FD","GD","0B","1B","HD","ID","m","n","o","","",""],E:"Samsung Internet",F:{I:1461024e3,"7C":1481846400,"8C":1509408e3,"9C":1528329600,AD:1546128e3,BD:1554163200,AC:1567900800,CD:1582588800,DD:1593475200,ED:1605657600,FD:1618531200,GD:1629072e3,"0B":1640736e3,"1B":1651708800,HD:1659657600,ID:1667260800,m:1677369600,n:1684454400,o:1689292800}},Q:{A:{BC:.173662},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","BC","","",""],E:"QQ Browser",F:{BC:1663718400}},R:{A:{JD:0},B:"webkit",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","JD","","",""],E:"Baidu Browser",F:{JD:1663027200}},S:{A:{KD:.05602,LD:0},B:"moz",C:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","KD","LD","","",""],E:"KaiOS Browser",F:{KD:1527811200,LD:1631664e3}}}}}),require_agents2=__commonJS({"node_modules/caniuse-lite/dist/unpacker/agents.js"(e,t){init_polyfills();var r=require_browsers2().browsers,n=require_browserVersions2().browserVersions,i=require_agents();function o(e){return Object.keys(e).reduce(((t,r)=>(t[n[r]]=e[r],t)),{})}t.exports.agents=Object.keys(i).reduce(((e,t)=>{let s=i[t];return e[r[t]]=Object.keys(s).reduce(((e,t)=>("A"===t?e.usage_global=o(s[t]):"C"===t?e.versions=s[t].reduce(((e,t)=>(""===t?e.push(null):e.push(n[t]),e)),[]):"D"===t?e.prefix_exceptions=o(s[t]):"E"===t?e.browser=s[t]:"F"===t?e.release_date=Object.keys(s[t]).reduce(((e,r)=>(e[n[r]]=s[t][r],e)),{}):e.prefix=s[t],e)),{}),e}),{})}}),require_release_schedule=__commonJS({"node_modules/node-releases/data/release-schedule/release-schedule.json"(e,t){t.exports={"v0.8":{start:"2012-06-25",end:"2014-07-31"},"v0.10":{start:"2013-03-11",end:"2016-10-31"},"v0.12":{start:"2015-02-06",end:"2016-12-31"},v4:{start:"2015-09-08",lts:"2015-10-12",maintenance:"2017-04-01",end:"2018-04-30",codename:"Argon"},v5:{start:"2015-10-29",maintenance:"2016-04-30",end:"2016-06-30"},v6:{start:"2016-04-26",lts:"2016-10-18",maintenance:"2018-04-30",end:"2019-04-30",codename:"Boron"},v7:{start:"2016-10-25",maintenance:"2017-04-30",end:"2017-06-30"},v8:{start:"2017-05-30",lts:"2017-10-31",maintenance:"2019-01-01",end:"2019-12-31",codename:"Carbon"},v9:{start:"2017-10-01",maintenance:"2018-04-01",end:"2018-06-30"},v10:{start:"2018-04-24",lts:"2018-10-30",maintenance:"2020-05-19",end:"2021-04-30",codename:"Dubnium"},v11:{start:"2018-10-23",maintenance:"2019-04-22",end:"2019-06-01"},v12:{start:"2019-04-23",lts:"2019-10-21",maintenance:"2020-11-30",end:"2022-04-30",codename:"Erbium"},v13:{start:"2019-10-22",maintenance:"2020-04-01",end:"2020-06-01"},v14:{start:"2020-04-21",lts:"2020-10-27",maintenance:"2021-10-19",end:"2023-04-30",codename:"Fermium"},v15:{start:"2020-10-20",maintenance:"2021-04-01",end:"2021-06-01"},v16:{start:"2021-04-20",lts:"2021-10-26",maintenance:"2022-10-18",end:"2023-09-11",codename:"Gallium"},v17:{start:"2021-10-19",maintenance:"2022-04-01",end:"2022-06-01"},v18:{start:"2022-04-19",lts:"2022-10-25",maintenance:"2023-10-18",end:"2025-04-30",codename:"Hydrogen"},v19:{start:"2022-10-18",maintenance:"2023-04-01",end:"2023-06-01"},v20:{start:"2023-04-18",lts:"2023-10-24",maintenance:"2024-10-22",end:"2026-04-30",codename:""}}}}),require_versions=__commonJS({"node_modules/electron-to-chromium/versions.js"(e,t){init_polyfills(),t.exports={"0.20":"39",.21:"41",.22:"41",.23:"41",.24:"41",.25:"42",.26:"42",.27:"43",.28:"43",.29:"43","0.30":"44",.31:"45",.32:"45",.33:"45",.34:"45",.35:"45",.36:"47",.37:"49","1.0":"49",1.1:"50",1.2:"51",1.3:"52",1.4:"53",1.5:"54",1.6:"56",1.7:"58",1.8:"59","2.0":"61",2.1:"61","3.0":"66",3.1:"66","4.0":"69",4.1:"69",4.2:"69","5.0":"73","6.0":"76",6.1:"76","7.0":"78",7.1:"78",7.2:"78",7.3:"78","8.0":"80",8.1:"80",8.2:"80",8.3:"80",8.4:"80",8.5:"80","9.0":"83",9.1:"83",9.2:"83",9.3:"83",9.4:"83","10.0":"85",10.1:"85",10.2:"85",10.3:"85",10.4:"85","11.0":"87",11.1:"87",11.2:"87",11.3:"87",11.4:"87",11.5:"87","12.0":"89",12.1:"89",12.2:"89","13.0":"91",13.1:"91",13.2:"91",13.3:"91",13.4:"91",13.5:"91",13.6:"91","14.0":"93",14.1:"93",14.2:"93","15.0":"94",15.1:"94",15.2:"94",15.3:"94",15.4:"94",15.5:"94","16.0":"96",16.1:"96",16.2:"96","17.0":"98",17.1:"98",17.2:"98",17.3:"98",17.4:"98","18.0":"100",18.1:"100",18.2:"100",18.3:"100","19.0":"102",19.1:"102","20.0":"104",20.1:"104",20.2:"104",20.3:"104","21.0":"106",21.1:"106",21.2:"106",21.3:"106",21.4:"106","22.0":"108",22.1:"108",22.2:"108",22.3:"108","23.0":"110",23.1:"110",23.2:"110",23.3:"110","24.0":"112",24.1:"112",24.2:"112",24.3:"112",24.4:"112",24.5:"112",24.6:"112",24.7:"112",24.8:"112","25.0":"114",25.1:"114",25.2:"114",25.3:"114",25.4:"114",25.5:"114",25.6:"114",25.7:"114",25.8:"114","26.0":"116",26.1:"116",26.2:"116","27.0":"118"}}}),require_error=__commonJS({"node_modules/browserslist/error.js"(e,t){function r(e){this.name="BrowserslistError",this.message=e,this.browserslist=!0,Error.captureStackTrace&&Error.captureStackTrace(this,r)}init_polyfills(),r.prototype=Error.prototype,t.exports=r}}),require_parse2=__commonJS({"node_modules/browserslist/parse.js"(e,t){init_polyfills();var r=/^\s+and\s+(.*)/i,n=/^(?:,\s*|\s+or\s+)(.*)/i;function i(e){return Array.isArray(e)?e.reduce((function(e,t){return e.concat(i(t))}),[]):[e]}function o(e,t){for(var r=1,n=e.length;r<=n;r++){var i=e.substr(-r,r);if(t(i,r,n))return e.slice(0,-r)}return""}function s(e,t){var r={query:t};for(var n in 0===t.indexOf("not ")&&(r.not=!0,t=t.slice(4)),e){var i=e[n],o=t.match(i.regexp);if(o){r.type=n;for(var s=0;s<i.matches.length;s++)r[i.matches[s]]=o[s+1];return r}}return r.type="unknown",r}function a(e,t,i){var a;return o(t,(function(t,o,l){return r.test(t)?(a=s(e,t.match(r)[1]),a.compose="and",i.unshift(a),!0):n.test(t)?(a=s(e,t.match(n)[1]),a.compose="or",i.unshift(a),!0):o===l&&(a=s(e,t.trim()),a.compose="or",i.unshift(a),!0)}))}t.exports=function(e,t){return Array.isArray(t)||(t=[t]),i(t.map((function(t){var r=[];do{t=a(e,t,r)}while(t);return r})))}}}),require_browser3=__commonJS({"node_modules/browserslist/browser.js"(e,t){init_polyfills();var r=require_error();function n(){}t.exports={loadQueries:function(){throw new r("Sharable configs are not supported in client-side build of Browserslist")},getStat:function(e){return e.stats},loadConfig:function(e){if(e.config)throw new r("Browserslist config are not supported in client-side build")},loadCountry:function(){throw new r("Country statistics are not supported in client-side build of Browserslist")},loadFeature:function(){throw new r("Supports queries are not available in client-side build of Browserslist")},currentNode:function(e,t){return e(["maintained node versions"],t)[0]},parseConfig:n,readConfig:n,findConfig:n,clearCaches:n,oldDataWarning:n,env:{}}}}),require_browserslist=__commonJS({"node_modules/browserslist/index.js"(e,t){init_polyfills();var r=require_envs(),n=require_agents2().agents,i=require_release_schedule(),o=require_path(),s=require_versions(),a=require_error(),l=require_parse2(),u=require_browser3(),c=31558432982.4,d="37",h=14;function p(e,t){return 0===(e+".").indexOf(t+".")}function f(e){var t=e.slice(1);return V.nodeVersions.some((function(e){return p(e,t)}))}function g(e){return e.filter((function(e){return"string"===typeof e}))}function m(e){var t=e;return 3===e.split(".").length&&(t=e.split(".").slice(0,-1).join(".")),t}function v(e){return function(t){return e+" "+t}}function y(e){return parseInt(e.split(".")[0])}function _(e,t){if(0===e.length)return[];var r=b(e.map(y)),n=r[r.length-t];if(!n)return e;for(var i=[],o=e.length-1;o>=0;o--){if(n>y(e[o]))break;i.unshift(e[o])}return i}function b(e){for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}function S(e,t,r){for(var n in r)e[t+" "+n]=r[n]}function w(e,t){return t=parseFloat(t),">"===e?function(e){return parseFloat(e)>t}:">="===e?function(e){return parseFloat(e)>=t}:"<"===e?function(e){return parseFloat(e)<t}:function(e){return parseFloat(e)<=t}}function C(e,t){return t=t.split(".").map(A),t[1]=t[1]||0,t[2]=t[2]||0,">"===e?function(e){return e=e.split(".").map(A),x(e,t)>0}:">="===e?function(e){return e=e.split(".").map(A),x(e,t)>=0}:"<"===e?function(e){return e=e.split(".").map(A),x(t,e)>0}:function(e){return e=e.split(".").map(A),x(t,e)>=0}}function A(e){return parseInt(e)}function E(e,t){return e<t?-1:e>t?1:0}function x(e,t){return E(parseInt(e[0]),parseInt(t[0]))||E(parseInt(e[1]||"0"),parseInt(t[1]||"0"))||E(parseInt(e[2]||"0"),parseInt(t[2]||"0"))}function T(e,t){switch(t=t.split(".").map(A),"undefined"===typeof t[1]&&(t[1]="x"),e){case"<=":return function(e){return e=e.split(".").map(A),k(e,t)<=0};case">=":default:return function(e){return e=e.split(".").map(A),k(e,t)>=0}}}function k(e,t){return e[0]!==t[0]?e[0]<t[0]?-1:1:"x"===t[1]?0:e[1]!==t[1]?e[1]<t[1]?-1:1:0}function O(e,t){return-1!==e.versions.indexOf(t)?t:!!V.versionAliases[e.name][t]&&V.versionAliases[e.name][t]}function P(e,t){var r=O(e,t);return r||1===e.versions.length&&e.versions[0]}function R(e,t){return e/=1e3,Object.keys(n).reduce((function(r,n){var i=L(n,t);if(!i)return r;var o=Object.keys(i.releaseDate).filter((function(t){var r=i.releaseDate[t];return null!==r&&r>=e}));return r.concat(o.map(v(i.name)))}),[])}function I(e){return{name:e.name,versions:e.versions,released:e.released,releaseDate:e.releaseDate}}function L(e,t){if(e=e.toLowerCase(),e=V.aliases[e]||e,t.mobileToDesktop&&V.desktopNames[e]){var r=V.data[V.desktopNames[e]];if("android"===e)return N(I(V.data[e]),r);var n=I(r);return n.name=e,n}return V.data[e]}function M(e,t){var r=t.indexOf(d);return e.filter((function(e){return/^(?:[2-4]\.|[34]$)/.test(e)})).concat(t.slice(r))}function N(e,t){return e.released=M(e.released,t.released),e.versions=M(e.versions,t.versions),e.released.forEach((function(r){void 0===e.releaseDate[r]&&(e.releaseDate[r]=t.releaseDate[r])})),e}function D(e,t){var r=L(e,t);if(!r)throw new a("Unknown browser "+e);return r}function B(e){return new a("Unknown browser query `"+e+"`. Maybe you are using old Browserslist or made typo in query.")}function F(e,t,r,n){var i=1;switch(t){case"android":if(n.mobileToDesktop)return e;var o=V.data.chrome.released;i=o.length-o.indexOf(d);break;case"op_mob":var s=V.data.op_mob.released.slice(-1)[0];i=y(s)-h+1;break;default:return e}return r<=i?e.slice(-1):e.slice(i-1-r)}function j(e){return"string"===typeof e&&(e.indexOf("y")>=0||e.indexOf("a")>=0)}function H(e,t){return l(Y,e).reduce((function(e,r,n){if(r.not&&0===n)throw new a("Write any browsers query (for instance, `defaults`) before `"+r.query+"`");var i=Y[r.type],o=i.select.call(V,t,r).map((function(e){var r=e.split(" ");return"0"===r[1]?r[0]+" "+L(r[0],t).versions[0]:e}));if("and"===r.compose)return r.not?e.filter((function(e){return-1===o.indexOf(e)})):e.filter((function(e){return-1!==o.indexOf(e)}));if(r.not){var s={};return o.forEach((function(e){s[e]=!0})),e.filter((function(e){return!s[e]}))}return e.concat(o)}),[])}function q(e){return"undefined"===typeof e&&(e={}),"undefined"===typeof e.path&&(e.path=o.resolve?o.resolve("."):"."),e}function U(e,t){if("undefined"===typeof e||null===e){var r=V.loadConfig(t);e=r||V.defaults}return e}function G(e){if("string"!==typeof e&&!Array.isArray(e))throw new a("Browser queries must be an array or string. Got "+typeof e+".")}var z={};function V(e,t){t=q(t),e=U(e,t),G(e);var r={ignoreUnknownVersions:t.ignoreUnknownVersions,dangerousExtend:t.dangerousExtend,mobileToDesktop:t.mobileToDesktop,path:t.path,env:t.env};u.oldDataWarning(V.data);var n=u.getStat(t,V.data);if(n)for(var i in r.customUsage={},n)S(r.customUsage,i,n[i]);var o=JSON.stringify([e,r]);if(z[o])return z[o];var s=b(H(e,r)).sort((function(e,t){if(e=e.split(" "),t=t.split(" "),e[0]===t[0]){var r=e[1].split("-")[0],n=t[1].split("-")[0];return x(n.split("."),r.split("."))}return E(e[0],t[0])}));return u.env.BROWSERSLIST_DISABLE_CACHE||(z[o]=s),s}function $(e,t){var r=V.nodeVersions.filter((function(e){return p(e,t.version)}));if(0===r.length){if(e.ignoreUnknownVersions)return[];throw new a("Unknown version "+t.version+" of Node.js")}return["node "+r[r.length-1]]}function J(e,t){var r=parseInt(t.year),n=parseInt(t.month||"01")-1,i=parseInt(t.day||"01");return R(Date.UTC(r,n,i,0,0,0),e)}function W(e,t){var r=parseFloat(t.coverage),n=V.usage.global;if(t.place)if(t.place.match(/^my\s+stats$/i)){if(!e.customUsage)throw new a("Custom usage statistics was not provided");n=e.customUsage}else{var i;i=2===t.place.length?t.place.toUpperCase():t.place.toLowerCase(),u.loadCountry(V.usage,i,V.data),n=V.usage[i]}for(var o,s=Object.keys(n).sort((function(e,t){return n[t]-n[e]})),l=0,c=[],d=0;d<s.length;d++){if(o=s[d],0===n[o])break;if(l+=n[o],c.push(o),l>=r)break}return c}V.parse=function(e,t){return t=q(t),e=U(e,t),G(e),l(Y,e)},V.cache={},V.data={},V.usage={global:{},custom:null},V.defaults=["> 0.5%","last 2 versions","Firefox ESR","not dead"],V.aliases={fx:"firefox",ff:"firefox",ios:"ios_saf",explorer:"ie",blackberry:"bb",explorermobile:"ie_mob",operamini:"op_mini",operamobile:"op_mob",chromeandroid:"and_chr",firefoxandroid:"and_ff",ucandroid:"and_uc",qqandroid:"and_qq"},V.desktopNames={and_chr:"chrome",and_ff:"firefox",ie_mob:"ie",android:"chrome"},V.versionAliases={},V.clearCaches=u.clearCaches,V.parseConfig=u.parseConfig,V.readConfig=u.readConfig,V.findConfig=u.findConfig,V.loadConfig=u.loadConfig,V.coverage=function(e,t){var r;if("undefined"===typeof t)r=V.usage.global;else if("my stats"===t){var n={};n.path=o.resolve?o.resolve("."):".";var i=u.getStat(n);if(!i)throw new a("Custom usage statistics was not provided");for(var s in r={},i)S(r,s,i[s])}else if("string"===typeof t)t=t.length>2?t.toLowerCase():t.toUpperCase(),u.loadCountry(V.usage,t,V.data),r=V.usage[t];else for(var l in"dataByBrowser"in t&&(t=t.dataByBrowser),r={},t)for(var c in t[l])r[l+" "+c]=t[l][c];return e.reduce((function(e,t){var n=r[t];return void 0===n&&(n=r[t.replace(/ \S+$/," 0")]),e+(n||0)}),0)};var Y={last_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+major\s+versions?$/i,select:function(e,t){return Object.keys(n).reduce((function(r,n){var i=L(n,e);if(!i)return r;var o=_(i.released,t.versions);return o=o.map(v(i.name)),o=F(o,i.name,t.versions,e),r.concat(o)}),[])}},last_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+versions?$/i,select:function(e,t){return Object.keys(n).reduce((function(r,n){var i=L(n,e);if(!i)return r;var o=i.released.slice(-t.versions);return o=o.map(v(i.name)),o=F(o,i.name,t.versions,e),r.concat(o)}),[])}},last_electron_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+electron\s+major\s+versions?$/i,select:function(e,t){var r=_(Object.keys(s),t.versions);return r.map((function(e){return"chrome "+s[e]}))}},last_node_major_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+node\s+major\s+versions?$/i,select:function(e,t){return _(V.nodeVersions,t.versions).map((function(e){return"node "+e}))}},last_browser_major_versions:{matches:["versions","browser"],regexp:/^last\s+(\d+)\s+(\w+)\s+major\s+versions?$/i,select:function(e,t){var r=D(t.browser,e),n=_(r.released,t.versions),i=n.map(v(r.name));return i=F(i,r.name,t.versions,e),i}},last_electron_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+electron\s+versions?$/i,select:function(e,t){return Object.keys(s).slice(-t.versions).map((function(e){return"chrome "+s[e]}))}},last_node_versions:{matches:["versions"],regexp:/^last\s+(\d+)\s+node\s+versions?$/i,select:function(e,t){return V.nodeVersions.slice(-t.versions).map((function(e){return"node "+e}))}},last_browser_versions:{matches:["versions","browser"],regexp:/^last\s+(\d+)\s+(\w+)\s+versions?$/i,select:function(e,t){var r=D(t.browser,e),n=r.released.slice(-t.versions).map(v(r.name));return n=F(n,r.name,t.versions,e),n}},unreleased_versions:{matches:[],regexp:/^unreleased\s+versions$/i,select:function(e){return Object.keys(n).reduce((function(t,r){var n=L(r,e);if(!n)return t;var i=n.versions.filter((function(e){return-1===n.released.indexOf(e)}));return i=i.map(v(n.name)),t.concat(i)}),[])}},unreleased_electron_versions:{matches:[],regexp:/^unreleased\s+electron\s+versions?$/i,select:function(){return[]}},unreleased_browser_versions:{matches:["browser"],regexp:/^unreleased\s+(\w+)\s+versions?$/i,select:function(e,t){var r=D(t.browser,e);return r.versions.filter((function(e){return-1===r.released.indexOf(e)})).map(v(r.name))}},last_years:{matches:["years"],regexp:/^last\s+(\d*.?\d+)\s+years?$/i,select:function(e,t){return R(Date.now()-c*t.years,e)}},since_y:{matches:["year"],regexp:/^since (\d+)$/i,select:J},since_y_m:{matches:["year","month"],regexp:/^since (\d+)-(\d+)$/i,select:J},since_y_m_d:{matches:["year","month","day"],regexp:/^since (\d+)-(\d+)-(\d+)$/i,select:J},popularity:{matches:["sign","popularity"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%$/,select:function(e,t){var r=parseFloat(t.popularity),n=V.usage.global;return Object.keys(n).reduce((function(e,i){return">"===t.sign?n[i]>r&&e.push(i):"<"===t.sign?n[i]<r&&e.push(i):"<="===t.sign?n[i]<=r&&e.push(i):n[i]>=r&&e.push(i),e}),[])}},popularity_in_my_stats:{matches:["sign","popularity"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+my\s+stats$/,select:function(e,t){var r=parseFloat(t.popularity);if(!e.customUsage)throw new a("Custom usage statistics was not provided");var n=e.customUsage;return Object.keys(n).reduce((function(e,i){var o=n[i];return null==o||(">"===t.sign?o>r&&e.push(i):"<"===t.sign?o<r&&e.push(i):"<="===t.sign?o<=r&&e.push(i):o>=r&&e.push(i)),e}),[])}},popularity_in_config_stats:{matches:["sign","popularity","config"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+(\S+)\s+stats$/,select:function(e,t){var r=parseFloat(t.popularity),n=u.loadStat(e,t.config,V.data);if(n)for(var i in e.customUsage={},n)S(e.customUsage,i,n[i]);if(!e.customUsage)throw new a("Custom usage statistics was not provided");var o=e.customUsage;return Object.keys(o).reduce((function(e,n){var i=o[n];return null==i||(">"===t.sign?i>r&&e.push(n):"<"===t.sign?i<r&&e.push(n):"<="===t.sign?i<=r&&e.push(n):i>=r&&e.push(n)),e}),[])}},popularity_in_place:{matches:["sign","popularity","place"],regexp:/^(>=?|<=?)\s*(\d+|\d+\.\d+|\.\d+)%\s+in\s+((alt-)?\w\w)$/,select:function(e,t){var r=parseFloat(t.popularity),n=t.place;n=2===n.length?n.toUpperCase():n.toLowerCase(),u.loadCountry(V.usage,n,V.data);var i=V.usage[n];return Object.keys(i).reduce((function(e,n){var o=i[n];return null==o||(">"===t.sign?o>r&&e.push(n):"<"===t.sign?o<r&&e.push(n):"<="===t.sign?o<=r&&e.push(n):o>=r&&e.push(n)),e}),[])}},cover:{matches:["coverage"],regexp:/^cover\s+(\d+|\d+\.\d+|\.\d+)%$/i,select:W},cover_in:{matches:["coverage","place"],regexp:/^cover\s+(\d+|\d+\.\d+|\.\d+)%\s+in\s+(my\s+stats|(alt-)?\w\w)$/i,select:W},supports:{matches:["feature"],regexp:/^supports\s+([\w-]+)$/,select:function(e,t){u.loadFeature(V.cache,t.feature);var r=V.cache[t.feature],n=[];for(var i in r){var o=L(i,e),s=e.mobileToDesktop&&i in V.desktopNames&&j(r[i][o.released.slice(-1)[0]]);o.versions.forEach((function(e){var t=r[i][e];void 0===t&&s&&(t=r[V.desktopNames[i]][e]),j(t)&&n.push(i+" "+e)}))}return n}},electron_range:{matches:["from","to"],regexp:/^electron\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(e,t){var r=m(t.from),n=m(t.to),i=parseFloat(t.from),o=parseFloat(t.to);if(!s[r])throw new a("Unknown version "+i+" of electron");if(!s[n])throw new a("Unknown version "+o+" of electron");return Object.keys(s).filter((function(e){var t=parseFloat(e);return t>=i&&t<=o})).map((function(e){return"chrome "+s[e]}))}},node_range:{matches:["from","to"],regexp:/^node\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(e,t){return V.nodeVersions.filter(T(">=",t.from)).filter(T("<=",t.to)).map((function(e){return"node "+e}))}},browser_range:{matches:["browser","from","to"],regexp:/^(\w+)\s+([\d.]+)\s*-\s*([\d.]+)$/i,select:function(e,t){var r=D(t.browser,e),n=parseFloat(P(r,t.from)||t.from),i=parseFloat(P(r,t.to)||t.to);function o(e){var t=parseFloat(e);return t>=n&&t<=i}return r.released.filter(o).map(v(r.name))}},electron_ray:{matches:["sign","version"],regexp:/^electron\s*(>=?|<=?)\s*([\d.]+)$/i,select:function(e,t){var r=m(t.version);return Object.keys(s).filter(w(t.sign,r)).map((function(e){return"chrome "+s[e]}))}},node_ray:{matches:["sign","version"],regexp:/^node\s*(>=?|<=?)\s*([\d.]+)$/i,select:function(e,t){return V.nodeVersions.filter(C(t.sign,t.version)).map((function(e){return"node "+e}))}},browser_ray:{matches:["browser","sign","version"],regexp:/^(\w+)\s*(>=?|<=?)\s*([\d.]+)$/,select:function(e,t){var r=t.version,n=D(t.browser,e),i=V.versionAliases[n.name][r];return i&&(r=i),n.released.filter(w(t.sign,r)).map((function(e){return n.name+" "+e}))}},firefox_esr:{matches:[],regexp:/^(firefox|ff|fx)\s+esr$/i,select:function(){return["firefox 102","firefox 115"]}},opera_mini_all:{matches:[],regexp:/(operamini|op_mini)\s+all/i,select:function(){return["op_mini all"]}},electron_version:{matches:["version"],regexp:/^electron\s+([\d.]+)$/i,select:function(e,t){var r=m(t.version),n=s[r];if(!n)throw new a("Unknown version "+t.version+" of electron");return["chrome "+n]}},node_major_version:{matches:["version"],regexp:/^node\s+(\d+)$/i,select:$},node_minor_version:{matches:["version"],regexp:/^node\s+(\d+\.\d+)$/i,select:$},node_patch_version:{matches:["version"],regexp:/^node\s+(\d+\.\d+\.\d+)$/i,select:$},current_node:{matches:[],regexp:/^current\s+node$/i,select:function(e){return[u.currentNode(H,e)]}},maintained_node:{matches:[],regexp:/^maintained\s+node\s+versions$/i,select:function(e){var t=Date.now(),r=Object.keys(i).filter((function(e){return t<Date.parse(i[e].end)&&t>Date.parse(i[e].start)&&f(e)})).map((function(e){return"node "+e.slice(1)}));return H(r,e)}},phantomjs_1_9:{matches:[],regexp:/^phantomjs\s+1.9$/i,select:function(){return["safari 5"]}},phantomjs_2_1:{matches:[],regexp:/^phantomjs\s+2.1$/i,select:function(){return["safari 6"]}},browser_version:{matches:["browser","version"],regexp:/^(\w+)\s+(tp|[\d.]+)$/i,select:function(e,t){var r=t.version;/^tp$/i.test(r)&&(r="TP");var n=D(t.browser,e),i=P(n,r);if(i)r=i;else{if(i=-1===r.indexOf(".")?r+".0":r.replace(/\.0$/,""),i=P(n,i),!i){if(e.ignoreUnknownVersions)return[];throw new a("Unknown version "+r+" of "+t.browser)}r=i}return[n.name+" "+r]}},browserslist_config:{matches:[],regexp:/^browserslist config$/i,select:function(e){return V(void 0,e)}},extends:{matches:["config"],regexp:/^extends (.+)$/i,select:function(e,t){return H(u.loadQueries(e,t.config),e)}},defaults:{matches:[],regexp:/^defaults$/i,select:function(e){return H(V.defaults,e)}},dead:{matches:[],regexp:/^dead$/i,select:function(e){var t=["Baidu >= 0","ie <= 11","ie_mob <= 11","bb <= 10","op_mob <= 12.1","samsung 4"];return H(t,e)}},unknown:{matches:[],regexp:/^(\w+)$/i,select:function(e,t){throw L(t.query,e)?new a("Specify versions in Browserslist query for browser "+t.query):B(t.query)}}};(function(){for(var e in n){var t=n[e];V.data[e]={name:e,versions:g(n[e].versions),released:g(n[e].versions.slice(0,-3)),releaseDate:n[e].release_date},S(V.usage.global,e,t.usage_global),V.versionAliases[e]={};for(var i=0;i<t.versions.length;i++){var o=t.versions[i];if(o&&-1!==o.indexOf("-"))for(var s=o.split("-"),a=0;a<s.length;a++)V.versionAliases[e][s[a]]=o}}V.nodeVersions=r.map((function(e){return e.version}))})(),t.exports=V}}),require_compat_dotall_s_transform=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/transforms/compat-dotall-s-transform.js"(e,t){init_polyfills(),t.exports={_hasUFlag:!1,shouldRun:function(e){var t=e.flags.includes("s");return!!t&&(e.flags=e.flags.replace("s",""),this._hasUFlag=e.flags.includes("u"),!0)},Char:function(e){var t=e.node;if("meta"===t.kind&&"."===t.value){var r="\\uFFFF",n="￿";this._hasUFlag&&(r="\\u{10FFFF}",n="􏿿"),e.replace({type:"CharacterClass",expressions:[{type:"ClassRange",from:{type:"Char",value:"\\0",kind:"decimal",symbol:"\0"},to:{type:"Char",value:r,kind:"unicode",symbol:n}}]})}}}}}),require_compat_named_capturing_groups_transform=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/transforms/compat-named-capturing-groups-transform.js"(e,t){init_polyfills(),t.exports={_groupNames:{},init:function(){this._groupNames={}},getExtra:function(){return this._groupNames},Group:function(e){var t=e.node;t.name&&(this._groupNames[t.name]=t.number,delete t.name,delete t.nameRaw)},Backreference:function(e){var t=e.node;"name"===t.kind&&(t.kind="number",t.reference=t.number,delete t.referenceRaw)}}}}),require_compat_x_flag_transform=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/transforms/compat-x-flag-transform.js"(e,t){init_polyfills(),t.exports={RegExp:function(e){var t=e.node;t.flags.includes("x")&&(t.flags=t.flags.replace("x",""))}}}}),require_transforms=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/transforms/index.js"(e,t){init_polyfills(),t.exports={dotAll:require_compat_dotall_s_transform(),namedCapturingGroups:require_compat_named_capturing_groups_transform(),xFlag:require_compat_x_flag_transform()}}}),require_generator=__commonJS({"node_modules/regexp-tree/dist/generator/index.js"(e,t){function r(e){return e?n[e.type](e):""}init_polyfills();var n={RegExp:function(e){return"/"+r(e.body)+"/"+e.flags},Alternative:function(e){return(e.expressions||[]).map(r).join("")},Disjunction:function(e){return r(e.left)+"|"+r(e.right)},Group:function(e){var t=r(e.expression);return e.capturing?e.name?"(?<"+(e.nameRaw||e.name)+">"+t+")":"("+t+")":"(?:"+t+")"},Backreference:function(e){switch(e.kind){case"number":return"\\"+e.reference;case"name":return"\\k<"+(e.referenceRaw||e.reference)+">";default:throw new TypeError("Unknown Backreference kind: "+e.kind)}},Assertion:function(e){switch(e.kind){case"^":case"$":case"\\b":case"\\B":return e.kind;case"Lookahead":var t=r(e.assertion);return e.negative?"(?!"+t+")":"(?="+t+")";case"Lookbehind":var n=r(e.assertion);return e.negative?"(?<!"+n+")":"(?<="+n+")";default:throw new TypeError("Unknown Assertion kind: "+e.kind)}},CharacterClass:function(e){var t=e.expressions.map(r).join("");return e.negative?"[^"+t+"]":"["+t+"]"},ClassRange:function(e){return r(e.from)+"-"+r(e.to)},Repetition:function(e){return""+r(e.expression)+r(e.quantifier)},Quantifier:function(e){var t=void 0,r=e.greedy?"":"?";switch(e.kind){case"+":case"?":case"*":t=e.kind;break;case"Range":t=e.from===e.to?"{"+e.from+"}":e.to?"{"+e.from+","+e.to+"}":"{"+e.from+",}";break;default:throw new TypeError("Unknown Quantifier kind: "+e.kind)}return""+t+r},Char:function(e){var t=e.value;switch(e.kind){case"simple":return e.escaped?"\\"+t:t;case"hex":case"unicode":case"oct":case"decimal":case"control":case"meta":return t;default:throw new TypeError("Unknown Char kind: "+e.kind)}},UnicodeProperty:function(e){var t=e.negative?"P":"p",r=void 0;return r=e.shorthand||e.binary?"":e.name+"=","\\"+t+"{"+r+e.value+"}"}};t.exports={generate:r}}}),require_parser_unicode_properties=__commonJS({"node_modules/regexp-tree/dist/parser/unicode/parser-unicode-properties.js"(e,t){init_polyfills();var r={General_Category:"gc",Script:"sc",Script_Extensions:"scx"},n=c(r),i={ASCII:"ASCII",ASCII_Hex_Digit:"AHex",Alphabetic:"Alpha",Any:"Any",Assigned:"Assigned",Bidi_Control:"Bidi_C",Bidi_Mirrored:"Bidi_M",Case_Ignorable:"CI",Cased:"Cased",Changes_When_Casefolded:"CWCF",Changes_When_Casemapped:"CWCM",Changes_When_Lowercased:"CWL",Changes_When_NFKC_Casefolded:"CWKCF",Changes_When_Titlecased:"CWT",Changes_When_Uppercased:"CWU",Dash:"Dash",Default_Ignorable_Code_Point:"DI",Deprecated:"Dep",Diacritic:"Dia",Emoji:"Emoji",Emoji_Component:"Emoji_Component",Emoji_Modifier:"Emoji_Modifier",Emoji_Modifier_Base:"Emoji_Modifier_Base",Emoji_Presentation:"Emoji_Presentation",Extended_Pictographic:"Extended_Pictographic",Extender:"Ext",Grapheme_Base:"Gr_Base",Grapheme_Extend:"Gr_Ext",Hex_Digit:"Hex",IDS_Binary_Operator:"IDSB",IDS_Trinary_Operator:"IDST",ID_Continue:"IDC",ID_Start:"IDS",Ideographic:"Ideo",Join_Control:"Join_C",Logical_Order_Exception:"LOE",Lowercase:"Lower",Math:"Math",Noncharacter_Code_Point:"NChar",Pattern_Syntax:"Pat_Syn",Pattern_White_Space:"Pat_WS",Quotation_Mark:"QMark",Radical:"Radical",Regional_Indicator:"RI",Sentence_Terminal:"STerm",Soft_Dotted:"SD",Terminal_Punctuation:"Term",Unified_Ideograph:"UIdeo",Uppercase:"Upper",Variation_Selector:"VS",White_Space:"space",XID_Continue:"XIDC",XID_Start:"XIDS"},o=c(i),s={Cased_Letter:"LC",Close_Punctuation:"Pe",Connector_Punctuation:"Pc",Control:["Cc","cntrl"],Currency_Symbol:"Sc",Dash_Punctuation:"Pd",Decimal_Number:["Nd","digit"],Enclosing_Mark:"Me",Final_Punctuation:"Pf",Format:"Cf",Initial_Punctuation:"Pi",Letter:"L",Letter_Number:"Nl",Line_Separator:"Zl",Lowercase_Letter:"Ll",Mark:["M","Combining_Mark"],Math_Symbol:"Sm",Modifier_Letter:"Lm",Modifier_Symbol:"Sk",Nonspacing_Mark:"Mn",Number:"N",Open_Punctuation:"Ps",Other:"C",Other_Letter:"Lo",Other_Number:"No",Other_Punctuation:"Po",Other_Symbol:"So",Paragraph_Separator:"Zp",Private_Use:"Co",Punctuation:["P","punct"],Separator:"Z",Space_Separator:"Zs",Spacing_Mark:"Mc",Surrogate:"Cs",Symbol:"S",Titlecase_Letter:"Lt",Unassigned:"Cn",Uppercase_Letter:"Lu"},a=c(s),l={Adlam:"Adlm",Ahom:"Ahom",Anatolian_Hieroglyphs:"Hluw",Arabic:"Arab",Armenian:"Armn",Avestan:"Avst",Balinese:"Bali",Bamum:"Bamu",Bassa_Vah:"Bass",Batak:"Batk",Bengali:"Beng",Bhaiksuki:"Bhks",Bopomofo:"Bopo",Brahmi:"Brah",Braille:"Brai",Buginese:"Bugi",Buhid:"Buhd",Canadian_Aboriginal:"Cans",Carian:"Cari",Caucasian_Albanian:"Aghb",Chakma:"Cakm",Cham:"Cham",Cherokee:"Cher",Common:"Zyyy",Coptic:["Copt","Qaac"],Cuneiform:"Xsux",Cypriot:"Cprt",Cyrillic:"Cyrl",Deseret:"Dsrt",Devanagari:"Deva",Dogra:"Dogr",Duployan:"Dupl",Egyptian_Hieroglyphs:"Egyp",Elbasan:"Elba",Ethiopic:"Ethi",Georgian:"Geor",Glagolitic:"Glag",Gothic:"Goth",Grantha:"Gran",Greek:"Grek",Gujarati:"Gujr",Gunjala_Gondi:"Gong",Gurmukhi:"Guru",Han:"Hani",Hangul:"Hang",Hanifi_Rohingya:"Rohg",Hanunoo:"Hano",Hatran:"Hatr",Hebrew:"Hebr",Hiragana:"Hira",Imperial_Aramaic:"Armi",Inherited:["Zinh","Qaai"],Inscriptional_Pahlavi:"Phli",Inscriptional_Parthian:"Prti",Javanese:"Java",Kaithi:"Kthi",Kannada:"Knda",Katakana:"Kana",Kayah_Li:"Kali",Kharoshthi:"Khar",Khmer:"Khmr",Khojki:"Khoj",Khudawadi:"Sind",Lao:"Laoo",Latin:"Latn",Lepcha:"Lepc",Limbu:"Limb",Linear_A:"Lina",Linear_B:"Linb",Lisu:"Lisu",Lycian:"Lyci",Lydian:"Lydi",Mahajani:"Mahj",Makasar:"Maka",Malayalam:"Mlym",Mandaic:"Mand",Manichaean:"Mani",Marchen:"Marc",Medefaidrin:"Medf",Masaram_Gondi:"Gonm",Meetei_Mayek:"Mtei",Mende_Kikakui:"Mend",Meroitic_Cursive:"Merc",Meroitic_Hieroglyphs:"Mero",Miao:"Plrd",Modi:"Modi",Mongolian:"Mong",Mro:"Mroo",Multani:"Mult",Myanmar:"Mymr",Nabataean:"Nbat",New_Tai_Lue:"Talu",Newa:"Newa",Nko:"Nkoo",Nushu:"Nshu",Ogham:"Ogam",Ol_Chiki:"Olck",Old_Hungarian:"Hung",Old_Italic:"Ital",Old_North_Arabian:"Narb",Old_Permic:"Perm",Old_Persian:"Xpeo",Old_Sogdian:"Sogo",Old_South_Arabian:"Sarb",Old_Turkic:"Orkh",Oriya:"Orya",Osage:"Osge",Osmanya:"Osma",Pahawh_Hmong:"Hmng",Palmyrene:"Palm",Pau_Cin_Hau:"Pauc",Phags_Pa:"Phag",Phoenician:"Phnx",Psalter_Pahlavi:"Phlp",Rejang:"Rjng",Runic:"Runr",Samaritan:"Samr",Saurashtra:"Saur",Sharada:"Shrd",Shavian:"Shaw",Siddham:"Sidd",SignWriting:"Sgnw",Sinhala:"Sinh",Sogdian:"Sogd",Sora_Sompeng:"Sora",Soyombo:"Soyo",Sundanese:"Sund",Syloti_Nagri:"Sylo",Syriac:"Syrc",Tagalog:"Tglg",Tagbanwa:"Tagb",Tai_Le:"Tale",Tai_Tham:"Lana",Tai_Viet:"Tavt",Takri:"Takr",Tamil:"Taml",Tangut:"Tang",Telugu:"Telu",Thaana:"Thaa",Thai:"Thai",Tibetan:"Tibt",Tifinagh:"Tfng",Tirhuta:"Tirh",Ugaritic:"Ugar",Vai:"Vaii",Warang_Citi:"Wara",Yi:"Yiii",Zanabazar_Square:"Zanb"},u=c(l);function c(e){var t={};for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];if(Array.isArray(n))for(var i=0;i<n.length;i++)t[n[i]]=r;else t[n]=r}return t}function d(e){return r.hasOwnProperty(e)||n.hasOwnProperty(e)||i.hasOwnProperty(e)||o.hasOwnProperty(e)}function h(e,t){return f(e)?m(t):!!g(e)&&v(t)}function p(e){return n.hasOwnProperty(e)||o.hasOwnProperty(e)}function f(e){return"General_Category"===e||"gc"==e}function g(e){return"Script"===e||"Script_Extensions"===e||"sc"===e||"scx"===e}function m(e){return s.hasOwnProperty(e)||a.hasOwnProperty(e)}function v(e){return l.hasOwnProperty(e)||u.hasOwnProperty(e)}function y(e){return i.hasOwnProperty(e)||o.hasOwnProperty(e)}function _(e){return n.hasOwnProperty(e)?n[e]:o.hasOwnProperty(e)?o[e]:null}function b(e){return a.hasOwnProperty(e)?a[e]:u.hasOwnProperty(e)?u[e]:o.hasOwnProperty(e)?o[e]:null}t.exports={isAlias:p,isValidName:d,isValidValue:h,isGeneralCategoryValue:m,isScriptCategoryValue:v,isBinaryPropertyName:y,getCanonicalName:_,getCanonicalValue:b,NON_BINARY_PROP_NAMES_TO_ALIASES:r,NON_BINARY_ALIASES_TO_PROP_NAMES:n,BINARY_PROP_NAMES_TO_ALIASES:i,BINARY_ALIASES_TO_PROP_NAMES:o,GENERAL_CATEGORY_VALUE_TO_ALIASES:s,GENERAL_CATEGORY_VALUE_ALIASES_TO_VALUES:a,SCRIPT_VALUE_TO_ALIASES:l,SCRIPT_VALUE_ALIASES_TO_VALUE:u}}}),require_regexp_tree=__commonJS({"node_modules/regexp-tree/dist/parser/generated/regexp-tree.js"(e,t){init_polyfills();var r=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(r.push(s.value),t&&r.length===t)break}catch(l){i=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var i=void 0,o={},s=void 0,a=void 0;function l(e,t){return o.options.captureLocations?e&&t?{startOffset:e.startOffset,endOffset:t.endOffset,startLine:e.startLine,endLine:t.endLine,startColumn:e.startColumn,endColumn:t.endColumn}:e||t:null}var u="$",c=[[-1,1,function(e,t){a=l(t,t),s=e}],[0,4,function(e,t,r,n,i,o,u,c){a=l(i,c),s=B({type:"RegExp",body:t,flags:k(n)},F(i,c||u))}],[1,1,function(e,t){a=l(t,t),s=e}],[1,0,function(){a=null,s=""}],[2,1,function(e,t){a=l(t,t),s=e}],[2,2,function(e,t,r,n){a=l(r,n),s=e+t}],[3,1,function(e,t){a=l(t,t),s=e}],[4,1,function(e,t){a=l(t,t),s=e}],[4,3,function(e,t,r,n,i,o){a=l(n,o);var u=null;i&&(u=F(n||i,o||i)),s=B({type:"Disjunction",left:e,right:r},u)}],[5,1,function(e,t){a=l(t,t),s=0!==e.length?1===e.length?B(e[0],a):B({type:"Alternative",expressions:e},a):null}],[6,0,function(){a=null,s=[]}],[6,2,function(e,t,r,n){a=l(r,n),s=e.concat(t)}],[7,1,function(e,t){a=l(t,t),s=B(Object.assign({type:"Assertion"},e),a)}],[7,2,function(e,t,r,n){a=l(r,n),s=e,t&&(s=B({type:"Repetition",expression:e,quantifier:t},a))}],[8,1,function(e,t){a=l(t,t),s={kind:"^"}}],[8,1,function(e,t){a=l(t,t),s={kind:"$"}}],[8,1,function(e,t){a=l(t,t),s={kind:"\\b"}}],[8,1,function(e,t){a=l(t,t),s={kind:"\\B"}}],[8,3,function(e,t,r,n,i,o){a=l(n,o),s={kind:"Lookahead",assertion:t}}],[8,3,function(e,t,r,n,i,o){a=l(n,o),s={kind:"Lookahead",negative:!0,assertion:t}}],[8,3,function(e,t,r,n,i,o){a=l(n,o),s={kind:"Lookbehind",assertion:t}}],[8,3,function(e,t,r,n,i,o){a=l(n,o),s={kind:"Lookbehind",negative:!0,assertion:t}}],[9,1,function(e,t){a=l(t,t),s=e}],[9,1,function(e,t){a=l(t,t),s=e}],[9,1,function(e,t){a=l(t,t),s=e}],[10,1,function(e,t){a=l(t,t),s=x(e,"simple",a)}],[10,1,function(e,t){a=l(t,t),s=x(e.slice(1),"simple",a),s.escaped=!0}],[10,1,function(e,t){a=l(t,t),s=x(e,"unicode",a),s.isSurrogatePair=!0}],[10,1,function(e,t){a=l(t,t),s=x(e,"unicode",a)}],[10,1,function(e,t){a=l(t,t),s=E(e,a)}],[10,1,function(e,t){a=l(t,t),s=x(e,"control",a)}],[10,1,function(e,t){a=l(t,t),s=x(e,"hex",a)}],[10,1,function(e,t){a=l(t,t),s=x(e,"oct",a)}],[10,1,function(e,t){a=l(t,t),s=O(e,a)}],[10,1,function(e,t){a=l(t,t),s=x(e,"meta",a)}],[10,1,function(e,t){a=l(t,t),s=x(e,"meta",a)}],[10,1,function(e,t){a=l(t,t),s=D(e,t)}],[11,1,function(e,t){a=l(t,t),s=e}],[11,0],[12,1,function(e,t){a=l(t,t),s=e}],[12,2,function(e,t,r,n){a=l(r,n),e.greedy=!1,s=e}],[13,1,function(e,t){a=l(t,t),s=B({type:"Quantifier",kind:e,greedy:!0},a)}],[13,1,function(e,t){a=l(t,t),s=B({type:"Quantifier",kind:e,greedy:!0},a)}],[13,1,function(e,t){a=l(t,t),s=B({type:"Quantifier",kind:e,greedy:!0},a)}],[13,1,function(e,t){a=l(t,t);var r=w(e);s=B({type:"Quantifier",kind:"Range",from:r[0],to:r[0],greedy:!0},a)}],[13,1,function(e,t){a=l(t,t),s=B({type:"Quantifier",kind:"Range",from:w(e)[0],greedy:!0},a)}],[13,1,function(e,t){a=l(t,t);var r=w(e);s=B({type:"Quantifier",kind:"Range",from:r[0],to:r[1],greedy:!0},a)}],[14,1,function(e,t){a=l(t,t),s=e}],[14,1,function(e,t){a=l(t,t),s=e}],[15,3,function(e,t,r,n,i,u){a=l(n,u);var c=String(e),d=N(c);if(!o.options.allowGroupNameDuplicates&&b.hasOwnProperty(d))throw new SyntaxError('Duplicate of the named group "'+d+'".');b[d]=e.groupNumber,s=B({type:"Group",capturing:!0,name:d,nameRaw:c,number:e.groupNumber,expression:t},a)}],[15,3,function(e,t,r,n,i,o){a=l(n,o),s=B({type:"Group",capturing:!0,number:e.groupNumber,expression:t},a)}],[16,3,function(e,t,r,n,i,o){a=l(n,o),s=B({type:"Group",capturing:!1,expression:t},a)}],[17,3,function(e,t,r,n,i,o){a=l(n,o),s=B({type:"CharacterClass",negative:!0,expressions:t},a)}],[17,3,function(e,t,r,n,i,o){a=l(n,o),s=B({type:"CharacterClass",expressions:t},a)}],[18,0,function(){a=null,s=[]}],[18,1,function(e,t){a=l(t,t),s=e}],[19,1,function(e,t){a=l(t,t),s=[e]}],[19,2,function(e,t,r,n){a=l(r,n),s=[e].concat(t)}],[19,4,function(e,t,r,n,i,o,u,c){a=l(i,c),C(e,r),s=[B({type:"ClassRange",from:e,to:r},F(i,u))],n&&(s=s.concat(n))}],[20,1,function(e,t){a=l(t,t),s=e}],[20,2,function(e,t,r,n){a=l(r,n),s=[e].concat(t)}],[20,4,function(e,t,r,n,i,o,u,c){a=l(i,c),C(e,r),s=[B({type:"ClassRange",from:e,to:r},F(i,u))],n&&(s=s.concat(n))}],[21,1,function(e,t){a=l(t,t),s=x(e,"simple",a)}],[21,1,function(e,t){a=l(t,t),s=e}],[22,1,function(e,t){a=l(t,t),s=e}],[22,1,function(e,t){a=l(t,t),s=x(e,"meta",a)}]],d={SLASH:"23",CHAR:"24",BAR:"25",BOS:"26",EOS:"27",ESC_b:"28",ESC_B:"29",POS_LA_ASSERT:"30",R_PAREN:"31",NEG_LA_ASSERT:"32",POS_LB_ASSERT:"33",NEG_LB_ASSERT:"34",ESC_CHAR:"35",U_CODE_SURROGATE:"36",U_CODE:"37",U_PROP_VALUE_EXP:"38",CTRL_CH:"39",HEX_CODE:"40",OCT_CODE:"41",DEC_CODE:"42",META_CHAR:"43",ANY:"44",NAMED_GROUP_REF:"45",Q_MARK:"46",STAR:"47",PLUS:"48",RANGE_EXACT:"49",RANGE_OPEN:"50",RANGE_CLOSED:"51",NAMED_CAPTURE_GROUP:"52",L_PAREN:"53",NON_CAPTURE_GROUP:"54",NEG_CLASS:"55",R_BRACKET:"56",L_BRACKET:"57",DASH:"58",$:"59"},h=[{0:1,23:"s2"},{59:"acc"},{3:3,4:4,5:5,6:6,23:"r10",24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"s7"},{23:"r6",25:"s12"},{23:"r7",25:"r7",31:"r7"},{7:14,8:15,9:16,10:25,14:27,15:42,16:43,17:26,23:"r9",24:"s28",25:"r9",26:"s17",27:"s18",28:"s19",29:"s20",30:"s21",31:"r9",32:"s22",33:"s23",34:"s24",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",52:"s44",53:"s45",54:"s46",55:"s40",57:"s41"},{1:8,2:9,24:"s10",59:"r3"},{59:"r1"},{24:"s11",59:"r2"},{24:"r4",59:"r4"},{24:"r5",59:"r5"},{5:13,6:6,23:"r10",24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r8",25:"r8",31:"r8"},{23:"r11",24:"r11",25:"r11",26:"r11",27:"r11",28:"r11",29:"r11",30:"r11",31:"r11",32:"r11",33:"r11",34:"r11",35:"r11",36:"r11",37:"r11",38:"r11",39:"r11",40:"r11",41:"r11",42:"r11",43:"r11",44:"r11",45:"r11",52:"r11",53:"r11",54:"r11",55:"r11",57:"r11"},{23:"r12",24:"r12",25:"r12",26:"r12",27:"r12",28:"r12",29:"r12",30:"r12",31:"r12",32:"r12",33:"r12",34:"r12",35:"r12",36:"r12",37:"r12",38:"r12",39:"r12",40:"r12",41:"r12",42:"r12",43:"r12",44:"r12",45:"r12",52:"r12",53:"r12",54:"r12",55:"r12",57:"r12"},{11:47,12:48,13:49,23:"r38",24:"r38",25:"r38",26:"r38",27:"r38",28:"r38",29:"r38",30:"r38",31:"r38",32:"r38",33:"r38",34:"r38",35:"r38",36:"r38",37:"r38",38:"r38",39:"r38",40:"r38",41:"r38",42:"r38",43:"r38",44:"r38",45:"r38",46:"s52",47:"s50",48:"s51",49:"s53",50:"s54",51:"s55",52:"r38",53:"r38",54:"r38",55:"r38",57:"r38"},{23:"r14",24:"r14",25:"r14",26:"r14",27:"r14",28:"r14",29:"r14",30:"r14",31:"r14",32:"r14",33:"r14",34:"r14",35:"r14",36:"r14",37:"r14",38:"r14",39:"r14",40:"r14",41:"r14",42:"r14",43:"r14",44:"r14",45:"r14",52:"r14",53:"r14",54:"r14",55:"r14",57:"r14"},{23:"r15",24:"r15",25:"r15",26:"r15",27:"r15",28:"r15",29:"r15",30:"r15",31:"r15",32:"r15",33:"r15",34:"r15",35:"r15",36:"r15",37:"r15",38:"r15",39:"r15",40:"r15",41:"r15",42:"r15",43:"r15",44:"r15",45:"r15",52:"r15",53:"r15",54:"r15",55:"r15",57:"r15"},{23:"r16",24:"r16",25:"r16",26:"r16",27:"r16",28:"r16",29:"r16",30:"r16",31:"r16",32:"r16",33:"r16",34:"r16",35:"r16",36:"r16",37:"r16",38:"r16",39:"r16",40:"r16",41:"r16",42:"r16",43:"r16",44:"r16",45:"r16",52:"r16",53:"r16",54:"r16",55:"r16",57:"r16"},{23:"r17",24:"r17",25:"r17",26:"r17",27:"r17",28:"r17",29:"r17",30:"r17",31:"r17",32:"r17",33:"r17",34:"r17",35:"r17",36:"r17",37:"r17",38:"r17",39:"r17",40:"r17",41:"r17",42:"r17",43:"r17",44:"r17",45:"r17",52:"r17",53:"r17",54:"r17",55:"r17",57:"r17"},{4:57,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:59,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:61,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:63,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r22",24:"r22",25:"r22",26:"r22",27:"r22",28:"r22",29:"r22",30:"r22",31:"r22",32:"r22",33:"r22",34:"r22",35:"r22",36:"r22",37:"r22",38:"r22",39:"r22",40:"r22",41:"r22",42:"r22",43:"r22",44:"r22",45:"r22",46:"r22",47:"r22",48:"r22",49:"r22",50:"r22",51:"r22",52:"r22",53:"r22",54:"r22",55:"r22",57:"r22"},{23:"r23",24:"r23",25:"r23",26:"r23",27:"r23",28:"r23",29:"r23",30:"r23",31:"r23",32:"r23",33:"r23",34:"r23",35:"r23",36:"r23",37:"r23",38:"r23",39:"r23",40:"r23",41:"r23",42:"r23",43:"r23",44:"r23",45:"r23",46:"r23",47:"r23",48:"r23",49:"r23",50:"r23",51:"r23",52:"r23",53:"r23",54:"r23",55:"r23",57:"r23"},{23:"r24",24:"r24",25:"r24",26:"r24",27:"r24",28:"r24",29:"r24",30:"r24",31:"r24",32:"r24",33:"r24",34:"r24",35:"r24",36:"r24",37:"r24",38:"r24",39:"r24",40:"r24",41:"r24",42:"r24",43:"r24",44:"r24",45:"r24",46:"r24",47:"r24",48:"r24",49:"r24",50:"r24",51:"r24",52:"r24",53:"r24",54:"r24",55:"r24",57:"r24"},{23:"r25",24:"r25",25:"r25",26:"r25",27:"r25",28:"r25",29:"r25",30:"r25",31:"r25",32:"r25",33:"r25",34:"r25",35:"r25",36:"r25",37:"r25",38:"r25",39:"r25",40:"r25",41:"r25",42:"r25",43:"r25",44:"r25",45:"r25",46:"r25",47:"r25",48:"r25",49:"r25",50:"r25",51:"r25",52:"r25",53:"r25",54:"r25",55:"r25",56:"r25",57:"r25",58:"r25"},{23:"r26",24:"r26",25:"r26",26:"r26",27:"r26",28:"r26",29:"r26",30:"r26",31:"r26",32:"r26",33:"r26",34:"r26",35:"r26",36:"r26",37:"r26",38:"r26",39:"r26",40:"r26",41:"r26",42:"r26",43:"r26",44:"r26",45:"r26",46:"r26",47:"r26",48:"r26",49:"r26",50:"r26",51:"r26",52:"r26",53:"r26",54:"r26",55:"r26",56:"r26",57:"r26",58:"r26"},{23:"r27",24:"r27",25:"r27",26:"r27",27:"r27",28:"r27",29:"r27",30:"r27",31:"r27",32:"r27",33:"r27",34:"r27",35:"r27",36:"r27",37:"r27",38:"r27",39:"r27",40:"r27",41:"r27",42:"r27",43:"r27",44:"r27",45:"r27",46:"r27",47:"r27",48:"r27",49:"r27",50:"r27",51:"r27",52:"r27",53:"r27",54:"r27",55:"r27",56:"r27",57:"r27",58:"r27"},{23:"r28",24:"r28",25:"r28",26:"r28",27:"r28",28:"r28",29:"r28",30:"r28",31:"r28",32:"r28",33:"r28",34:"r28",35:"r28",36:"r28",37:"r28",38:"r28",39:"r28",40:"r28",41:"r28",42:"r28",43:"r28",44:"r28",45:"r28",46:"r28",47:"r28",48:"r28",49:"r28",50:"r28",51:"r28",52:"r28",53:"r28",54:"r28",55:"r28",56:"r28",57:"r28",58:"r28"},{23:"r29",24:"r29",25:"r29",26:"r29",27:"r29",28:"r29",29:"r29",30:"r29",31:"r29",32:"r29",33:"r29",34:"r29",35:"r29",36:"r29",37:"r29",38:"r29",39:"r29",40:"r29",41:"r29",42:"r29",43:"r29",44:"r29",45:"r29",46:"r29",47:"r29",48:"r29",49:"r29",50:"r29",51:"r29",52:"r29",53:"r29",54:"r29",55:"r29",56:"r29",57:"r29",58:"r29"},{23:"r30",24:"r30",25:"r30",26:"r30",27:"r30",28:"r30",29:"r30",30:"r30",31:"r30",32:"r30",33:"r30",34:"r30",35:"r30",36:"r30",37:"r30",38:"r30",39:"r30",40:"r30",41:"r30",42:"r30",43:"r30",44:"r30",45:"r30",46:"r30",47:"r30",48:"r30",49:"r30",50:"r30",51:"r30",52:"r30",53:"r30",54:"r30",55:"r30",56:"r30",57:"r30",58:"r30"},{23:"r31",24:"r31",25:"r31",26:"r31",27:"r31",28:"r31",29:"r31",30:"r31",31:"r31",32:"r31",33:"r31",34:"r31",35:"r31",36:"r31",37:"r31",38:"r31",39:"r31",40:"r31",41:"r31",42:"r31",43:"r31",44:"r31",45:"r31",46:"r31",47:"r31",48:"r31",49:"r31",50:"r31",51:"r31",52:"r31",53:"r31",54:"r31",55:"r31",56:"r31",57:"r31",58:"r31"},{23:"r32",24:"r32",25:"r32",26:"r32",27:"r32",28:"r32",29:"r32",30:"r32",31:"r32",32:"r32",33:"r32",34:"r32",35:"r32",36:"r32",37:"r32",38:"r32",39:"r32",40:"r32",41:"r32",42:"r32",43:"r32",44:"r32",45:"r32",46:"r32",47:"r32",48:"r32",49:"r32",50:"r32",51:"r32",52:"r32",53:"r32",54:"r32",55:"r32",56:"r32",57:"r32",58:"r32"},{23:"r33",24:"r33",25:"r33",26:"r33",27:"r33",28:"r33",29:"r33",30:"r33",31:"r33",32:"r33",33:"r33",34:"r33",35:"r33",36:"r33",37:"r33",38:"r33",39:"r33",40:"r33",41:"r33",42:"r33",43:"r33",44:"r33",45:"r33",46:"r33",47:"r33",48:"r33",49:"r33",50:"r33",51:"r33",52:"r33",53:"r33",54:"r33",55:"r33",56:"r33",57:"r33",58:"r33"},{23:"r34",24:"r34",25:"r34",26:"r34",27:"r34",28:"r34",29:"r34",30:"r34",31:"r34",32:"r34",33:"r34",34:"r34",35:"r34",36:"r34",37:"r34",38:"r34",39:"r34",40:"r34",41:"r34",42:"r34",43:"r34",44:"r34",45:"r34",46:"r34",47:"r34",48:"r34",49:"r34",50:"r34",51:"r34",52:"r34",53:"r34",54:"r34",55:"r34",56:"r34",57:"r34",58:"r34"},{23:"r35",24:"r35",25:"r35",26:"r35",27:"r35",28:"r35",29:"r35",30:"r35",31:"r35",32:"r35",33:"r35",34:"r35",35:"r35",36:"r35",37:"r35",38:"r35",39:"r35",40:"r35",41:"r35",42:"r35",43:"r35",44:"r35",45:"r35",46:"r35",47:"r35",48:"r35",49:"r35",50:"r35",51:"r35",52:"r35",53:"r35",54:"r35",55:"r35",56:"r35",57:"r35",58:"r35"},{23:"r36",24:"r36",25:"r36",26:"r36",27:"r36",28:"r36",29:"r36",30:"r36",31:"r36",32:"r36",33:"r36",34:"r36",35:"r36",36:"r36",37:"r36",38:"r36",39:"r36",40:"r36",41:"r36",42:"r36",43:"r36",44:"r36",45:"r36",46:"r36",47:"r36",48:"r36",49:"r36",50:"r36",51:"r36",52:"r36",53:"r36",54:"r36",55:"r36",56:"r36",57:"r36",58:"r36"},{10:70,18:65,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{10:70,18:83,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{23:"r47",24:"r47",25:"r47",26:"r47",27:"r47",28:"r47",29:"r47",30:"r47",31:"r47",32:"r47",33:"r47",34:"r47",35:"r47",36:"r47",37:"r47",38:"r47",39:"r47",40:"r47",41:"r47",42:"r47",43:"r47",44:"r47",45:"r47",46:"r47",47:"r47",48:"r47",49:"r47",50:"r47",51:"r47",52:"r47",53:"r47",54:"r47",55:"r47",57:"r47"},{23:"r48",24:"r48",25:"r48",26:"r48",27:"r48",28:"r48",29:"r48",30:"r48",31:"r48",32:"r48",33:"r48",34:"r48",35:"r48",36:"r48",37:"r48",38:"r48",39:"r48",40:"r48",41:"r48",42:"r48",43:"r48",44:"r48",45:"r48",46:"r48",47:"r48",48:"r48",49:"r48",50:"r48",51:"r48",52:"r48",53:"r48",54:"r48",55:"r48",57:"r48"},{4:85,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:87,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{4:89,5:5,6:6,24:"r10",25:"r10",26:"r10",27:"r10",28:"r10",29:"r10",30:"r10",31:"r10",32:"r10",33:"r10",34:"r10",35:"r10",36:"r10",37:"r10",38:"r10",39:"r10",40:"r10",41:"r10",42:"r10",43:"r10",44:"r10",45:"r10",52:"r10",53:"r10",54:"r10",55:"r10",57:"r10"},{23:"r13",24:"r13",25:"r13",26:"r13",27:"r13",28:"r13",29:"r13",30:"r13",31:"r13",32:"r13",33:"r13",34:"r13",35:"r13",36:"r13",37:"r13",38:"r13",39:"r13",40:"r13",41:"r13",42:"r13",43:"r13",44:"r13",45:"r13",52:"r13",53:"r13",54:"r13",55:"r13",57:"r13"},{23:"r37",24:"r37",25:"r37",26:"r37",27:"r37",28:"r37",29:"r37",30:"r37",31:"r37",32:"r37",33:"r37",34:"r37",35:"r37",36:"r37",37:"r37",38:"r37",39:"r37",40:"r37",41:"r37",42:"r37",43:"r37",44:"r37",45:"r37",52:"r37",53:"r37",54:"r37",55:"r37",57:"r37"},{23:"r39",24:"r39",25:"r39",26:"r39",27:"r39",28:"r39",29:"r39",30:"r39",31:"r39",32:"r39",33:"r39",34:"r39",35:"r39",36:"r39",37:"r39",38:"r39",39:"r39",40:"r39",41:"r39",42:"r39",43:"r39",44:"r39",45:"r39",46:"s56",52:"r39",53:"r39",54:"r39",55:"r39",57:"r39"},{23:"r41",24:"r41",25:"r41",26:"r41",27:"r41",28:"r41",29:"r41",30:"r41",31:"r41",32:"r41",33:"r41",34:"r41",35:"r41",36:"r41",37:"r41",38:"r41",39:"r41",40:"r41",41:"r41",42:"r41",43:"r41",44:"r41",45:"r41",46:"r41",52:"r41",53:"r41",54:"r41",55:"r41",57:"r41"},{23:"r42",24:"r42",25:"r42",26:"r42",27:"r42",28:"r42",29:"r42",30:"r42",31:"r42",32:"r42",33:"r42",34:"r42",35:"r42",36:"r42",37:"r42",38:"r42",39:"r42",40:"r42",41:"r42",42:"r42",43:"r42",44:"r42",45:"r42",46:"r42",52:"r42",53:"r42",54:"r42",55:"r42",57:"r42"},{23:"r43",24:"r43",25:"r43",26:"r43",27:"r43",28:"r43",29:"r43",30:"r43",31:"r43",32:"r43",33:"r43",34:"r43",35:"r43",36:"r43",37:"r43",38:"r43",39:"r43",40:"r43",41:"r43",42:"r43",43:"r43",44:"r43",45:"r43",46:"r43",52:"r43",53:"r43",54:"r43",55:"r43",57:"r43"},{23:"r44",24:"r44",25:"r44",26:"r44",27:"r44",28:"r44",29:"r44",30:"r44",31:"r44",32:"r44",33:"r44",34:"r44",35:"r44",36:"r44",37:"r44",38:"r44",39:"r44",40:"r44",41:"r44",42:"r44",43:"r44",44:"r44",45:"r44",46:"r44",52:"r44",53:"r44",54:"r44",55:"r44",57:"r44"},{23:"r45",24:"r45",25:"r45",26:"r45",27:"r45",28:"r45",29:"r45",30:"r45",31:"r45",32:"r45",33:"r45",34:"r45",35:"r45",36:"r45",37:"r45",38:"r45",39:"r45",40:"r45",41:"r45",42:"r45",43:"r45",44:"r45",45:"r45",46:"r45",52:"r45",53:"r45",54:"r45",55:"r45",57:"r45"},{23:"r46",24:"r46",25:"r46",26:"r46",27:"r46",28:"r46",29:"r46",30:"r46",31:"r46",32:"r46",33:"r46",34:"r46",35:"r46",36:"r46",37:"r46",38:"r46",39:"r46",40:"r46",41:"r46",42:"r46",43:"r46",44:"r46",45:"r46",46:"r46",52:"r46",53:"r46",54:"r46",55:"r46",57:"r46"},{23:"r40",24:"r40",25:"r40",26:"r40",27:"r40",28:"r40",29:"r40",30:"r40",31:"r40",32:"r40",33:"r40",34:"r40",35:"r40",36:"r40",37:"r40",38:"r40",39:"r40",40:"r40",41:"r40",42:"r40",43:"r40",44:"r40",45:"r40",52:"r40",53:"r40",54:"r40",55:"r40",57:"r40"},{25:"s12",31:"s58"},{23:"r18",24:"r18",25:"r18",26:"r18",27:"r18",28:"r18",29:"r18",30:"r18",31:"r18",32:"r18",33:"r18",34:"r18",35:"r18",36:"r18",37:"r18",38:"r18",39:"r18",40:"r18",41:"r18",42:"r18",43:"r18",44:"r18",45:"r18",52:"r18",53:"r18",54:"r18",55:"r18",57:"r18"},{25:"s12",31:"s60"},{23:"r19",24:"r19",25:"r19",26:"r19",27:"r19",28:"r19",29:"r19",30:"r19",31:"r19",32:"r19",33:"r19",34:"r19",35:"r19",36:"r19",37:"r19",38:"r19",39:"r19",40:"r19",41:"r19",42:"r19",43:"r19",44:"r19",45:"r19",52:"r19",53:"r19",54:"r19",55:"r19",57:"r19"},{25:"s12",31:"s62"},{23:"r20",24:"r20",25:"r20",26:"r20",27:"r20",28:"r20",29:"r20",30:"r20",31:"r20",32:"r20",33:"r20",34:"r20",35:"r20",36:"r20",37:"r20",38:"r20",39:"r20",40:"r20",41:"r20",42:"r20",43:"r20",44:"r20",45:"r20",52:"r20",53:"r20",54:"r20",55:"r20",57:"r20"},{25:"s12",31:"s64"},{23:"r21",24:"r21",25:"r21",26:"r21",27:"r21",28:"r21",29:"r21",30:"r21",31:"r21",32:"r21",33:"r21",34:"r21",35:"r21",36:"r21",37:"r21",38:"r21",39:"r21",40:"r21",41:"r21",42:"r21",43:"r21",44:"r21",45:"r21",52:"r21",53:"r21",54:"r21",55:"r21",57:"r21"},{56:"s72"},{56:"r55"},{10:70,20:73,21:75,22:76,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r56",58:"s74"},{24:"r62",28:"r62",35:"r62",36:"r62",37:"r62",38:"r62",39:"r62",40:"r62",41:"r62",42:"r62",43:"r62",44:"r62",45:"r62",56:"r62",58:"r62"},{24:"r63",28:"r63",35:"r63",36:"r63",37:"r63",38:"r63",39:"r63",40:"r63",41:"r63",42:"r63",43:"r63",44:"r63",45:"r63",56:"r63",58:"r63"},{24:"r64",28:"r64",35:"r64",36:"r64",37:"r64",38:"r64",39:"r64",40:"r64",41:"r64",42:"r64",43:"r64",44:"r64",45:"r64",56:"r64",58:"r64"},{24:"r65",28:"r65",35:"r65",36:"r65",37:"r65",38:"r65",39:"r65",40:"r65",41:"r65",42:"r65",43:"r65",44:"r65",45:"r65",56:"r65",58:"r65"},{23:"r52",24:"r52",25:"r52",26:"r52",27:"r52",28:"r52",29:"r52",30:"r52",31:"r52",32:"r52",33:"r52",34:"r52",35:"r52",36:"r52",37:"r52",38:"r52",39:"r52",40:"r52",41:"r52",42:"r52",43:"r52",44:"r52",45:"r52",46:"r52",47:"r52",48:"r52",49:"r52",50:"r52",51:"r52",52:"r52",53:"r52",54:"r52",55:"r52",57:"r52"},{56:"r57"},{10:70,21:77,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r62",58:"s68"},{56:"r59"},{10:70,20:79,21:75,22:76,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r63",58:"s80"},{10:70,18:78,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{56:"r58"},{56:"r60"},{10:70,21:81,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r62",58:"s68"},{10:70,18:82,19:66,21:67,22:69,24:"s28",28:"s71",35:"s29",36:"s30",37:"s31",38:"s32",39:"s33",40:"s34",41:"s35",42:"s36",43:"s37",44:"s38",45:"s39",56:"r54",58:"s68"},{56:"r61"},{56:"s84"},{23:"r53",24:"r53",25:"r53",26:"r53",27:"r53",28:"r53",29:"r53",30:"r53",31:"r53",32:"r53",33:"r53",34:"r53",35:"r53",36:"r53",37:"r53",38:"r53",39:"r53",40:"r53",41:"r53",42:"r53",43:"r53",44:"r53",45:"r53",46:"r53",47:"r53",48:"r53",49:"r53",50:"r53",51:"r53",52:"r53",53:"r53",54:"r53",55:"r53",57:"r53"},{25:"s12",31:"s86"},{23:"r49",24:"r49",25:"r49",26:"r49",27:"r49",28:"r49",29:"r49",30:"r49",31:"r49",32:"r49",33:"r49",34:"r49",35:"r49",36:"r49",37:"r49",38:"r49",39:"r49",40:"r49",41:"r49",42:"r49",43:"r49",44:"r49",45:"r49",46:"r49",47:"r49",48:"r49",49:"r49",50:"r49",51:"r49",52:"r49",53:"r49",54:"r49",55:"r49",57:"r49"},{25:"s12",31:"s88"},{23:"r50",24:"r50",25:"r50",26:"r50",27:"r50",28:"r50",29:"r50",30:"r50",31:"r50",32:"r50",33:"r50",34:"r50",35:"r50",36:"r50",37:"r50",38:"r50",39:"r50",40:"r50",41:"r50",42:"r50",43:"r50",44:"r50",45:"r50",46:"r50",47:"r50",48:"r50",49:"r50",50:"r50",51:"r50",52:"r50",53:"r50",54:"r50",55:"r50",57:"r50"},{25:"s12",31:"s90"},{23:"r51",24:"r51",25:"r51",26:"r51",27:"r51",28:"r51",29:"r51",30:"r51",31:"r51",32:"r51",33:"r51",34:"r51",35:"r51",36:"r51",37:"r51",38:"r51",39:"r51",40:"r51",41:"r51",42:"r51",43:"r51",44:"r51",45:"r51",46:"r51",47:"r51",48:"r51",49:"r51",50:"r51",51:"r51",52:"r51",53:"r51",54:"r51",55:"r51",57:"r51"}],p=[],f=void 0,g=[[/^#[^\n]+/,function(){}],[/^\s+/,function(){}],[/^-/,function(){return"DASH"}],[/^\//,function(){return"CHAR"}],[/^#/,function(){return"CHAR"}],[/^\|/,function(){return"CHAR"}],[/^\./,function(){return"CHAR"}],[/^\{/,function(){return"CHAR"}],[/^\{\d+\}/,function(){return"RANGE_EXACT"}],[/^\{\d+,\}/,function(){return"RANGE_OPEN"}],[/^\{\d+,\d+\}/,function(){return"RANGE_CLOSED"}],[/^\\k<(([\u0041-\u005a\u0061-\u007a\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4-\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u09fc\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0af9\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60-\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0cf1-\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae-\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5-\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a-\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd-\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5-\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd23\udf00-\udf1c\udf27\udf30-\udf45\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f\udc80-\udcaf\udcc4-\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udca0-\udcdf\udcff\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08-\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67-\udd68\udd6a-\udd89\udd98\udee0-\udef2]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf50\udf93-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\}))(([\u0030-\u0039\u0041-\u005a\u005f\u0061-\u007a\u00aa\u00b5\u00b7\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05ef-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u07fd\u0800-\u082d\u0840-\u085b\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u08d3-\u08e1\u08e3-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7-\u09c8\u09cb-\u09ce\u09d7\u09dc-\u09dd\u09df-\u09e3\u09e6-\u09f1\u09fc\u09fe\u0a01-\u0a03\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0af9-\u0aff\u0b01-\u0b03\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b5c-\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82-\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c58-\u0c5a\u0c60-\u0c63\u0c66-\u0c6f\u0c80-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1-\u0cf2\u0d00-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d54-\u0d57\u0d5f-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82-\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18-\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1369-\u1371\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772-\u1773\u1780-\u17d3\u17d7\u17dc-\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1878\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1cd0-\u1cd2\u1cd4-\u1cfa\u1d00-\u1df9\u1dfb-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua8fd-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabea\uabec-\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2f\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00-\ude03\ude05-\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd27\udd30-\udd39\udf00-\udf1c\udf27\udf30-\udf50\udfe0-\udff6]|\ud804[\udc00-\udc46\udc66-\udc6f\udc7f-\udcba\udcd0-\udce8\udcf0-\udcf9\udd00-\udd34\udd36-\udd3f\udd44-\udd46\udd50-\udd73\udd76\udd80-\uddc4\uddc9-\uddcc\uddd0-\uddda\udddc\ude00-\ude11\ude13-\ude37\ude3e\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udeea\udef0-\udef9\udf00-\udf03\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3b-\udf44\udf47-\udf48\udf4b-\udf4d\udf50\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc00-\udc4a\udc50-\udc59\udc5e-\udc5f\udc80-\udcc5\udcc7\udcd0-\udcd9\udd80-\uddb5\uddb8-\uddc0\uddd8-\udddd\ude00-\ude40\ude44\ude50-\ude59\ude80-\udeb8\udec0-\udec9\udf00-\udf1a\udf1d-\udf2b\udf30-\udf39]|\ud806[\udc00-\udc3a\udca0-\udce9\udcff\udda0-\udda7\uddaa-\uddd7\uddda-\udde1\udde3-\udde4\ude00-\ude3e\ude47\ude50-\ude99\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc40\udc50-\udc59\udc72-\udc8f\udc92-\udca7\udca9-\udcb6\udd00-\udd06\udd08-\udd09\udd0b-\udd36\udd3a\udd3c-\udd3d\udd3f-\udd47\udd50-\udd59\udd60-\udd65\udd67-\udd68\udd6a-\udd8e\udd90-\udd91\udd93-\udd98\udda0-\udda9\udee0-\udef6]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf50-\udf59\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d-\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23-\udc24\udc26-\udc2a\udd00-\udd2c\udd30-\udd3d\udd40-\udd49\udd4e\udec0-\udef9]|\ud83a[\udc00-\udcc4\udcd0-\udcd6\udd00-\udd4b\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\})|[\u200c\u200d])*>/,function(){var e=i.slice(3,-1);return L(e,this.getCurrentState()),"NAMED_GROUP_REF"}],[/^\\b/,function(){return"ESC_b"}],[/^\\B/,function(){return"ESC_B"}],[/^\\c[a-zA-Z]/,function(){return"CTRL_CH"}],[/^\\0\d{1,2}/,function(){return"OCT_CODE"}],[/^\\0/,function(){return"DEC_CODE"}],[/^\\\d{1,3}/,function(){return"DEC_CODE"}],[/^\\u[dD][89abAB][0-9a-fA-F]{2}\\u[dD][c-fC-F][0-9a-fA-F]{2}/,function(){return"U_CODE_SURROGATE"}],[/^\\u\{[0-9a-fA-F]{1,}\}/,function(){return"U_CODE"}],[/^\\u[0-9a-fA-F]{4}/,function(){return"U_CODE"}],[/^\\[pP]\{\w+(?:=\w+)?\}/,function(){return"U_PROP_VALUE_EXP"}],[/^\\x[0-9a-fA-F]{2}/,function(){return"HEX_CODE"}],[/^\\[tnrdDsSwWvf]/,function(){return"META_CHAR"}],[/^\\\//,function(){return"ESC_CHAR"}],[/^\\[ #]/,function(){return"ESC_CHAR"}],[/^\\[\^\$\.\*\+\?\(\)\\\[\]\{\}\|\/]/,function(){return"ESC_CHAR"}],[/^\\[^*?+\[()\\|]/,function(){var e=this.getCurrentState();if("u_class"===e&&"\\-"===i)return"ESC_CHAR";if("u"===e||"xu"===e||"u_class"===e)throw new SyntaxError("invalid Unicode escape "+i);return"ESC_CHAR"}],[/^\(/,function(){return"CHAR"}],[/^\)/,function(){return"CHAR"}],[/^\(\?=/,function(){return"POS_LA_ASSERT"}],[/^\(\?!/,function(){return"NEG_LA_ASSERT"}],[/^\(\?<=/,function(){return"POS_LB_ASSERT"}],[/^\(\?<!/,function(){return"NEG_LB_ASSERT"}],[/^\(\?:/,function(){return"NON_CAPTURE_GROUP"}],[/^\(\?<(([\u0041-\u005a\u0061-\u007a\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4-\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u09fc\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0af9\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60-\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0cf1-\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae-\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf3\u1cf5-\u1cf6\u1cfa\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a-\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd-\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5-\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\ude80-\ude9c\udea0-\uded0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf75\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude35\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee4\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd23\udf00-\udf1c\udf27\udf30-\udf45\udfe0-\udff6]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd44\udd50-\udd72\udd76\udd83-\uddb2\uddc1-\uddc4\uddda\udddc\ude00-\ude11\ude13-\ude2b\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udede\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3d\udf50\udf5d-\udf61]|\ud805[\udc00-\udc34\udc47-\udc4a\udc5f\udc80-\udcaf\udcc4-\udcc5\udcc7\udd80-\uddae\uddd8-\udddb\ude00-\ude2f\ude44\ude80-\udeaa\udeb8\udf00-\udf1a]|\ud806[\udc00-\udc2b\udca0-\udcdf\udcff\udda0-\udda7\uddaa-\uddd0\udde1\udde3\ude00\ude0b-\ude32\ude3a\ude50\ude5c-\ude89\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc2e\udc40\udc72-\udc8f\udd00-\udd06\udd08-\udd09\udd0b-\udd30\udd46\udd60-\udd65\udd67-\udd68\udd6a-\udd89\udd98\udee0-\udef2]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\uded0-\udeed\udf00-\udf2f\udf40-\udf43\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf50\udf93-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud838[\udd00-\udd2c\udd37-\udd3d\udd4e\udec0-\udeeb]|\ud83a[\udc00-\udcc4\udd00-\udd43\udd4b]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\}))(([\u0030-\u0039\u0041-\u005a\u005f\u0061-\u007a\u00aa\u00b5\u00b7\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376-\u0377\u037a-\u037d\u037f\u0386-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u05d0-\u05ea\u05ef-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u07fd\u0800-\u082d\u0840-\u085b\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u08d3-\u08e1\u08e3-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7-\u09c8\u09cb-\u09ce\u09d7\u09dc-\u09dd\u09df-\u09e3\u09e6-\u09f1\u09fc\u09fe\u0a01-\u0a03\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a3c\u0a3e-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0af9-\u0aff\u0b01-\u0b03\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47-\u0b48\u0b4b-\u0b4d\u0b56-\u0b57\u0b5c-\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82-\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c58-\u0c5a\u0c60-\u0c63\u0c66-\u0c6f\u0c80-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5-\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1-\u0cf2\u0d00-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d54-\u0d57\u0d5f-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82-\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2-\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e86-\u0e8a\u0e8c-\u0ea3\u0ea5\u0ea7-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18-\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1369-\u1371\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772-\u1773\u1780-\u17d3\u17d7\u17dc-\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1878\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19da\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1cd0-\u1cd2\u1cd4-\u1cfa\u1d00-\u1df9\u1dfb-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua7bf\ua7c2-\ua7c6\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua8fd-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab67\uab70-\uabea\uabec-\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2f\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c-\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\udd40-\udd74\uddfd\ude80-\ude9c\udea0-\uded0\udee0\udf00-\udf1f\udf2d-\udf4a\udf50-\udf7a\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf\udfd1-\udfd5]|\ud801[\udc00-\udc9d\udca0-\udca9\udcb0-\udcd3\udcd8-\udcfb\udd00-\udd27\udd30-\udd63\ude00-\udf36\udf40-\udf55\udf60-\udf67]|\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37-\udc38\udc3c\udc3f-\udc55\udc60-\udc76\udc80-\udc9e\udce0-\udcf2\udcf4-\udcf5\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe-\uddbf\ude00-\ude03\ude05-\ude06\ude0c-\ude13\ude15-\ude17\ude19-\ude35\ude38-\ude3a\ude3f\ude60-\ude7c\ude80-\ude9c\udec0-\udec7\udec9-\udee6\udf00-\udf35\udf40-\udf55\udf60-\udf72\udf80-\udf91]|\ud803[\udc00-\udc48\udc80-\udcb2\udcc0-\udcf2\udd00-\udd27\udd30-\udd39\udf00-\udf1c\udf27\udf30-\udf50\udfe0-\udff6]|\ud804[\udc00-\udc46\udc66-\udc6f\udc7f-\udcba\udcd0-\udce8\udcf0-\udcf9\udd00-\udd34\udd36-\udd3f\udd44-\udd46\udd50-\udd73\udd76\udd80-\uddc4\uddc9-\uddcc\uddd0-\uddda\udddc\ude00-\ude11\ude13-\ude37\ude3e\ude80-\ude86\ude88\ude8a-\ude8d\ude8f-\ude9d\ude9f-\udea8\udeb0-\udeea\udef0-\udef9\udf00-\udf03\udf05-\udf0c\udf0f-\udf10\udf13-\udf28\udf2a-\udf30\udf32-\udf33\udf35-\udf39\udf3b-\udf44\udf47-\udf48\udf4b-\udf4d\udf50\udf57\udf5d-\udf63\udf66-\udf6c\udf70-\udf74]|\ud805[\udc00-\udc4a\udc50-\udc59\udc5e-\udc5f\udc80-\udcc5\udcc7\udcd0-\udcd9\udd80-\uddb5\uddb8-\uddc0\uddd8-\udddd\ude00-\ude40\ude44\ude50-\ude59\ude80-\udeb8\udec0-\udec9\udf00-\udf1a\udf1d-\udf2b\udf30-\udf39]|\ud806[\udc00-\udc3a\udca0-\udce9\udcff\udda0-\udda7\uddaa-\uddd7\uddda-\udde1\udde3-\udde4\ude00-\ude3e\ude47\ude50-\ude99\ude9d\udec0-\udef8]|\ud807[\udc00-\udc08\udc0a-\udc36\udc38-\udc40\udc50-\udc59\udc72-\udc8f\udc92-\udca7\udca9-\udcb6\udd00-\udd06\udd08-\udd09\udd0b-\udd36\udd3a\udd3c-\udd3d\udd3f-\udd47\udd50-\udd59\udd60-\udd65\udd67-\udd68\udd6a-\udd8e\udd90-\udd91\udd93-\udd98\udda0-\udda9\udee0-\udef6]|\ud808[\udc00-\udf99]|\ud809[\udc00-\udc6e\udc80-\udd43]|\ud80c[\udc00-\udfff]|\ud80d[\udc00-\udc2e]|\ud811[\udc00-\ude46]|\ud81a[\udc00-\ude38\ude40-\ude5e\ude60-\ude69\uded0-\udeed\udef0-\udef4\udf00-\udf36\udf40-\udf43\udf50-\udf59\udf63-\udf77\udf7d-\udf8f]|\ud81b[\ude40-\ude7f\udf00-\udf4a\udf4f-\udf87\udf8f-\udf9f\udfe0-\udfe1\udfe3]|\ud81c[\udc00-\udfff]|\ud81d[\udc00-\udfff]|\ud81e[\udc00-\udfff]|\ud81f[\udc00-\udfff]|\ud820[\udc00-\udfff]|\ud821[\udc00-\udff7]|\ud822[\udc00-\udef2]|\ud82c[\udc00-\udd1e\udd50-\udd52\udd64-\udd67\udd70-\udefb]|\ud82f[\udc00-\udc6a\udc70-\udc7c\udc80-\udc88\udc90-\udc99\udc9d-\udc9e]|\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e-\udc9f\udca2\udca5-\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb\udfce-\udfff]|\ud836[\ude00-\ude36\ude3b-\ude6c\ude75\ude84\ude9b-\ude9f\udea1-\udeaf]|\ud838[\udc00-\udc06\udc08-\udc18\udc1b-\udc21\udc23-\udc24\udc26-\udc2a\udd00-\udd2c\udd30-\udd3d\udd40-\udd49\udd4e\udec0-\udef9]|\ud83a[\udc00-\udcc4\udcd0-\udcd6\udd00-\udd4b\udd50-\udd59]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21-\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51-\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61-\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud840[\udc00-\udfff]|\ud841[\udc00-\udfff]|\ud842[\udc00-\udfff]|\ud843[\udc00-\udfff]|\ud844[\udc00-\udfff]|\ud845[\udc00-\udfff]|\ud846[\udc00-\udfff]|\ud847[\udc00-\udfff]|\ud848[\udc00-\udfff]|\ud849[\udc00-\udfff]|\ud84a[\udc00-\udfff]|\ud84b[\udc00-\udfff]|\ud84c[\udc00-\udfff]|\ud84d[\udc00-\udfff]|\ud84e[\udc00-\udfff]|\ud84f[\udc00-\udfff]|\ud850[\udc00-\udfff]|\ud851[\udc00-\udfff]|\ud852[\udc00-\udfff]|\ud853[\udc00-\udfff]|\ud854[\udc00-\udfff]|\ud855[\udc00-\udfff]|\ud856[\udc00-\udfff]|\ud857[\udc00-\udfff]|\ud858[\udc00-\udfff]|\ud859[\udc00-\udfff]|\ud85a[\udc00-\udfff]|\ud85b[\udc00-\udfff]|\ud85c[\udc00-\udfff]|\ud85d[\udc00-\udfff]|\ud85e[\udc00-\udfff]|\ud85f[\udc00-\udfff]|\ud860[\udc00-\udfff]|\ud861[\udc00-\udfff]|\ud862[\udc00-\udfff]|\ud863[\udc00-\udfff]|\ud864[\udc00-\udfff]|\ud865[\udc00-\udfff]|\ud866[\udc00-\udfff]|\ud867[\udc00-\udfff]|\ud868[\udc00-\udfff]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud86a[\udc00-\udfff]|\ud86b[\udc00-\udfff]|\ud86c[\udc00-\udfff]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud86e[\udc00-\udc1d\udc20-\udfff]|\ud86f[\udc00-\udfff]|\ud870[\udc00-\udfff]|\ud871[\udc00-\udfff]|\ud872[\udc00-\udfff]|\ud873[\udc00-\udea1\udeb0-\udfff]|\ud874[\udc00-\udfff]|\ud875[\udc00-\udfff]|\ud876[\udc00-\udfff]|\ud877[\udc00-\udfff]|\ud878[\udc00-\udfff]|\ud879[\udc00-\udfff]|\ud87a[\udc00-\udfe0]|\ud87e[\udc00-\ude1d]|\udb40[\udd00-\uddef])|[$_]|(\\u[0-9a-fA-F]{4}|\\u\{[0-9a-fA-F]{1,}\})|[\u200c\u200d])*>/,function(){return i=i.slice(3,-1),L(i,this.getCurrentState()),"NAMED_CAPTURE_GROUP"}],[/^\(/,function(){return"L_PAREN"}],[/^\)/,function(){return"R_PAREN"}],[/^[*?+[^$]/,function(){return"CHAR"}],[/^\\\]/,function(){return"ESC_CHAR"}],[/^\]/,function(){return this.popState(),"R_BRACKET"}],[/^\^/,function(){return"BOS"}],[/^\$/,function(){return"EOS"}],[/^\*/,function(){return"STAR"}],[/^\?/,function(){return"Q_MARK"}],[/^\+/,function(){return"PLUS"}],[/^\|/,function(){return"BAR"}],[/^\./,function(){return"ANY"}],[/^\//,function(){return"SLASH"}],[/^[^*?+\[()\\|]/,function(){return"CHAR"}],[/^\[\^/,function(){var e=this.getCurrentState();return this.pushState("u"===e||"xu"===e?"u_class":"class"),"NEG_CLASS"}],[/^\[/,function(){var e=this.getCurrentState();return this.pushState("u"===e||"xu"===e?"u_class":"class"),"L_BRACKET"}]],m={INITIAL:[8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],u:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],xu:[0,1,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],x:[0,1,8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,30,31,32,33,34,35,36,37,41,42,43,44,45,46,47,48,49,50,51],u_class:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],class:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,20,22,23,24,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51]},v={type:u,value:""};f={initString:function(e){return this._string=e,this._cursor=0,this._states=["INITIAL"],this._tokensQueue=[],this._currentLine=1,this._currentColumn=0,this._currentLineBeginOffset=0,this._tokenStartOffset=0,this._tokenEndOffset=0,this._tokenStartLine=1,this._tokenEndLine=1,this._tokenStartColumn=0,this._tokenEndColumn=0,this},getStates:function(){return this._states},getCurrentState:function(){return this._states[this._states.length-1]},pushState:function(e){this._states.push(e)},begin:function(e){this.pushState(e)},popState:function(){return this._states.length>1?this._states.pop():this._states[0]},getNextToken:function(){if(this._tokensQueue.length>0)return this.onToken(this._toToken(this._tokensQueue.shift()));if(!this.hasMoreTokens())return this.onToken(v);for(var e=this._string.slice(this._cursor),t=m[this.getCurrentState()],r=0;r<t.length;r++){var o=t[r],s=g[o],a=this._match(e,s[0]);if(""===e&&""===a&&this._cursor++,null!==a){i=a,i.length;var l=s[1].call(this);if(!l)return this.getNextToken();if(Array.isArray(l)){var u,c=l.slice(1);if(l=l[0],c.length>0)(u=this._tokensQueue).unshift.apply(u,n(c))}return this.onToken(this._toToken(l,i))}}if(this.isEOF())return this._cursor++,v;this.throwUnexpectedToken(e[0],this._currentLine,this._currentColumn)},throwUnexpectedToken:function(e,t,r){var n=this._string.split("\n")[t-1],i="";if(n){var o=" ".repeat(r);i="\n\n"+n+"\n"+o+"^\n"}throw new SyntaxError(i+'Unexpected token: "'+e+'" at '+t+":"+r+".")},getCursor:function(){return this._cursor},getCurrentLine:function(){return this._currentLine},getCurrentColumn:function(){return this._currentColumn},_captureLocation:function(e){var t=/\n/g;this._tokenStartOffset=this._cursor,this._tokenStartLine=this._currentLine,this._tokenStartColumn=this._tokenStartOffset-this._currentLineBeginOffset;var r=void 0;while(null!==(r=t.exec(e)))this._currentLine++,this._currentLineBeginOffset=this._tokenStartOffset+r.index+1;this._tokenEndOffset=this._cursor+e.length,this._tokenEndLine=this._currentLine,this._tokenEndColumn=this._currentColumn=this._tokenEndOffset-this._currentLineBeginOffset},_toToken:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:e,value:t,startOffset:this._tokenStartOffset,endOffset:this._tokenEndOffset,startLine:this._tokenStartLine,endLine:this._tokenEndLine,startColumn:this._tokenStartColumn,endColumn:this._tokenEndColumn}},isEOF:function(){return this._cursor===this._string.length},hasMoreTokens:function(){return this._cursor<=this._string.length},_match:function(e,t){var r=e.match(t);return r?(this._captureLocation(r[0]),this._cursor+=r[0].length,r[0]):null},onToken:function(e){return e}},o.lexer=f,o.tokenizer=f,o.options={captureLocations:!0};var y={setOptions:function(e){return o.options=e,this},getOptions:function(){return o.options},parse:function(e,t){if(!f)throw new Error("Tokenizer instance wasn't specified.");f.initString(e);var r=o.options;t&&(o.options=Object.assign({},o.options,t)),y.onParseBegin(e,f,o.options),p.length=0,p.push(0);var l=f.getNextToken(),u=null;do{l||(o.options=r,H());var g=p[p.length-1],m=d[l.type];h[g].hasOwnProperty(m)||(o.options=r,j(l));var v=h[g][m];if("s"===v[0]){var _=null;o.options.captureLocations&&(_={startOffset:l.startOffset,endOffset:l.endOffset,startLine:l.startLine,endLine:l.endLine,startColumn:l.startColumn,endColumn:l.endColumn}),u=this.onShift(l),p.push({symbol:d[u.type],semanticValue:u.value,loc:_},Number(v.slice(1))),l=f.getNextToken()}else if("r"===v[0]){var b=v.slice(1),S=c[b],w="function"===typeof S[2],C=w?[]:null,A=w&&o.options.captureLocations?[]:null;if(0!==S[1]){var E=S[1];while(E-- >0){p.pop();var x=p.pop();w&&(C.unshift(x.semanticValue),A&&A.unshift(x.loc))}}var T={symbol:S[0]};if(w){i=u?u.value:null,u?u.value.length:null;var k=null!==A?C.concat(A):C;S[2].apply(S,n(k)),T.semanticValue=s,A&&(T.loc=a)}var O=p[p.length-1],P=S[0];p.push(T,h[O][P])}else if("acc"===v){p.pop();var R=p.pop();return(1!==p.length||0!==p[0]||f.hasMoreTokens())&&(o.options=r,j(l)),R.hasOwnProperty("semanticValue")?(o.options=r,y.onParseEnd(R.semanticValue),R.semanticValue):(y.onParseEnd(),o.options=r,!0)}}while(f.hasMoreTokens()||p.length>1)},setTokenizer:function(e){return f=e,y},getTokenizer:function(){return f},onParseBegin:function(e,t,r){},onParseEnd:function(e){},onShift:function(e){return e}},_=0,b={},S="";function w(e){var t=e.match(/\d+/g).map(Number);if(Number.isFinite(t[1])&&t[1]<t[0])throw new SyntaxError("Numbers out of order in "+e+" quantifier");return t}function C(e,t){if("control"===e.kind||"control"===t.kind||!isNaN(e.codePoint)&&!isNaN(t.codePoint)&&e.codePoint>t.codePoint)throw new SyntaxError("Range "+e.value+"-"+t.value+" out of order in character class")}y.onParseBegin=function(e,t){S=e,_=0,b={};var r=e.lastIndexOf("/"),n=e.slice(r);n.includes("x")&&n.includes("u")?t.pushState("xu"):(n.includes("x")&&t.pushState("x"),n.includes("u")&&t.pushState("u"))},y.onShift=function(e){return"L_PAREN"!==e.type&&"NAMED_CAPTURE_GROUP"!==e.type||(e.value=new String(e.value),e.value.groupNumber=++_),e};var A=require_parser_unicode_properties();function E(e,t){var r="P"===e[1],n=e.indexOf("="),i=e.slice(3,-1!==n?n:-1),o=void 0,s=-1===n&&A.isGeneralCategoryValue(i),a=-1===n&&A.isBinaryPropertyName(i);if(s)o=i,i="General_Category";else if(a)o=i;else{if(!A.isValidName(i))throw new SyntaxError("Invalid unicode property name: "+i+".");if(o=e.slice(n+1,-1),!A.isValidValue(i,o))throw new SyntaxError("Invalid "+i+" unicode property value: "+o+".")}return B({type:"UnicodeProperty",name:i,value:o,negative:r,shorthand:s,binary:a,canonicalName:A.getCanonicalName(i)||i,canonicalValue:A.getCanonicalValue(o)||o},t)}function x(e,t,n){var i=void 0,o=void 0;switch(t){case"decimal":o=Number(e.slice(1)),i=String.fromCodePoint(o);break;case"oct":o=parseInt(e.slice(1),8),i=String.fromCodePoint(o);break;case"hex":case"unicode":if(e.lastIndexOf("\\u")>0){var s=e.split("\\u").slice(1),a=r(s,2),l=a[0],u=a[1];l=parseInt(l,16),u=parseInt(u,16),o=1024*(l-55296)+(u-56320)+65536,i=String.fromCodePoint(o)}else{var c=e.slice(2).replace("{","");if(o=parseInt(c,16),o>1114111)throw new SyntaxError("Bad character escape sequence: "+e);i=String.fromCodePoint(o)}break;case"meta":switch(e){case"\\t":i="\t",o=i.codePointAt(0);break;case"\\n":i="\n",o=i.codePointAt(0);break;case"\\r":i="\r",o=i.codePointAt(0);break;case"\\v":i="\v",o=i.codePointAt(0);break;case"\\f":i="\f",o=i.codePointAt(0);break;case"\\b":i="\b",o=i.codePointAt(0);case"\\0":i="\0",o=0;case".":i=".",o=NaN;break;default:o=NaN}break;case"simple":i=e,o=i.codePointAt(0);break}return B({type:"Char",value:e,kind:t,symbol:i,codePoint:o},n)}var T="gimsuxy";function k(e){var t=new Set,r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;if(t.has(a)||!T.includes(a))throw new SyntaxError("Invalid flags: "+e);t.add(a)}}catch(l){n=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return e.split("").sort().join("")}function O(e,t){var r=Number(e.slice(1));return r>0&&r<=_?B({type:"Backreference",kind:"number",number:r,reference:r},t):x(e,"decimal",t)}var P=/^\\u[0-9a-fA-F]{4}/,R=/^\\u\{[0-9a-fA-F]{1,}\}/,I=/\\u\{[0-9a-fA-F]{1,}\}/;function L(e,t){var r=I.test(e),n="u"===t||"xu"===t||"u_class"===t;if(r&&!n)throw new SyntaxError('invalid group Unicode name "'+e+'", use `u` flag.');return e}var M=/\\u(?:([dD][89aAbB][0-9a-fA-F]{2})\\u([dD][c-fC-F][0-9a-fA-F]{2})|([dD][89aAbB][0-9a-fA-F]{2})|([dD][c-fC-F][0-9a-fA-F]{2})|([0-9a-ce-fA-CE-F][0-9a-fA-F]{3}|[dD][0-7][0-9a-fA-F]{2})|\{(0*(?:[0-9a-fA-F]{1,5}|10[0-9a-fA-F]{4}))\})/;function N(e){return e.replace(new RegExp(M,"g"),(function(e,t,r,n,i,o,s){return t?String.fromCodePoint(parseInt(t,16),parseInt(r,16)):n?String.fromCodePoint(parseInt(n,16)):i?String.fromCodePoint(parseInt(i,16)):o?String.fromCodePoint(parseInt(o,16)):s?String.fromCodePoint(parseInt(s,16)):e}))}function D(e,t){var r=e.slice(3,-1),n=N(r);if(b.hasOwnProperty(n))return B({type:"Backreference",kind:"name",number:b[n],reference:n,referenceRaw:r},t);var i=null,o=null,s=null,a=null;t&&(i=t.startOffset,o=t.startLine,s=t.endLine,a=t.startColumn);var l=/^[\w$<>]/,u=void 0,c=[x(e.slice(1,2),"simple",i?{startLine:o,endLine:s,startColumn:a,startOffset:i,endOffset:i+=2,endColumn:a+=2}:null)];c[0].escaped=!0,e=e.slice(2);while(e.length>0){var d=null;(d=e.match(P))||(d=e.match(R))?(i&&(u={startLine:o,endLine:s,startColumn:a,startOffset:i,endOffset:i+=d[0].length,endColumn:a+=d[0].length}),c.push(x(d[0],"unicode",u)),e=e.slice(d[0].length)):(d=e.match(l))&&(i&&(u={startLine:o,endLine:s,startColumn:a,startOffset:i,endOffset:++i,endColumn:++a}),c.push(x(d[0],"simple",u)),e=e.slice(1))}return c}function B(e,t){return o.options.captureLocations&&(e.loc={source:S.slice(t.startOffset,t.endOffset),start:{line:t.startLine,column:t.startColumn,offset:t.startOffset},end:{line:t.endLine,column:t.endColumn,offset:t.endOffset}}),e}function F(e,t){return o.options.captureLocations?{startOffset:e.startOffset,endOffset:t.endOffset,startLine:e.startLine,endLine:t.endLine,startColumn:e.startColumn,endColumn:t.endColumn}:null}function j(e){e.type===u&&H(),f.throwUnexpectedToken(e.value,e.startLine,e.startColumn)}function H(){q("Unexpected end of input.")}function q(e){throw new SyntaxError(e)}t.exports=y}}),require_parser2=__commonJS({"node_modules/regexp-tree/dist/parser/index.js"(e,t){init_polyfills();var r=require_regexp_tree(),n=r.parse.bind(r);r.parse=function(e,t){return n(""+e,t)},r.setOptions({captureLocations:!1}),t.exports=r}}),require_node_path=__commonJS({"node_modules/regexp-tree/dist/traverse/node-path.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="expressions",o="expression",s=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;n(this,e),this.node=t,this.parentPath=r,this.parent=r?r.node:null,this.property=i,this.index=o}return r(e,[{key:"_enforceProp",value:function(e){if(!this.node.hasOwnProperty(e))throw new Error("Node of type "+this.node.type+" doesn't have \""+e+'" collection.')}},{key:"setChild",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=void 0;return null!=r?(n||(n=i),this._enforceProp(n),this.node[n][r]=t,s=e.getForNode(t,this,n,r)):(n||(n=o),this._enforceProp(n),this.node[n]=t,s=e.getForNode(t,this,n,null)),s}},{key:"appendChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t||(t=i),this._enforceProp(t);var r=this.node[t].length;return this.setChild(e,r,t)}},{key:"insertChildAt",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;this._enforceProp(n),this.node[n].splice(r,0,t),r<=e.getTraversingIndex()&&e.updateTraversingIndex(1),this._rebuildIndex(this.node,n)}},{key:"remove",value:function(){if(!this.isRemoved()&&(e.registry.delete(this.node),this.node=null,this.parent)){if(null!==this.index)return this.parent[this.property].splice(this.index,1),this.index<=e.getTraversingIndex()&&e.updateTraversingIndex(-1),this._rebuildIndex(this.parent,this.property),this.index=null,void(this.property=null);delete this.parent[this.property],this.property=null}}},{key:"_rebuildIndex",value:function(t,r){for(var n=e.getForNode(t),i=0;i<t[r].length;i++){var o=e.getForNode(t[r][i],n,r,i);o.index=i}}},{key:"isRemoved",value:function(){return null===this.node}},{key:"replace",value:function(t){return e.registry.delete(this.node),this.node=t,this.parent?(null!==this.index?this.parent[this.property][this.index]=t:this.parent[this.property]=t,e.getForNode(t,this.parentPath,this.property,this.index)):null}},{key:"update",value:function(e){Object.assign(this.node,e)}},{key:"getParent",value:function(){return this.parentPath}},{key:"getChild",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.node.expressions?e.getForNode(this.node.expressions[t],this,i,t):this.node.expression&&0==t?e.getForNode(this.node.expression,this,o):null}},{key:"hasEqualSource",value:function(e){return JSON.stringify(this.node,a)===JSON.stringify(e.node,a)}},{key:"jsonEncode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.format,r=e.useLoc;return JSON.stringify(this.node,r?null:a,t)}},{key:"getPreviousSibling",value:function(){return this.parent&&null!=this.index?e.getForNode(this.parent[this.property][this.index-1],e.getForNode(this.parent),this.property,this.index-1):null}},{key:"getNextSibling",value:function(){return this.parent&&null!=this.index?e.getForNode(this.parent[this.property][this.index+1],e.getForNode(this.parent),this.property,this.index+1):null}}],[{key:"getForNode",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;if(!t)return null;e.registry.has(t)||e.registry.set(t,new e(t,r,n,-1==i?null:i));var o=e.registry.get(t);return null!==r&&(o.parentPath=r,o.parent=o.parentPath.node),null!==n&&(o.property=n),i>=0&&(o.index=i),o}},{key:"initRegistry",value:function(){e.registry||(e.registry=new Map),e.registry.clear()}},{key:"updateTraversingIndex",value:function(t){return e.traversingIndexStack[e.traversingIndexStack.length-1]+=t}},{key:"getTraversingIndex",value:function(){return e.traversingIndexStack[e.traversingIndexStack.length-1]}}]),e}();function a(e,t){if("loc"!==e)return t}s.initRegistry(),s.traversingIndexStack=[],t.exports=s}}),require_traverse=__commonJS({"node_modules/regexp-tree/dist/traverse/index.js"(e,t){init_polyfills();var r=require_node_path();function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.pre,i=t.post,o=t.skipProperty;function s(e,t,a,l){if(e&&"string"===typeof e.type){var u=void 0;if(n&&(u=n(e,t,a,l)),!1!==u)for(var c in t&&t[a]&&(e=isNaN(l)?t[a]:t[a][l]),e)if(e.hasOwnProperty(c)){if(o?o(c,e):"$"===c[0])continue;var d=e[c];if(Array.isArray(d)){var h=0;r.traversingIndexStack.push(h);while(h<d.length)s(d[h],e,c,h),h=r.updateTraversingIndex(1);r.traversingIndexStack.pop()}else s(d,e,c)}i&&i(e,t,a,l)}}s(e,null)}t.exports={traverse:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{asNodes:!1};function o(e,t,n,i){var o=r.getForNode(t),s=r.getForNode(e,o,n,i);return s}Array.isArray(t)||(t=[t]),t=t.filter((function(t){return"function"!==typeof t.shouldRun||t.shouldRun(e)})),r.initRegistry(),t.forEach((function(t){"function"===typeof t.init&&t.init(e)})),n(e,{pre:function(e,r,n,s){var a=void 0;i.asNodes||(a=o(e,r,n,s));var l=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;if("function"===typeof p["*"])if(a){if(!a.isRemoved()){var f=p["*"](a);if(!1===f)return!1}}else p["*"](e,r,n,s);var g=void 0;if("function"===typeof p[e.type]?g=p[e.type]:"object"===typeof p[e.type]&&"function"===typeof p[e.type].pre&&(g=p[e.type].pre),g)if(a){if(!a.isRemoved()){var m=g.call(p,a);if(!1===m)return!1}}else g.call(p,e,r,n,s)}}catch(v){u=!0,c=v}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}},post:function(e,r,n,s){if(e){var a=void 0;i.asNodes||(a=o(e,r,n,s));var l=!0,u=!1,c=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,f=void 0;if("object"===typeof p[e.type]&&"function"===typeof p[e.type].post&&(f=p[e.type].post),f)if(a){if(!a.isRemoved()){var g=f.call(p,a);if(!1===g)return!1}}else f.call(p,e,r,n,s)}}catch(m){u=!0,c=m}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}},skipProperty:function(e){return"loc"===e}})}}}}),require_transform=__commonJS({"node_modules/regexp-tree/dist/transform/index.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=require_generator(),o=require_parser2(),s=require_traverse(),a=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e),this._ast=t,this._source=null,this._string=null,this._regexp=null,this._extra=r}return r(e,[{key:"getAST",value:function(){return this._ast}},{key:"setExtra",value:function(e){this._extra=e}},{key:"getExtra",value:function(){return this._extra}},{key:"toRegExp",value:function(){return this._regexp||(this._regexp=new RegExp(this.getSource(),this._ast.flags)),this._regexp}},{key:"getSource",value:function(){return this._source||(this._source=i.generate(this._ast.body)),this._source}},{key:"getFlags",value:function(){return this._ast.flags}},{key:"toString",value:function(){return this._string||(this._string=i.generate(this._ast)),this._string}}]),e}();t.exports={TransformResult:a,transform:function(e,t){var r=e;return e instanceof RegExp&&(e=""+e),"string"===typeof e&&(r=o.parse(e,{captureLocations:!0})),s.traverse(r,t),new a(r)}}}}),require_compat_transpiler=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/index.js"(e,t){init_polyfills();var r=require_transforms(),n=require_transform();t.exports={transform:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t.length>0?t:Object.keys(r),o=void 0,s={};return i.forEach((function(t){if(!r.hasOwnProperty(t))throw new Error("Unknown compat-transform: "+t+". Available transforms are: "+Object.keys(r).join(", "));var i=r[t];o=n.transform(e,i),e=o.getAST(),"function"===typeof i.getExtra&&(s[t]=i.getExtra())})),o.setExtra(s),o}}}}),require_clone=__commonJS({"node_modules/regexp-tree/dist/utils/clone.js"(e,t){init_polyfills(),t.exports=function e(t){if(null===t||"object"!==typeof t)return t;var r=void 0;for(var n in r=Array.isArray(t)?[]:{},t)r[n]=e(t[n]);return r}}}),require_char_surrogate_pair_to_single_unicode_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-surrogate-pair-to-single-unicode-transform.js"(e,t){init_polyfills(),t.exports={shouldRun:function(e){return e.flags.includes("u")},Char:function(e){var t=e.node;"unicode"===t.kind&&t.isSurrogatePair&&!isNaN(t.codePoint)&&(t.value="\\u{"+t.codePoint.toString(16)+"}",delete t.isSurrogatePair)}}}}),require_char_code_to_simple_char_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-code-to-simple-char-transform.js"(e,t){init_polyfills();var r="A".codePointAt(0),n="Z".codePointAt(0),i="a".codePointAt(0),o="z".codePointAt(0),s="0".codePointAt(0),a="9".codePointAt(0);function l(e){var t=e.from,l=e.to;return t.codePoint>=s&&t.codePoint<=a&&l.codePoint>=s&&l.codePoint<=a||t.codePoint>=r&&t.codePoint<=n&&l.codePoint>=r&&l.codePoint<=n||t.codePoint>=i&&t.codePoint<=o&&l.codePoint>=i&&l.codePoint<=o}function u(e){return e>=32&&e<=126}function c(e,t){return"ClassRange"===t||"CharacterClass"===t?/[\]\\^-]/.test(e):/[*[()+?^$./\\|{}]/.test(e)}t.exports={Char:function(e){var t=e.node,r=e.parent;if(!isNaN(t.codePoint)&&"simple"!==t.kind&&("ClassRange"!==r.type||l(r))&&u(t.codePoint)){var n=String.fromCodePoint(t.codePoint),i={type:"Char",kind:"simple",value:n,symbol:n,codePoint:t.codePoint};c(n,r.type)&&(i.escaped=!0),e.replace(i)}}}}}),require_char_case_insensitive_lowercase_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-case-insensitive-lowercase-transform.js"(e,t){init_polyfills();var r="A".codePointAt(0),n="Z".codePointAt(0);function i(e){var t=e.from,i=e.to;return t.codePoint>=r&&t.codePoint<=n&&i.codePoint>=r&&i.codePoint<=n}function o(e,t){var r=e.codePointAt(0);if("decimal"===t.kind)return"\\"+r;if("oct"===t.kind)return"\\0"+r.toString(8);if("hex"===t.kind)return"\\x"+r.toString(16);if("unicode"===t.kind){if(t.isSurrogatePair){var n=s(r),i=n.lead,o=n.trail;return"\\u"+"0".repeat(4-i.length)+i+"\\u"+"0".repeat(4-o.length)+o}if(t.value.includes("{"))return"\\u{"+r.toString(16)+"}";var a=r.toString(16);return"\\u"+"0".repeat(4-a.length)+a}return e}function s(e){var t=Math.floor((e-65536)/1024)+55296,r=(e-65536)%1024+56320;return{lead:t.toString(16),trail:r.toString(16)}}t.exports={_AZClassRanges:null,_hasUFlag:!1,init:function(e){this._AZClassRanges=new Set,this._hasUFlag=e.flags.includes("u")},shouldRun:function(e){return e.flags.includes("i")},Char:function(e){var t=e.node,r=e.parent;if(!isNaN(t.codePoint)&&(this._hasUFlag||!(t.codePoint>=4096))){if("ClassRange"===r.type){if(!this._AZClassRanges.has(r)&&!i(r))return;this._AZClassRanges.add(r)}var n=t.symbol.toLowerCase();n!==t.symbol&&(t.value=o(n,t),t.symbol=n,t.codePoint=n.codePointAt(0))}}}}}),require_char_class_remove_duplicates_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-class-remove-duplicates-transform.js"(e,t){init_polyfills(),t.exports={CharacterClass:function(e){for(var t=e.node,r={},n=0;n<t.expressions.length;n++){var i=e.getChild(n),o=i.jsonEncode();r.hasOwnProperty(o)&&(i.remove(),n--),r[o]=!0}}}}}),require_utils=__commonJS({"node_modules/regexp-tree/dist/transform/utils.js"(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){if("Disjunction"!==e.type)throw new TypeError('Expected "Disjunction" node, got "'+e.type+'"');var t=[];return e.left&&"Disjunction"===e.left.type?t.push.apply(t,r(n(e.left)).concat([e.right])):t.push(e.left,e.right),t}function i(e){return e.reduce((function(e,t){return{type:"Disjunction",left:e,right:t}}))}function o(e){"*"===e.kind?e.kind="+":"+"===e.kind?(e.kind="Range",e.from=2,delete e.to):"?"===e.kind?(e.kind="Range",e.from=1,e.to=2):"Range"===e.kind&&(e.from+=1,e.to&&(e.to+=1))}init_polyfills(),t.exports={disjunctionToList:n,listToDisjunction:i,increaseQuantifierByOne:o}}}),require_quantifiers_merge_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/quantifiers-merge-transform.js"(e,t){init_polyfills();var r=require_utils(),n=r.increaseQuantifierByOne;function i(e){return e.greedy&&("+"===e.kind||"*"===e.kind||"Range"===e.kind&&!e.to)}function o(e){var t=void 0,r=void 0;return"*"===e.kind?t=0:"+"===e.kind?t=1:"?"===e.kind?(t=0,r=1):(t=e.from,e.to&&(r=e.to)),{from:t,to:r}}t.exports={Repetition:function(e){var t=e.node,r=e.parent;if("Alternative"===r.type&&e.index){var s=e.getPreviousSibling();if(s)if("Repetition"===s.node.type){if(!s.getChild().hasEqualSource(e.getChild()))return;var a=o(s.node.quantifier),l=a.from,u=a.to,c=o(t.quantifier),d=c.from,h=c.to;if(s.node.quantifier.greedy!==t.quantifier.greedy&&!i(s.node.quantifier)&&!i(t.quantifier))return;t.quantifier.kind="Range",t.quantifier.from=l+d,u&&h?t.quantifier.to=u+h:delete t.quantifier.to,(i(s.node.quantifier)||i(t.quantifier))&&(t.quantifier.greedy=!0),s.remove()}else{if(!s.hasEqualSource(e.getChild()))return;n(t.quantifier),s.remove()}}}}}}),require_quantifier_range_to_symbol_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/quantifier-range-to-symbol-transform.js"(e,t){function r(e){var t=e.node;0!==t.from||t.to||(t.kind="*",delete t.from)}function n(e){var t=e.node;1!==t.from||t.to||(t.kind="+",delete t.from)}function i(e){var t=e.node;1===t.from&&1===t.to&&e.parentPath.replace(e.parentPath.node.expression)}init_polyfills(),t.exports={Quantifier:function(e){var t=e.node;"Range"===t.kind&&(r(e),n(e),i(e))}}}}),require_char_class_classranges_to_chars_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-class-classranges-to-chars-transform.js"(e,t){init_polyfills(),t.exports={ClassRange:function(e){var t=e.node;t.from.codePoint===t.to.codePoint?e.replace(t.from):t.from.codePoint===t.to.codePoint-1&&(e.getParent().insertChildAt(t.to,e.index+1),e.replace(t.from))}}}}),require_char_class_to_meta_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-class-to-meta-transform.js"(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){var t=e.node;t.expressions.forEach((function(t,r){a(t)&&e.getChild(r).replace({type:"Char",value:"\\d",kind:"meta"})}))}function i(e,t,r){var n=e.node,i=null,o=null,s=null,a=null,l=null,f=null;n.expressions.forEach((function(n,g){u(n,"\\d")?i=e.getChild(g):c(n)?o=e.getChild(g):d(n)?s=e.getChild(g):h(n)?a=e.getChild(g):t&&r&&p(n,383)?l=e.getChild(g):t&&r&&p(n,8490)&&(f=e.getChild(g))})),i&&(o&&s||t&&(o||s))&&a&&(!r||!t||l&&f)&&(i.replace({type:"Char",value:"\\w",kind:"meta"}),o&&o.remove(),s&&s.remove(),a.remove(),l&&l.remove(),f&&f.remove())}init_polyfills(),t.exports={_hasIFlag:!1,_hasUFlag:!1,init:function(e){this._hasIFlag=e.flags.includes("i"),this._hasUFlag=e.flags.includes("u")},CharacterClass:function(e){n(e),i(e,this._hasIFlag,this._hasUFlag),s(e)}};var o=[function(e){return l(e," ")}].concat(r(["\\f","\\n","\\r","\\t","\\v"].map((function(e){return function(t){return u(t,e)}}))),r([160,5760,8232,8233,8239,8287,12288,65279].map((function(e){return function(t){return p(t,e)}}))),[function(e){return"ClassRange"===e.type&&p(e.from,8192)&&p(e.to,8202)}]);function s(e){var t=e.node;if(!(t.expressions.length<o.length)&&o.every((function(e){return t.expressions.some((function(t){return e(t)}))}))){var r=t.expressions.find((function(e){return u(e,"\\n")}));r.value="\\s",r.symbol=void 0,r.codePoint=NaN,t.expressions.map((function(t,r){return o.some((function(e){return e(t)}))?e.getChild(r):void 0})).filter(Boolean).forEach((function(e){return e.remove()}))}}function a(e){return"ClassRange"===e.type&&"0"===e.from.value&&"9"===e.to.value}function l(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"simple";return"Char"===e.type&&e.value===t&&e.kind===r}function u(e,t){return l(e,t,"meta")}function c(e){return"ClassRange"===e.type&&"a"===e.from.value&&"z"===e.to.value}function d(e){return"ClassRange"===e.type&&"A"===e.from.value&&"Z"===e.to.value}function h(e){return"Char"===e.type&&"_"===e.value&&"simple"===e.kind}function p(e,t){return"Char"===e.type&&"unicode"===e.kind&&e.codePoint===t}}}),require_char_class_to_single_char_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-class-to-single-char-transform.js"(e,t){function r(e){return"Char"===e.type&&"\\b"!==e.value}function n(e){return/^\\[dwsDWS]$/.test(e)}function i(e){return/[dws]/.test(e)?e.toUpperCase():e.toLowerCase()}function o(e){var t=e.parent,r=e.index;if("Alternative"!==t.type)return!0;var n=t.expressions[r-1];return null==n||("Backreference"!==n.type||"number"!==n.kind)&&("Char"!==n.type||"decimal"!==n.kind)}function s(e){return/[*[()+?$./{}|]/.test(e)}init_polyfills(),t.exports={CharacterClass:function(e){var t=e.node;if(1===t.expressions.length&&o(e)&&r(t.expressions[0])){var a=t.expressions[0],l=a.value,u=a.kind,c=a.escaped;if(t.negative){if(!n(l))return;l=i(l)}e.replace({type:"Char",value:l,kind:u,escaped:c||s(l)})}}}}}),require_char_escape_unescape_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-escape-unescape-transform.js"(e,t){function r(e,t){var r=e.node.value,o=e.index,s=e.parent;return"CharacterClass"!==s.type&&"ClassRange"!==s.type?!i(r,o,s,t):!n(r,o,s)}function n(e,t,r){return"^"===e?0===t&&!r.negative:"-"===e||/[\]\\]/.test(e)}function i(e,t,r,n){return"{"===e?a(t,r):"}"===e?l(t,r):!(!n||!/[ #]/.test(e))||/[*[()+?^$./\\|]/.test(e)}function o(e,t,r){var n=e,i=(r?n>=0:n<t.expressions.length)&&t.expressions[n];while(i&&"Char"===i.type&&"simple"===i.kind&&!i.escaped&&/\d/.test(i.value))r?n--:n++,i=(r?n>=0:n<t.expressions.length)&&t.expressions[n];return Math.abs(e-n)}function s(e,t){return e&&"Char"===e.type&&"simple"===e.kind&&!e.escaped&&e.value===t}function a(e,t){if(null==e)return!1;var r=o(e+1,t),n=e+r+1,i=n<t.expressions.length&&t.expressions[n];if(r){if(s(i,"}"))return!0;if(s(i,","))return r=o(n+1,t),n=n+r+1,i=n<t.expressions.length&&t.expressions[n],s(i,"}")}return!1}function l(e,t){if(null==e)return!1;var r=o(e-1,t,!0),n=e-r-1,i=n>=0&&t.expressions[n];return!(!r||!s(i,"{"))||!!s(i,",")&&(r=o(n-1,t,!0),n=n-r-1,i=n<t.expressions.length&&t.expressions[n],r&&s(i,"{"))}init_polyfills(),t.exports={_hasXFlag:!1,init:function(e){this._hasXFlag=e.flags.includes("x")},Char:function(e){var t=e.node;t.escaped&&r(e,this._hasXFlag)&&delete t.escaped}}}}),require_char_class_classranges_merge_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/char-class-classranges-merge-transform.js"(e,t){function r(e,t){var r=n(e),s=n(t);if(r===s){if("ClassRange"===e.type&&"ClassRange"!==t.type)return-1;if("ClassRange"===t.type&&"ClassRange"!==e.type)return 1;if("ClassRange"===e.type&&"ClassRange"===t.type)return n(e.to)-n(t.to);if(i(e)&&i(t)||o(e)&&o(t))return e.value<t.value?-1:1}return r-s}function n(e){return"Char"===e.type?"-"===e.value||"control"===e.kind?1/0:"meta"===e.kind&&isNaN(e.codePoint)?-1:e.codePoint:e.from.codePoint}function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"Char"===e.type&&"meta"===e.kind&&(t?e.value===t:/^\\[dws]$/i.test(e.value))}function o(e){return"Char"===e.type&&"control"===e.kind}function s(e,t,r){for(var n=0;n<t.length;n++)if(a(e,t[n],r))return!0;return!1}function a(e,t,r){return"ClassRange"===e.type?a(e.from,t,r)&&a(e.to,t,r):!("\\S"!==t||!i(e,"\\w")&&!i(e,"\\d"))||(!("\\D"!==t||!i(e,"\\W")&&!i(e,"\\s"))||(!("\\w"!==t||!i(e,"\\d"))||(!("\\W"!==t||!i(e,"\\s"))||"Char"===e.type&&!isNaN(e.codePoint)&&("\\s"===t?l(e):"\\S"===t?!l(e):"\\d"===t?u(e):"\\D"===t?!u(e):"\\w"===t?c(e,r):"\\W"===t&&!c(e,r)))))}function l(e){return 9===e.codePoint||10===e.codePoint||11===e.codePoint||12===e.codePoint||13===e.codePoint||32===e.codePoint||160===e.codePoint||5760===e.codePoint||e.codePoint>=8192&&e.codePoint<=8202||8232===e.codePoint||8233===e.codePoint||8239===e.codePoint||8287===e.codePoint||12288===e.codePoint||65279===e.codePoint}function u(e){return e.codePoint>=48&&e.codePoint<=57}function c(e,t){return u(e)||e.codePoint>=65&&e.codePoint<=90||e.codePoint>=97&&e.codePoint<=122||"_"===e.value||t&&(383===e.codePoint||8490===e.codePoint)}function d(e,t){if(t&&"ClassRange"===t.type){if(p(e,t))return!0;if(g(e)&&t.to.codePoint===e.codePoint-1)return t.to=e,!0;if("ClassRange"===e.type&&e.from.codePoint<=t.to.codePoint+1&&e.to.codePoint>=t.from.codePoint-1)return e.from.codePoint<t.from.codePoint&&(t.from=e.from),e.to.codePoint>t.to.codePoint&&(t.to=e.to),!0}return!1}function h(e,t){return!(!t||"ClassRange"!==t.type||!g(e)||t.from.codePoint!==e.codePoint+1)&&(t.from=e,!0)}function p(e,t){return("Char"!==e.type||!isNaN(e.codePoint))&&("ClassRange"===e.type?p(e.from,t)&&p(e.to,t):e.codePoint>=t.from.codePoint&&e.codePoint<=t.to.codePoint)}function f(e,t,r){if(!g(e))return 0;var n=0;while(t>0){var i=r[t],o=r[t-1];if(!g(o)||o.codePoint!==i.codePoint-1)break;n++,t--}return n>1?(r[t]={type:"ClassRange",from:r[t],to:e},n):0}function g(e){return e&&"Char"===e.type&&!isNaN(e.codePoint)&&(c(e,!1)||"unicode"===e.kind||"hex"===e.kind||"oct"===e.kind||"decimal"===e.kind)}init_polyfills(),t.exports={_hasIUFlags:!1,init:function(e){this._hasIUFlags=e.flags.includes("i")&&e.flags.includes("u")},CharacterClass:function(e){var t=e.node,n=t.expressions,o=[];n.forEach((function(e){i(e)&&o.push(e.value)})),n.sort(r);for(var a=0;a<n.length;a++){var l=n[a];if(s(l,o,this._hasIUFlags)||d(l,n[a-1])||h(l,n[a+1]))n.splice(a,1),a--;else{var u=f(l,a,n);n.splice(a-u+1,u),a-=u}}}}}}),require_disjunction_remove_duplicates_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/disjunction-remove-duplicates-transform.js"(e,t){init_polyfills();var r=require_node_path(),n=require_utils(),i=n.disjunctionToList,o=n.listToDisjunction;t.exports={Disjunction:function(e){var t=e.node,n={},s=i(t).filter((function(e){var t=e?r.getForNode(e).jsonEncode():"null";return!n.hasOwnProperty(t)&&(n[t]=e,!0)}));e.replace(o(s))}}}}),require_group_single_chars_to_char_class=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/group-single-chars-to-char-class.js"(e,t){init_polyfills(),t.exports={Disjunction:function(e){var t=e.node,i=e.parent;if(r[i.type]){var o=new Map;if(n(t,o)&&o.size){var s={type:"CharacterClass",expressions:Array.from(o.keys()).sort().map((function(e){return o.get(e)}))};r[i.type](e.getParent(),s)}}}};var r={RegExp:function(e,t){var r=e.node;r.body=t},Group:function(e,t){var r=e.node;r.capturing?r.expression=t:e.replace(t)}};function n(e,t){if(!e)return!1;var r=e.type;if("Disjunction"===r){var i=e.left,o=e.right;return n(i,t)&&n(o,t)}if("Char"===r){if("meta"===e.kind&&"."===e.symbol)return!1;var s=e.value;return t.set(s,e),!0}return"CharacterClass"===r&&!e.negative&&e.expressions.every((function(e){return n(e,t)}))}}}),require_remove_empty_group_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/remove-empty-group-transform.js"(e,t){init_polyfills(),t.exports={Group:function(e){var t=e.node,r=e.parent,n=e.getChild();t.capturing||n||("Repetition"===r.type?e.getParent().replace(t):"RegExp"!==r.type&&e.remove())}}}}),require_ungroup_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/ungroup-transform.js"(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){var t=e.parent,r=e.index;if("Alternative"!==t.type)return!0;var n=t.expressions[r-1];return null==n||("Backreference"!==n.type||"number"!==n.kind)&&("Char"!==n.type||"decimal"!==n.kind)}init_polyfills(),t.exports={Group:function(e){var t=e.node,i=e.parent,o=e.getChild();if(!t.capturing&&o&&n(e)&&("Disjunction"!==o.node.type||"RegExp"===i.type)&&("Repetition"!==i.type||"Char"===o.node.type||"CharacterClass"===o.node.type))if("Alternative"===o.node.type){var s=e.getParent();"Alternative"===s.node.type&&s.replace({type:"Alternative",expressions:[].concat(r(i.expressions.slice(0,e.index)),r(o.node.expressions),r(i.expressions.slice(e.index+1)))})}else e.replace(o.node)}}}}),require_combine_repeating_patterns_transform=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/combine-repeating-patterns-transform.js"(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}init_polyfills();var n=require_node_path(),i=require_utils(),o=i.increaseQuantifierByOne;function s(e,t,i){var o=e.node,s=Math.ceil(i/2),a=0;while(a<s){var l=i-2*a-1,u=void 0,c=void 0;if(0===a?(u=t,c=e.getChild(l)):(u=n.getForNode({type:"Alternative",expressions:[].concat(r(o.expressions.slice(i-a,i)),[t.node])}),c=n.getForNode({type:"Alternative",expressions:[].concat(r(o.expressions.slice(l,i-a)))})),u.hasEqualSource(c)){for(var d=0;d<2*a+1;d++)e.getChild(l).remove();return t.replace({type:"Repetition",expression:0===a&&"Repetition"!==u.node.type?u.node:{type:"Group",capturing:!1,expression:u.node},quantifier:{type:"Quantifier",kind:"Range",from:2,to:2,greedy:!0}}),l}a++}return i}function a(e,t,i){var s=e.node,a=0;while(a<i){var l=e.getChild(a);if("Repetition"===l.node.type&&l.node.quantifier.greedy){var u=l.getChild(),c=void 0;if("Group"!==u.node.type||u.node.capturing||(u=u.getChild()),a+1===i?(c=t,"Group"!==c.node.type||c.node.capturing||(c=c.getChild())):c=n.getForNode({type:"Alternative",expressions:[].concat(r(s.expressions.slice(a+1,i+1)))}),u.hasEqualSource(c)){for(var d=a;d<i;d++)e.getChild(a+1).remove();return o(l.node.quantifier),a}}a++}return i}function l(e,t,i){var s=e.node;if("Repetition"===t.node.type&&t.node.quantifier.greedy){var a=t.getChild(),l=void 0;"Group"!==a.node.type||a.node.capturing||(a=a.getChild());var u=void 0;if("Alternative"===a.node.type?(u=a.node.expressions.length,l=n.getForNode({type:"Alternative",expressions:[].concat(r(s.expressions.slice(i-u,i)))})):(u=1,l=e.getChild(i-1),"Group"!==l.node.type||l.node.capturing||(l=l.getChild())),l.hasEqualSource(a)){for(var c=i-u;c<i;c++)e.getChild(i-u).remove();return o(t.node.quantifier),i-u}}return i}t.exports={Alternative:function(e){var t=e.node,r=1;while(r<t.expressions.length){var n=e.getChild(r);if(r=Math.max(1,s(e,n,r)),r>=t.expressions.length)break;if(n=e.getChild(r),r=Math.max(1,a(e,n,r)),r>=t.expressions.length)break;n=e.getChild(r),r=Math.max(1,l(e,n,r)),r++}}}}}),require_transforms2=__commonJS({"node_modules/regexp-tree/dist/optimizer/transforms/index.js"(e,t){init_polyfills(),t.exports=new Map([["charSurrogatePairToSingleUnicode",require_char_surrogate_pair_to_single_unicode_transform()],["charCodeToSimpleChar",require_char_code_to_simple_char_transform()],["charCaseInsensitiveLowerCaseTransform",require_char_case_insensitive_lowercase_transform()],["charClassRemoveDuplicates",require_char_class_remove_duplicates_transform()],["quantifiersMerge",require_quantifiers_merge_transform()],["quantifierRangeToSymbol",require_quantifier_range_to_symbol_transform()],["charClassClassrangesToChars",require_char_class_classranges_to_chars_transform()],["charClassToMeta",require_char_class_to_meta_transform()],["charClassToSingleChar",require_char_class_to_single_char_transform()],["charEscapeUnescape",require_char_escape_unescape_transform()],["charClassClassrangesMerge",require_char_class_classranges_merge_transform()],["disjunctionRemoveDuplicates",require_disjunction_remove_duplicates_transform()],["groupSingleCharsToCharClass",require_group_single_chars_to_char_class()],["removeEmptyGroup",require_remove_empty_group_transform()],["ungroup",require_ungroup_transform()],["combineRepeatingPatterns",require_combine_repeating_patterns_transform()]])}}),require_optimizer=__commonJS({"node_modules/regexp-tree/dist/optimizer/index.js"(e,t){init_polyfills();var r=require_clone(),n=require_parser2(),i=require_transform(),o=require_transforms2();t.exports={optimize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=t.whitelist,a=void 0===s?[]:s,l=t.blacklist,u=void 0===l?[]:l,c=a.length>0?a:Array.from(o.keys()),d=c.filter((function(e){return!u.includes(e)})),h=e;e instanceof RegExp&&(e=""+e),"string"===typeof e&&(h=n.parse(e));var p=new i.TransformResult(h),f=void 0;do{f=p.toString(),h=r(p.getAST()),d.forEach((function(e){if(!o.has(e))throw new Error("Unknown optimization-transform: "+e+". Available transforms are: "+Array.from(o.keys()).join(", "));var t=o.get(e),n=i.transform(h,t);n.toString()!==p.toString()&&(n.toString().length<=p.toString().length?p=n:h=r(p.getAST()))}))}while(p.toString()!==f);return p}}}}),require_special_symbols=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/special-symbols.js"(e,t){init_polyfills();var r="ε",n=r+"*";t.exports={EPSILON:r,EPSILON_CLOSURE:n}}}),require_nfa=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/nfa/nfa.js"(e,t){init_polyfills();var r=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(r.push(s.value),t&&r.length===t)break}catch(l){i=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s=require_special_symbols(),a=s.EPSILON,l=s.EPSILON_CLOSURE,u=function(){function e(t,r){o(this,e),this.in=t,this.out=r}return n(e,[{key:"matches",value:function(e){return this.in.matches(e)}},{key:"getAlphabet",value:function(){if(!this._alphabet){this._alphabet=new Set;var e=this.getTransitionTable();for(var t in e){var r=e[t];for(var n in r)n!==l&&this._alphabet.add(n)}}return this._alphabet}},{key:"getAcceptingStates",value:function(){return this._acceptingStates||this.getTransitionTable(),this._acceptingStates}},{key:"getAcceptingStateNumbers",value:function(){if(!this._acceptingStateNumbers){this._acceptingStateNumbers=new Set;var e=!0,t=!1,r=void 0;try{for(var n,i=this.getAcceptingStates()[Symbol.iterator]();!(e=(n=i.next()).done);e=!0){var o=n.value;this._acceptingStateNumbers.add(o.number)}}catch(s){t=!0,r=s}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}return this._acceptingStateNumbers}},{key:"getTransitionTable",value:function(){var e=this;if(!this._transitionTable){this._transitionTable={},this._acceptingStates=new Set;var t=new Set,n=new Set,o=function i(o){if(!t.has(o)){t.add(o),o.number=t.size,e._transitionTable[o.number]={},o.accepting&&e._acceptingStates.add(o);var s=o.getTransitions(),a=!0,l=!1,u=void 0;try{for(var c,d=s[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value,p=r(h,2),f=p[0],g=p[1],m=[];n.add(f);var v=!0,y=!1,_=void 0;try{for(var b,S=g[Symbol.iterator]();!(v=(b=S.next()).done);v=!0){var w=b.value;i(w),m.push(w.number)}}catch(C){y=!0,_=C}finally{try{!v&&S.return&&S.return()}finally{if(y)throw _}}e._transitionTable[o.number][f]=m}}catch(C){l=!0,u=C}finally{try{!a&&d.return&&d.return()}finally{if(l)throw u}}}};o(this.in),t.forEach((function(t){delete e._transitionTable[t.number][a],e._transitionTable[t.number][l]=[].concat(i(t.getEpsilonClosure())).map((function(e){return e.number}))}))}return this._transitionTable}}]),e}();t.exports=u}}),require_dfa_minimizer=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/dfa/dfa-minimizer.js"(e,t){init_polyfills();var r=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(r.push(s.value),t&&r.length===t)break}catch(l){i=!0,o=l}finally{try{!n&&a["return"]&&a["return"]()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();function n(e){return Array.isArray(e)?e:Array.from(e)}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var o=null;function s(e){var t=e.getTransitionTable(),s=Object.keys(t),u=e.getAlphabet(),c=e.getAcceptingStateNumbers();o={};var d=new Set;s.forEach((function(e){e=Number(e);var t=c.has(e);t?o[e]=c:(d.add(e),o[e]=d)}));var h=[[d,c].filter((function(e){return e.size>0}))],p=void 0,f=void 0;p=h[h.length-1],f=h[h.length-2];var g=function(){var e={},r=!0,s=!1,a=void 0;try{for(var c,d=p[Symbol.iterator]();!(r=(c=d.next()).done);r=!0){var g=c.value,m={},v=n(g),y=v[0],_=v.slice(1);m[y]=new Set([y]);var b=!0,S=!1,w=void 0;try{e:for(var C,A=_[Symbol.iterator]();!(b=(C=A.next()).done);b=!0){var E=C.value,x=!0,T=!1,k=void 0;try{for(var O,P=Object.keys(m)[Symbol.iterator]();!(x=(O=P.next()).done);x=!0){var R=O.value;if(l(E,R,t,u)){m[R].add(E),m[E]=m[R];continue e}}}catch(L){T=!0,k=L}finally{try{!x&&P.return&&P.return()}finally{if(T)throw k}}m[E]=new Set([E])}}catch(L){S=!0,w=L}finally{try{!b&&A.return&&A.return()}finally{if(S)throw w}}Object.assign(e,m)}}catch(L){s=!0,a=L}finally{try{!r&&d.return&&d.return()}finally{if(s)throw a}}o=e;var I=new Set(Object.keys(e).map((function(t){return e[t]})));h.push([].concat(i(I))),p=h[h.length-1],f=h[h.length-2]};while(!a(p,f))g();var m=new Map,v=1;p.forEach((function(e){return m.set(e,v++)}));var y={},_=new Set,b=function(e,t){var r=!0,n=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;c.has(a)&&_.add(t)}}catch(l){n=!0,i=l}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}},S=!0,w=!1,C=void 0;try{for(var A,E=m.entries()[Symbol.iterator]();!(S=(A=E.next()).done);S=!0){var x=A.value,T=r(x,2),k=T[0],O=T[1];y[O]={};var P=!0,R=!1,I=void 0;try{for(var L,M=u[Symbol.iterator]();!(P=(L=M.next()).done);P=!0){var N=L.value;b(k,O);var D=void 0,B=!0,F=!1,j=void 0;try{for(var H,q=k[Symbol.iterator]();!(B=(H=q.next()).done);B=!0){var U=H.value;if(D=t[U][N],D)break}}catch(G){F=!0,j=G}finally{try{!B&&q.return&&q.return()}finally{if(F)throw j}}D&&(y[O][N]=m.get(o[D]))}}catch(G){R=!0,I=G}finally{try{!P&&M.return&&M.return()}finally{if(R)throw I}}}}catch(G){w=!0,C=G}finally{try{!S&&E.return&&E.return()}finally{if(w)throw C}}return e.setTransitionTable(y),e.setAcceptingStateNumbers(_),e}function a(e,t){if(!t)return!1;if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r];if(n.size!==o.size)return!1;if([].concat(i(n)).sort().join(",")!==[].concat(i(o)).sort().join(","))return!1}return!0}function l(e,t,r,n){var i=!0,o=!1,s=void 0;try{for(var a,l=n[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var c=a.value;if(!u(e,t,r,c))return!1}}catch(d){o=!0,s=d}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return!0}function u(e,t,r,n){if(!o[e]||!o[t])return!1;var i=r[e][n],s=r[t][n];return!i&&!s||o[e].has(i)&&o[t].has(s)}t.exports={minimize:s}}}),require_dfa=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/dfa/dfa.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=require_dfa_minimizer(),s=require_special_symbols(),a=s.EPSILON_CLOSURE,l=function(){function e(t){i(this,e),this._nfa=t}return r(e,[{key:"minimize",value:function(){this.getTransitionTable(),this._originalAcceptingStateNumbers=this._acceptingStateNumbers,this._originalTransitionTable=this._transitionTable,o.minimize(this)}},{key:"getAlphabet",value:function(){return this._nfa.getAlphabet()}},{key:"getAcceptingStateNumbers",value:function(){return this._acceptingStateNumbers||this.getTransitionTable(),this._acceptingStateNumbers}},{key:"getOriginaAcceptingStateNumbers",value:function(){return this._originalAcceptingStateNumbers||this.getTransitionTable(),this._originalAcceptingStateNumbers}},{key:"setTransitionTable",value:function(e){this._transitionTable=e}},{key:"setAcceptingStateNumbers",value:function(e){this._acceptingStateNumbers=e}},{key:"getTransitionTable",value:function(){var e=this;if(this._transitionTable)return this._transitionTable;var t=this._nfa.getTransitionTable(),r=Object.keys(t);this._acceptingStateNumbers=new Set;var i=t[r[0]][a],o=[i],s=this.getAlphabet(),l=this._nfa.getAcceptingStateNumbers(),u={},c=function(t){var r=!0,n=!1,i=void 0;try{for(var o,s=l[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;if(-1!==t.indexOf(a)){e._acceptingStateNumbers.add(t.join(","));break}}}catch(u){n=!0,i=u}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}};while(o.length>0){var d=o.shift(),h=d.join(",");u[h]={};var p=!0,f=!1,g=void 0;try{for(var m,v=s[Symbol.iterator]();!(p=(m=v.next()).done);p=!0){var y=m.value,_=[];c(d);var b=!0,S=!1,w=void 0;try{for(var C,A=d[Symbol.iterator]();!(b=(C=A.next()).done);b=!0){var E=C.value,x=t[E][y];if(x){var T=!0,k=!1,O=void 0;try{for(var P,R=x[Symbol.iterator]();!(T=(P=R.next()).done);T=!0){var I=P.value;t[I]&&_.push.apply(_,n(t[I][a]))}}catch(D){k=!0,O=D}finally{try{!T&&R.return&&R.return()}finally{if(k)throw O}}}}}catch(D){S=!0,w=D}finally{try{!b&&A.return&&A.return()}finally{if(S)throw w}}var L=new Set(_),M=[].concat(n(L));if(M.length>0){var N=M.join(",");u[h][y]=N,u.hasOwnProperty(N)||o.unshift(M)}}}catch(D){f=!0,g=D}finally{try{!p&&v.return&&v.return()}finally{if(f)throw g}}}return this._transitionTable=this._remapStateNumbers(u)}},{key:"_remapStateNumbers",value:function(e){var t={};this._originalTransitionTable=e;var r={};for(var n in Object.keys(e).forEach((function(e,r){t[e]=r+1})),e){var i=e[n],o={};for(var s in i)o[s]=t[i[s]];r[t[n]]=o}this._originalAcceptingStateNumbers=this._acceptingStateNumbers,this._acceptingStateNumbers=new Set;var a=!0,l=!1,u=void 0;try{for(var c,d=this._originalAcceptingStateNumbers[Symbol.iterator]();!(a=(c=d.next()).done);a=!0){var h=c.value;this._acceptingStateNumbers.add(t[h])}}catch(p){l=!0,u=p}finally{try{!a&&d.return&&d.return()}finally{if(l)throw u}}return r}},{key:"getOriginalTransitionTable",value:function(){return this._originalTransitionTable||this.getTransitionTable(),this._originalTransitionTable}},{key:"matches",value:function(e){var t=1,r=0,n=this.getTransitionTable();while(e[r])if(t=n[t][e[r++]],!t)return!1;return!!this.getAcceptingStateNumbers().has(t)}}]),e}();t.exports=l}}),require_state=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/state.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.accepting,i=void 0!==r&&r;n(this,e),this._transitions=new Map,this.accepting=i}return r(e,[{key:"getTransitions",value:function(){return this._transitions}},{key:"addTransition",value:function(e,t){return this.getTransitionsOnSymbol(e).add(t),this}},{key:"getTransitionsOnSymbol",value:function(e){var t=this._transitions.get(e);return t||(t=new Set,this._transitions.set(e,t)),t}}]),e}();t.exports=i}}),require_nfa_state=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/nfa/nfa-state.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=require_state(),a=require_special_symbols(),l=a.EPSILON,u=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),r(t,[{key:"matches",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;if(t.has(this))return!1;if(t.add(this),0===e.length){if(this.accepting)return!0;var r=!0,n=!1,i=void 0;try{for(var o,s=this.getTransitionsOnSymbol(l)[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var a=o.value;if(a.matches("",t))return!0}}catch(A){n=!0,i=A}finally{try{!r&&s.return&&s.return()}finally{if(n)throw i}}return!1}var u=e[0],c=e.slice(1),d=this.getTransitionsOnSymbol(u),h=!0,p=!1,f=void 0;try{for(var g,m=d[Symbol.iterator]();!(h=(g=m.next()).done);h=!0){var v=g.value;if(v.matches(c))return!0}}catch(A){p=!0,f=A}finally{try{!h&&m.return&&m.return()}finally{if(p)throw f}}var y=!0,_=!1,b=void 0;try{for(var S,w=this.getTransitionsOnSymbol(l)[Symbol.iterator]();!(y=(S=w.next()).done);y=!0){var C=S.value;if(C.matches(e,t))return!0}}catch(A){_=!0,b=A}finally{try{!y&&w.return&&w.return()}finally{if(_)throw b}}return!1}},{key:"getEpsilonClosure",value:function(){var e=this;return this._epsilonClosure||function(){var t=e.getTransitionsOnSymbol(l),r=e._epsilonClosure=new Set;r.add(e);var n=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var u=s.value;if(!r.has(u)){r.add(u);var c=u.getEpsilonClosure();c.forEach((function(e){return r.add(e)}))}}}catch(d){i=!0,o=d}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}}(),this._epsilonClosure}}]),t}(s);t.exports=u}}),require_builders=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/nfa/builders.js"(e,t){init_polyfills();var r=require_nfa(),n=require_nfa_state(),i=require_special_symbols(),o=i.EPSILON;function s(e){var t=new n,i=new n({accepting:!0});return new r(t.addTransition(e,i),i)}function a(){return s(o)}function l(e,t){return e.out.accepting=!1,t.out.accepting=!0,e.out.addTransition(o,t.in),new r(e.in,t.out)}function u(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=!0,o=!1,s=void 0;try{for(var a,u=r[Symbol.iterator]();!(i=(a=u.next()).done);i=!0){var c=a.value;e=l(e,c)}}catch(d){o=!0,s=d}finally{try{!i&&u.return&&u.return()}finally{if(o)throw s}}return e}function c(e,t){var i=new n,s=new n;return i.addTransition(o,e.in),i.addTransition(o,t.in),s.accepting=!0,e.out.accepting=!1,t.out.accepting=!1,e.out.addTransition(o,s),t.out.addTransition(o,s),new r(i,s)}function d(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=!0,o=!1,s=void 0;try{for(var a,l=r[Symbol.iterator]();!(i=(a=l.next()).done);i=!0){var u=a.value;e=c(e,u)}}catch(d){o=!0,s=d}finally{try{!i&&l.return&&l.return()}finally{if(o)throw s}}return e}function h(e){var t=new n,i=new n({accepting:!0});return t.addTransition(o,e.in),t.addTransition(o,i),e.out.accepting=!1,e.out.addTransition(o,i),i.addTransition(o,e.in),new r(t,i)}function p(e){return e.in.addTransition(o,e.out),e.out.addTransition(o,e.in),e}function f(e){return e.out.addTransition(o,e.in),e}function g(e){return e.in.addTransition(o,e.out),e}t.exports={alt:u,char:s,e:a,or:d,rep:p,repExplicit:h,plusRep:f,questionRep:g}}}),require_nfa_from_regexp=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/nfa/nfa-from-regexp.js"(e,t){function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}init_polyfills();var n=require_parser2(),i=require_builders(),o=i.alt,s=i.char,a=i.or,l=i.rep,u=i.plusRep,c=i.questionRep;function d(e){if(e&&!h[e.type])throw new Error(e.type+" is not supported in NFA/DFA interpreter.");return e?h[e.type](e):""}var h={RegExp:function(e){if(""!==e.flags)throw new Error("NFA/DFA: Flags are not supported yet.");return d(e.body)},Alternative:function(e){var t=(e.expressions||[]).map(d);return o.apply(void 0,r(t))},Disjunction:function(e){return a(d(e.left),d(e.right))},Repetition:function(e){switch(e.quantifier.kind){case"*":return l(d(e.expression));case"+":return u(d(e.expression));case"?":return c(d(e.expression));default:throw new Error("Unknown repeatition: "+e.quantifier.kind+".")}},Char:function(e){if("simple"!==e.kind)throw new Error("NFA/DFA: Only simple chars are supported yet.");return s(e.value)},Group:function(e){return d(e.expression)}};t.exports={build:function(e){var t=e;return e instanceof RegExp&&(e=""+e),"string"===typeof e&&(t=n.parse(e,{captureLocations:!0})),d(t)}}}}),require_finite_automaton=__commonJS({"node_modules/regexp-tree/dist/interpreter/finite-automaton/index.js"(e,t){init_polyfills();var r=require_nfa(),n=require_dfa(),i=require_nfa_from_regexp(),o=require_builders();t.exports={NFA:r,DFA:n,builders:o,toNFA:function(e){return i.build(e)},toDFA:function(e){return new n(this.toNFA(e))},test:function(e,t){return this.toDFA(e).matches(t)}}}}),require_runtime=__commonJS({"node_modules/regexp-tree/dist/compat-transpiler/runtime/index.js"(e,t){init_polyfills();var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(t,r){var i=r.flags,o=r.groups,s=r.source;n(this,e),this._re=t,this._groups=o,this.flags=i,this.source=s||t.source,this.dotAll=i.includes("s"),this.global=t.global,this.ignoreCase=t.ignoreCase,this.multiline=t.multiline,this.sticky=t.sticky,this.unicode=t.unicode}return r(e,[{key:"test",value:function(e){return this._re.test(e)}},{key:"compile",value:function(e){return this._re.compile(e)}},{key:"toString",value:function(){return this._toStringResult||(this._toStringResult="/"+this.source+"/"+this.flags),this._toStringResult}},{key:"exec",value:function(e){var t=this._re.exec(e);if(!this._groups||!t)return t;for(var r in t.groups={},this._groups){var n=this._groups[r];t.groups[r]=t[n]}return t}}]),e}();t.exports={RegExpTree:i}}}),require_regexp_tree2=__commonJS({"node_modules/regexp-tree/dist/regexp-tree.js"(e,t){init_polyfills();var r=require_compat_transpiler(),n=require_generator(),i=require_optimizer(),o=require_parser2(),s=require_transform(),a=require_traverse(),l=require_finite_automaton(),u=require_runtime(),c=u.RegExpTree,d={parser:o,fa:l,TransformResult:s.TransformResult,parse:function(e,t){return o.parse(""+e,t)},traverse:function(e,t,r){return a.traverse(e,t,r)},transform:function(e,t){return s.transform(e,t)},generate:function(e){return n.generate(e)},toRegExp:function(e){var t=this.compatTranspile(e);return new RegExp(t.getSource(),t.getFlags())},optimize:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.blacklist;return i.optimize(e,{whitelist:t,blacklist:n})},compatTranspile:function(e,t){return r.transform(e,t)},exec:function(e,t){if("string"===typeof e){var r=this.compatTranspile(e),n=r.getExtra();e=n.namedCapturingGroups?new c(r.toRegExp(),{flags:r.getFlags(),source:r.getSource(),groups:n.namedCapturingGroups}):r.toRegExp()}return e.exec(t)}};t.exports=d}}),require_regexp_tree3=__commonJS({"node_modules/regexp-tree/index.js"(e,t){init_polyfills(),t.exports=require_regexp_tree2()}}),require_crypto=__commonJS({"(disabled):crypto"(){init_polyfills()}}),require_jscrypto=__commonJS({"node_modules/jscrypto/index.js"(e,t){init_polyfills(),function(r,n){if("object"==typeof e&&"object"==typeof t)t.exports=n();else if("function"==typeof define&&__webpack_require__.amdO)define([],n);else if("object"==typeof e)e.JsCrypto=n();else{var i=n();for(var o in r.JsCrypto=r.JsCrypto||{},i)r.JsCrypto[o]=i[o]}}(e,(function(){return function(){var e={9691:function(e,t,r){r.d(t,{AES:function(){return S}});var n,i=r(9456),o=r(787),s=r(5693),a=r(9109),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=[],d=[],h=[],p=[],f=[],g=[],m=[],v=[],y=[],_=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,n=0;for(t=0;t<256;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,c[r]=i,d[i]=r;var o=e[r],s=e[o],a=e[s],l=257*e[i]^16843008*i;h[r]=l<<24|l>>>8,p[r]=l<<16|l>>>16,f[r]=l<<8|l>>>24,g[r]=l,l=16843009*a^65537*s^257*o^16843008*r,m[i]=l<<24|l>>>8,v[i]=l<<16|l>>>16,y[i]=l<<8|l>>>24,_[i]=l,r?(r=o^e[e[e[a^o]]],n^=e[e[n]]):r=n=1}}();var b=[0,1,2,4,8,16,32,64,128,27,54],S=function(e){function t(t){var r=e.call(this,t)||this;return r.u=0,r.h=[],r.v=[],r.O=t,r.A(),r}return l(t,e),t.prototype.A=function(){var e;if(!this.u||this.k!==this.H){for(var t=this.k=this.H,r=t.words,n=t.nSigBytes/4,i=4*((this.u=n+6)+1),o=this.h=[],s=0;s<i;s++)s<n?o[s]=r[s]:(e=o[s-1],s%n?n>6&&s%n==4&&(e=c[e>>>24]<<24|c[e>>>16&255]<<16|c[e>>>8&255]<<8|c[255&e]):(e=c[(e=e<<8|e>>>24)>>>24]<<24|c[e>>>16&255]<<16|c[e>>>8&255]<<8|c[255&e],e^=b[s/n|0]<<24),o[s]=o[s-n]^e);this.v=[];for(var a=0;a<i;a++)s=i-a,e=a%4?o[s]:o[s-4],this.v[a]=a<4||s<=4?e:m[c[e>>>24]]^v[c[e>>>16&255]]^y[c[e>>>8&255]]^_[c[255&e]]}},t.prototype.encryptBlock=function(e,t){this.B(e,t,this.h,h,p,f,g,c)},t.prototype.decryptBlock=function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this.B(e,t,this.v,m,v,y,_,d),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},t.prototype.B=function(e,t,r,n,i,o,s,a){for(var l=this.u,u=e[t]^r[0],c=e[t+1]^r[1],d=e[t+2]^r[2],h=e[t+3]^r[3],p=4,f=1;f<l;f++){var g=n[u>>>24]^i[c>>>16&255]^o[d>>>8&255]^s[255&h]^r[p++],m=n[c>>>24]^i[d>>>16&255]^o[h>>>8&255]^s[255&u]^r[p++],v=n[d>>>24]^i[h>>>16&255]^o[u>>>8&255]^s[255&c]^r[p++],y=n[h>>>24]^i[u>>>16&255]^o[c>>>8&255]^s[255&d]^r[p++];u=g,c=m,d=v,h=y}var _=(a[u>>>24]<<24|a[c>>>16&255]<<16|a[d>>>8&255]<<8|a[255&h])^r[p++],b=(a[c>>>24]<<24|a[d>>>16&255]<<16|a[h>>>8&255]<<8|a[255&u])^r[p++],S=(a[d>>>24]<<24|a[h>>>16&255]<<16|a[u>>>8&255]<<8|a[255&c])^r[p++],w=(a[h>>>24]<<24|a[u>>>16&255]<<16|a[c>>>8&255]<<8|a[255&d])^r[p++];e[t]=_,e[t+1]=b,e[t+2]=S,e[t+3]=w},t.createEncryptor=function(e,r){return new t(u(u({},r=void 0===r?{}:r),{key:e,transformMode:i.t.ENC_TRANSFORM_MODE}))},t.createDecryptor=function(e,r){return new t(u(u({},r=void 0===r?{}:r),{key:e,transformMode:i.t.DEC_TRANSFORM_MODE}))},t.encrypt=function(e,r,n){if("string"==typeof r)return s.E.encrypt(t,e,r,n);if(r.nSigBytes%4!=0)throw new Error("Key size must be multiple of 32bit/4byte/1word");return a.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){if("string"==typeof r)return s.E.decrypt(t,e,r,n);if(r.nSigBytes%4!=0)throw new Error("Key size must be multiple of 32bit/4byte/1word");return a.D.decrypt(t,e,r,n)},t.keySize=8,t}(o.G)},3967:function(e,t,r){r.d(t,{CBCMAC:function(){return a}});var n=r(4768),i=r(3354),o=r(9691),s=r(3664);function a(e,t,r,a,l,u){var c=u&&u.Cipher?u.Cipher:o.AES,d="string"==typeof r?n.d.parse(r):r,h=a||new i.e([0,0]),p="string"==typeof t?n.d.parse(t):t,f="string"==typeof e?n.d.parse(e):e,g=l||16;return s.K.mac(c,d,h,p,f,g)}},9910:function(e,t,r){r.d(t,{DES:function(){return g}});var n,i=r(787),o=r(9456),s=r(5693),a=r(9109),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(){return(u=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],d=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],h=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],p=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],g=function(e){function t(t){var r=e.call(this,t)||this;return r.N=2,r.I=[],r.U=[],r.L=0,r.F=0,r.O=t,r.A(),r}return l(t,e),t.prototype.A=function(){for(var e=this.H.words,t=[],r=0;r<56;r++){var n=c[r]-1;t[r]=e[n>>>5]>>>31-n%32&1}for(var i=this.I=[],o=0;o<16;o++){var s=i[o]=[],a=h[o];for(r=0;r<24;r++)s[r/6|0]|=t[(d[r]-1+a)%28]<<31-r%6,s[4+(r/6|0)]|=t[28+(d[r+24]-1+a)%28]<<31-r%6;for(s[0]=s[0]<<1|s[0]>>>31,r=1;r<7;r++)s[r]=s[r]>>>4*(r-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(this.U=[],r=0;r<16;r++)this.U[r]=i[15-r]},t.prototype.encryptBlock=function(e,t){this.R(e,t,this.I)},t.prototype.decryptBlock=function(e,t){this.R(e,t,this.U)},t.prototype.R=function(e,t,r){this.L=e[t],this.F=e[t+1],this.X(4,252645135),this.X(16,65535),this.Z(2,858993459),this.Z(8,16711935),this.X(1,1431655765);for(var n=0;n<16;n++){for(var i=r[n],o=this.L,s=this.F,a=0,l=0;l<8;l++){var u=(s^i[l])&f[l];a|=p[l][u>>>0]}this.L=s,this.F=o^a}var c=this.L;this.L=this.F,this.F=c,this.X(1,1431655765),this.Z(8,16711935),this.Z(2,858993459),this.X(16,65535),this.X(4,252645135),e[t]=this.L,e[t+1]=this.F},t.prototype.X=function(e,t){var r=(this.L>>>e^this.F)&t;this.F^=r,this.L^=r<<e},t.prototype.Z=function(e,t){var r=(this.F>>>e^this.L)&t;this.L^=r,this.F^=r<<e},t.createEncryptor=function(e,r){return new t(u(u({},r=void 0===r?{}:r),{key:e,transformMode:o.t.ENC_TRANSFORM_MODE}))},t.createDecryptor=function(e,r){return new t(u(u({},r=void 0===r?{}:r),{key:e,transformMode:o.t.DEC_TRANSFORM_MODE}))},t.encrypt=function(e,r,n){return"string"==typeof r?s.E.encrypt(t,e,r,n):a.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){return"string"==typeof r?s.E.decrypt(t,e,r,n):a.D.decrypt(t,e,r,n)},t.keySize=2,t.ivSize=2,t}(i.G)},6739:function(e,t,r){r.d(t,{DES3:function(){return h}});var n,i=r(9109),o=r(787),s=r(9456),a=r(9910),l=r(3354),u=r(5693),c=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),d=function(){return(d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},h=function(e){function t(t){var r=e.call(this,t)||this;r.N=2,r.O=t;var n=r.J();return r.Y=n[0],r.$=n[1],r.nn=n[2],r}return c(t,e),t.prototype.J=function(){var e=this.H.words;if(2!==e.length&&4!==e.length&&e.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var t=e.slice(0,2),r=e.length<4?e.slice(0,2):e.slice(2,4),n=e.length<6?e.slice(0,2):e.slice(4,6);return[a.DES.createEncryptor(new l.e(t)),a.DES.createEncryptor(new l.e(r)),a.DES.createEncryptor(new l.e(n))]},t.prototype.A=function(){var e=this.J();this.Y=e[0],this.$=e[1],this.nn=e[2]},t.prototype.encryptBlock=function(e,t){this.Y.encryptBlock(e,t),this.$.decryptBlock(e,t),this.nn.encryptBlock(e,t)},t.prototype.decryptBlock=function(e,t){this.nn.decryptBlock(e,t),this.$.encryptBlock(e,t),this.Y.decryptBlock(e,t)},t.createEncryptor=function(e,r){return new t(d(d({},r=void 0===r?{}:r),{key:e,transformMode:s.t.ENC_TRANSFORM_MODE}))},t.createDecryptor=function(e,r){return new t(d(d({},r=void 0===r?{}:r),{key:e,transformMode:s.t.DEC_TRANSFORM_MODE}))},t.encrypt=function(e,r,n){return"string"==typeof r?u.E.encrypt(t,e,r,n):i.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){return"string"==typeof r?u.E.decrypt(t,e,r,n):i.D.decrypt(t,e,r,n)},t.keySize=6,t.ivSize=2,t}(o.G)},7753:function(e,t,r){r.d(t,{GMAC:function(){return a}});var n=r(4768),i=r(3354),o=r(9691),s=r(5607);function a(e,t,r,a,l){var u="string"==typeof e?n.d.parse(e):e,c=r||new i.e([0,0,0,0]),d=l&&l.Cipher?l.Cipher:o.AES,h="string"==typeof t?n.d.parse(t):t,p=a||16;return s.V.mac(d,h,c,u,void 0,p)}},6367:function(e,t,r){r.d(t,{Hmac:function(){return i}});var n=r(4768),i=function(){function e(e,t){this.tn=e,"string"==typeof t&&(t=n.d.parse(t));var r=e.blockSize,i=4*r;t.nSigBytes>i&&(t=e.finalize(t)),t.clamp();for(var o=this.rn=t.clone(),s=this.en=t.clone(),a=o.words,l=s.words,u=0;u<r;u++)a[u]^=1549556828,l[u]^=909522486;s.nSigBytes=i,o.nSigBytes=i,this.reset()}return e.prototype.reset=function(){this.tn.reset(),this.tn.update(this.en)},e.prototype.update=function(e){return this.tn.update(e),this},e.prototype.finalize=function(e){var t=this.tn.finalize(e);return this.tn.reset(),this.tn.finalize(this.rn.clone().concat(t))},e}()},3027:function(e,t,r){r.d(t,{HmacMD5:function(){return o}});var n=r(6367),i=r(670);function o(e,t){return new n.Hmac(new i.MD5,t).finalize(e)}},149:function(e,t,r){r.d(t,{HmacSHA1:function(){return o}});var n=r(6367),i=r(3173);function o(e,t){return new n.Hmac(new i.SHA1,t).finalize(e)}},4105:function(e,t,r){r.d(t,{HmacSHA224:function(){return o}});var n=r(6367),i=r(766);function o(e,t){return new n.Hmac(new i.SHA224,t).finalize(e)}},980:function(e,t,r){r.d(t,{HmacSHA256:function(){return o}});var n=r(6367),i=r(5561);function o(e,t){return new n.Hmac(new i.SHA256,t).finalize(e)}},5838:function(e,t,r){r.d(t,{HmacSHA384:function(){return o}});var n=r(6367),i=r(6324);function o(e,t){return new n.Hmac(new i.SHA384,t).finalize(e)}},9902:function(e,t,r){r.d(t,{HmacSHA512:function(){return o}});var n=r(6367),i=r(7491);function o(e,t){return new n.Hmac(new i.SHA512,t).finalize(e)}},670:function(e,t,r){r.d(t,{MD5:function(){return h}});var n,i=r(3354),o=r(1868),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=[];function l(e,t,r,n,i,o,s){var a=e+(t&r|~t&n)+i+s;return(a<<o|a>>>32-o)+t}function u(e,t,r,n,i,o,s){var a=e+(t&n|r&~n)+i+s;return(a<<o|a>>>32-o)+t}function c(e,t,r,n,i,o,s){var a=e+(t^r^n)+i+s;return(a<<o|a>>>32-o)+t}function d(e,t,r,n,i,o,s){var a=e+(r^(t|~n))+i+s;return(a<<o|a>>>32-o)+t}!function(){for(var e=0;e<64;e++)a[e]=4294967296*Math.abs(Math.sin(e+1))|0}();var h=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new i.e([1732584193,4023233417,2562383102,271733878]),t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new i.e([1732584193,4023233417,2562383102,271733878])},t.prototype.un=function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o=this.on.words,s=e[t],h=e[t+1],p=e[t+2],f=e[t+3],g=e[t+4],m=e[t+5],v=e[t+6],y=e[t+7],_=e[t+8],b=e[t+9],S=e[t+10],w=e[t+11],C=e[t+12],A=e[t+13],E=e[t+14],x=e[t+15],T=o[0],k=o[1],O=o[2],P=o[3];T=l(T,k,O,P,s,7,a[0]),P=l(P,T,k,O,h,12,a[1]),O=l(O,P,T,k,p,17,a[2]),k=l(k,O,P,T,f,22,a[3]),T=l(T,k,O,P,g,7,a[4]),P=l(P,T,k,O,m,12,a[5]),O=l(O,P,T,k,v,17,a[6]),k=l(k,O,P,T,y,22,a[7]),T=l(T,k,O,P,_,7,a[8]),P=l(P,T,k,O,b,12,a[9]),O=l(O,P,T,k,S,17,a[10]),k=l(k,O,P,T,w,22,a[11]),T=l(T,k,O,P,C,7,a[12]),P=l(P,T,k,O,A,12,a[13]),O=l(O,P,T,k,E,17,a[14]),T=u(T,k=l(k,O,P,T,x,22,a[15]),O,P,h,5,a[16]),P=u(P,T,k,O,v,9,a[17]),O=u(O,P,T,k,w,14,a[18]),k=u(k,O,P,T,s,20,a[19]),T=u(T,k,O,P,m,5,a[20]),P=u(P,T,k,O,S,9,a[21]),O=u(O,P,T,k,x,14,a[22]),k=u(k,O,P,T,g,20,a[23]),T=u(T,k,O,P,b,5,a[24]),P=u(P,T,k,O,E,9,a[25]),O=u(O,P,T,k,f,14,a[26]),k=u(k,O,P,T,_,20,a[27]),T=u(T,k,O,P,A,5,a[28]),P=u(P,T,k,O,p,9,a[29]),O=u(O,P,T,k,y,14,a[30]),T=c(T,k=u(k,O,P,T,C,20,a[31]),O,P,m,4,a[32]),P=c(P,T,k,O,_,11,a[33]),O=c(O,P,T,k,w,16,a[34]),k=c(k,O,P,T,E,23,a[35]),T=c(T,k,O,P,h,4,a[36]),P=c(P,T,k,O,g,11,a[37]),O=c(O,P,T,k,y,16,a[38]),k=c(k,O,P,T,S,23,a[39]),T=c(T,k,O,P,A,4,a[40]),P=c(P,T,k,O,s,11,a[41]),O=c(O,P,T,k,f,16,a[42]),k=c(k,O,P,T,v,23,a[43]),T=c(T,k,O,P,b,4,a[44]),P=c(P,T,k,O,C,11,a[45]),O=c(O,P,T,k,x,16,a[46]),T=d(T,k=c(k,O,P,T,p,23,a[47]),O,P,s,6,a[48]),P=d(P,T,k,O,y,10,a[49]),O=d(O,P,T,k,E,15,a[50]),k=d(k,O,P,T,m,21,a[51]),T=d(T,k,O,P,C,6,a[52]),P=d(P,T,k,O,f,10,a[53]),O=d(O,P,T,k,S,15,a[54]),k=d(k,O,P,T,h,21,a[55]),T=d(T,k,O,P,_,6,a[56]),P=d(P,T,k,O,x,10,a[57]),O=d(O,P,T,k,v,15,a[58]),k=d(k,O,P,T,A,21,a[59]),T=d(T,k,O,P,g,6,a[60]),P=d(P,T,k,O,w,10,a[61]),O=d(O,P,T,k,p,15,a[62]),k=d(k,O,P,T,b,21,a[63]),o[0]=o[0]+T|0,o[1]=o[1]+k|0,o[2]=o[2]+O|0,o[3]=o[3]+P|0},t.prototype.fn=function(){var e=this.cn,t=e.words,r=8*this.sn,n=8*e.nSigBytes;t[n>>>5]|=128<<24-n%32;var i=Math.floor(r/4294967296),o=r;t[15+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t[14+(n+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.nSigBytes=4*(t.length+1),this.an();for(var s=this.on,a=s.words,l=0;l<4;l++){var u=a[l];a[l]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}return s},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e){return(new t).finalize(e)},t}(o.P)},4615:function(e,t,r){r.d(t,{RC4:function(){return u}});var n,i=r(30),o=r(5693),s=r(9109),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e){function t(t){var r=e.call(this,t)||this;return r.S=[],r.i=0,r.j=0,r.O=t,r.A(),r}return a(t,e),t.prototype.A=function(){var e=this.H,t=e.words,r=e.nSigBytes;this.S=[];for(var n=0;n<256;n++)this.S[n]=n;n=0;for(var i=0;n<256;n++){var o=n%r,s=t[o>>>2]>>>24-o%4*8&255;i=(i+this.S[n]+s)%256;var a=this.S[n];this.S[n]=this.S[i],this.S[i]=a}this.i=this.j=0},t.prototype.un=function(e,t){e[t]^=this.generateKeyStreamWord()},t.prototype.generateKeyStreamWord=function(){for(var e=this.S,t=this.i,r=this.j,n=0,i=0;i<4;i++){r=(r+e[t=(t+1)%256])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this.i=t,this.j=r,n},t.createEncryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.createDecryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.encrypt=function(e,r,n){return"string"==typeof r?o.E.encrypt(t,e,r,n):s.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){return"string"==typeof r?o.E.decrypt(t,e,r,n):s.D.decrypt(t,e,r,n)},t.ivSize=0,t.keySize=8,t}(i.q)},9639:function(e,t,r){r.d(t,{RC4Drop:function(){return u}});var n,i=r(5693),o=r(9109),s=r(4615),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e){function t(t){var r=e.call(this,t)||this;return r.drop=192,r.O=t,t&&"number"==typeof t.drop&&(r.drop=t.drop),r.A(),r}return a(t,e),t.prototype.A=function(){e.prototype.A.call(this);for(var t=this.drop;t>0;t--)this.generateKeyStreamWord()},t.createEncryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.createDecryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.encrypt=function(e,r,n){return"string"==typeof r?i.E.encrypt(t,e,r,n):o.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){return"string"==typeof r?i.E.decrypt(t,e,r,n):o.D.decrypt(t,e,r,n)},t}(s.RC4)},7104:function(e,t,r){r.d(t,{RIPEMD160:function(){return _}});var n,i=r(1868),o=r(3354),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=new o.e([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),l=new o.e([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=new o.e([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),c=new o.e([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),d=new o.e([0,1518500249,1859775393,2400959708,2840853838]),h=new o.e([1352829926,1548603684,1836072691,2053994217,0]);function p(e,t,r){return e^t^r}function f(e,t,r){return e&t|~e&r}function g(e,t,r){return(e|~t)^r}function m(e,t,r){return e&r|t&~r}function v(e,t,r){return e^(t|~r)}function y(e,t){return e<<t|e>>>32-t}var _=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new o.e([1732584193,4023233417,2562383102,271733878,3285377520]),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new o.e([1732584193,4023233417,2562383102,271733878,3285377520])},t.prototype.un=function(e,t){for(var r=0;r<16;r++){var n=t+r,i=e[n];e[n]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var o,s,_,b,S,w,C,A,E,x,T,k=this.on.words,O=d.words,P=h.words,R=a.words,I=l.words,L=u.words,M=c.words;for(w=o=k[0],C=s=k[1],A=_=k[2],E=b=k[3],x=S=k[4],r=0;r<80;r+=1)T=o+e[t+R[r]]|0,T+=r<16?p(s,_,b)+O[0]:r<32?f(s,_,b)+O[1]:r<48?g(s,_,b)+O[2]:r<64?m(s,_,b)+O[3]:v(s,_,b)+O[4],T=(T=y(T|=0,L[r]))+S|0,o=S,S=b,b=y(_,10),_=s,s=T,T=w+e[t+I[r]]|0,T+=r<16?v(C,A,E)+P[0]:r<32?m(C,A,E)+P[1]:r<48?g(C,A,E)+P[2]:r<64?f(C,A,E)+P[3]:p(C,A,E)+P[4],T=(T=y(T|=0,M[r]))+x|0,w=x,x=E,E=y(A,10),A=C,C=T;T=k[1]+_+E|0,k[1]=k[2]+b+x|0,k[2]=k[3]+S+w|0,k[3]=k[4]+o+C|0,k[4]=k[0]+s+A|0,k[0]=T},t.prototype.fn=function(){var e=this.cn,t=e.words,r=8*this.sn,n=8*e.nSigBytes;t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.nSigBytes=4*(t.length+1),this.an();for(var i=this.on,o=i.words,s=0;s<5;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(i.P)},5187:function(e,t,r){r.d(t,{Rabbit:function(){return u}});var n,i=r(30),o=r(5693),s=r(9109),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e){function t(t){var r=e.call(this,t)||this;return r.N=4,r.S=[],r.C=[],r.G=[],r.hn=[],r.vn=[],r.wn=0,r.O=t,r.A(),r}return a(t,e),t.prototype.A=function(){for(var e=this.H.words,t=this.ln,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var n=this.hn=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this.vn=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this.wn=0,r=0;r<4;r++)this.nextState();for(r=0;r<8;r++)i[r]^=n[r+4&7];if(t){var o=t.words,s=o[0],a=o[1],l=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),u=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),c=l>>>16|4294901760&u,d=u<<16|65535&l;for(i[0]^=l,i[1]^=c,i[2]^=u,i[3]^=d,i[4]^=l,i[5]^=c,i[6]^=u,i[7]^=d,r=0;r<4;r++)this.nextState()}},t.prototype.un=function(e,t){var r=this.hn;this.nextState(),this.S[0]=r[0]^r[5]>>>16^r[3]<<16,this.S[1]=r[2]^r[7]>>>16^r[5]<<16,this.S[2]=r[4]^r[1]>>>16^r[7]<<16,this.S[3]=r[6]^r[3]>>>16^r[1]<<16;for(var n=0;n<4;n++)this.S[n]=16711935&(this.S[n]<<8|this.S[n]>>>24)|4278255360&(this.S[n]<<24|this.S[n]>>>8),e[t+n]^=this.S[n]},t.prototype.nextState=function(){for(var e=this.hn,t=this.vn,r=0;r<8;r++)this.C[r]=t[r];for(t[0]=t[0]+1295307597+this.wn|0,t[1]=t[1]+3545052371+(t[0]>>>0<this.C[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<this.C[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<this.C[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<this.C[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<this.C[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<this.C[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<this.C[6]>>>0?1:0)|0,this.wn=t[7]>>>0<this.C[7]>>>0?1:0,r=0;r<8;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,s=((i*i>>>17)+i*o>>>15)+o*o,a=((4294901760&n)*n|0)+((65535&n)*n|0);this.G[r]=s^a}var l=this.G;e[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,e[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,e[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,e[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,e[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,e[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,e[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,e[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0},t.createEncryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.createDecryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e}))},t.encrypt=function(e,r,n){return"string"==typeof r?o.E.encrypt(t,e,r,n):s.D.encrypt(t,e,r,n)},t.decrypt=function(e,r,n){return"string"==typeof r?o.E.decrypt(t,e,r,n):s.D.decrypt(t,e,r,n)},t.ivSize=4,t}(i.q)},3173:function(e,t,r){r.d(t,{SHA1:function(){return l}});var n,i=r(1868),o=r(3354),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=[],l=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new o.e([1732584193,4023233417,2562383102,271733878,3285377520]),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new o.e([1732584193,4023233417,2562383102,271733878,3285377520])},t.prototype.un=function(e,t){for(var r=this.on.words,n=r[0],i=r[1],o=r[2],s=r[3],l=r[4],u=0;u<80;u++){if(u<16)a[u]=0|e[t+u];else{var c=a[u-3]^a[u-8]^a[u-14]^a[u-16];a[u]=c<<1|c>>>31}var d=(n<<5|n>>>27)+l+a[u];d+=u<20?1518500249+(i&o|~i&s):u<40?1859775393+(i^o^s):u<60?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,l=s,s=o,o=i<<30|i>>>2,i=n,n=d}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+l|0},t.prototype.fn=function(){var e=this.cn.words,t=8*this.sn,r=8*this.cn.nSigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),e[15+(r+64>>>9<<4)]=t,this.cn.nSigBytes=4*e.length,this.an(),this.on},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(i.P)},766:function(e,t,r){r.d(t,{SHA224:function(){return a}});var n,i=r(3354),o=r(5561),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new i.e([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new i.e([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},t.prototype.fn=function(){var t=e.prototype.fn.call(this);return t.nSigBytes-=4,t},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(o.SHA256)},5561:function(e,t,r){r.d(t,{SHA256:function(){return h}});var n,i=r(1868),o=r(3354),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=[],l=[];function u(e){for(var t=Math.sqrt(e),r=2;r<=t;r++)if(!(e%r))return!1;return!0}function c(e){return 4294967296*(e-(0|e))|0}!function(){for(var e=2,t=0;t<64;)u(e)&&(t<8&&(a[t]=c(Math.pow(e,.5))),l[t]=c(Math.pow(e,1/3)),t++),e++}();var d=[],h=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new o.e(a.slice(0)),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new o.e(a.slice(0))},t.prototype.un=function(e,t){for(var r=this.on.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],c=r[6],h=r[7],p=0;p<64;p++){if(p<16)d[p]=0|e[t+p];else{var f=d[p-15],g=(f<<25|f>>>7)^(f<<14|f>>>18)^f>>>3,m=d[p-2],v=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;d[p]=g+d[p-7]+v+d[p-16]}var y=n&i^n&o^i&o,_=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=h+((a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25))+(a&u^~a&c)+l[p]+d[p];h=c,c=u,u=a,a=s+b|0,s=o,o=i,i=n,n=b+(_+y)|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+u|0,r[6]=r[6]+c|0,r[7]=r[7]+h|0},t.prototype.fn=function(){var e=this.cn.words,t=8*this.sn,r=8*this.cn.nSigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),e[15+(r+64>>>9<<4)]=t,this.cn.nSigBytes=4*e.length,this.an(),this.on},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(i.P)},3408:function(e,t,r){r.d(t,{SHA3:function(){return h}});var n,i=r(6957),o=r(1868),s=r(3354),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=[],u=[],c=[];!function(){for(var e=1,t=0,r=0;r<24;r++){l[e+5*t]=(r+1)*(r+2)/2%64;var n=(2*e+3*t)%5;e=t%5,t=n}for(var o=0;o<5;o++)for(var s=0;s<5;s++)u[o+5*s]=s+(2*o+3*s)%5*5;for(var a=1,d=0;d<24;d++){for(var h=0,p=0,f=0;f<7;f++){if(1&a){var g=(1<<f)-1;g<32?p^=1<<g:h^=1<<g-32}128&a?a=a<<1^113:a<<=1}c[d]=new i.r(h,p)}}();var d=[];!function(){for(var e=0;e<25;e++)d[e]=new i.r(0,0)}();var h=function(e){function t(t){var r=e.call(this,t)||this;if(r.N=32,r.bn=[],r.dn=512,r.O=t,t){if(void 0!==t.outputLength){if(![224,256,384,512].includes(t.outputLength))throw new Error("Unsupported output length.");r.dn=t.outputLength}void 0!==t.state&&(r.bn=t.state.map((function(e){return e.clone()})))}if(0===r.bn.length)for(var n=0;n<25;n++)r.bn[n]=new i.r(0,0);return r.N=(1600-2*r.dn)/32,r}return a(t,e),t.prototype.A=function(){this.bn=[];for(var e=0;e<25;e++)this.bn[e]=new i.r(0,0);this.N=(1600-2*this.dn)/32},t.prototype.un=function(e,t){for(var r=this.bn,n=this.N/2,i=0;i<n;i++){var o=e[t+2*i],s=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),r[i].high^=s,r[i].low^=o}for(var a=0;a<24;a++){for(var h=0;h<5;h++){for(var p=0,f=0,g=0;g<5;g++)p^=(k=r[h+5*g]).high,f^=k.low;var m=d[h];m.high=p,m.low=f}for(h=0;h<5;h++){var v=d[(h+4)%5],y=d[(h+1)%5],_=y.high,b=y.low;for(p=v.high^(_<<1|b>>>31),f=v.low^(b<<1|_>>>31),g=0;g<5;g++)(k=r[h+5*g]).high^=p,k.low^=f}for(var S=1;S<25;S++){p=void 0,f=void 0;var w=r[S].high,C=r[S].low,A=l[S];A<32?(p=w<<A|C>>>32-A,f=C<<A|w>>>32-A):(p=C<<A-32|w>>>64-A,f=w<<A-32|C>>>64-A);var E=d[u[S]];E.high=p,E.low=f}var x=d[0],T=r[0];for(x.high=T.high,x.low=T.low,h=0;h<5;h++)for(g=0;g<5;g++){var k=r[S=h+5*g],O=d[S],P=d[(h+1)%5+5*g],R=d[(h+2)%5+5*g];k.high=O.high^~P.high&R.high,k.low=O.low^~P.low&R.low}var I=r[0],L=c[a];I.high^=L.high,I.low^=L.low}},t.prototype.fn=function(){var e=this.cn,t=e.words,r=8*e.nSigBytes,n=32*this.blockSize;t[r>>>5]|=1<<24-r%32,t[(Math.ceil((r+1)/n)*n>>>5)-1]|=128,e.nSigBytes=4*t.length,this.an();for(var i=this.bn,o=this.dn/8,a=o/8,l=[],u=0;u<a;u++){var c=i[u],d=c.high,h=c.low;d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),l.push(h),l.push(d)}return new s.e(l,o)},t.prototype.clone=function(){return new t({outputLength:this.dn,state:this.bn,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(o.P)},6324:function(e,t,r){r.d(t,{SHA384:function(){return a}});var n,i=r(6957),o=r(7491),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=function(e){function t(t){var r=e.call(this,t)||this;return r.on=new i.m([new i.r(3418070365,3238371032),new i.r(1654270250,914150663),new i.r(2438529370,812702999),new i.r(355462360,4144912697),new i.r(1731405415,4290775857),new i.r(2394180231,1750603025),new i.r(3675008525,1694076839),new i.r(1203062813,3204075428)]),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new i.m([new i.r(3418070365,3238371032),new i.r(1654270250,914150663),new i.r(2438529370,812702999),new i.r(355462360,4144912697),new i.r(1731405415,4290775857),new i.r(2394180231,1750603025),new i.r(3675008525,1694076839),new i.r(1203062813,3204075428)])},t.prototype.fn=function(){var t=e.prototype.fn.call(this);return t.nSigBytes-=16,t},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(o.SHA512)},7491:function(e,t,r){r.d(t,{SHA512:function(){return u}});var n,i=r(1868),o=r(6957),s=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),a=[new o.r(1116352408,3609767458),new o.r(1899447441,602891725),new o.r(3049323471,3964484399),new o.r(3921009573,2173295548),new o.r(961987163,4081628472),new o.r(1508970993,3053834265),new o.r(2453635748,2937671579),new o.r(2870763221,3664609560),new o.r(3624381080,2734883394),new o.r(310598401,1164996542),new o.r(607225278,1323610764),new o.r(1426881987,3590304994),new o.r(1925078388,4068182383),new o.r(2162078206,991336113),new o.r(2614888103,633803317),new o.r(3248222580,3479774868),new o.r(3835390401,2666613458),new o.r(4022224774,944711139),new o.r(264347078,2341262773),new o.r(604807628,2007800933),new o.r(770255983,1495990901),new o.r(1249150122,1856431235),new o.r(1555081692,3175218132),new o.r(1996064986,2198950837),new o.r(2554220882,3999719339),new o.r(2821834349,766784016),new o.r(2952996808,2566594879),new o.r(3210313671,3203337956),new o.r(3336571891,1034457026),new o.r(3584528711,2466948901),new o.r(113926993,3758326383),new o.r(338241895,168717936),new o.r(666307205,1188179964),new o.r(773529912,1546045734),new o.r(1294757372,1522805485),new o.r(1396182291,2643833823),new o.r(1695183700,2343527390),new o.r(1986661051,1014477480),new o.r(2177026350,1206759142),new o.r(2456956037,344077627),new o.r(2730485921,1290863460),new o.r(2820302411,3158454273),new o.r(3259730800,3505952657),new o.r(3345764771,106217008),new o.r(3516065817,3606008344),new o.r(3600352804,1432725776),new o.r(4094571909,1467031594),new o.r(275423344,851169720),new o.r(430227734,3100823752),new o.r(506948616,1363258195),new o.r(659060556,3750685593),new o.r(883997877,3785050280),new o.r(958139571,3318307427),new o.r(1322822218,3812723403),new o.r(1537002063,2003034995),new o.r(1747873779,3602036899),new o.r(1955562222,1575990012),new o.r(2024104815,1125592928),new o.r(2227730452,2716904306),new o.r(2361852424,442776044),new o.r(2428436474,593698344),new o.r(2756734187,3733110249),new o.r(3204031479,2999351573),new o.r(3329325298,3815920427),new o.r(3391569614,3928383900),new o.r(3515267271,566280711),new o.r(3940187606,3454069534),new o.r(4118630271,4000239992),new o.r(116418474,1914138554),new o.r(174292421,2731055270),new o.r(289380356,3203993006),new o.r(460393269,320620315),new o.r(685471733,587496836),new o.r(852142971,1086792851),new o.r(1017036298,365543100),new o.r(1126000580,2618297676),new o.r(1288033470,3409855158),new o.r(1501505948,4234509866),new o.r(1607167915,987167468),new o.r(1816402316,1246189591)],l=[];!function(){for(var e=0;e<80;e++)l[e]=new o.r(0,0)}();var u=function(e){function t(t){var r=e.call(this,t)||this;return r.N=32,r.on=new o.m([new o.r(1779033703,4089235720),new o.r(3144134277,2227873595),new o.r(1013904242,4271175723),new o.r(2773480762,1595750129),new o.r(1359893119,2917565137),new o.r(2600822924,725511199),new o.r(528734635,4215389547),new o.r(1541459225,327033209)]),r.O=t,t&&void 0!==t.hash&&(r.on=t.hash.clone()),r}return s(t,e),t.prototype.A=function(){this.on=new o.m([new o.r(1779033703,4089235720),new o.r(3144134277,2227873595),new o.r(1013904242,4271175723),new o.r(2773480762,1595750129),new o.r(1359893119,2917565137),new o.r(2600822924,725511199),new o.r(528734635,4215389547),new o.r(1541459225,327033209)])},t.prototype.un=function(e,t){for(var r=this.on.words,n=r[0],i=r[1],o=r[2],s=r[3],u=r[4],c=r[5],d=r[6],h=r[7],p=n.high,f=n.low,g=i.high,m=i.low,v=o.high,y=o.low,_=s.high,b=s.low,S=u.high,w=u.low,C=c.high,A=c.low,E=d.high,x=d.low,T=h.high,k=h.low,O=p,P=f,R=g,I=m,L=v,M=y,N=_,D=b,B=S,F=w,j=C,H=A,q=E,U=x,G=T,z=k,V=0;V<80;V++){var $=void 0,J=void 0,W=l[V];if(V<16)J=W.high=0|e[t+2*V],$=W.low=0|e[t+2*V+1];else{var Y=l[V-15],K=Y.high,X=Y.low,Q=(K>>>1|X<<31)^(K>>>8|X<<24)^K>>>7,Z=(X>>>1|K<<31)^(X>>>8|K<<24)^(X>>>7|K<<25),ee=l[V-2],te=ee.high,re=ee.low,ne=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ie=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),oe=l[V-7],se=oe.high,ae=oe.low,le=l[V-16],ue=le.high,ce=le.low;J=(J=(J=Q+se+(($=Z+ae)>>>0<Z>>>0?1:0))+ne+(($+=ie)>>>0<ie>>>0?1:0))+ue+(($+=ce)>>>0<ce>>>0?1:0),W.high=J,W.low=$}var de=B&j^~B&q,he=F&H^~F&U,pe=O&R^O&L^R&L,fe=P&I^P&M^I&M,ge=(O>>>28|P<<4)^(O<<30|P>>>2)^(O<<25|P>>>7),me=(P>>>28|O<<4)^(P<<30|O>>>2)^(P<<25|O>>>7),ve=(B>>>14|F<<18)^(B>>>18|F<<14)^(B<<23|F>>>9),ye=(F>>>14|B<<18)^(F>>>18|B<<14)^(F<<23|B>>>9),_e=a[V],be=_e.high,Se=_e.low,we=z+ye,Ce=G+ve+(we>>>0<z>>>0?1:0),Ae=me+fe;G=q,z=U,q=j,U=H,j=B,H=F,B=N+(Ce=(Ce=(Ce=Ce+de+((we+=he)>>>0<he>>>0?1:0))+be+((we+=Se)>>>0<Se>>>0?1:0))+J+((we+=$)>>>0<$>>>0?1:0))+((F=D+we|0)>>>0<D>>>0?1:0)|0,N=L,D=M,L=R,M=I,R=O,I=P,O=Ce+(ge+pe+(Ae>>>0<me>>>0?1:0))+((P=we+Ae|0)>>>0<we>>>0?1:0)|0}f=n.low=f+P,n.high=p+O+(f>>>0<P>>>0?1:0),m=i.low=m+I,i.high=g+R+(m>>>0<I>>>0?1:0),y=o.low=y+M,o.high=v+L+(y>>>0<M>>>0?1:0),b=s.low=b+D,s.high=_+N+(b>>>0<D>>>0?1:0),w=u.low=w+F,u.high=S+B+(w>>>0<F>>>0?1:0),A=c.low=A+H,c.high=C+j+(A>>>0<H>>>0?1:0),x=d.low=x+U,d.high=E+q+(x>>>0<U>>>0?1:0),k=h.low=k+z,h.high=T+G+(k>>>0<z>>>0?1:0)},t.prototype.fn=function(){var e=this.cn,t=e.words,r=8*this.sn,n=8*e.nSigBytes;return t[n>>>5]|=128<<24-n%32,t[30+(n+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(n+128>>>10<<5)]=r,e.nSigBytes=4*t.length,this.an(),this.on.to32()},t.prototype.clone=function(){return new t({hash:this.on,blockSize:this.N,data:this.cn,nBytes:this.sn})},t.hash=function(e,r){return new t(r).finalize(e)},t}(i.P)},3354:function(e,t,r){r.d(t,{e:function(){return o}});var n=r(5720),i=r(9054),o=function(){function e(t,r){if(Array.isArray(t)||!t)return this.yn=Array.isArray(t)?t:[],void(this.pn="number"==typeof r?r:4*this.yn.length);if(t instanceof e)return this.yn=t.words.slice(),void(this.pn=t.nSigBytes);var n;try{t instanceof ArrayBuffer?n=new Uint8Array(t):(t instanceof Uint8Array||t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}catch(a){throw new Error("Invalid argument")}if(!n)throw new Error("Invalid argument");for(var i=n.byteLength,o=[],s=0;s<i;s++)o[s>>>2]|=n[s]<<24-s%4*8;this.yn=o,this.pn=i}return Object.defineProperty(e.prototype,"nSigBytes",{get:function(){return this.pn},set:function(e){this.pn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"words",{get:function(){return this.yn},enumerable:!1,configurable:!0}),e.prototype.toString=function(e){return e?e.stringify(this):n.p.stringify(this)},e.prototype.toUint8Array=function(){for(var e=this.yn,t=this.pn,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e[n>>>2]>>>24-n%4*8&255;return r},e.prototype.concat=function(e){var t=e.words.slice(),r=e.nSigBytes;if(this.clamp(),this.pn%4)for(var n=0;n<r;n++){var i=t[n>>>2]>>>24-n%4*8&255;this.yn[this.pn+n>>>2]|=i<<24-(this.pn+n)%4*8}else for(n=0;n<r;n+=4)this.yn[this.pn+n>>>2]=t[n>>>2];return this.pn+=r,this},e.prototype.clamp=function(){var e=this.pn;this.yn[e>>>2]&=4294967295<<32-e%4*8,this.yn.length=Math.ceil(e/4)},e.prototype.clone=function(){return new e(this.yn.slice(),this.pn)},e.random=function(t){for(var r=[],n=0;n<t;n+=4)r.push((0,i.M)());return new e(r,t)},e}()},6957:function(e,t,r){r.d(t,{r:function(){return o},m:function(){return s}});var n=r(5720),i=r(3354),o=function(){function e(e,t){this.high=e,this.low=t}return e.prototype.clone=function(){return new e(this.high,this.low)},e}(),s=function(){function e(e,t){this.yn=e||[],this.pn="number"==typeof t?t:8*this.yn.length}return Object.defineProperty(e.prototype,"nSigBytes",{get:function(){return this.pn},set:function(e){this.pn=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"words",{get:function(){return this.yn},enumerable:!1,configurable:!0}),e.prototype.to32=function(){for(var e=[],t=0;t<this.yn.length;t++){var r=this.yn[t];e.push(r.high),e.push(r.low)}return new i.e(e,this.pn)},e.prototype.toString=function(e){return e?e.stringify(this.to32()):n.p.stringify(this.to32())},e.prototype.clone=function(){for(var t=this.yn.slice(),r=0;r<t.length;r++)t[r]=t[r].clone();return new e(t,this.pn)},e}()},7211:function(e,t,r){r.d(t,{C:function(){return o}});var n=r(3354),i=r(4768),o=function(){function e(e){this.On=0,this.N=0,this.O=e,this.cn=e&&void 0!==e.data?e.data.clone():new n.e,this.sn=e&&"number"==typeof e.nBytes?e.nBytes:0}return Object.defineProperty(e.prototype,"blockSize",{get:function(){return this.N},enumerable:!1,configurable:!0}),e.prototype.reset=function(e,t){this.cn=void 0!==e?e.clone():new n.e,this.sn="number"==typeof t?t:0},e.prototype.jn=function(e){var t="string"==typeof e?i.d.parse(e):e;this.cn.concat(t),this.sn+=t.nSigBytes},e.prototype.an=function(e){var t,r=this.cn.words,i=this.cn.nSigBytes,o=this.N,s=i/(4*this.N),a=(s=e?Math.ceil(s):Math.max((0|s)-this.On,0))*o,l=Math.min(4*a,i);if(a){for(var u=0;u<a;u+=o)this.un(r,u);t=r.splice(0,a),this.cn.nSigBytes-=l}return new n.e(t,l)},e.prototype.un=function(e,t){throw new Error("Not implemented")},e}()},1868:function(e,t,r){r.d(t,{P:function(){return s}});var n,i=r(7211),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,t)||this;return r.N=16,r.O=t,t&&"number"==typeof t.blockSize&&(r.N=t.blockSize),r.reset(t?t.data:void 0,t?t.nBytes:void 0),r}return o(t,e),Object.defineProperty(t.prototype,"blockSize",{get:function(){return this.N},enumerable:!1,configurable:!0}),t.prototype.reset=function(t,r){e.prototype.reset.call(this,t,r),this.A()},t.prototype.update=function(e){return this.jn(e),this.an(),this},t.prototype.finalize=function(e){return e&&this.jn(e),this.fn()},t.prototype.A=function(){throw new Error("Not implemented")},t.prototype.fn=function(){throw new Error("Not implemented")},t}(i.C)},787:function(e,t,r){r.d(t,{G:function(){return u}});var n,i=r(9456),o=r(4344),s=r(7919),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},u=function(e){function t(t){var r=e.call(this,t)||this;return r.N=4,r._n=o.n,r.mn=s.l,r.O=t,r._n=void 0!==t.mode?t.mode:r._n,r.mn=void 0!==t.padding?t.padding:r.mn,r.reset(null==t?void 0:t.data,null==t?void 0:t.nBytes),r}return a(t,e),Object.defineProperty(t.prototype,"mode",{get:function(){return this.An},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this.mn},enumerable:!1,configurable:!0}),t.prototype.reset=function(t,r){var n;e.prototype.reset.call(this,t,r),this.gn===i.t.ENC_TRANSFORM_MODE?n=this._n.createEncryptor:(n=this._n.createDecryptor,this.On=1),this._n&&this.En===n?this.An=new this._n({cipher:this,iv:this.ln}):(this.An=n.call(this._n,{cipher:this,iv:this.ln}),this.En=n)},t.prototype.un=function(e,t){var r;null===(r=this.An)||void 0===r||r.processBlock(e,t)},t.prototype.fn=function(){var e,t=this.mn;return this.gn===i.t.ENC_TRANSFORM_MODE?(t.pad(this.cn,this.blockSize),e=this.an(!0)):(e=this.an(!0),t.unpad(e)),e},t.prototype.encryptBlock=function(e,t){throw new Error("Not implemented")},t.prototype.decryptBlock=function(e,t){throw new Error("Not implemented")},t.createEncryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e,transformMode:i.t.ENC_TRANSFORM_MODE}))},t.createDecryptor=function(e,r){return new t(l(l({},r=void 0===r?{}:r),{key:e,transformMode:i.t.DEC_TRANSFORM_MODE}))},t}(i.t)},9456:function(e,t,r){r.d(t,{t:function(){return a}});var n,i=r(7211),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e){function t(t){var r=e.call(this,t)||this;return r.gn=1,r.O=t,r.H=t.key,r.ln=void 0!==t.iv?t.iv:r.ln,r.gn=void 0!==t.transformMode?t.transformMode:r.gn,r}return o(t,e),Object.defineProperty(t.prototype,"iv",{get:function(){return this.ln},enumerable:!1,configurable:!0}),t.prototype.reset=function(t,r){e.prototype.reset.call(this,t,r),this.A()},t.prototype.process=function(e){return this.jn(e),this.an()},t.prototype.finalize=function(e){return e&&this.jn(e),this.fn()},t.prototype.A=function(){throw new Error("Not implemented")},t.prototype.un=function(e,t){throw new Error("Not implemented")},t.prototype.fn=function(){throw new Error("Not implemented")},t.createEncryptor=function(e,r){return new t(s(s({},r=void 0===r?{}:r),{key:e,transformMode:t.ENC_TRANSFORM_MODE}))},t.createDecryptor=function(e,r){return new t(s(s({},r=void 0===r?{}:r),{key:e,transformMode:t.DEC_TRANSFORM_MODE}))},t.ENC_TRANSFORM_MODE=1,t.DEC_TRANSFORM_MODE=2,t.keySize=4,t.ivSize=4,t}(i.C)},2505:function(e,t,r){r.d(t,{Q:function(){return i}});var n=r(1232),i=function(){function e(e){this.formatter=n.w,e&&(this.cipherText=e.cipherText,this.key=e.key,this.iv=e.iv,this.salt=e.salt,this.Algorithm=e.Algorithm,this.mode=e.mode,this.padding=e.padding,this.blockSize=e.blockSize,this.formatter=e.formatter||n.w)}return e.prototype.toString=function(e){return(e||this.formatter).stringify(this)},e}()},5693:function(e,t,r){r.d(t,{E:function(){return l}});var n=r(9109),i=r(2214),o=r(2505),s=r(1232),a=function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},l={encrypt:function(e,t,r,s){var l=s?a({},s):{},u=s&&s.KDF?s.KDF:i.s,c={};s&&s.kdfHasher&&(c.kdfHasher=s.kdfHasher),s&&s.kdfIterations&&(c.kdfIterations=s.kdfIterations),s&&s.kdfModule&&(c.kdfModule=s.kdfModule);var d=u.execute(r,e.keySize,e.ivSize,l.kdfSalt,c);l.iv=d.iv;var h=n.D.encrypt(e,t,d.key,l);return new o.Q(a(a({},h),{key:d.key,iv:d.iv,salt:d.salt}))},decrypt:function(e,t,r,o){var l=o?a({},o):{},u=l.KDF?l.KDF:i.s,c=l.formatter?l.formatter:s.w,d=(0,n.W)(t,c),h={};o&&o.kdfHasher&&(h.kdfHasher=o.kdfHasher),o&&o.kdfIterations&&(h.kdfIterations=o.kdfIterations),o&&o.kdfModule&&(h.kdfModule=o.kdfModule);var p=u.execute(r,e.keySize,e.ivSize,d.salt,h);return l.iv=p.iv,n.D.decrypt(e,d,p.key,l)}}},9109:function(e,t,r){r.d(t,{W:function(){return o},D:function(){return s}});var n=r(1232),i=r(2505);function o(e,t){return"string"==typeof e?t.parse(e):e}var s={encrypt:function(e,t,r,o){var s=e.createEncryptor(r,o),a=s.finalize(t);return new i.Q({cipherText:a,key:r,iv:s.iv,Algorithm:e,mode:s.mode,padding:s.padding,blockSize:s.blockSize,formatter:(null==o?void 0:o.formatter)||n.w})},decrypt:function(e,t,r,i){var s=e.createDecryptor(r,i),a=o(t,(null==i?void 0:i.formatter)||n.w);return s.finalize(a.cipherText||"")}}},30:function(e,t,r){r.d(t,{q:function(){return s}});var n,i=r(9456),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,t)||this;return r.N=1,r}return o(t,e),t.prototype.fn=function(){return this.an(!0)},t}(i.t)},1232:function(e,t,r){r.d(t,{w:function(){return s}});var n=r(2505),i=r(3354),o=r(1773),s={stringify:function(e){var t=e.cipherText,r=e.salt;return t?r?new i.e([1398893684,1701076831]).concat(r).concat(t).toString(o.D):t.toString(o.D):""},parse:function(e){var t,r=o.D.parse(e),s=r.words;return 1398893684===s[0]&&1701076831===s[1]&&(t=new i.e(s.slice(2,4)),s.splice(0,4),r.nSigBytes-=16),new n.Q({cipherText:r,salt:t})}}},2214:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(3354),i=r(2505),o=r(7008),s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a={execute:function(e,t,r,a,l){a||(a=n.e.random(8));var u=l&&l.kdfModule||o.E,c=l?{Hasher:l.kdfHasher,iterations:l.kdfIterations}:{},d=u.getKey(e,a,s(s({},c),{keySize:t+r})),h=new n.e(d.words.slice(t),4*r);return d.nSigBytes=4*t,new i.Q({key:d,iv:h,salt:a})}}},7008:function(e,t,r){r.d(t,{E:function(){return u}});var n,i=r(5561),o=r(6367),s=r(3354),a=r(9541),l=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),u=function(e){function t(t){var r=e.call(this,t)||this;return r.Sn=4,r.Mn=i.SHA256,r.kn=1e4,t&&(r.Sn=void 0!==t.keySize?t.keySize:r.Sn,r.Mn=void 0!==t.Hasher?t.Hasher:r.Mn,r.kn=void 0!==t.iterations?t.iterations:r.kn),r}return l(t,e),t.prototype.compute=function(e,t){for(var r=new o.Hmac(new this.Mn,e),n=new s.e,i=new s.e([1]),a=n.words,l=i.words,u=this.Sn,c=this.kn;a.length<u;){var d=r.update(t).finalize(i);r.reset();for(var h=d.words,p=h.length,f=d,g=1;g<c;g++){f=r.finalize(f),r.reset();for(var m=f.words,v=0;v<p;v++)h[v]^=m[v]}n.concat(d),l[0]++}return n.nSigBytes=4*u,n},t.getKey=function(e,r,n){return new t(n).compute(e,r)},t}(a._)},9541:function(e,t,r){r.d(t,{_:function(){return n}});var n=function(){function e(e){this.O=e}return e.prototype.compute=function(e,t){throw new Error("Not implemented")},e.getKey=function(e,t,r){throw new Error("Not implemented")},e}()},1863:function(e,t,r){r.d(t,{T:function(){return n}});var n=function(){function e(e){this.O=e,this.Hn=e.cipher,this.ln=e.iv}return e.prototype.processBlock=function(e,t){},e.createEncryptor=function(e){throw new Error("Not implemented yet")},e.createDecryptor=function(e){throw new Error("Not implemented yet")},e}()},4344:function(e,t,r){r.d(t,{n:function(){return s}});var n,i=r(1863),o=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=function(e){function t(t){var r=e.call(this,t)||this;return r.Cn=[],r}return o(t,e),t.prototype.xorBlock=function(e,t,r){var n,i=this.ln;i?(n=i.words,this.ln=void 0):n=this.Cn;for(var o=0;o<r;o++)e[t+o]^=n[o]},t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.processBlock=function(e,t){var r=this.Hn,n=r.blockSize;this.xorBlock(e,t,n),r.encryptBlock(e,t),this.Cn=e.slice(t,t+n)},t}(t),t.Decryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.processBlock=function(e,t){var r=this.Hn,n=r.blockSize,i=e.slice(t,t+n);r.decryptBlock(e,t),this.xorBlock(e,t,n),this.Cn=i},t}(t),t}(i.T)},4055:function(e,t,r){r.d(t,{I4:function(){return i},z6:function(){return o},ur:function(){return s}});var n=r(3354);function i(e){var t=e.nSigBytes%16;if(0!==t){for(var r=16-t,i=[],o=Math.floor(r/4),s=0;s<o;s++)i.push(0);r%4>0&&i.push(0),e.concat(new n.e(i,r))}}function o(e,t){return new n.e(e.words.slice(),t)}function s(e,t){for(var r=e.nSigBytes-t,i=[],o=0;o<t;o++){var s=o>>>2,a=r+o,l=a>>>2,u=e.words[l]>>>24-a%4*8&255;i[s]=i[s]|u<<24-o%4*8}var c=new n.e(i,t);return c.clamp(),c}},7919:function(e,t,r){r.d(t,{l:function(){return i}});var n=r(3354),i={pad:function(e,t){for(var r=4*t,i=r-e.nSigBytes%r,o=i<<24|i<<16|i<<8|i,s=[],a=0;a<i;a+=4)s.push(o);var l=new n.e(s,i);e.concat(l)},unpad:function(e){var t=255&e.words[e.nSigBytes-1>>>2];e.nSigBytes-=t}}},1756:function(e,t,r){r.d(t,{w:function(){return s}});var n,i="undefined"!=typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",o=(n=parseInt((/msie (\d+)/.exec(i)||[])[1],10),isNaN(n)?(n=parseInt((/trident\/.*; rv:(\d+)/.exec(i)||[])[1],10),!isNaN(n)&&n):n);function s(e,t){return!1!==o&&(!t||("<"===e?o<t:"<="===e?o<=t:">"===e?o>t:">="===e?o>=t:o===t))}},1773:function(e,t,r){r.d(t,{D:function(){return a}});for(var n=r(3354),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=[],s=0;s<i.length;s++)o[i.charCodeAt(s)]=s;var a={stringify:function(e){var t=e.words,r=e.nSigBytes;e.clamp();for(var n=[],o=0;o<r;o+=3)for(var s=(t[o>>>2]>>>24-o%4*8&255)<<16|(t[o+1>>>2]>>>24-(o+1)%4*8&255)<<8|t[o+2>>>2]>>>24-(o+2)%4*8&255,a=0;a<4&&o+.75*a<r;a++)n.push(i.charAt(s>>>6*(3-a)&63));var l=i.charAt(64);if(l)for(;n.length%4;)n.push(l);return n.join("")},parse:function(e){var t=e.length,r=i.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}for(var a=[],l=0,u=0;u<t;u++)if(u%4){var c=o[e.charCodeAt(u-1)]<<u%4*2|o[e.charCodeAt(u)]>>>6-u%4*2;a[l>>>2]|=c<<24-l%4*8,l++}return new n.e(a,l)}}},5720:function(e,t,r){r.d(t,{p:function(){return i}});var n=r(3354),i={stringify:function(e){for(var t=e.nSigBytes,r=e.words,n=[],i=0;i<t;i++){var o=r[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){var t=e.length;if(t%2!=0)throw new Error("Hex string count must be even");if(!/^[a-fA-F0-9]+$/.test(e))throw new Error("Invalid Hex string: "+e);for(var r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new n.e(r,t/2)}}},8702:function(e,t,r){r.d(t,{m:function(){return i}});var n=r(3354),i={stringify:function(e){for(var t=e.nSigBytes,r=e.words,n=[],i=0;i<t;i++){var o=r[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new n.e(r,t)}}},4768:function(e,t,r){r.d(t,{d:function(){return i}});var n=r(8702),i={stringify:function(e){try{return decodeURIComponent(escape(n.m.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return n.m.parse(unescape(encodeURIComponent(e)))}}},2688:function(e,t,r){r.d(t,{Base64:function(){return o.D},EvpKDF:function(){return _},Hex:function(){return l.p},Latin1:function(){return a.m},OpenSSLKDF:function(){return f.s},PBKDF2:function(){return g.E},Utf16:function(){return p},Utf16BE:function(){return u},Utf16LE:function(){return h},Utf8:function(){return s.d},Word32Array:function(){return n.e},Word64:function(){return i.r},Word64Array:function(){return i.m}}),r(9054);var n=r(3354),i=r(6957),o=(r(1756),r(1773)),s=r(4768),a=r(8702),l=r(5720),u={stringify:function(e){for(var t=e.words,r=e.nSigBytes,n=[],i=0;i<r;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=e.charCodeAt(i)<<16-i%2*16;return new n.e(r,2*t)}};function c(e){return e<<8&4278255360|e>>>8&16711935}var d,h={stringify:function(e){for(var t=e.words,r=e.nSigBytes,n=[],i=0;i<r;i+=2){var o=c(t[i>>>2]>>>16-i%4*8&65535);n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>1]|=c(e.charCodeAt(i)<<16-i%2*16);return new n.e(r,2*t)}},p=u,f=r(2214),g=r(7008),m=r(670),v=r(9541),y=(d=function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),_=function(e){function t(t){var r=e.call(this,t)||this;return r.Sn=4,r.Mn=m.MD5,r.kn=1,t&&(r.Sn=void 0!==t.keySize?t.keySize:r.Sn,r.Mn=void 0!==t.Hasher?t.Hasher:r.Mn,r.kn=void 0!==t.iterations?t.iterations:r.kn),r}return y(t,e),t.prototype.compute=function(e,t){for(var r,i=new this.Mn,o=new n.e,s=o.words,a=this.Sn,l=this.kn;s.length<a;){r&&i.update(r),r=i.update(e).finalize(t),i.reset();for(var u=1;u<l;u++)r=i.finalize(r),i.reset();o.concat(r)}return o.nSigBytes=4*a,o},t.getKey=function(e,r,n){return new t(n).compute(e,r)},t}(v._)},9054:function(e,t,r){r.d(t,{M:function(){return i}});var n=r(1756),i=function(){if("undefined"!=typeof window){var e=window.crypto||window.msCrypto;if(!e){if((0,n.w)("<",11))return console.warn("IE <= 10 uses insecure random generator. Please consider to use IE11 or another modern browser"),function(){return Math.floor(512*Math.random())%256};throw new Error("Crypto module not found")}return function(){return e.getRandomValues(new Uint32Array(1))[0]}}return void 0!==r.g&&r.g.crypto?function(){return r.g.crypto.randomBytes(4).readInt32LE()}:function(){return require_crypto().randomBytes(4).readInt32LE()}}()},3664:function(e,t,r){r.d(t,{K:function(){return l}});var n,i=r(1863),o=r(3354),s=r(4055),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(t){var r=e.call(this,t)||this;r.Bn=1;var n=t.cipher,i=t.iv;if(4!==n.blockSize)throw new Error("In CCM, cipher block size must be 128bit");if(i&&(i.nSigBytes>13||i.nSigBytes<7))throw new Error("Byte size of iv must be between 7 and 13");return r.Nn=i||new o.e([0,0],8),r.In=15-r.Nn.nSigBytes,r}return a(t,e),t.getB0=function(e,t,r,n){if(r.nSigBytes+n.nSigBytes!==15)throw new Error("LEN(Q)+LEN(N) must be 15");var i=255&((e?1:0)<<6|(t-2)/2<<3|r.nSigBytes-1),s=n.clone().concat(r);return new o.e([i<<24],1).concat(s)},t.formatAssociatedDataAndPayload=function(e,t){var r,n=e.nSigBytes;if(0===n)r=new o.e([0],0);else if(n<Math.pow(2,16)-Math.pow(2,8))r=new o.e([n<<16],2);else{if(!(n<Math.pow(2,32)))throw new Error("LEN(A) larger than 2**32-1 is not supported");r=new o.e([4294836224],2).concat(new o.e([n],4))}for(var i=Math.floor(e.nSigBytes/4),s=0;s<i;s++)r.concat(new o.e([e.words[s]],4));e.nSigBytes%4&&(r.concat(new o.e([e.words[i]],e.nSigBytes%4)),r.concat(new o.e([0],4-e.nSigBytes%4))),r.nSigBytes%16&&r.concat(new o.e([0],16-r.nSigBytes%16));var a=Math.floor(t.nSigBytes/4);for(s=0;s<a;s++)r.concat(new o.e([t.words[s]],4));return t.nSigBytes%4&&(r.concat(new o.e([t.words[a]],t.nSigBytes%4)),r.concat(new o.e([0],4-t.nSigBytes%4))),r.nSigBytes%16&&r.concat(new o.e([0],16-r.nSigBytes%16)),r},t.genCtr=function(e,t,r){if(t.nSigBytes+e!==15)throw new Error("LEN(Q)+LEN(N) must be 15");for(var n=new o.e([(e-1&7)<<24],1),i=new o.e([],0),s=Math.floor(e/4),a=0;a<s-1;a++)i.concat(new o.e([0],4));return e%4?e>4?(i.concat(new o.e([0],e%4)),i.concat(new o.e([r],4))):i.concat(new o.e([r<<32-8*e],e)):i.concat(new o.e([r],4)),n.concat(t).concat(i)},t.mac=function(e,r,n,i,a,l){var u=new e({key:r,iv:n});if(4!==u.blockSize)throw new Error("In CCM, cipher block size must be 128bit");if(n&&(n.nSigBytes>13||n.nSigBytes<7))throw new Error("Byte size of iv must be between 7 and 13");var c=n||new o.e([0,0],8),d=(null==i?void 0:i.clone())||new o.e,h=d.nSigBytes,p=(null==a?void 0:a.clone())||new o.e,f=p.nSigBytes;if(f>>>0>4294967295)throw new Error("Byte length of Payload(plainText) larger than 2^32-1 (4,294,967,295byte) is not supported at this time.");var g=15-c.nSigBytes,m=(0,s.ur)(new o.e([0,f],8),g),v=l||16,y=t.getB0(Boolean(h),v,m,c),_=t.formatAssociatedDataAndPayload(d,p),b=y.words.slice();u.encryptBlock(b,0);for(var S=_.nSigBytes/16,w=_.words,C=b,A=0;A<S;A++){var E=[w[4*A]^C[0],w[4*A+1]^C[1],w[4*A+2]^C[2],w[4*A+3]^C[3]];u.encryptBlock(E,0),C=E}var x=new o.e(C,v),T=t.genCtr(g,c,0);for(u.encryptBlock(T.words,0),A=0;A<4;A++)x.words[A]^=T.words[A];return x.clamp(),x},t.combineCipherTextAndAuthTag=function(e,t){return e.clone().concat(t)},t.splitCipherTextAndAuthTag=function(e,t){var r=t||16;return{cipherText:(0,s.z6)(e,e.nSigBytes-r),authTag:(0,s.ur)(e,r)}},t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a(r,e),r.prototype.processBlock=function(e,r){var n=this.Hn,i=n.blockSize,o=t.genCtr(this.In,this.Nn,this.Bn);n.encryptBlock(o.words,0);for(var s=0;s<i;s++)e[r+s]^=o.words[s];this.Bn++},r}(t),t.Decryptor=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a(r,e),r.prototype.processBlock=function(e,r){var n=this.Hn,i=n.blockSize,o=t.genCtr(this.In,this.Nn,this.Bn);n.encryptBlock(o.words,0);for(var s=0;s<i;s++)e[r+s]^=o.words[s];this.Bn++},r}(t),t}(i.T)},5607:function(e,t,r){r.d(t,{V:function(){return l}});var n,i=r(1863),o=r(3354),s=r(4055),a=(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=function(e){function t(r){var n=e.call(this,r)||this;if(n.zn=[],n.Dn=[],n.Un=[],4!==r.cipher.blockSize)throw new Error("In GCM block cipher mode, cipher block size must be 128bit");var i=r.cipher,o=r.iv,s=[0,0,0,0];return i.encryptBlock(s,0),n.zn=s,n.Dn=t.getJ0(s,null==o?void 0:o.words),n.Un=n.Dn.slice(),n}return a(t,e),t.getJ0=function(e,r){var n;if(r&&0!==r.length)if(3===r.length)n=[r[0],r[1],r[2],1];else{for(var i=r.length%4>0?4-r.length%4:0,o=r.slice(),s=0;s<i+2;s++)o.push(0);o.push(0),o.push(32*r.length),n=t.GHASH(e,o)}else n=[0,0,0,1];return n},t.inc32=function(e){var t=e.slice(),r=t[3]>>>0,n=r+1>>>0<r;if(t[3]=t[3]+1|0,n){var i=t[2]>>>0,o=i+1>>>0<i;t[2]=t[2]+1|0,o&&(t[1]=t[1]+1|0)}return t},t.mul=function(e,t){for(var r=[3774873600,0,0,0],n=[0,0,0,0],i=t.slice(),o=0;o<128;o++){(e[o>>>5]>>>31-o%32&1)>0&&(n[0]=n[0]^i[0],n[1]=n[1]^i[1],n[2]=n[2]^i[2],n[3]=n[3]^i[3]);var s=(1&i[3])>>>0,a=(1&i[0])>>>0,l=(1&i[1])>>>0,u=(1&i[2])>>>0;i[0]=i[0]>>>1,i[1]=i[1]>>>1|(a?2147483648:0),i[2]=i[2]>>>1|(l?2147483648:0),i[3]=i[3]>>>1|(u?2147483648:0),s>0&&(i[0]^=r[0],i[1]^=r[1],i[2]^=r[2],i[3]^=r[3])}return n},t.GHASH=function(e,r){if(e.length%4!=0)throw new Error("Length of 32bit word array 'H' must be multiple of 4(128bit)");if(r.length%4!=0)throw new Error("Length of 32bit word array 'X' must be multiple of 4(128bit)");for(var n=r.length,i=[0,0,0,0],o=0;o<n;o+=4)i[0]=i[0]^r[o],i[1]=i[1]^r[o+1],i[2]=i[2]^r[o+2],i[3]=i[3]^r[o+3],i=t.mul(i,e);return i},t.GCTR=function(e,r,n){if(0===n.nSigBytes)return n.clone();if(4!==r.length)throw new Error("Initial Counter Block size must be 128bit");for(var i=n.words,s=Math.ceil(n.nSigBytes/16),a=[r.slice()],l=1;l<s;l++){var u=t.inc32(a[l-1]);a.push(u)}var c=new o.e;for(l=0;l<s;l++){e.encryptBlock(a[l],0);var d=n.nSigBytes%16;if(l<s-1||0===d){var h=i[4*l]^a[l][0],p=i[4*l+1]^a[l][1],f=i[4*l+2]^a[l][2],g=i[4*l+3]^a[l][3],m=new o.e([h,p,f,g]);c.concat(m)}else{for(var v=[],y=0,_=Math.floor(d/4),b=0;b<_;b++){var S=i[4*l+b]^a[l][b];v.push(S),y+=4}var w=d%4;if(w>0){var C=i[4*l+_]<<32-8*w^a[l][_];v.push(C),y+=w}var A=new o.e(v,y);c.concat(A)}}return c.nSigBytes=n.nSigBytes,c.clamp(),c},t.mac=function(e,r,n,i,a,l){var u=new e({key:r,iv:n}),c=[0,0,0,0];u.encryptBlock(c,0);var d=t.getJ0(c,n.words),h=(null==i?void 0:i.clone())||new o.e,p=[0,8*h.nSigBytes],f=(null==a?void 0:a.clone())||new o.e,g=[0,8*f.nSigBytes],m=l||16;(0,s.I4)(h),(0,s.I4)(f);var v=h.words.concat(f.words).concat(p).concat(g),y=t.GHASH(c,v),_=t.GCTR(u,d,new o.e(y));return(0,s.z6)(_,m)},t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a(r,e),r.prototype.processBlock=function(e,r){var n=this.Hn.blockSize;this.Un=t.inc32(this.Un);for(var i=new o.e(e.slice(r,r+n)),s=t.GCTR(this.Hn,this.Un,i),a=0;a<n;a++)e[r+a]=s.words[a]},r}(t),t.Decryptor=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return a(r,e),r.prototype.processBlock=function(e,r){var n=this.Hn.blockSize;this.Un=t.inc32(this.Un);for(var i=new o.e(e.slice(r,r+n)),s=t.GCTR(this.Hn,this.Un,i),a=0;a<n;a++)e[r+a]=s.words[a]},r}(t),t}(i.T)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"Ln",{value:!0})};var n={};return function(){r.r(n),r.d(n,{AES:function(){return C.AES},Base64:function(){return t.Base64},CBCMAC:function(){return g.CBCMAC},CipherParams:function(){return s.Q},DES:function(){return A.DES},DES3:function(){return E.DES3},EvpKDF:function(){return t.EvpKDF},GMAC:function(){return f.GMAC},Hex:function(){return t.Hex},Hmac:function(){return a.Hmac},HmacMD5:function(){return l.HmacMD5},HmacSHA1:function(){return u.HmacSHA1},HmacSHA224:function(){return c.HmacSHA224},HmacSHA256:function(){return d.HmacSHA256},HmacSHA384:function(){return h.HmacSHA384},HmacSHA512:function(){return p.HmacSHA512},Latin1:function(){return t.Latin1},MD5:function(){return m.MD5},OpenSSLKDF:function(){return t.OpenSSLKDF},PBKDF2:function(){return t.PBKDF2},PasswordBasedCipher:function(){return o.E},RC4:function(){return k.RC4},RC4Drop:function(){return O.RC4Drop},RIPEMD160:function(){return x.RIPEMD160},Rabbit:function(){return T.Rabbit},SHA1:function(){return v.SHA1},SHA224:function(){return y.SHA224},SHA256:function(){return _.SHA256},SHA3:function(){return w.SHA3},SHA384:function(){return b.SHA384},SHA512:function(){return S.SHA512},SerializableCipher:function(){return i.D},Utf16:function(){return t.Utf16},Utf16BE:function(){return t.Utf16BE},Utf16LE:function(){return t.Utf16LE},Utf8:function(){return t.Utf8},Word32Array:function(){return t.Word32Array},Word64:function(){return t.Word64},Word64Array:function(){return t.Word64Array},formatter:function(){return Q},mode:function(){return K},pad:function(){return X}});var e,t=r(2688),i=r(9109),o=r(5693),s=r(2505),a=r(6367),l=r(3027),u=r(149),c=r(4105),d=r(980),h=r(5838),p=r(9902),f=r(7753),g=r(3967),m=r(670),v=r(3173),y=r(766),_=r(5561),b=r(6324),S=r(7491),w=r(3408),C=r(9691),A=r(9910),E=r(6739),x=r(7104),T=r(5187),k=r(4615),O=r(9639),P=r(4344),R=r(1863),I=(e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),L=function(e){function t(t){var r=e.call(this,t)||this;return r.Cn=[],r}return I(t,e),t.prototype.generateKeyStreamAndEncrypt=function(e,t,r,n){var i,o=this.ln;o?(i=o.words.slice(0),this.ln=void 0):i=this.Cn,n.encryptBlock(i,0);for(var s=0;s<r;s++)e[t+s]^=i[s]},t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.processBlock=function(e,t){this.generateKeyStreamAndEncrypt(e,t,this.Hn.blockSize,this.Hn),this.Cn=e.slice(t,t+this.Hn.blockSize)},t}(t),t.Decryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return I(t,e),t.prototype.processBlock=function(e,t){var r=e.slice(t,t+this.Hn.blockSize);this.generateKeyStreamAndEncrypt(e,t,this.Hn.blockSize,this.Hn),this.Cn=r},t}(t),t}(R.T),M=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),N=function(e){function t(t){var r=e.call(this,t)||this;return r.Fn=[],r}return M(t,e),t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.processBlock=function(e,t){var r=this.Hn,n=r.blockSize,i=this.ln,o=this.Fn;i&&(o=this.Fn=i.words.slice(0),this.ln=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;a<n;a++)e[t+a]^=s[a]},t}(t),t.Decryptor=t.Encryptor,t}(R.T),D=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),B=function(e){function t(t){return e.call(this,t)||this}return D(t,e),t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.processBlock=function(e,t){this.Hn.encryptBlock(e,t)},t}(t),t.Decryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.processBlock=function(e,t){this.Hn.decryptBlock(e,t)},t}(t),t}(R.T),F=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),j=function(e){function t(t){var r=e.call(this,t)||this;return r.xn=[],r}return F(t,e),t.createEncryptor=function(e){return new t.Encryptor(e)},t.createDecryptor=function(e){return new t.Decryptor(e)},t.Encryptor=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return F(t,e),t.prototype.processBlock=function(e,t){var r=this.Hn,n=r.blockSize,i=this.ln,o=this.xn;i&&(o=this.xn=i.words.slice(0),this.ln=void 0),r.encryptBlock(o,0);for(var s=0;s<n;s++)e[t+s]^=o[s]},t}(t),t.Decryptor=t.Encryptor,t}(R.T),H=r(5607),q=r(3664),U={pad:function(e,t){var r=e.nSigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.nSigBytes+=i},unpad:function(e){var t=255&e.words[e.nSigBytes-1>>>2];e.nSigBytes-=t}},G=r(3354),z={pad:function(e,t){var r=4*t,n=r-e.nSigBytes%r;e.concat(G.e.random(n-1)).concat(new G.e([n<<24],1))},unpad:function(e){var t=255&e.words[e.nSigBytes-1>>>2];e.nSigBytes-=t}},V={pad:function(e,t){var r=4*t;e.clamp(),e.nSigBytes+=r-(e.nSigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.nSigBytes-1;r>=0;r--)if(t[r>>>2]>>>24-r%4*8&255){e.nSigBytes=r+1;break}}},$={pad:function(e,t){e.concat(new G.e([2147483648],1)),V.pad(e,t)},unpad:function(e){V.unpad(e),e.nSigBytes-=1}},J=r(7919),W={pad:function(e,t){},unpad:function(e){}},Y=r(1232),K={CBC:P.n,CFB:L,CTR:N,ECB:B,OFB:j,GCM:H.V,CCM:q.K},X={AnsiX923:U,ISO10126:z,ISO97971:$,Pkcs7:J.l,NoPadding:W,Zero:V},Q={OpenSSLFormatter:Y.w}}(),n}()}))}}),require_eventemitter3=__commonJS({"node_modules/eventemitter3/index.js"(e,t){init_polyfills();var r=Object.prototype.hasOwnProperty,n="~";function i(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,i,s){if("function"!==typeof r)throw new TypeError("The listener must be a function");var a=new o(r,i||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)r.call(e,t)&&i.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},l.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,i,o,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,u,c=this._events[a],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var h,p=c.length;for(u=0;u<p;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,"undefined"!==typeof t&&(t.exports=l)}}),require_canvas=__commonJS({"(disabled):canvas"(){init_polyfills()}}),require_zlib=__commonJS({"(disabled):zlib"(){init_polyfills()}}),require_http=__commonJS({"(disabled):http"(){init_polyfills()}}),require_https=__commonJS({"(disabled):https"(){init_polyfills()}}),require_pdf=__commonJS({"node_modules/pdfjs-dist/build/pdf.js"(exports,module){init_polyfills(),function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&__webpack_require__.amdO?define("pdfjs-dist/build/pdf",[],t):"object"===typeof exports?exports["pdfjs-dist/build/pdf"]=t():e["pdfjs-dist/build/pdf"]=e.pdfjsLib=t()}(exports,(()=>(()=>{var __webpack_modules__=[,(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.UNSUPPORTED_FEATURES=t.TextRenderingMode=t.StreamType=t.RenderingIntentFlag=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FontType=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.arrayByteLength=W,t.arraysToBytes=Y,t.assert=M,t.bytesToString=$,t.createPromiseCapability=fe,t.createValidAbsoluteUrl=D,t.escapeString=se,t.getModificationDate=pe,t.getVerbosityLevel=P,t.info=R,t.isArrayBuffer=de,t.isArrayEqual=he,t.isAscii=ae,t.objectFromMap=Q,t.objectSize=X,t.setVerbosityLevel=O,t.shadow=B,t.string32=K,t.stringToBytes=J,t.stringToPDFString=oe,t.stringToUTF16BEString=le,t.stringToUTF8String=ue,t.unreachable=L,t.utf8StringToString=ce,t.warn=I,r(2);const n=[1,0,0,1,0,0];t.IDENTITY_MATRIX=n;const i=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=i;const o={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=o;const s={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=s;const a={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=a;const l={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=l;const u={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=u;const c={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=c;const d={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=d;const h={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=h;const p={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=p;const f={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=f;const g={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=g;const m={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=m;const v={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=v;const y={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=y;const _={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=_;const b={O:"PageOpen",C:"PageClose"};t.PageActionEventType=b;const S={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};t.StreamType=S;const w={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};t.FontType=w;const C={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=C;const A={NONE:0,BINARY:1,STREAM:2};t.CMapCompressionType=A;const E={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=E;const x={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};t.UNSUPPORTED_FEATURES=x;const T={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=T;let k=C.WARNINGS;function O(e){Number.isInteger(e)&&(k=e)}function P(){return k}function R(e){k>=C.INFOS&&console.log(`Info: ${e}`)}function I(e){k>=C.WARNINGS&&console.log(`Warning: ${e}`)}function L(e){throw new Error(e)}function M(e,t){e||L(t)}function N(e){if(!e)return!1;switch(e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function D(e,t=null,r=null){if(!e)return null;try{if(r&&"string"===typeof e){if(r.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t&&t.length>=2&&(e=`http://${e}`)}if(r.tryConvertEncoding)try{e=ue(e)}catch(n){}}const i=t?new URL(e,t):new URL(e);if(N(i))return i}catch(n){}return null}function B(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!1}),r}const F=function(){function e(t,r){this.constructor===e&&L("Cannot initialize BaseException."),this.message=t,this.name=r}return e.prototype=new Error,e.constructor=e,e}();t.BaseException=F;class j extends F{constructor(e,t){super(e,"PasswordException"),this.code=t}}t.PasswordException=j;class H extends F{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}t.UnknownErrorException=H;class q extends F{constructor(e){super(e,"InvalidPDFException")}}t.InvalidPDFException=q;class U extends F{constructor(e){super(e,"MissingPDFException")}}t.MissingPDFException=U;class G extends F{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}t.UnexpectedResponseException=G;class z extends F{constructor(e){super(e,"FormatError")}}t.FormatError=z;class V extends F{constructor(e){super(e,"AbortException")}}function $(e){"object"===typeof e&&null!==e&&void 0!==e.length||L("Invalid argument for bytesToString");const t=e.length,r=8192;if(t<r)return String.fromCharCode.apply(null,e);const n=[];for(let i=0;i<t;i+=r){const o=Math.min(i+r,t),s=e.subarray(i,o);n.push(String.fromCharCode.apply(null,s))}return n.join("")}function J(e){"string"!==typeof e&&L("Invalid argument for stringToBytes");const t=e.length,r=new Uint8Array(t);for(let n=0;n<t;++n)r[n]=255&e.charCodeAt(n);return r}function W(e){return void 0!==e.length?e.length:void 0!==e.byteLength?e.byteLength:void L("Invalid argument for arrayByteLength")}function Y(e){const t=e.length;if(1===t&&e[0]instanceof Uint8Array)return e[0];let r=0;for(let o=0;o<t;o++)r+=W(e[o]);let n=0;const i=new Uint8Array(r);for(let o=0;o<t;o++){let t=e[o];t instanceof Uint8Array||(t="string"===typeof t?J(t):new Uint8Array(t));const r=t.byteLength;i.set(t,n),n+=r}return i}function K(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function X(e){return Object.keys(e).length}function Q(e){const t=Object.create(null);for(const[r,n]of e)t[r]=n;return t}function Z(){const e=new Uint8Array(4);e[0]=1;const t=new Uint32Array(e.buffer,0,1);return 1===t[0]}function ee(){try{return new Function(""),!0}catch(e){return!1}}t.AbortException=V;class te{static get isLittleEndian(){return B(this,"isLittleEndian",Z())}static get isEvalSupported(){return B(this,"isEvalSupported",ee())}static get isOffscreenCanvasSupported(){return B(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}}t.FeatureTest=te;const re=[...Array(256).keys()].map((e=>e.toString(16).padStart(2,"0")));class ne{static makeHexColor(e,t,r){return`#${re[e]}${re[t]}${re[r]}`}static scaleMinMax(e,t){let r;e[0]?(e[0]<0&&(r=t[0],t[0]=t[1],t[1]=r),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(r=t[2],t[2]=t[3],t[3]=r),t[2]*=e[3],t[3]*=e[3]):(r=t[0],t[0]=t[2],t[2]=r,r=t[1],t[1]=t[3],t[3]=r,e[1]<0&&(r=t[2],t[2]=t[3],t[3]=r),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(r=t[0],t[0]=t[1],t[1]=r),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const r=e[0]*t[0]+e[1]*t[2]+t[4],n=e[0]*t[1]+e[1]*t[3]+t[5];return[r,n]}static applyInverseTransform(e,t){const r=t[0]*t[3]-t[1]*t[2],n=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/r,i=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/r;return[n,i]}static getAxialAlignedBoundingBox(e,t){const r=ne.applyTransform(e,t),n=ne.applyTransform(e.slice(2,4),t),i=ne.applyTransform([e[0],e[3]],t),o=ne.applyTransform([e[2],e[1]],t);return[Math.min(r[0],n[0],i[0],o[0]),Math.min(r[1],n[1],i[1],o[1]),Math.max(r[0],n[0],i[0],o[0]),Math.max(r[1],n[1],i[1],o[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static apply3dTransform(e,t){return[e[0]*t[0]+e[1]*t[1]+e[2]*t[2],e[3]*t[0]+e[4]*t[1]+e[5]*t[2],e[6]*t[0]+e[7]*t[1]+e[8]*t[2]]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],r=e[0]*t[0]+e[1]*t[2],n=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],o=e[2]*t[1]+e[3]*t[3],s=(r+o)/2,a=Math.sqrt((r+o)**2-4*(r*o-i*n))/2,l=s+a||1,u=s-a||1;return[Math.sqrt(l),Math.sqrt(u)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const r=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),n=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(r>n)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>o?null:[r,i,n,o]}static bezierBoundingBox(e,t,r,n,i,o,s,a){const l=[],u=[[],[]];let c,d,h,p,f,g,m,v;for(let S=0;S<2;++S)if(0===S?(d=6*e-12*r+6*i,c=-3*e+9*r-9*i+3*s,h=3*r-3*e):(d=6*t-12*n+6*o,c=-3*t+9*n-9*o+3*a,h=3*n-3*t),Math.abs(c)<1e-12){if(Math.abs(d)<1e-12)continue;p=-h/d,0<p&&p<1&&l.push(p)}else m=d*d-4*h*c,v=Math.sqrt(m),m<0||(f=(-d+v)/(2*c),0<f&&f<1&&l.push(f),g=(-d-v)/(2*c),0<g&&g<1&&l.push(g));let y,_=l.length;const b=_;while(_--)p=l[_],y=1-p,u[0][_]=y*y*y*e+3*y*y*p*r+3*y*p*p*i+p*p*p*s,u[1][_]=y*y*y*t+3*y*y*p*n+3*y*p*p*o+p*p*p*a;return u[0][b]=e,u[1][b]=t,u[0][b+1]=s,u[1][b+1]=a,u[0].length=u[1].length=b+2,[Math.min(...u[0]),Math.min(...u[1]),Math.max(...u[0]),Math.max(...u[1])]}}t.Util=ne;const ie=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function oe(e){if(e[0]>="ï"){let t;if("þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8"),t)try{const r=new TextDecoder(t,{fatal:!0}),n=J(e);return r.decode(n)}catch(r){I(`stringToPDFString: "${r}".`)}}const t=[];for(let n=0,i=e.length;n<i;n++){const r=ie[e.charCodeAt(n)];t.push(r?String.fromCharCode(r):e.charAt(n))}return t.join("")}function se(e){return e.replace(/([()\\\n\r])/g,(e=>"\n"===e?"\\n":"\r"===e?"\\r":`\\${e}`))}function ae(e){return/^[\x00-\x7F]*$/.test(e)}function le(e){const t=["þÿ"];for(let r=0,n=e.length;r<n;r++){const n=e.charCodeAt(r);t.push(String.fromCharCode(n>>8&255),String.fromCharCode(255&n))}return t.join("")}function ue(e){return decodeURIComponent(escape(e))}function ce(e){return unescape(encodeURIComponent(e))}function de(e){return"object"===typeof e&&null!==e&&void 0!==e.byteLength}function he(e,t){if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function pe(e=new Date){const t=[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")];return t.join("")}function fe(){const e=Object.create(null);let t=!1;return Object.defineProperty(e,"settled",{get(){return t}}),e.promise=new Promise((function(r,n){e.resolve=function(e){t=!0,r(e)},e.reject=function(e){t=!0,n(e)}})),e}},(e,t,r)=>{r(3)},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const r="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=r},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var _docId,_a,_workerPorts,_docStats,_pageCache,_pagePromises,_metadataPromise,_objs,_ensureObj,ensureObj_fn,_canvasInUse;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:e,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=e,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}function setPDFNetworkStreamFactory(e){createPDFNetworkStream=e}function getDocument(e){const t=new PDFDocumentLoadingTask;let r;if("string"===typeof e||e instanceof URL)r={url:e};else if((0,_util.isArrayBuffer)(e))r={data:e};else if(e instanceof PDFDataRangeTransport)r={range:e};else{if("object"!==typeof e)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=e}const n=Object.create(null);let i=null,o=null;for(const l in r){const e=r[l];switch(l){case"url":if("undefined"!==typeof window)try{n[l]=new URL(e,window.location).href;continue}catch(a){(0,_util.warn)(`Cannot create valid URL: "${a}".`)}else if("string"===typeof e||e instanceof URL){n[l]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":i=e;continue;case"worker":o=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!==typeof Buffer&&e instanceof Buffer)n[l]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"===typeof e)n[l]=(0,_util.stringToBytes)(e);else if("object"!==typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[l]=new Uint8Array(e)}else n[l]=new Uint8Array(e)}continue}n[l]=e}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!==typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),"string"!==typeof n.cMapUrl&&(n.cMapUrl=null),"string"!==typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null),"boolean"!==typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!==typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!==typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS),"boolean"!==typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),"object"===typeof n.ownerDocument&&null!==n.ownerDocument||(n.ownerDocument=globalThis.document),"boolean"!==typeof n.disableRange&&(n.disableRange=!1),"boolean"!==typeof n.disableStream&&(n.disableStream=!1),"boolean"!==typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!o){const e={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};o=e.port?PDFWorker.fromPort(e):new PDFWorker(e),t._worker=o}const s=t.docId;return o.promise.then((function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(o,n,i,s),r=new Promise((function(e){let t;i?t=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},i):n.data||(t=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),e(t)}));return Promise.all([e,r]).then((function([e,r]){if(t.destroyed)throw new Error("Loading aborted");const i=new _message_handler.MessageHandler(s,e,o.port),a=new WorkerTransport(i,t,r,n);t._transport=a,i.send("Ready",null)}))})).catch(t._capability.reject),t}async function _fetchDocument(e,t,r,n){if(e.destroyed)throw new Error("Worker was destroyed");r&&(t.length=r.length,t.initialData=r.initialData,t.progressiveDone=r.progressiveDone,t.contentDispositionFilename=r.contentDispositionFilename);const i=await e.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.14.305",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(e.destroyed)throw new Error("Worker was destroyed");return i}const _PDFDocumentLoadingTask=class e{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+__privateWrapper(e,_docId)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0,await(null==(e=this._transport)?void 0:e.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};_docId=new WeakMap,__privateAdd(_PDFDocumentLoadingTask,_docId,0);let PDFDocumentLoadingTask=_PDFDocumentLoadingTask;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t,r=!1,n=null){this.length=e,this.initialData=t,this.progressiveDone=r,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const r of this._rangeListeners)r(e,t)}onDataProgress(e,t){this._readyCapability.promise.then((()=>{for(const r of this._progressListeners)r(e,t)}))}onDataProgressiveRead(e){this._readyCapability.promise.then((()=>{for(const t of this._progressiveReadListeners)t(e)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const e of this._progressiveDoneListeners)e()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(e,t,r,n,i=!1){this._pageIndex=e,this._pageInfo=t,this._ownerDocument=n,this._transport=r,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:r=0,offsetY:n=0,dontFlip:i=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:r,offsetY:n,dontFlip:i})}getAnnotations({intent:e="display"}={}){const t=this._transport.getRenderingIntent(e);let r=this._annotationPromises.get(t.cacheKey);return r||(r=this._transport.getAnnotations(this._pageIndex,t.renderingIntent),this._annotationPromises.set(t.cacheKey,r),r=r.then((e=>{for(const t of e)void 0!==t.titleObj&&Object.defineProperty(t,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),t.titleObj.str}}),void 0!==t.contentsObj&&Object.defineProperty(t,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),t.contentsObj.str}});return e}))),r}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}async getXfa(){var e;return(null==(e=this._transport._htmlForXfa)?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:r="display",annotationMode:n=_util.AnnotationMode.ENABLE,transform:i=null,imageLayer:o=null,canvasFactory:s=null,background:a=null,optionalContentConfigPromise:l=null,annotationCanvasMap:u=null,pageColors:c=null}){var d,h;void 0!==(null==(d=arguments[0])?void 0:d.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(h=arguments[0])?void 0:h.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&n===_util.AnnotationMode.ENABLE&&(n=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const p=this._transport.getRenderingIntent(r,n);this.pendingCleanup=!1,l||(l=this._transport.getOptionalContentConfig());let f=this._intentStates.get(p.cacheKey);f||(f=Object.create(null),this._intentStates.set(p.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const g=s||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),m=!!(p.renderingIntent&_util.RenderingIntentFlag.PRINT);f.displayReadyCapability||(f.displayReadyCapability=(0,_util.createPromiseCapability)(),f.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(p));const v=e=>{f.renderTasks.delete(y),(this.cleanupAfterRender||m)&&(this.pendingCleanup=!0),this._tryCleanup(),e?(y.capability.reject(e),this._abortOperatorList({intentState:f,reason:e instanceof Error?e:new Error(e)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},y=new InternalRenderTask({callback:v,params:{canvasContext:e,viewport:t,transform:i,imageLayer:o,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:g,useRequestAnimationFrame:!m,pdfBug:this._pdfBug,pageColors:c});(f.renderTasks||=new Set).add(y);const _=y.task;return Promise.all([f.displayReadyCapability.promise,l]).then((([e,t])=>{this.pendingCleanup?v():(this._stats&&this._stats.time("Rendering"),y.initializeGraphics({transparency:e,optionalContentConfig:t}),y.operatorListChanged())})).catch(v),_}getOperatorList({intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE}={}){function r(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(i))}const n=this._transport.getRenderingIntent(e,t,!0);let i,o=this._intentStates.get(n.cacheKey);return o||(o=Object.create(null),this._intentStates.set(n.cacheKey,o)),o.opListReadCapability||(i=Object.create(null),i.operatorListChanged=r,o.opListReadCapability=(0,_util.createPromiseCapability)(),(o.renderTasks||=new Set).add(i),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(n)),o.opListReadCapability.promise}streamTextContent({disableCombineTextItems:e=!1,includeMarkedContent:t=!1}={}){const r=100;return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==e,includeMarkedContent:!0===t},{highWaterMark:r,size(e){return e.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then((e=>_xfa_text.XfaText.textContent(e)));const t=this.streamTextContent(e);return new Promise((function(e,r){function n(){i.read().then((function({value:t,done:r}){r?e(o):(Object.assign(o.styles,t.styles),o.items.push(...t.items),n())}),r)}const i=t.getReader(),o={items:[],styles:Object.create(null)};n()}))}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const r of t.renderTasks)e.push(r.completed),r.cancel();this.objs.clear();for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(e)}cleanup(e=!1){return this.pendingCleanup=!0,this._tryCleanup(e)}_tryCleanup(e=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:t,operatorList:r}of this._intentStates.values())if(t.size>0||!r.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,e&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const t of this._bitmaps)t.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(e,t){const r=this._intentStates.get(t);r&&(this._stats&&this._stats.timeEnd("Page Request"),r.displayReadyCapability&&r.displayReadyCapability.resolve(e))}_renderPageChunk(e,t){for(let r=0,n=e.length;r<n;r++)t.operatorList.fnArray.push(e.fnArray[r]),t.operatorList.argsArray.push(e.argsArray[r]);t.operatorList.lastChunk=e.lastChunk;for(const r of t.renderTasks)r.operatorListChanged();e.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:e,cacheKey:t}){const r=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:e&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}),n=r.getReader(),i=this._intentStates.get(t);i.streamReader=n;const o=()=>{n.read().then((({value:e,done:t})=>{t?i.streamReader=null:this._transport.destroyed||(this._renderPageChunk(e,i),o())}),(e=>{if(i.streamReader=null,!this._transport.destroyed){if(i.operatorList){i.operatorList.lastChunk=!0;for(const e of i.renderTasks)e.operatorListChanged();this._tryCleanup()}if(i.displayReadyCapability)i.displayReadyCapability.reject(e);else{if(!i.opListReadCapability)throw e;i.opListReadCapability.reject(e)}}}))};o()}_abortOperatorList({intentState:e,reason:t,force:r=!1}){if(e.streamReader){if(!r){if(e.renderTasks.size>0)return;if(t instanceof _display_utils.RenderingCancelledException)return void(e.streamReaderCancelTimeout=setTimeout((()=>{this._abortOperatorList({intentState:e,reason:t,force:!0}),e.streamReaderCancelTimeout=null}),RENDERING_CANCELLED_TIMEOUT))}if(e.streamReader.cancel(new _util.AbortException(t.message)).catch((()=>{})),e.streamReader=null,!this._transport.destroyed){for(const[t,r]of this._intentStates)if(r===e){this._intentStates.delete(t);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(e,t){const r={data:structuredClone(e,t)};this._deferred.then((()=>{for(const e of this._listeners)e.call(this,r)}))}addEventListener(e,t){this._listeners.push(t)}removeEventListener(e,t){const r=this._listeners.indexOf(t);this._listeners.splice(r,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&"function"===typeof __require)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"===typeof document){const e=null==(_a=null==document?void 0:document.currentScript)?void 0:_a.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let r;try{if(r=new URL(e),!r.origin||"null"===r.origin)return!1}catch(i){return!1}const n=new URL(t,r);return r.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))};const _PDFWorker=class _PDFWorker{constructor({name:e=null,port:t=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(t&&__privateGet(_PDFWorker,_workerPorts).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=e,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t)return __privateGet(_PDFWorker,_workerPorts).set(t,this),void this._initializeFromPort(t);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve()}_initialize(){if("undefined"!==typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let t=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),r=new _message_handler.MessageHandler("main","worker",e),n=()=>{e.removeEventListener("error",i),r.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||n()};e.addEventListener("error",i),r.on("test",(t=>{e.removeEventListener("error",i),this.destroyed?n():t?(this._messageHandler=r,this._port=e,this._webWorker=e,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),e.terminate())})),r.on("ready",(t=>{if(e.removeEventListener("error",i),this.destroyed)n();else try{o()}catch(r){this._setupFakeWorker()}}));const o=()=>{const e=new Uint8Array;r.send("test",e,[e.buffer])};return void o()}catch(e){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then((e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const r="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(r+"_worker",r,t);e.setup(n,t);const i=new _message_handler.MessageHandler(r,r+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})})).catch((e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),__privateGet(_PDFWorker,_workerPorts).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!(null==e?void 0:e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return __privateGet(this,_workerPorts).has(e.port)?__privateGet(this,_workerPorts).get(e.port):new _PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var e;try{return(null==(e=globalThis.pdfjsWorker)?void 0:e.WorkerMessageHandler)||null}catch(t){return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&"function"===typeof __require){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};_workerPorts=new WeakMap,__privateAdd(_PDFWorker,_workerPorts,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(e,t,r,n){__privateAdd(this,_docStats,null),__privateAdd(this,_pageCache,new Map),__privateAdd(this,_pagePromises,new Map),__privateAdd(this,_metadataPromise,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:t.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this._params=n,n.useWorkerFetch||(this.CMapReaderFactory=new n.CMapReaderFactory({baseUrl:n.cMapUrl,isCompressed:n.cMapPacked}),this.StandardFontDataFactory=new n.StandardFontDataFactory({baseUrl:n.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return __privateGet(this,_docStats)}getRenderingIntent(e,t=_util.AnnotationMode.ENABLE,r=!1){let n=_util.RenderingIntentFlag.DISPLAY,i="";switch(e){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,i=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return r&&(n+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:`${n}_${i}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of __privateGet(this,_pageCache).values())e.push(r._destroy());__privateGet(this,_pageCache).clear(),__privateGet(this,_pagePromises).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),__privateSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then((function({value:e,done:r}){r?t.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}})),e.on("ReaderHeadersReady",(e=>{const r=(0,_util.createPromiseCapability)(),n=this._fullReader;return n.headersReady.then((()=>{var e;n.isStreamingSupported&&n.isRangeSupported||(this._lastProgress&&(null==(e=t.onProgress)||e.call(t,this._lastProgress)),n.onProgress=e=>{var r;null==(r=t.onProgress)||r.call(t,{loaded:e.loaded,total:e.total})}),r.resolve({isStreamingSupported:n.isStreamingSupported,isRangeSupported:n.isRangeSupported,contentLength:n.contentLength})}),r.reject),r.promise})),e.on("GetRangeReader",((e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(e.begin,e.end);r?(t.onPull=()=>{r.read().then((function({value:e,done:r}){r?t.close():((0,_util.assert)((0,_util.isArrayBuffer)(e),"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(e),1,[e]))})).catch((e=>{t.error(e)}))},t.onCancel=e=>{r.cancel(e),t.ready.catch((e=>{if(!this.destroyed)throw e}))}):t.close()})),e.on("GetDoc",(({pdfInfo:e})=>{this._numPages=e.numPages,this._htmlForXfa=e.htmlForXfa,delete e.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(e,this))})),e.on("DocException",(function(e){let r;switch(e.name){case"PasswordException":r=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":r=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":r=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":r=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":r=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(r)})),e.on("PasswordRequest",(e=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),t.onPassword){const n=e=>{e instanceof Error?this._passwordCapability.reject(e):this._passwordCapability.resolve({password:e})};try{t.onPassword(n,e.code)}catch(r){this._passwordCapability.reject(r)}}else this._passwordCapability.reject(new _util.PasswordException(e.message,e.code));return this._passwordCapability.promise})),e.on("DataLoaded",(e=>{var r;null==(r=t.onProgress)||r.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)})),e.on("StartRenderPage",(e=>{if(this.destroyed)return;const t=__privateGet(this,_pageCache).get(e.pageIndex);t._startRenderPage(e.transparency,e.cacheKey)})),e.on("commonobj",(([t,r,n])=>{var i;if(!this.destroyed&&!this.commonObjs.has(t))switch(r){case"Font":const o=this._params;if("error"in n){const e=n.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(t,e);break}let s=null;o.pdfBug&&(null==(i=globalThis.FontInspector)?void 0:i.enabled)&&(s={registerFont(e,t){globalThis.FontInspector.fontAdded(e,t)}});const a=new _font_loader.FontFaceObject(n,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:s});this.fontLoader.bind(a).catch((r=>e.sendWithPromise("FontFallback",{id:t}))).finally((()=>{!o.fontExtraProperties&&a.data&&(a.data=null),this.commonObjs.resolve(t,a)}));break;case"FontPath":case"Image":this.commonObjs.resolve(t,n);break;default:throw new Error(`Got unknown common object type ${r}`)}})),e.on("obj",(([e,t,r,n])=>{var i;if(this.destroyed)return;const o=__privateGet(this,_pageCache).get(t);if(!o.objs.has(e))switch(r){case"Image":o.objs.resolve(e,n);const t=8e6;if(n){let e;if(n.bitmap){const{bitmap:t,width:r,height:i}=n;e=r*i*4,o._bitmaps.add(t)}else e=(null==(i=n.data)?void 0:i.length)||0;e>t&&(o.cleanupAfterRender=!0)}break;case"Pattern":o.objs.resolve(e,n);break;default:throw new Error(`Got unknown object type ${r}`)}})),e.on("DocProgress",(e=>{var r;this.destroyed||null==(r=t.onProgress)||r.call(t,{loaded:e.loaded,total:e.total})})),e.on("DocStats",(e=>{this.destroyed||__privateSet(this,_docStats,Object.freeze({streamTypes:Object.freeze(e.streamTypes),fontTypes:Object.freeze(e.fontTypes)}))})),e.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),e.on("FetchBuiltInCMap",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),e.on("FetchStandardFontData",(e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}_onUnsupportedFeature({featureId:e}){var t,r;this.destroyed||null==(r=(t=this.loadingTask).onUnsupportedFeature)||r.call(t,e)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,r=__privateGet(this,_pagePromises).get(t);if(r)return r;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then((e=>{if(this.destroyed)throw new Error("Transport destroyed");const r=new PDFPageProxy(t,e,this,this._params.ownerDocument,this._params.pdfBug);return __privateGet(this,_pageCache).set(t,r),r}));return __privateGet(this,_pagePromises).set(t,n),n}getPageIndex(e){return"object"!==typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}saveDocument(){var e;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(null==(e=this._fullReader)?void 0:e.filename)??null}).finally((()=>{this.annotationStorage.resetModified()}))}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((e=>new _optional_content_config.OptionalContentConfig(e)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return __privateGet(this,_metadataPromise)||__privateSet(this,_metadataPromise,this.messageHandler.sendWithPromise("GetMetadata",null).then((e=>{var t,r;return{info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:(null==(t=this._fullReader)?void 0:t.filename)??null,contentLength:(null==(r=this._fullReader)?void 0:r.contentLength)??null}})))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const e of __privateGet(this,_pageCache).values()){const t=e.cleanup();if(!t)throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`)}this.commonObjs.clear(),e||this.fontLoader.clear(),__privateSet(this,_metadataPromise,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const e=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e.disableAutoFetch,enableXfa:e.enableXfa})}}_docStats=new WeakMap,_pageCache=new WeakMap,_pagePromises=new WeakMap,_metadataPromise=new WeakMap;class PDFObjects{constructor(){__privateAdd(this,_ensureObj),__privateAdd(this,_objs,Object.create(null))}get(e,t=null){if(t){const r=__privateMethod(this,_ensureObj,ensureObj_fn).call(this,e);return r.capability.promise.then((()=>t(r.data))),null}const r=__privateGet(this,_objs)[e];if(!(null==r?void 0:r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${e}.`);return r.data}has(e){const t=__privateGet(this,_objs)[e];return(null==t?void 0:t.capability.settled)||!1}resolve(e,t=null){const r=__privateMethod(this,_ensureObj,ensureObj_fn).call(this,e);r.data=t,r.capability.resolve()}clear(){__privateSet(this,_objs,Object.create(null))}}_objs=new WeakMap,_ensureObj=new WeakSet,ensureObj_fn=function(e){const t=__privateGet(this,_objs)[e];return t||(__privateGet(this,_objs)[e]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(e){this._internalRenderTask=e,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const _InternalRenderTask=class e{constructor({callback:e,params:t,objs:r,commonObjs:n,annotationCanvasMap:i,operatorList:o,pageIndex:s,canvasFactory:a,useRequestAnimationFrame:l=!1,pdfBug:u=!1,pageColors:c=null}){this.callback=e,this.params=t,this.objs=r,this.commonObjs=n,this.annotationCanvasMap=i,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=a,this._pdfBug=u,this.pageColors=c,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!==typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:r}){var n;if(this.cancelled)return;if(this._canvas){if(__privateGet(e,_canvasInUse).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");__privateGet(e,_canvasInUse).add(this._canvas)}this._pdfBug&&(null==(n=globalThis.StepperManager)?void 0:n.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:o,transform:s,imageLayer:a,background:l}=this.params;this.gfx=new _canvas.CanvasGraphics(i,this.commonObjs,this.objs,this.canvasFactory,a,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:o,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&__privateGet(e,_canvasInUse).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&__privateGet(e,_canvasInUse).delete(this._canvas),this.callback())))}};_canvasInUse=new WeakMap,__privateAdd(_InternalRenderTask,_canvasInUse,new WeakSet);let InternalRenderTask=_InternalRenderTask;const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=C,t.getFilenameFromUrl=y,t.getPdfFilenameFromUrl=_,t.getXfaPageViewport=E,t.isDataScheme=m,t.isPdfFile=v,t.isValidFetchUrl=S,t.loadScript=w;var n=r(6),i=r(1);const o="http://www.w3.org/2000/svg",s=class{};__publicField(s,"CSS",96),__publicField(s,"PDF",72),__publicField(s,"PDF_TO_CSS_UNITS",s.CSS/s.PDF);let a,l=s;t.PixelsPerInch=l;class u extends n.BaseCanvasFactory{constructor({ownerDocument:e=globalThis.document}={}){super(),this._document=e}_createCanvas(e,t){const r=this._document.createElement("canvas");return r.width=e,r.height=t,r}}async function c(e,t=!1){if(S(e,document.baseURI)){const r=await fetch(e);if(!r.ok)throw new Error(r.statusText);return t?new Uint8Array(await r.arrayBuffer()):(0,i.stringToBytes)(await r.text())}return new Promise(((r,n)=>{const o=new XMLHttpRequest;o.open("GET",e,!0),t&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){let e;if(t&&o.response?e=new Uint8Array(o.response):!t&&o.responseText&&(e=(0,i.stringToBytes)(o.responseText)),e)return void r(e)}n(new Error(o.statusText))}},o.send(null)}))}t.DOMCanvasFactory=u;class d extends n.BaseCMapReaderFactory{_fetchData(e,t){return c(e,this.isCompressed).then((e=>({cMapData:e,compressionType:t})))}}t.DOMCMapReaderFactory=d;class h extends n.BaseStandardFontDataFactory{_fetchData(e){return c(e,!0)}}t.DOMStandardFontDataFactory=h;class p extends n.BaseSVGFactory{_createSVG(e){return document.createElementNS(o,e)}}t.DOMSVGFactory=p;class f{constructor({viewBox:e,scale:t,rotation:r,offsetX:n=0,offsetY:i=0,dontFlip:o=!1}){this.viewBox=e,this.scale=t,this.rotation=r,this.offsetX=n,this.offsetY=i;const s=(e[2]+e[0])/2,a=(e[3]+e[1])/2;let l,u,c,d,h,p,f,g;switch(r%=360,r<0&&(r+=360),r){case 180:l=-1,u=0,c=0,d=1;break;case 90:l=0,u=1,c=1,d=0;break;case 270:l=0,u=-1,c=-1,d=0;break;case 0:l=1,u=0,c=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(c=-c,d=-d),0===l?(h=Math.abs(a-e[1])*t+n,p=Math.abs(s-e[0])*t+i,f=Math.abs(e[3]-e[1])*t,g=Math.abs(e[2]-e[0])*t):(h=Math.abs(s-e[0])*t+n,p=Math.abs(a-e[1])*t+i,f=Math.abs(e[2]-e[0])*t,g=Math.abs(e[3]-e[1])*t),this.transform=[l*t,u*t,c*t,d*t,h-l*t*s-c*t*a,p-u*t*s-d*t*a],this.width=f,this.height=g}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:r=this.offsetX,offsetY:n=this.offsetY,dontFlip:i=!1}={}){return new f({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:r,offsetY:n,dontFlip:i})}convertToViewportPoint(e,t){return i.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=i.Util.applyTransform([e[0],e[1]],this.transform),r=i.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],r[0],r[1]]}convertToPdfPoint(e,t){return i.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=f;class g extends i.BaseException{constructor(e,t){super(e,"RenderingCancelledException"),this.type=t}}function m(e){const t=e.length;let r=0;while(r<t&&""===e[r].trim())r++;return"data:"===e.substring(r,r+5).toLowerCase()}function v(e){return"string"===typeof e&&/\.pdf$/i.test(e)}function y(e){const t=e.indexOf("#"),r=e.indexOf("?"),n=Math.min(t>0?t:e.length,r>0?r:e.length);return e.substring(e.lastIndexOf("/",n)+1,n)}function _(e,t="document.pdf"){if("string"!==typeof e)return t;if(m(e))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=r.exec(e);let s=n.exec(o[1])||n.exec(o[2])||n.exec(o[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch(a){}return s||t}t.RenderingCancelledException=g;class b{constructor(){this.started=Object.create(null),this.times=[]}time(e){e in this.started&&(0,i.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,i.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const r of this.times){const e=r.name;e.length>t&&(t=e.length)}for(const r of this.times){const n=r.end-r.start;e.push(`${r.name.padEnd(t)} ${n}ms\n`)}return e.join("")}}function S(e,t){try{const{protocol:r}=t?new URL(e,t):new URL(e);return"http:"===r||"https:"===r}catch(r){return!1}}function w(e,t=!1){return new Promise(((r,n)=>{const i=document.createElement("script");i.src=e,i.onload=function(e){t&&i.remove(),r(e)},i.onerror=function(){n(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).appendChild(i)}))}function C(e){console.log("Deprecated API usage: "+e)}t.StatTimer=b;class A{static toDateObject(e){if(!e||"string"!==typeof e)return null;a||(a=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a.exec(e);if(!t)return null;const r=parseInt(t[1],10);let n=parseInt(t[2],10);n=n>=1&&n<=12?n-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let s=parseInt(t[5],10);s=s>=0&&s<=59?s:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===u?(o+=c,s+=d):"+"===u&&(o-=c,s-=d),new Date(Date.UTC(r,n,i,o,s,l))}}function E(e,{scale:t=1,rotation:r=0}){const{width:n,height:i}=e.attributes.style,o=[0,0,parseInt(n),parseInt(i)];return new f({viewBox:o,scale:t,rotation:r})}t.PDFDateString=A},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=r(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(e,t);return{canvas:r,context:r.getContext("2d")}}reset(e,t,r){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||r<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=r}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=i;class o{constructor({baseUrl:e=null,isCompressed:t=!1}){this.constructor===o&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":""),r=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(t,r).catch((e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)}))}_fetchData(e,t){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class s{constructor({baseUrl:e=null}){this.constructor===s&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetchData(t).catch((e=>{throw new Error(`Unable to load font data at: ${t}`)}))}_fetchData(e){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=s;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=a},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=r(1);class i{constructor({docId:e,onUnsupportedFeature:t,ownerDocument:r=globalThis.document,styleElement:o=null}){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFontLoader."),this.docId=e,this._onUnsupportedFeature=t,this._document=r,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(e){this.nativeFontFaces.push(e),this._document.fonts.add(e)}insertRule(e){let t=this.styleElement;t||(t=this.styleElement=this._document.createElement("style"),t.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(t));const r=t.sheet;r.insertRule(e,r.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(e){if(e.attached||e.missingFile)return;if(e.attached=!0,this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(r){throw this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,n.warn)(`Failed to load font '${t.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise((r=>{const n=this._queueLoadingCallback(r);this._prepareFontLoadEvent([t],[e],n)}))}}_queueLoadingCallback(e){(0,n.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var e;const t=!!(null==(e=this._document)?void 0:e.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){(0,n.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,n.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(e,t,r){(0,n.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let o;t.FontLoader=o,t.FontLoader=o=class extends i{constructor(e){super(e),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let e=!1;if("undefined"===typeof navigator)e=!0;else{const t=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==t?void 0:t[1])>=14&&(e=!0)}return(0,n.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){(0,n.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;while(r.requests.length>0&&r.requests[0].done){const e=r.requests.shift();setTimeout(e.callback,0)}}const r=this.loadingContext,i={id:"pdfjs-font-loading-"+r.nextRequestId++,done:!1,complete:t,callback:e};return r.requests.push(i),i}get _loadTestFont(){const e=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,n.shadow)(this,"_loadTestFont",e())}_prepareFontLoadEvent(e,t,r){function i(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function o(e,t,r,n){const i=e.substring(0,t),o=e.substring(t+r);return i+n+o}let s,a;const l=this._document.createElement("canvas");l.width=1,l.height=1;const u=l.getContext("2d");let c=0;function d(e,t){if(c++,c>30)return(0,n.warn)("Load test font never loaded."),void t();u.font="30px "+e,u.fillText(".",0,20);const r=u.getImageData(0,0,1,1);r.data[3]>0?t():setTimeout(d.bind(null,e,t))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;const f=976;p=o(p,f,h.length,h);const g=16,m=1482184792;let v=i(p,g);for(s=0,a=h.length-3;s<a;s+=4)v=v-m+i(h,s)|0;s<h.length&&(v=v-m+i(h+"XXX",s)|0),p=o(p,g,4,(0,n.string32)(v));const y=`url(data:font/opentype;base64,${btoa(p)});`,_=`@font-face {font-family:"${h}";src:${y}}`;this.insertRule(_);const b=[];for(const n of t)b.push(n.loadedName);b.push(h);const S=this._document.createElement("div");S.style.visibility="hidden",S.style.width=S.style.height="10px",S.style.position="absolute",S.style.top=S.style.left="0px";for(const n of b){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=n,S.appendChild(e)}this._document.body.appendChild(S),d(h,(()=>{S.remove(),r.complete()}))}};class s{constructor(e,{isEvalSupported:t=!0,disableFontFace:r=!1,ignoreErrors:n=!1,onUnsupportedFeature:i,fontRegistry:o=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.isEvalSupported=!1!==t,this.disableFontFace=!0===r,this.ignoreErrors=!0===n,this._onUnsupportedFeature=i,this.fontRegistry=o}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,n.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let r;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),r=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else r=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,t),r}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let r;try{r=e.get(this.loadedName+"_path_"+t)}catch(i){if(!this.ignoreErrors)throw i;return this._onUnsupportedFeature({featureId:n.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,n.warn)(`getPathGenerator - ignoring character: "${i}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const e=[];for(const t of r){const r=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",r,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const n of r)"scale"===n.cmd&&(n.args=[t,-t]),e[n.cmd].apply(e,n.args)}}}t.FontFaceObject=s},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationStorage=void 0;var n=r(9),i=r(1);class o{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(e,t){const r=this._storage.get(e);return void 0===r?t:Object.assign(t,r)}getRawValue(e){return this._storage.get(e)}setValue(e,t){const r=this._storage.get(e);let n=!1;if(void 0!==r)for(const[i,o]of Object.entries(t))r[i]!==o&&(n=!0,r[i]=o);else n=!0,this._storage.set(e,t);n&&this._setModified()}getAll(){return this._storage.size>0?(0,i.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"===typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"===typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const e=new n.MurmurHash3_64;for(const[t,r]of this._storage)e.update(`${t}:${JSON.stringify(r)}`);return e.hexdigest()}}t.AnnotationStorage=o},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=r(1);const i=3285377520,o=4294901760,s=65535;class a{constructor(e){this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}update(e){let t,r;if("string"===typeof e){t=new Uint8Array(2*e.length),r=0;for(let n=0,i=e.length;n<i;n++){const i=e.charCodeAt(n);i<=255?t[r++]=i:(t[r++]=i>>>8,t[r++]=255&i)}}else{if(!(0,n.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),r=t.byteLength}const i=r>>2,a=r-4*i,l=new Uint32Array(t.buffer,0,i);let u=0,c=0,d=this.h1,h=this.h2;const p=3432918353,f=461845907,g=p&s,m=f&s;for(let n=0;n<i;n++)1&n?(u=l[n],u=u*p&o|u*g&s,u=u<<15|u>>>17,u=u*f&o|u*m&s,d^=u,d=d<<13|d>>>19,d=5*d+3864292196):(c=l[n],c=c*p&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,h^=c,h=h<<13|h>>>19,h=5*h+3864292196);switch(u=0,a){case 3:u^=t[4*i+2]<<16;case 2:u^=t[4*i+1]<<8;case 1:u^=t[4*i],u=u*p&o|u*g&s,u=u<<15|u>>>17,u=u*f&o|u*m&s,1&i?d^=u:h^=u}this.h1=d,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;e^=t>>>1,e=3981806797*e&o|36045*e&s,t=4283543511*t&o|(2950163797*(t<<16|e>>>16)&o)>>>16,e^=t>>>1,e=444984403*e&o|60499*e&s,t=3301882366*t&o|(3120437893*(t<<16|e>>>16)&o)>>>16,e^=t>>>1;const r=(e>>>0).toString(16),n=(t>>>0).toString(16);return r.padStart(8,"0")+n.padStart(8,"0")}}t.MurmurHash3_64=a},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=r(1),i=r(11),o=r(12),s=r(3),a=r(5);const l=16,u=100,c=4096,d=15,h=10,p=!0,f=1e3,g=16,m=1.000001;function v(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,r){t.translate(e,r),this.__originalTranslate(e,r)},e.scale=function(e,r){t.scale(e,r),this.__originalScale(e,r)},e.transform=function(e,r,n,i,o,s){t.transform(e,r,n,i,o,s),this.__originalTransform(e,r,n,i,o,s)},e.setTransform=function(e,r,n,i,o,s){t.setTransform(e,r,n,i,o,s),this.__originalSetTransform(e,r,n,i,o,s)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,r){t.moveTo(e,r),this.__originalMoveTo(e,r)},e.lineTo=function(e,r){t.lineTo(e,r),this.__originalLineTo(e,r)},e.bezierCurveTo=function(e,r,n,i,o,s){t.bezierCurveTo(e,r,n,i,o,s),this.__originalBezierCurveTo(e,r,n,i,o,s)},e.rect=function(e,r,n,i){t.rect(e,r,n,i),this.__originalRect(e,r,n,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}function y(e){if(e._transformStack&&(e._transformStack=[]),!e.mozCurrentTransform){e._originalSave=e.save,e._originalRestore=e.restore,e._originalRotate=e.rotate,e._originalScale=e.scale,e._originalTranslate=e.translate,e._originalTransform=e.transform,e._originalSetTransform=e.setTransform,e._originalResetTransform=e.resetTransform,e._transformMatrix=e._transformMatrix||[1,0,0,1,0,0],e._transformStack=[];try{const t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(e),"lineWidth");e._setLineWidth=t.set,e._getLineWidth=t.get,Object.defineProperty(e,"lineWidth",{set:function(e){this._setLineWidth(e*m)},get:function(){return this._getLineWidth()}})}catch(t){}Object.defineProperty(e,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(e,"mozCurrentTransformInverse",{get:function(){const[e,t,r,n,i,o]=this._transformMatrix,s=e*n-t*r,a=t*r-e*n;return[n/s,t/a,r/a,e/s,(n*i-r*o)/a,(t*i-e*o)/s]}}),e.save=function(){const e=this._transformMatrix;this._transformStack.push(e),this._transformMatrix=e.slice(0,6),this._originalSave()},e.restore=function(){0===this._transformStack.length&&(0,n.warn)("Tried to restore a ctx when the stack was already empty.");const e=this._transformStack.pop();e&&(this._transformMatrix=e,this._originalRestore())},e.translate=function(e,t){const r=this._transformMatrix;r[4]=r[0]*e+r[2]*t+r[4],r[5]=r[1]*e+r[3]*t+r[5],this._originalTranslate(e,t)},e.scale=function(e,t){const r=this._transformMatrix;r[0]*=e,r[1]*=e,r[2]*=t,r[3]*=t,this._originalScale(e,t)},e.transform=function(t,r,n,i,o,s){const a=this._transformMatrix;this._transformMatrix=[a[0]*t+a[2]*r,a[1]*t+a[3]*r,a[0]*n+a[2]*i,a[1]*n+a[3]*i,a[0]*o+a[2]*s+a[4],a[1]*o+a[3]*s+a[5]],e._originalTransform(t,r,n,i,o,s)},e.setTransform=function(t,r,n,i,o,s){this._transformMatrix=[t,r,n,i,o,s],e._originalSetTransform(t,r,n,i,o,s)},e.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],e._originalResetTransform()},e.rotate=function(e){const t=Math.cos(e),r=Math.sin(e),n=this._transformMatrix;this._transformMatrix=[n[0]*t+n[2]*r,n[1]*t+n[3]*r,n[0]*-r+n[2]*t,n[1]*-r+n[3]*t,n[4],n[5]],this._originalRotate(e)}}}class _{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,r,n){let i;return void 0!==this.cache[e]?(i=this.cache[e],this.canvasFactory.reset(i,t,r),i.context.setTransform(1,0,0,1,0,0)):(i=this.canvasFactory.create(t,r),this.cache[e]=i),n&&y(i.context),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function b(e,t,r,n,i,o,s,a,l,u){const[c,d,h,p,f,g]=e.mozCurrentTransform;if(0===d&&0===h){const m=s*c+f,v=Math.round(m),y=a*p+g,_=Math.round(y),b=(s+l)*c+f,S=Math.abs(Math.round(b)-v)||1,w=(a+u)*p+g,C=Math.abs(Math.round(w)-_)||1;return e.setTransform(Math.sign(c),0,0,Math.sign(p),v,_),e.drawImage(t,r,n,i,o,0,0,S,C),e.setTransform(c,d,h,p,f,g),[S,C]}if(0===c&&0===p){const m=a*h+f,v=Math.round(m),y=s*d+g,_=Math.round(y),b=(a+u)*h+f,S=Math.abs(Math.round(b)-v)||1,w=(s+l)*d+g,C=Math.abs(Math.round(w)-_)||1;return e.setTransform(0,Math.sign(d),Math.sign(h),0,v,_),e.drawImage(t,r,n,i,o,0,0,C,S),e.setTransform(c,d,h,p,f,g),[C,S]}e.drawImage(t,r,n,i,o,s,a,l,u);const m=Math.hypot(c,d),v=Math.hypot(h,p);return[m*l,v*u]}function S(e){const{width:t,height:r}=e;if(!p||t>f||r>f)return null;const n=1e3,i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),o=t+1;let a,l,u,c=new Uint8Array(o*(r+1));const d=t+7&-8;let h=new Uint8Array(d*r),g=0;for(const s of e.data){let e=128;while(e>0)h[g++]=s&e?0:255,e>>=1}let m=0;for(g=0,0!==h[g]&&(c[0]=1,++m),l=1;l<t;l++)h[g]!==h[g+1]&&(c[l]=h[g]?2:1,++m),g++;for(0!==h[g]&&(c[l]=2,++m),a=1;a<r;a++){g=a*d,u=a*o,h[g-d]!==h[g]&&(c[u]=h[g]?1:8,++m);let e=(h[g]?4:0)+(h[g-d]?8:0);for(l=1;l<t;l++)e=(e>>2)+(h[g+1]?4:0)+(h[g-d+1]?8:0),i[e]&&(c[u+l]=i[e],++m),g++;if(h[g-d]!==h[g]&&(c[u+l]=h[g]?2:4,++m),m>n)return null}for(g=d*(r-1),u=a*o,0!==h[g]&&(c[u]=8,++m),l=1;l<t;l++)h[g]!==h[g+1]&&(c[u+l]=h[g]?4:8,++m),g++;if(0!==h[g]&&(c[u+l]=4,++m),m>n)return null;const v=new Int32Array([0,o,-1,0,-o,0,0,0,1]);let y,_,b;for(s.isNodeJS?_=[]:y=new Path2D,a=0;m&&a<=r;a++){let e=a*o;const r=e+t;while(e<r&&!c[e])e++;if(e===r)continue;y?y.moveTo(e%o,a):b=[e%o,a];const n=e;let i=c[e];do{const t=v[i];do{e+=t}while(!c[e]);const r=c[e];5!==r&&10!==r?(i=r,c[e]=0):(i=r&51*i>>4,c[e]&=i>>2|i<<2),y?y.lineTo(e%o,e/o|0):b.push(e%o,e/o|0),c[e]||--m}while(n!==e);y||_.push(b),--a}h=null,c=null;const S=function(e){if(e.save(),e.scale(1/t,-1/r),e.translate(0,-r),y)e.fill(y);else{e.beginPath();for(const t of _){e.moveTo(t[0],t[1]);for(let r=2,n=t.length;r<n;r+=2)e.lineTo(t[r],t[r+1])}e.fill()}e.beginPath(),e.restore()};return S}class w{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,r){[t,r]=n.Util.applyTransform([t,r],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,r),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,r)}updateRectMinMax(e,t){const r=n.Util.applyTransform(t,e),i=n.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,r[0],i[0]),this.minY=Math.min(this.minY,r[1],i[1]),this.maxX=Math.max(this.maxX,r[0],i[0]),this.maxY=Math.max(this.maxY,r[1],i[1])}updateScalingPathMinMax(e,t){n.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,r,i,o,s,a,l,u,c){const d=n.Util.bezierBoundingBox(t,r,i,o,s,a,l,u);if(c)return c[0]=Math.min(c[0],d[0],d[2]),c[1]=Math.max(c[1],d[0],d[2]),c[2]=Math.min(c[2],d[1],d[3]),void(c[3]=Math.max(c[3],d[1],d[3]));this.updateRectMinMax(e,d)}getPathBoundingBox(e=i.PathType.FILL,t=null){const r=[this.minX,this.minY,this.maxX,this.maxY];if(e===i.PathType.STROKE){t||(0,n.unreachable)("Stroke bounding box must include transform.");const e=n.Util.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,o=e[1]*this.lineWidth/2;r[0]-=i,r[1]-=o,r[2]+=i,r[3]+=o}return r}updateClipFromPath(){const e=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=i.PathType.FILL,t=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function C(e,t,r=null){if("undefined"!==typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const i=t.height,o=t.width,s=i%g,a=(i-s)/g,l=0===s?a:a+1,u=e.createImageData(o,g);let c,d=0;const h=t.data,p=u.data;let f,m,v,y,_,b,S,w;if(r)switch(r.length){case 1:_=r[0],b=r[0],S=r[0],w=r[0];break;case 4:_=r[0],b=r[1],S=r[2],w=r[3];break}if(t.kind===n.ImageKind.GRAYSCALE_1BPP){const t=h.byteLength,r=new Uint32Array(p.buffer,0,p.byteLength>>2),i=r.length,y=o+7>>3;let _=4294967295,b=n.FeatureTest.isLittleEndian?4278190080:255;for(w&&255===w[0]&&0===w[255]&&([_,b]=[b,_]),f=0;f<l;f++){for(v=f<a?g:s,c=0,m=0;m<v;m++){const e=t-d;let n=0;const i=e>y?o:8*e-7,s=-8&i;let a=0,l=0;for(;n<s;n+=8)l=h[d++],r[c++]=128&l?_:b,r[c++]=64&l?_:b,r[c++]=32&l?_:b,r[c++]=16&l?_:b,r[c++]=8&l?_:b,r[c++]=4&l?_:b,r[c++]=2&l?_:b,r[c++]=1&l?_:b;for(;n<i;n++)0===a&&(l=h[d++],a=128),r[c++]=l&a?_:b,a>>=1}while(c<i)r[c++]=0;e.putImageData(u,0,f*g)}}else if(t.kind===n.ImageKind.RGBA_32BPP){const t=!!(_||b||S);for(m=0,y=o*g*4,f=0;f<a;f++){if(p.set(h.subarray(d,d+y)),d+=y,t)for(let e=0;e<y;e+=4)_&&(p[e+0]=_[p[e+0]]),b&&(p[e+1]=b[p[e+1]]),S&&(p[e+2]=S[p[e+2]]);e.putImageData(u,0,m),m+=g}if(f<l){if(y=o*s*4,p.set(h.subarray(d,d+y)),t)for(let e=0;e<y;e+=4)_&&(p[e+0]=_[p[e+0]]),b&&(p[e+1]=b[p[e+1]]),S&&(p[e+2]=S[p[e+2]]);e.putImageData(u,0,m)}}else{if(t.kind!==n.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);{const t=!!(_||b||S);for(v=g,y=o*v,f=0;f<l;f++){for(f>=a&&(v=s,y=o*v),c=0,m=y;m--;)p[c++]=h[d++],p[c++]=h[d++],p[c++]=h[d++],p[c++]=255;if(t)for(let e=0;e<c;e+=4)_&&(p[e+0]=_[p[e+0]]),b&&(p[e+1]=b[p[e+1]]),S&&(p[e+2]=S[p[e+2]]);e.putImageData(u,0,f*g)}}}}function A(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const r=t.height,n=t.width,i=r%g,s=(r-i)/g,a=0===i?s:s+1,l=e.createImageData(n,g);let u=0;const c=t.data,d=l.data;for(let h=0;h<a;h++){const t=h<s?g:i;({srcPos:u}=(0,o.applyMaskImageData)({src:c,srcPos:u,dest:d,width:n,height:t})),e.putImageData(l,0,h*g)}}function E(e,t){const r=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let n=0,i=r.length;n<i;n++){const i=r[n];void 0!==e[i]&&(t[i]=e[i])}void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function x(e,t){e.strokeStyle=e.fillStyle=t||"#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0)}function T(e,t,r,n){const i=e.length;for(let o=3;o<i;o+=4){const i=e[o];if(0===i)e[o-3]=t,e[o-2]=r,e[o-1]=n;else if(i<255){const s=255-i;e[o-3]=e[o-3]*i+t*s>>8,e[o-2]=e[o-2]*i+r*s>>8,e[o-1]=e[o-1]*i+n*s>>8}}}function k(e,t,r){const n=e.length,i=1/255;for(let o=3;o<n;o+=4){const n=r?r[e[o]]:e[o];t[o]=t[o]*n*i|0}}function O(e,t,r){const n=e.length;for(let i=3;i<n;i+=4){const n=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=r?t[i]*r[n>>8]>>8:t[i]*n>>16}}function P(e,t,r,n,i,o,s,a,l,u,c){const d=!!o,h=d?o[0]:0,p=d?o[1]:0,f=d?o[2]:0;let g;g="Luminosity"===i?O:k;const m=1048576,v=Math.min(n,Math.ceil(m/r));for(let y=0;y<n;y+=v){const i=Math.min(v,n-y),o=e.getImageData(a-u,y+(l-c),r,i),m=t.getImageData(a,y+l,r,i);d&&T(o.data,h,p,f),g(o.data,m.data,s),t.putImageData(m,a,y+l)}}function R(e,t,r,n){const i=n[0],o=n[1],s=n[2]-i,a=n[3]-o;0!==s&&0!==a&&(P(t.context,r,s,a,t.subtype,t.backdrop,t.transferMap,i,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(r.canvas,0,0),e.restore())}function I(e,t){const r=n.Util.singularValueDecompose2dScale(e);r[0]=Math.fround(r[0]),r[1]=Math.fround(r[1]);const i=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:r[0]<=i||r[1]<=i}const L=["butt","round","square"],M=["miter","round","bevel"],N={},D={};class B{constructor(e,t,r,n,i,o,s,a){this.ctx=e,this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=r,this.canvasFactory=n,this.imageLayer=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=o,this.cachedCanvases=new _(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==a?void 0:a.background)||null,this.foregroundColor=(null==a?void 0:a.foreground)||null,e&&y(e),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return"string"===typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:r=!1,background:n=null}){const i=this.ctx.canvas.width,o=this.ctx.canvas.height,s=n||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const e=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const t=this.backgroundColor=this.ctx.fillStyle;let r=!0,n=s;if(this.ctx.fillStyle=s,n=this.ctx.fillStyle,r="string"===typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n),"#000000"===e&&"#ffffff"===t||e===t||!r)this.foregroundColor=this.backgroundColor=null;else{const r=parseInt(n.slice(1),16),i=(r&&16711680)>>16,o=(r&&65280)>>8,s=r&&255,a=e=>(e/=255,e<=.03928?e/12.92:((e+.055)/1.055)**2.4),l=Math.round(.2126*a(i)+.7152*a(o)+.0722*a(s));this.selectColor=(r,n,i)=>{const o=.2126*a(r)+.7152*a(n)+.0722*a(i);return Math.round(o)===l?t:e}}}if(this.ctx.fillStyle=this.backgroundColor||s,this.ctx.fillRect(0,0,i,o),this.ctx.restore(),r){const e=this.cachedCanvases.getCanvas("transparent",i,o,!0);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),x(this.ctx,this.foregroundColor),e&&(this.ctx.transform.apply(this.ctx,e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform.apply(this.ctx,t.transform),this.viewportScale=t.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(e,t,r,i){const o=e.argsArray,s=e.fnArray;let a=t||0;const l=o.length;if(l===a)return a;const u=l-a>h&&"function"===typeof r,c=u?Date.now()+d:0;let p=0;const f=this.commonObjs,g=this.objs;let m;while(1){if(void 0!==i&&a===i.nextBreakPoint)return i.breakIt(a,r),a;if(m=s[a],m!==n.OPS.dependency)this[m].apply(this,o[a]);else for(const e of o[a]){const t=e.startsWith("g_")?f:g;if(!t.has(e))return t.get(e,r),a}if(a++,a===l)return a;if(u&&++p>h){if(Date.now()>c)return r(),a;p=0}}}endDrawing(){while(this.stateStack.length||this.inSMaskMode)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(e,t){const r=e.width,n=e.height;let i,o,s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),l=r,u=n,c="prescale1";while(s>2&&l>1||a>2&&u>1){let t=l,r=u;s>2&&l>1&&(t=Math.ceil(l/2),s/=l/t),a>2&&u>1&&(r=Math.ceil(u/2),a/=u/r),i=this.cachedCanvases.getCanvas(c,t,r,!1),o=i.context,o.clearRect(0,0,t,r),o.drawImage(e,0,0,l,u,0,0,t,r),e=i.canvas,l=t,u=r,c="prescale1"===c?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:u}}_createMaskCanvas(e){const t=this.ctx,{width:r,height:o}=e,s=this.current.fillColor,a=this.current.patternFill,l=t.mozCurrentTransform;let u,c,d,h;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer,r=l.slice(0,4);c=JSON.stringify(a?r:[r,s]),u=this._cachedBitmapsMap.get(t),u||(u=new Map,this._cachedBitmapsMap.set(t,u));const n=u.get(c);if(n&&!a){const e=Math.round(Math.min(l[0],l[2])+l[4]),t=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:n,offsetX:e,offsetY:t}}d=n}d||(h=this.cachedCanvases.getCanvas("maskCanvas",r,o,!1),A(h.context,e));let p=n.Util.transform(l,[1/r,0,0,-1/o,0,0]);p=n.Util.transform(p,[1,0,0,1,0,-o]);const f=n.Util.applyTransform([0,0],p),g=n.Util.applyTransform([r,o],p),m=n.Util.normalizeRect([f[0],f[1],g[0],g[1]]),v=Math.round(m[2]-m[0])||1,y=Math.round(m[3]-m[1])||1,_=this.cachedCanvases.getCanvas("fillCanvas",v,y,!0),S=_.context,w=Math.min(f[0],g[0]),C=Math.min(f[1],g[1]);S.translate(-w,-C),S.transform.apply(S,p),d||(d=this._scaleImage(h.canvas,S.mozCurrentTransformInverse),d=d.img,u&&a&&u.set(c,d)),S.imageSmoothingEnabled=I(S.mozCurrentTransform,e.interpolate),b(S,d,0,0,d.width,d.height,0,0,r,o),S.globalCompositeOperation="source-in";const E=n.Util.transform(S.mozCurrentTransformInverse,[1,0,0,1,-w,-C]);return S.fillStyle=a?s.getPattern(t,this,E,i.PathType.FILL):s,S.fillRect(0,0,r,o),u&&!a&&(this.cachedCanvases.delete("fillCanvas"),u.set(c,_.canvas)),{canvas:_.canvas,offsetX:Math.round(w),offsetY:Math.round(C)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=L[e]}setLineJoin(e){this.ctx.lineJoin=M[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const r=this.ctx;void 0!==r.setLineDash&&(r.setLineDash(e),r.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(let t=0,r=e.length;t<r;t++){const r=e[t],n=r[0],i=r[1];switch(n){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=r[1];break;case"ca":this.current.fillAlpha=r[1],this.ctx.globalAlpha=r[1];break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=i}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(r,e,t,!0);this.suspendedCtx=this.ctx,this.ctx=n.context;const i=this.ctx;i.setTransform.apply(i,this.suspendedCtx.mozCurrentTransform),E(this.suspendedCtx,i),v(i,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),E(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,r=this.suspendedCtx;R(r,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(E(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),E(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(e,t,r,n,i,o){this.ctx.transform(e,t,r,n,i,o),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(e,t,r){const i=this.ctx,o=this.current;let s,a,l=o.x,u=o.y;const c=i.mozCurrentTransform,d=0===c[0]&&0===c[3]||0===c[1]&&0===c[2],h=d?r.slice(0):null;for(let p=0,f=0,g=e.length;p<g;p++)switch(0|e[p]){case n.OPS.rectangle:l=t[f++],u=t[f++];const e=t[f++],r=t[f++],p=l+e,g=u+r;i.moveTo(l,u),0===e||0===r?i.lineTo(p,g):(i.lineTo(p,u),i.lineTo(p,g),i.lineTo(l,g)),d||o.updateRectMinMax(c,[l,u,p,g]),i.closePath();break;case n.OPS.moveTo:l=t[f++],u=t[f++],i.moveTo(l,u),d||o.updatePathMinMax(c,l,u);break;case n.OPS.lineTo:l=t[f++],u=t[f++],i.lineTo(l,u),d||o.updatePathMinMax(c,l,u);break;case n.OPS.curveTo:s=l,a=u,l=t[f+4],u=t[f+5],i.bezierCurveTo(t[f],t[f+1],t[f+2],t[f+3],l,u),o.updateCurvePathMinMax(c,s,a,t[f],t[f+1],t[f+2],t[f+3],l,u,h),f+=6;break;case n.OPS.curveTo2:s=l,a=u,i.bezierCurveTo(l,u,t[f],t[f+1],t[f+2],t[f+3]),o.updateCurvePathMinMax(c,s,a,l,u,t[f],t[f+1],t[f+2],t[f+3],h),l=t[f+2],u=t[f+3],f+=4;break;case n.OPS.curveTo3:s=l,a=u,l=t[f+2],u=t[f+3],i.bezierCurveTo(t[f],t[f+1],l,u,l,u),o.updateCurvePathMinMax(c,s,a,t[f],t[f+1],l,u,l,u,h),f+=4;break;case n.OPS.closePath:i.closePath();break}d&&o.updateScalingPathMinMax(c,h),o.setCurrentPoint(l,u)}closePath(){this.ctx.closePath()}stroke(e){e="undefined"===typeof e||e;const t=this.ctx,r=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"===typeof r&&(null==r?void 0:r.getPattern)?(t.save(),t.strokeStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,i.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e){e="undefined"===typeof e||e;const t=this.ctx,r=this.current.fillColor,n=this.current.patternFill;let o=!1;n&&(t.save(),t.fillStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,i.PathType.FILL),o=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),o&&t.restore(),e&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=N}eoClip(){this.pendingClip=D}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(let r=0;r<e.length;r++){const n=e[r];t.setTransform.apply(t,n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize)}t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const r=this.commonObjs.get(e),i=this.current;if(!r)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,n.warn)("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=r,this.current.fontSize=t,r.isType3Font)return;const o=r.loadedName||"sans-serif";let s="normal";r.black?s="900":r.bold&&(s="bold");const a=r.italic?"italic":"normal",c=`"${o}", ${r.fallbackName}`;let d=t;t<l?d=l:t>u&&(d=u),this.current.fontSizeScale=t/d,this.ctx.font=`${a} ${s} ${d}px ${c}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,r,n,i,o){this.current.textMatrix=[e,t,r,n,i,o],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,r,i){const o=this.ctx,s=this.current,a=s.font,l=s.textRenderingMode,u=s.fontSize/s.fontSizeScale,c=l&n.TextRenderingMode.FILL_STROKE_MASK,d=!!(l&n.TextRenderingMode.ADD_TO_PATH_FLAG),h=s.patternFill&&!a.missingFile;let p;if((a.disableFontFace||d||h)&&(p=a.getPathGenerator(this.commonObjs,e)),a.disableFontFace||h?(o.save(),o.translate(t,r),o.beginPath(),p(o,u),i&&o.setTransform.apply(o,i),c!==n.TextRenderingMode.FILL&&c!==n.TextRenderingMode.FILL_STROKE||o.fill(),c!==n.TextRenderingMode.STROKE&&c!==n.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(c!==n.TextRenderingMode.FILL&&c!==n.TextRenderingMode.FILL_STROKE||o.fillText(e,t,r),c!==n.TextRenderingMode.STROKE&&c!==n.TextRenderingMode.FILL_STROKE||o.strokeText(e,t,r)),d){const e=this.pendingTextPaths||(this.pendingTextPaths=[]);e.push({transform:o.mozCurrentTransform,x:t,y:r,fontSize:u,addToPath:p})}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let r=!1;for(let n=3;n<t.length;n+=4)if(t[n]>0&&t[n]<255){r=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",r)}showText(e){const t=this.current,r=t.font;if(r.isType3Font)return this.showType3Text(e);const o=t.fontSize;if(0===o)return;const s=this.ctx,a=t.fontSizeScale,l=t.charSpacing,u=t.wordSpacing,c=t.fontDirection,d=t.textHScale*c,h=e.length,p=r.vertical,f=p?1:-1,g=r.defaultVMetrics,m=o*t.fontMatrix[0],v=t.textRenderingMode===n.TextRenderingMode.FILL&&!r.disableFontFace&&!t.patternFill;let y;if(s.save(),s.transform.apply(s,t.textMatrix),s.translate(t.x,t.y+t.textRise),c>0?s.scale(d,-1):s.scale(d,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,s.mozCurrentTransformInverse,i.PathType.FILL);y=s.mozCurrentTransform,s.restore(),s.fillStyle=e}let _=t.lineWidth;const b=t.textMatrixScale;if(0===b||0===_){const e=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;e!==n.TextRenderingMode.STROKE&&e!==n.TextRenderingMode.FILL_STROKE||(_=this.getSinglePixelWidth())}else _/=b;1!==a&&(s.scale(a,a),_/=a),s.lineWidth=_;let S,w=0;for(S=0;S<h;++S){const t=e[S];if("number"===typeof t){w+=f*t*o/1e3;continue}let n=!1;const i=(t.isSpace?u:0)+l,d=t.fontChar,h=t.accent;let _,b,C,A=t.width;if(p){const e=t.vmetric||g,r=-(t.vmetric?e[1]:.5*A)*m,n=e[2]*m;A=e?-e[0]:A,_=r/a,b=(w+n)/a}else _=w/a,b=0;if(r.remeasure&&A>0){const e=1e3*s.measureText(d).width/o*a;if(A<e&&this.isFontSubpixelAAEnabled){const t=A/e;n=!0,s.save(),s.scale(t,1),_/=t}else A!==e&&(_+=(A-e)/2e3*o/a)}if(this.contentVisible&&(t.isInFont||r.missingFile))if(v&&!h)s.fillText(d,_,b);else if(this.paintChar(d,_,b,y),h){const e=_+o*h.offset.x/a,t=b-o*h.offset.y/a;this.paintChar(h.fontChar,e,t,y)}C=p?A*m-i*c:A*m+i*c,w+=C,n&&s.restore()}p?t.y-=w:t.x+=w*d,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,r=this.current,i=r.font,o=r.fontSize,s=r.fontDirection,a=i.vertical?1:-1,l=r.charSpacing,u=r.wordSpacing,c=r.textHScale*s,d=r.fontMatrix||n.FONT_IDENTITY_MATRIX,h=e.length,p=r.textRenderingMode===n.TextRenderingMode.INVISIBLE;let f,g,m,v;if(!p&&0!==o){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,t.save(),t.transform.apply(t,r.textMatrix),t.translate(r.x,r.y),t.scale(c,s),f=0;f<h;++f){if(g=e[f],"number"===typeof g){v=a*g*o/1e3,this.ctx.translate(v,0),r.x+=v*c;continue}const s=(g.isSpace?u:0)+l,h=i.charProcOperatorList[g.operatorListId];if(!h){(0,n.warn)(`Type3 character "${g.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=g,this.save(),t.scale(o,o),t.transform.apply(t,d),this.executeOperatorList(h),this.restore());const p=n.Util.applyTransform([g.width,0],d);m=p[0]*o+s,t.translate(m,0),r.x+=m*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,r,n,i,o){this.ctx.rect(r,n,i-r,o-n),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const r=e[1],n=this.baseTransform||this.ctx.mozCurrentTransform.slice(),o={createCanvasGraphics:e=>new B(e,this.commonObjs,this.objs,this.canvasFactory)};t=new i.TilingPattern(e,r,this.ctx,o,n)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,r){var i;const o=(null==(i=this.selectColor)?void 0:i.call(this,e,t,r))||n.Util.makeHexColor(e,t,r);this.ctx.strokeStyle=o,this.current.strokeColor=o}setFillRGBColor(e,t,r){var i;const o=(null==(i=this.selectColor)?void 0:i.call(this,e,t,r))||n.Util.makeHexColor(e,t,r);this.ctx.fillStyle=o,this.current.fillColor=o,this.current.patternFill=!1}_getPattern(e,t=null){let r;return this.cachedPatterns.has(e)?r=this.cachedPatterns.get(e):(r=(0,i.getShadingPattern)(this.objs.get(e)),this.cachedPatterns.set(e,r)),t&&(r.matrix=t),r}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const r=this._getPattern(e);t.fillStyle=r.getPattern(t,this,t.mozCurrentTransformInverse,i.PathType.SHADING);const o=t.mozCurrentTransformInverse;if(o){const e=t.canvas,r=e.width,i=e.height,s=n.Util.applyTransform([0,0],o),a=n.Util.applyTransform([0,i],o),l=n.Util.applyTransform([r,0],o),u=n.Util.applyTransform([r,i],o),c=Math.min(s[0],a[0],l[0],u[0]),d=Math.min(s[1],a[1],l[1],u[1]),h=Math.max(s[0],a[0],l[0],u[0]),p=Math.max(s[1],a[1],l[1],u[1]);this.ctx.fillRect(c,d,h-c,p-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform.apply(this,e),this.baseTransform=this.ctx.mozCurrentTransform,t)){const e=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],e,r),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,n.info)("TODO: Support non-isolated groups."),e.knockout&&(0,n.warn)("Knockout groups not supported.");const r=t.mozCurrentTransform;if(e.matrix&&t.transform.apply(t,e.matrix),!e.bbox)throw new Error("Bounding box is required.");let i=n.Util.getAxialAlignedBoundingBox(e.bbox,t.mozCurrentTransform);const o=[0,0,t.canvas.width,t.canvas.height];i=n.Util.intersect(i,o)||[0,0,0,0];const s=Math.floor(i[0]),a=Math.floor(i[1]);let l=Math.max(Math.ceil(i[2])-s,1),u=Math.max(Math.ceil(i[3])-a,1),d=1,h=1;l>c&&(d=l/c,l=c),u>c&&(h=u/c,u=c),this.current.startNewPathAndClipBox([0,0,l,u]);let p="groupAt"+this.groupLevel;e.smask&&(p+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(p,l,u,!0),g=f.context;g.scale(1/d,1/h),g.translate(-s,-a),g.transform.apply(g,r),e.smask?this.smaskStack.push({canvas:f.canvas,context:g,offsetX:s,offsetY:a,scaleX:d,scaleY:h,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(s,a),t.scale(d,h),t.save()),E(t,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,e);const r=n.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(e,t,r,i,o){if(this.save(),Array.isArray(t)&&4===t.length){const i=t[2]-t[0],s=t[3]-t[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=t[0],r[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=i,t[3]=s;const[o,l]=n.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:u}=this,c=Math.ceil(i*this.outputScaleX*u),d=Math.ceil(s*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(c,d);const{canvas:h,context:p}=this.annotationCanvas,f=`var(--zoom-factor) * ${a.PixelsPerInch.PDF_TO_CSS_UNITS}`;h.style.width=`calc(${i}px * ${f})`,h.style.height=`calc(${s}px * ${f})`,this.annotationCanvasMap.set(e,h),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.setTransform(o,0,0,-l,0,s*l),y(this.ctx),x(this.ctx,this.foregroundColor)}else x(this.ctx,this.foregroundColor),this.ctx.rect(t[0],t[1],i,s),this.ctx.clip(),this.endPath()}this.current=new w(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,r),this.transform.apply(this,i)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const r=this.ctx,n=this.processingType3;if(n&&(void 0===n.compiled&&(n.compiled=S(e)),n.compiled))return void n.compiled(r);const i=this._createMaskCanvas(e),o=i.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,i.offsetX,i.offsetY),r.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,r=0,i=0,o,s){if(!this.contentVisible)return;e=this.getObject(e.data,e);const a=this.ctx;a.save();const l=a.mozCurrentTransform;a.transform(t,r,i,o,0,0);const u=this._createMaskCanvas(e);a.setTransform(1,0,0,1,0,0);for(let c=0,d=s.length;c<d;c+=2){const e=n.Util.transform(l,[t,r,i,o,s[c],s[c+1]]),[d,h]=n.Util.applyTransform([0,0],e);a.drawImage(u.canvas,d,h)}a.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,r=this.current.fillColor,n=this.current.patternFill;for(let o=0,s=e.length;o<s;o++){const s=e[o],a=s.width,l=s.height,u=this.cachedCanvases.getCanvas("maskCanvas",a,l,!1),c=u.context;c.save(),A(c,s),c.globalCompositeOperation="source-in",c.fillStyle=n?r.getPattern(c,this,t.mozCurrentTransformInverse,i.PathType.FILL):r,c.fillRect(0,0,a,l),c.restore(),t.save(),t.transform.apply(t,s.transform),t.scale(1,-1),b(t,u.canvas,0,0,a,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,n.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,r,i){if(!this.contentVisible)return;const o=this.getObject(e);if(!o)return void(0,n.warn)("Dependent image isn't ready yet");const s=o.width,a=o.height,l=[];for(let n=0,u=i.length;n<u;n+=2)l.push({transform:[t,0,0,r,i[n],i[n+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,r=e.height,n=this.ctx;let i;if(this.save(),n.scale(1/t,-1/r),"function"===typeof HTMLElement&&e instanceof HTMLElement||!e.data)i=e;else{const n=this.cachedCanvases.getCanvas("inlineImage",t,r,!1),o=n.context;C(o,e,this.current.transferMaps),i=n.canvas}const o=this._scaleImage(i,n.mozCurrentTransformInverse);n.imageSmoothingEnabled=I(n.mozCurrentTransform,e.interpolate);const[s,a]=b(n,o.img,0,0,o.paintWidth,o.paintHeight,0,-r,t,r);if(this.imageLayer){const t=this.getCanvasPosition(0,-r);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:s,height:a})}this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const r=this.ctx,n=e.width,i=e.height,o=this.cachedCanvases.getCanvas("inlineImage",n,i,!1),s=o.context;C(s,e,this.current.transferMaps);for(let a=0,l=t.length;a<l;a++){const s=t[a];if(r.save(),r.transform.apply(r,s.transform),r.scale(1,-1),b(r,o.canvas,s.x,s.y,s.w,s.h,0,-1,1,1),this.imageLayer){const t=this.getCanvasPosition(s.x,s.y);this.imageLayer.appendImage({imgData:e,left:t[0],top:t[1],width:n,height:i})}r.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const r=this.ctx;this.pendingClip&&(t||(this.pendingClip===D?r.clip("evenodd"):r.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),r.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=this.ctx.mozCurrentTransform;if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),r=Math.hypot(e[0],e[2]),n=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(r,n)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:e}=this.current,t=this.ctx.mozCurrentTransform;let r,n;if(0===t[1]&&0===t[2]){const i=Math.abs(t[0]),o=Math.abs(t[3]);if(0===e)r=1/i,n=1/o;else{const t=i*e,s=o*e;r=t<1?1/t:1,n=s<1?1/s:1}}else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),o=Math.hypot(t[0],t[1]),s=Math.hypot(t[2],t[3]);if(0===e)r=s/i,n=o/i;else{const t=e*i;r=s>t?s/t:1,n=o>t?o/t:1}}this._cachedScaleForStroking=[r,n]}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:r}=this.current,[n,i]=this.getScaleForStroking();if(t.lineWidth=r||1,1===n&&1===i)return void t.stroke();let o,s,a;e&&(o=t.mozCurrentTransform.slice(),s=t.getLineDash().slice(),a=t.lineDashOffset),t.scale(n,i);const l=Math.max(n,i);t.setLineDash(t.getLineDash().map((e=>e/l))),t.lineDashOffset/=l,t.stroke(),e&&(t.setTransform(...o),t.setLineDash(s),t.lineDashOffset=a)}getCanvasPosition(e,t){const r=this.ctx.mozCurrentTransform;return[r[0]*e+r[2]*t+r[4],r[1]*e+r[3]*t+r[5]]}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}t.CanvasGraphics=B;for(const F in n.OPS)void 0!==B.prototype[F]&&(B.prototype[n.OPS[F]]=B.prototype[F])},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=p;var n=r(1),i=r(3);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(e,t){if(!t||i.isNodeJS)return;const r=t[2]-t[0],n=t[3]-t[1],o=new Path2D;o.rect(t[0],t[1],r,n),e.clip(o)}t.PathType=o;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class l extends a{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const r of this._colorStops)t.addColorStop(r[0],r[1]);return t}getPattern(e,t,r,i){let a;if(i===o.STROKE||i===o.FILL){const o=t.current.getClippedPathBoundingBox(i,e.mozCurrentTransform)||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,d=t.cachedCanvases.getCanvas("pattern",u,c,!0),h=d.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),r=n.Util.transform(r,[1,0,0,1,o[0],o[1]]),h.transform.apply(h,t.baseTransform),this.matrix&&h.transform.apply(h,this.matrix),s(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),a=e.createPattern(d.canvas,"no-repeat");const p=new DOMMatrix(r);try{a.setTransform(p)}catch(l){(0,n.warn)(`RadialAxialShadingPattern.getPattern: "${null==l?void 0:l.message}".`)}}else s(e,this._bbox),a=this._createGradient(e);return a}}function u(e,t,r,n,i,o,s,a){const l=t.coords,u=t.colors,c=e.data,d=4*e.width;let h;l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=o,o=s,s=h),l[n+1]>l[i+1]&&(h=n,n=i,i=h,h=s,s=a,a=h),l[r+1]>l[n+1]&&(h=r,r=n,n=h,h=o,o=s,s=h);const p=(l[r]+t.offsetX)*t.scaleX,f=(l[r+1]+t.offsetY)*t.scaleY,g=(l[n]+t.offsetX)*t.scaleX,m=(l[n+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(f>=y)return;const _=u[o],b=u[o+1],S=u[o+2],w=u[s],C=u[s+1],A=u[s+2],E=u[a],x=u[a+1],T=u[a+2],k=Math.round(f),O=Math.round(y);let P,R,I,L,M,N,D,B;for(let F=k;F<=O;F++){if(F<m){let e;e=F<f?0:(f-F)/(f-m),P=p-(p-g)*e,R=_-(_-w)*e,I=b-(b-C)*e,L=S-(S-A)*e}else{let e;e=F>y?1:m===y?0:(m-F)/(m-y),P=g-(g-v)*e,R=w-(w-E)*e,I=C-(C-x)*e,L=A-(A-T)*e}let e;e=F<f?0:F>y?1:(f-F)/(f-y),M=p-(p-v)*e,N=_-(_-E)*e,D=b-(b-x)*e,B=S-(S-T)*e;const t=Math.round(Math.min(P,M)),r=Math.round(Math.max(P,M));let n=d*F+4*t;for(let i=t;i<=r;i++)e=(P-i)/(P-M),e<0?e=0:e>1&&(e=1),c[n++]=R-(R-N)*e|0,c[n++]=I-(I-D)*e|0,c[n++]=L-(L-B)*e|0,c[n++]=255}}function c(e,t,r){const n=t.coords,i=t.colors;let o,s;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(n.length/a)-1,c=a-1;for(o=0;o<l;o++){let t=o*a;for(let o=0;o<c;o++,t++)u(e,r,n[t],n[t+1],n[t+a],i[t],i[t+1],i[t+a]),u(e,r,n[t+a+1],n[t+1],n[t+a],i[t+a+1],i[t+1],i[t+a])}break;case"triangles":for(o=0,s=n.length;o<s;o+=3)u(e,r,n[o],n[o+1],n[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class d extends a{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,r){const n=1.1,i=3e3,o=2,s=Math.floor(this._bounds[0]),a=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-s,u=Math.ceil(this._bounds[3])-a,d=Math.min(Math.ceil(Math.abs(l*e[0]*n)),i),h=Math.min(Math.ceil(Math.abs(u*e[1]*n)),i),p=l/d,f=u/h,g={coords:this._coords,colors:this._colors,offsetX:-s,offsetY:-a,scaleX:1/p,scaleY:1/f},m=d+2*o,v=h+2*o,y=r.getCanvas("mesh",m,v,!1),_=y.context,b=_.createImageData(d,h);if(t){const e=b.data;for(let r=0,n=e.length;r<n;r+=4)e[r]=t[0],e[r+1]=t[1],e[r+2]=t[2],e[r+3]=255}for(const w of this._figures)c(b,w,g);_.putImageData(b,o,o);const S=y.canvas;return{canvas:S,offsetX:s-o*p,offsetY:a-o*f,scaleX:p,scaleY:f}}getPattern(e,t,r,i){let a;if(s(e,this._bbox),i===o.SHADING)a=n.Util.singularValueDecompose2dScale(e.mozCurrentTransform);else if(a=n.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=n.Util.singularValueDecompose2dScale(this.matrix);a=[a[0]*e[0],a[1]*e[1]]}const l=this._createMeshCanvas(a,i===o.SHADING?null:this._background,t.cachedCanvases);return i!==o.SHADING&&(e.setTransform.apply(e,t.baseTransform),this.matrix&&e.transform.apply(e,this.matrix)),e.translate(l.offsetX,l.offsetY),e.scale(l.scaleX,l.scaleY),e.createPattern(l.canvas,"no-repeat")}}class h extends a{getPattern(){return"hotpink"}}function p(e){switch(e[0]){case"RadialAxial":return new l(e);case"Mesh":return new d(e);case"Dummy":return new h}throw new Error(`Unknown IR type: ${e[0]}`)}const f={COLORED:1,UNCOLORED:2};class g{static get MAX_PATTERN_SIZE(){return(0,n.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(e,t,r,n,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=r,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,r=this.bbox,i=this.xstep,o=this.ystep,s=this.paintType,a=this.tilingType,l=this.color,u=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+a);const c=r[0],d=r[1],h=r[2],p=r[3],f=n.Util.singularValueDecompose2dScale(this.matrix),g=n.Util.singularValueDecompose2dScale(this.baseTransform),m=[f[0]*g[0],f[1]*g[1]],v=this.getSizeAndScale(i,this.ctx.canvas.width,m[0]),y=this.getSizeAndScale(o,this.ctx.canvas.height,m[1]),_=e.cachedCanvases.getCanvas("pattern",v.size,y.size,!0),b=_.context,S=u.createCanvasGraphics(b);S.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(S,s,l);let w=c,C=d,A=h,E=p;return c<0&&(w=0,A+=Math.abs(c)),d<0&&(C=0,E+=Math.abs(d)),b.translate(-v.scale*w,-y.scale*C),S.transform(v.scale,0,0,y.scale,0,0),b.save(),this.clipBbox(S,w,C,A,E),S.baseTransform=S.ctx.mozCurrentTransform.slice(),S.executeOperatorList(t),S.endDrawing(),{canvas:_.canvas,scaleX:v.scale,scaleY:y.scale,offsetX:w,offsetY:C}}getSizeAndScale(e,t,r){e=Math.abs(e);const n=Math.max(g.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*r);return i>=n?i=n:r=i/e,{scale:r,size:i}}clipBbox(e,t,r,n,i){const o=n-t,s=i-r;e.ctx.rect(t,r,o,s),e.current.updateRectMinMax(e.ctx.mozCurrentTransform,[t,r,n,i]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,r){const i=e.ctx,o=e.current;switch(t){case f.COLORED:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,o.fillColor=e.fillStyle,o.strokeColor=e.strokeStyle;break;case f.UNCOLORED:const s=n.Util.makeHexColor(r[0],r[1],r[2]);i.fillStyle=s,i.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new n.FormatError(`Unsupported paint type: ${t}`)}}getPattern(e,t,r,i){let s=r;i!==o.SHADING&&(s=n.Util.transform(s,t.baseTransform),this.matrix&&(s=n.Util.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const u=e.createPattern(a.canvas,"repeat");try{u.setTransform(l)}catch(c){(0,n.warn)(`TilingPattern.getPattern: "${null==c?void 0:c.message}".`)}return u}}t.TilingPattern=g},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.applyMaskImageData=i;var n=r(1);function i({src:e,srcPos:t=0,dest:r,destPos:i=0,width:o,height:s,inverseDecode:a=!1}){const l=n.FeatureTest.isLittleEndian?4278190080:255,[u,c]=a?[0,l]:[l,0],d=o>>3,h=7&o,p=e.length;r=new Uint32Array(r.buffer);for(let n=0;n<s;n++){for(const o=t+d;t<o;t++){const n=t<p?e[t]:255;r[i++]=128&n?c:u,r[i++]=64&n?c:u,r[i++]=32&n?c:u,r[i++]=16&n?c:u,r[i++]=8&n?c:u,r[i++]=4&n?c:u,r[i++]=2&n?c:u,r[i++]=1&n?c:u}if(0===h)continue;const n=t<p?e[t++]:255;for(let e=0;e<h;e++)r[i++]=n&1<<7-e?c:u}return{srcPos:t,destPos:i}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const r=Object.create(null);t.GlobalWorkerOptions=r,r.workerPort=void 0===r.workerPort?null:r.workerPort,r.workerSrc=void 0===r.workerSrc?"":r.workerSrc},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=r(1);const i={UNKNOWN:0,DATA:1,ERROR:2},o={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function s(e){switch(e instanceof Error||"object"===typeof e&&null!==e||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new n.AbortException(e.message);case"MissingPDFException":return new n.MissingPDFException(e.message);case"PasswordException":return new n.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new n.UnknownErrorException(e.message,e.details);default:return new n.UnknownErrorException(e.message,e.toString())}}class a{constructor(e,t,r){this.sourceName=e,this.targetName=t,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this._processStreamMessage(t);if(t.callback){const e=t.callbackId,r=this.callbackCapabilities[e];if(!r)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],t.callback===i.DATA)r.resolve(t.data);else{if(t.callback!==i.ERROR)throw new Error("Unexpected callback case");r.reject(s(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,o=t.sourceName;new Promise((function(e){e(n(t.data))})).then((function(n){r.postMessage({sourceName:e,targetName:o,callback:i.DATA,callbackId:t.callbackId,data:n})}),(function(n){r.postMessage({sourceName:e,targetName:o,callback:i.ERROR,callbackId:t.callbackId,reason:s(n)})}))}else t.streamId?this._createStreamSink(t):n(t.data)},r.addEventListener("message",this._onComObjOnMessage)}on(e,t){const r=this.actionHandler;if(r[e])throw new Error(`There is already an actionName called "${e}"`);r[e]=t}send(e,t,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},r)}sendWithPromise(e,t,r){const i=this.callbackId++,o=(0,n.createPromiseCapability)();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},r)}catch(s){o.reject(s)}return o.promise}sendWithStream(e,t,r,i){const a=this.streamId++,l=this.sourceName,u=this.targetName,c=this.comObj;return new ReadableStream({start:r=>{const o=(0,n.createPromiseCapability)();return this.streamControllers[a]={controller:r,startCall:o,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:l,targetName:u,action:e,streamId:a,data:t,desiredSize:r.desiredSize},i),o.promise},pull:e=>{const t=(0,n.createPromiseCapability)();return this.streamControllers[a].pullCall=t,c.postMessage({sourceName:l,targetName:u,stream:o.PULL,streamId:a,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,n.assert)(e instanceof Error,"cancel must have a valid reason");const t=(0,n.createPromiseCapability)();return this.streamControllers[a].cancelCall=t,this.streamControllers[a].isClosed=!0,c.postMessage({sourceName:l,targetName:u,stream:o.CANCEL,streamId:a,reason:s(e)}),t.promise}},r)}_createStreamSink(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,l=this,u=this.actionHandler[e.action],c={enqueue(e,s=1,l){if(this.isCancelled)return;const u=this.desiredSize;this.desiredSize-=s,u>0&&this.desiredSize<=0&&(this.sinkCapability=(0,n.createPromiseCapability)(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:r,targetName:i,stream:o.ENQUEUE,streamId:t,chunk:e},l)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:o.CLOSE,streamId:t}),delete l.streamSinks[t])},error(e){(0,n.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:r,targetName:i,stream:o.ERROR,streamId:t,reason:s(e)}))},sinkCapability:(0,n.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,new Promise((function(t){t(u(e.data,c))})).then((function(){a.postMessage({sourceName:r,targetName:i,stream:o.START_COMPLETE,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:r,targetName:i,stream:o.START_COMPLETE,streamId:t,reason:s(e)})}))}_processStreamMessage(e){const t=e.streamId,r=this.sourceName,i=e.sourceName,a=this.comObj,l=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case o.START_COMPLETE:e.success?l.startCall.resolve():l.startCall.reject(s(e.reason));break;case o.PULL_COMPLETE:e.success?l.pullCall.resolve():l.pullCall.reject(s(e.reason));break;case o.PULL:if(!u){a.postMessage({sourceName:r,targetName:i,stream:o.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,new Promise((function(e){e(u.onPull&&u.onPull())})).then((function(){a.postMessage({sourceName:r,targetName:i,stream:o.PULL_COMPLETE,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:r,targetName:i,stream:o.PULL_COMPLETE,streamId:t,reason:s(e)})}));break;case o.ENQUEUE:if((0,n.assert)(l,"enqueue should have stream controller"),l.isClosed)break;l.controller.enqueue(e.chunk);break;case o.CLOSE:if((0,n.assert)(l,"close should have stream controller"),l.isClosed)break;l.isClosed=!0,l.controller.close(),this._deleteStreamController(l,t);break;case o.ERROR:(0,n.assert)(l,"error should have stream controller"),l.controller.error(s(e.reason)),this._deleteStreamController(l,t);break;case o.CANCEL_COMPLETE:e.success?l.cancelCall.resolve():l.cancelCall.reject(s(e.reason)),this._deleteStreamController(l,t);break;case o.CANCEL:if(!u)break;new Promise((function(t){t(u.onCancel&&u.onCancel(s(e.reason)))})).then((function(){a.postMessage({sourceName:r,targetName:i,stream:o.CANCEL_COMPLETE,streamId:t,success:!0})}),(function(e){a.postMessage({sourceName:r,targetName:i,stream:o.CANCEL_COMPLETE,streamId:t,reason:s(e)})})),u.sinkCapability.reject(s(e.reason)),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(e,t){await Promise.allSettled([e.startCall&&e.startCall.promise,e.pullCall&&e.pullCall.promise,e.cancelCall&&e.cancelCall.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}t.MessageHandler=a},(e,t,r)=>{var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var o=r(1);class s{constructor({parsedData:e,rawData:t}){__privateAdd(this,n,void 0),__privateAdd(this,i,void 0),__privateSet(this,n,e),__privateSet(this,i,t)}getRaw(){return __privateGet(this,i)}get(e){return __privateGet(this,n).get(e)??null}getAll(){return(0,o.objectFromMap)(__privateGet(this,n))}has(e){return __privateGet(this,n).has(e)}}n=new WeakMap,i=new WeakMap,t.Metadata=s},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=r(1);class i{constructor(e,t){this.visible=!0,this.name=e,this.intent=t}}class o{constructor(e){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==e){this.name=e.name,this.creator=e.creator,this._order=e.order;for(const t of e.groups)this._groups.set(t.id,new i(t.name,t.intent));if("OFF"===e.baseState)for(const e of this._groups)e.visible=!1;for(const t of e.on)this._groups.get(t).visible=!0;for(const t of e.off)this._groups.get(t).visible=!1}}_evaluateVisibilityExpression(e){const t=e.length;if(t<2)return!0;const r=e[0];for(let i=1;i<t;i++){const t=e[i];let o;if(Array.isArray(t))o=this._evaluateVisibilityExpression(t);else{if(!this._groups.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;o=this._groups.get(t).visible}switch(r){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===r}isVisible(e){if(0===this._groups.size)return!0;if(!e)return(0,n.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return this._groups.has(e.id)?this._groups.get(e.id).visible:((0,n.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this._evaluateVisibilityExpression(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(this._groups.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(!this._groups.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(!this._groups.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this._groups.has(t))return(0,n.warn)(`Optional content group not found: ${t}`),!0;if(this._groups.get(t).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,n.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0){this._groups.has(e)?this._groups.get(e).visible=!!t:(0,n.warn)(`Optional content group not found: ${e}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,n.objectFromMap)(this._groups):null}getGroup(e){return this._groups.get(e)||null}}t.OptionalContentConfig=o},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=r(1),i=r(5);class o{constructor(e,t){(0,n.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=e.progressiveDone||!1,this._contentDispositionFilename=e.contentDispositionFilename||null;const r=e.initialData;if((null==r?void 0:r.length)>0){const e=new Uint8Array(r).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._contentLength=e.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((e,t)=>{this._onReceiveData({begin:e,chunk:t})})),this._pdfDataRangeTransport.addProgressListener(((e,t)=>{this._onProgress({loaded:e,total:t})})),this._pdfDataRangeTransport.addProgressiveReadListener((e=>{this._onReceiveData({chunk:e})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){const t=new Uint8Array(e.chunk).buffer;if(void 0===e.begin)this._fullRequestReader?this._fullRequestReader._enqueue(t):this._queuedChunks.push(t);else{const r=this._rangeReaders.some((function(r){return r._begin===e.begin&&(r._enqueue(t),!0)}));(0,n.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}_onProgress(e){if(void 0===e.total){const t=this._rangeReaders[0];(null==t?void 0:t.onProgress)&&t.onProgress({loaded:e.loaded})}else{const t=this._fullRequestReader;(null==t?void 0:t.onProgress)&&t.onProgress({loaded:e.loaded,total:e.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new s(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new a(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=o;class s{constructor(e,t,r=!1,n=null){this._stream=e,this._done=r||!1,this._filename=(0,i.isPdfFile)(n)?n:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){const t=this._requests.shift();t.resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){const e=this._queuedChunks.shift();return{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class a{constructor(e,t,r){this._stream=e,this._begin=t,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{const t=this._requests.shift();t.resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class r{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function i(e){var n;if(!e)return;let o=null;const s=e.name;if("#text"===s)o=e.value;else{if(!r.shouldBuildText(s))return;(null==(n=null==e?void 0:e.attributes)?void 0:n.textContent)?o=e.attributes.textContent:e.value&&(o=e.value)}if(null!==o&&t.push({str:o}),e.children)for(const t of e.children)i(t)}return i(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=r},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=r(6);const i=function(e){return new Promise(((t,r)=>{const n=require_fs();n.readFile(e,((e,n)=>{!e&&n?t(new Uint8Array(n)):r(new Error(e))}))}))};class o extends n.BaseCanvasFactory{_createCanvas(e,t){const r=require_canvas();return r.createCanvas(e,t)}}t.NodeCanvasFactory=o;class s extends n.BaseCMapReaderFactory{_fetchData(e,t){return i(e).then((e=>({cMapData:e,compressionType:t})))}}t.NodeCMapReaderFactory=s;class a extends n.BaseStandardFontDataFactory{_fetchData(e){return i(e)}}t.NodeStandardFontDataFactory=a},(e,t,r)=>{var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var o=r(1),s=r(5),a=r(8),l=r(21),u=r(22);const c=1e3,d=new WeakSet;function h(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class p{static create(e){const t=e.data.annotationType;switch(t){case o.AnnotationType.LINK:return new g(e);case o.AnnotationType.TEXT:return new m(e);case o.AnnotationType.WIDGET:const t=e.data.fieldType;switch(t){case"Tx":return new y(e);case"Btn":return e.data.radioButton?new b(e):e.data.checkBox?new _(e):new S(e);case"Ch":return new w(e)}return new v(e);case o.AnnotationType.POPUP:return new C(e);case o.AnnotationType.FREETEXT:return new E(e);case o.AnnotationType.LINE:return new x(e);case o.AnnotationType.SQUARE:return new T(e);case o.AnnotationType.CIRCLE:return new k(e);case o.AnnotationType.POLYLINE:return new O(e);case o.AnnotationType.CARET:return new R(e);case o.AnnotationType.INK:return new I(e);case o.AnnotationType.POLYGON:return new P(e);case o.AnnotationType.HIGHLIGHT:return new L(e);case o.AnnotationType.UNDERLINE:return new M(e);case o.AnnotationType.SQUIGGLY:return new N(e);case o.AnnotationType.STRIKEOUT:return new D(e);case o.AnnotationType.STAMP:return new B(e);case o.AnnotationType.FILEATTACHMENT:return new F(e);default:return new f(e)}}}class f{constructor(e,{isRenderable:t=!1,ignoreBorder:r=!1,createQuadrilaterals:n=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this._mouseState=e.mouseState,t&&(this.container=this._createContainer(r)),n&&(this.quadrilaterals=this._createQuadrilaterals(r))}_createContainer(e=!1){const t=this.data,r=this.page,n=this.viewport,i=document.createElement("section");let{width:s,height:a}=h(t.rect);i.setAttribute("data-annotation-id",t.id);const l=o.Util.normalizeRect([t.rect[0],r.view[3]-t.rect[1]+r.view[1],t.rect[2],r.view[3]-t.rect[3]+r.view[1]]);if(t.hasOwnCanvas){const e=n.transform.slice(),[t,r]=o.Util.singularValueDecompose2dScale(e);s=Math.ceil(s*t),a=Math.ceil(a*r),l[0]*=t,l[1]*=r;for(let n=0;n<4;n++)e[n]=Math.sign(e[n]);i.style.transform=`matrix(${e.join(",")})`}else i.style.transform=`matrix(${n.transform.join(",")})`;if(i.style.transformOrigin=`${-l[0]}px ${-l[1]}px`,!e&&t.borderStyle.width>0){i.style.borderWidth=`${t.borderStyle.width}px`,t.borderStyle.style!==o.AnnotationBorderStyleType.UNDERLINE&&(s-=2*t.borderStyle.width,a-=2*t.borderStyle.width);const e=t.borderStyle.horizontalCornerRadius,r=t.borderStyle.verticalCornerRadius;if(e>0||r>0){const t=`${e}px / ${r}px`;i.style.borderRadius=t}switch(t.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:i.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:i.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:i.style.borderBottomStyle="solid";break;default:break}const n=t.borderColor||t.color||null;n?i.style.borderColor=o.Util.makeHexColor(0|t.color[0],0|t.color[1],0|t.color[2]):i.style.borderWidth=0}return i.style.left=`${l[0]}px`,i.style.top=`${l[1]}px`,t.hasOwnCanvas?i.style.width=i.style.height="auto":(i.style.width=`${s}px`,i.style.height=`${a}px`),i}get _commonActions(){const e=(e,t,r)=>{const n=r.detail[e];r.target.style[t]=l.ColorConverters[`${n[0]}_HTML`](n.slice(1))};return(0,o.shadow)(this,"_commonActions",{display:e=>{const t=e.detail.display%2===1;e.target.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t,print:0===e.detail.display||3===e.detail.display})},print:e=>{this.annotationStorage.setValue(this.data.id,{print:e.detail.print})},hidden:e=>{e.target.style.visibility=e.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e.detail.hidden})},focus:e=>{setTimeout((()=>e.target.focus({preventScroll:!1})),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.detail.readonly?e.target.setAttribute("readonly",""):e.target.removeAttribute("readonly")},required:e=>{e.detail.required?e.target.setAttribute("required",""):e.target.removeAttribute("required")},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)}})}_dispatchEventFromSandbox(e,t){const r=this._commonActions;for(const n of Object.keys(t.detail)){const i=e[n]||r[n];i&&i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const r=this._commonActions;for(const[n,i]of Object.entries(t)){const o=r[n];o&&(o({detail:i,target:e}),delete t[n])}}_createQuadrilaterals(e=!1){if(!this.data.quadPoints)return null;const t=[],r=this.data.rect;for(const n of this.data.quadPoints)this.data.rect=[n[2].x,n[2].y,n[1].x,n[1].y],t.push(this._createContainer(e));return this.data.rect=r,t}_createPopup(e,t){let r=this.container;this.quadrilaterals&&(e=e||this.quadrilaterals,r=this.quadrilaterals[0]),e||(e=document.createElement("div"),e.style.height=r.style.height,e.style.width=r.style.width,r.appendChild(e));const n=new A({container:r,trigger:e,color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,hideWrapper:!0}),i=n.render();i.style.left=r.style.width,r.appendChild(i)}_renderQuadrilaterals(e){for(const t of this.quadrilaterals)t.className=e;return this.quadrilaterals}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const r=[];if(this._fieldObjects){const n=this._fieldObjects[e];if(n)for(const{page:e,id:i,exportValues:s}of n){if(-1===e)continue;if(i===t)continue;const n="string"===typeof s?s:null,a=document.getElementById(i);!a||d.has(a)?r.push({id:i,exportValue:n,domElement:a}):(0,o.warn)(`_getElementsByName - element not allowed: ${i}`)}return r}for(const n of document.getElementsByName(e)){const{id:e,exportValue:i}=n;e!==t&&(d.has(n)&&r.push({id:e,exportValue:i,domElement:n}))}return r}static get platform(){const e="undefined"!==typeof navigator?navigator.platform:"";return(0,o.shadow)(this,"platform",{isWin:e.includes("Win"),isMac:e.includes("Mac")})}}class g extends f{constructor(e,t=null){const r=!!(e.data.url||e.data.dest||e.data.action||e.data.isTooltipOnly||e.data.resetForm||e.data.actions&&(e.data.actions.Action||e.data.actions["Mouse Up"]||e.data.actions["Mouse Down"]));super(e,{isRenderable:r,ignoreBorder:!!(null==t?void 0:t.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:e,linkService:t}=this,r=document.createElement("a");if(e.url)t.addLinkAttributes(r,e.url,e.newWindow);else if(e.action)this._bindNamedAction(r,e.action);else if(e.dest)this._bindLink(r,e.dest);else{let t=!1;e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(t=!0,this._bindJSAction(r,e)),e.resetForm?this._bindResetFormAction(r,e.resetForm):t||this._bindLink(r,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map(((e,t)=>{const n=0===t?r:r.cloneNode();return e.appendChild(n),e})):(this.container.className="linkAnnotation",this.container.appendChild(r),this.container)}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&(e.className="internalLink")}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),e.className="internalLink"}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const n of Object.keys(t.actions)){const i=r.get(n);i&&(e[i]=()=>{var e;return null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:n}}),!1})}e.onclick||(e.onclick=()=>!1),e.className="internalLink"}_bindResetFormAction(e,t){const r=e.onclick;if(r||(e.href=this.linkService.getAnchorUrl("")),e.className="internalLink",!this._fieldObjects)return(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(r||(e.onclick=()=>!1));e.onclick=()=>{var e;r&&r();const{fields:n,refs:i,include:o}=t,s=[];if(0!==n.length||0!==i.length){const e=new Set(i);for(const t of n){const r=this._fieldObjects[t]||[];for(const{id:t}of r)e.add(t)}for(const t of Object.values(this._fieldObjects))for(const r of t)e.has(r.id)===o&&s.push(r)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,l=[];for(const t of s){const{id:e}=t;switch(l.push(e),t.type){case"text":{const r=t.defaultValue||"";a.setValue(e,{value:r});break}case"checkbox":case"radiobutton":{const r=t.defaultValue===t.exportValues;a.setValue(e,{value:r});break}case"combobox":case"listbox":{const r=t.defaultValue||"";a.setValue(e,{value:r});break}default:continue}const r=document.getElementById(e);r&&d.has(r)&&r.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})),!1}}}class m extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i})}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(e,this.data),this.container.appendChild(e),this.container}}class v extends f{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(e){const{isWin:t,isMac:r}=f.platform;return t&&e.ctrlKey||r&&e.metaKey}_setEventListener(e,t,r,n){t.includes("mouse")?e.addEventListener(t,(e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})})):e.addEventListener(t,(e=>{var t;null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:n(e)}})}))}_setEventListeners(e,t,r){var n;for(const[i,o]of t)("Action"===o||(null==(n=this.data.actions)?void 0:n[o]))&&this._setEventListener(e,i,o,r)}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":o.Util.makeHexColor(t[0],t[1],t[2])}}class y extends v{constructor(e){const t=e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,r,n){const i=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=r),i.setValue(o.id,{[n]:r})}render(){var e;const t=this.annotationStorage,r=this.data.id;this.container.className="textWidgetAnnotation";let n=null;if(this.renderForms){const i=t.getValue(r,{value:this.data.fieldValue}),o=i.formattedValue||i.value||"",s={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o):(n=document.createElement("input"),n.type="text",n.setAttribute("value",o)),d.add(n),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=c,s.userValue=o,n.setAttribute("id",r),n.addEventListener("input",(e=>{t.setValue(r,{value:e.target.value}),this.setPropertyOnSiblings(n,"value",e.target.value,"value")})),n.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue??"";n.value=s.userValue=t,s.formattedValue=null}));let a=e=>{const{formattedValue:t}=s;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(e=>{s.userValue&&(e.target.value=s.userValue),s.valueOnFocus=e.target.value})),n.addEventListener("updatefromsandbox",(e=>{const n={value(e){s.userValue=e.detail.value??"",t.setValue(r,{value:s.userValue.toString()}),e.target.value=s.userValue},formattedValue(e){const{formattedValue:n}=e.detail;s.formattedValue=n,null!==n&&void 0!==n&&e.target!==document.activeElement&&(e.target.value=n),t.setValue(r,{formattedValue:n})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)}};this._dispatchEventFromSandbox(n,e)})),n.addEventListener("keydown",(e=>{var t;let n=-1;if("Escape"===e.key?n=0:"Enter"===e.key?n=2:"Tab"===e.key&&(n=3),-1===n)return;const{value:i}=e.target;s.valueOnFocus!==i&&(s.userValue=i,null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:i,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))}));const i=a;a=null,n.addEventListener("blur",(e=>{var t;const{value:n}=e.target;s.userValue=n,this._mouseState.isDown&&s.valueOnFocus!==n&&(null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:n,willCommit:!0,commitKey:1,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}})),i(e)})),(null==(e=this.data.actions)?void 0:e.Keystroke)&&n.addEventListener("beforeinput",(e=>{var t;const{data:n,target:i}=e,{value:o,selectionStart:s,selectionEnd:a}=i;let l=s,u=a;switch(e.inputType){case"deleteWordBackward":{const e=o.substring(0,s).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=o.substring(s).match(/^[^\w]*\w*/);e&&(u+=e[0].length);break}case"deleteContentBackward":s===a&&(l-=1);break;case"deleteContentForward":s===a&&(u+=1);break}e.preventDefault(),null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:r,name:"Keystroke",value:o,change:n||"",willCommit:!1,selStart:l,selEnd:u}})})),this._setEventListeners(n,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.value))}if(a&&n.addEventListener("blur",a),null!==this.data.maxLen&&(n.maxLength=this.data.maxLen),this.data.comb){const e=this.data.rect[2]-this.data.rect[0],t=e/this.data.maxLen;n.classList.add("comb"),n.style.letterSpacing=`calc(${t}px - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.appendChild(n),this.container}_setTextStyle(e){const t=["left","center","right"],{fontSize:r,fontColor:n}=this.data.defaultAppearanceData,i=e.style;r&&(i.fontSize=`${r}px`),i.color=o.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=t[this.data.textAlignment])}}class _ extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,r=t.id;let n=e.getValue(r,{value:t.exportValue===t.fieldValue}).value;"string"===typeof n&&(n="Off"!==n,e.setValue(r,{value:n})),this.container.className="buttonWidgetAnnotation checkBox";const i=document.createElement("input");return d.add(i),i.disabled=t.readOnly,i.type="checkbox",i.name=t.fieldName,n&&i.setAttribute("checked",!0),i.setAttribute("id",r),i.setAttribute("exportValue",t.exportValue),i.tabIndex=c,i.addEventListener("change",(n=>{const{name:i,checked:o}=n.target;for(const s of this._getElementsByName(i,r)){const r=o&&s.exportValue===t.exportValue;s.domElement&&(s.domElement.checked=r),e.setValue(s.id,{value:r})}e.setValue(r,{value:o})})),i.addEventListener("resetform",(e=>{const r=t.defaultFieldValue||"Off";e.target.checked=r===t.exportValue})),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",(t=>{const n={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(r,{value:t.target.checked})}};this._dispatchEventFromSandbox(n,t)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.appendChild(i),this.container}}class b extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,t=this.data,r=t.id;let n=e.getValue(r,{value:t.fieldValue===t.buttonValue}).value;"string"===typeof n&&(n=n!==t.buttonValue,e.setValue(r,{value:n}));const i=document.createElement("input");if(d.add(i),i.disabled=t.readOnly,i.type="radio",i.name=t.fieldName,n&&i.setAttribute("checked",!0),i.setAttribute("id",r),i.tabIndex=c,i.addEventListener("change",(t=>{const{name:n,checked:i}=t.target;for(const o of this._getElementsByName(n,r))e.setValue(o.id,{value:!1});e.setValue(r,{value:i})})),i.addEventListener("resetform",(e=>{const r=t.defaultFieldValue;e.target.checked=null!==r&&void 0!==r&&r===t.buttonValue})),this.enableScripting&&this.hasJSActions){const n=t.buttonValue;i.addEventListener("updatefromsandbox",(t=>{const i={value:t=>{const i=n===t.detail.value;for(const n of this._getElementsByName(t.target.name)){const t=i&&n.id===r;n.domElement&&(n.domElement.checked=t),e.setValue(n.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)})),this._setEventListeners(i,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(e=>e.target.checked))}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.appendChild(i),this.container}}class S extends g{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(e.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(e),e}}class w extends v{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,t=this.data.id,r=e.getValue(t,{value:this.data.fieldValue});let{fontSize:n}=this.data.defaultAppearanceData;n||(n=9);const i=`calc(${n}px * var(--zoom-factor))`,o=document.createElement("select");d.add(o),o.disabled=this.data.readOnly,o.name=this.data.fieldName,o.setAttribute("id",t),o.tabIndex=c,o.style.fontSize=`${n}px`,this.data.combo||(o.size=this.data.options.length,this.data.multiSelect&&(o.multiple=!0)),o.addEventListener("resetform",(e=>{const t=this.data.defaultFieldValue;for(const r of o.options)r.selected=r.value===t}));for(const l of this.data.options){const e=document.createElement("option");e.textContent=l.displayValue,e.value=l.exportValue,this.data.combo&&(e.style.fontSize=i),r.value.includes(l.exportValue)&&e.setAttribute("selected",!0),o.appendChild(e)}const s=(e,t)=>{const r=t?"value":"textContent",n=e.target.options;return e.target.multiple?Array.prototype.filter.call(n,(e=>e.selected)).map((e=>e[r])):-1===n.selectedIndex?null:n[n.selectedIndex][r]},a=e=>{const t=e.target.options;return Array.prototype.map.call(t,(e=>({displayValue:e.textContent,exportValue:e.value})))};return this.enableScripting&&this.hasJSActions?(o.addEventListener("updatefromsandbox",(r=>{const n={value(r){const n=r.detail.value,i=new Set(Array.isArray(n)?n:[n]);for(const e of o.options)e.selected=i.has(e.value);e.setValue(t,{value:s(r,!0)})},multipleSelection(e){o.multiple=!0},remove(r){const n=o.options,i=r.detail.remove;if(n[i].selected=!1,o.remove(i),n.length>0){const e=Array.prototype.findIndex.call(n,(e=>e.selected));-1===e&&(n[0].selected=!0)}e.setValue(t,{value:s(r,!0),items:a(r)})},clear(r){while(0!==o.length)o.remove(0);e.setValue(t,{value:null,items:[]})},insert(r){const{index:n,displayValue:i,exportValue:l}=r.detail.insert,u=document.createElement("option");u.textContent=i,u.value=l,o.insertBefore(u,o.children[n]),e.setValue(t,{value:s(r,!0),items:a(r)})},items(r){const{items:n}=r.detail;while(0!==o.length)o.remove(0);for(const e of n){const{displayValue:t,exportValue:r}=e,n=document.createElement("option");n.textContent=t,n.value=r,o.appendChild(n)}o.options.length>0&&(o.options[0].selected=!0),e.setValue(t,{value:s(r,!0),items:a(r)})},indices(r){const n=new Set(r.detail.indices);for(const e of r.target.options)e.selected=n.has(e.index);e.setValue(t,{value:s(r,!0)})},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(n,r)})),o.addEventListener("input",(r=>{var n;const i=s(r,!0),o=s(r,!1);e.setValue(t,{value:i}),null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,changeEx:i,willCommit:!0,commitKey:1,keyDown:!1}})})),this._setEventListeners(o,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],(e=>e.target.checked))):o.addEventListener("input",(function(r){e.setValue(t,{value:s(r,!0)})})),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.appendChild(o),this.container}}class C extends f{constructor(e){var t,r,n;const i=!!((null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i})}render(){const e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;const t=`[data-annotation-id="${this.data.parentId}"]`,r=this.layer.querySelectorAll(t);if(0===r.length)return this.container;const n=new A({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),i=this.page,s=o.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),a=s[0]+this.data.parentRect[2]-this.data.parentRect[0],l=s[1];return this.container.style.transformOrigin=`${-a}px ${-l}px`,this.container.style.left=`${a}px`,this.container.style.top=`${l}px`,this.container.appendChild(n.render()),this.container}}class A{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.titleObj=e.titleObj,this.modificationDate=e.modificationDate,this.contentsObj=e.contentsObj,this.richText=e.richText,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){var e,t;const r=.7,n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.hidden=!0;const i=document.createElement("div");i.className="popup";const a=this.color;if(a){const e=r*(255-a[0])+a[0],t=r*(255-a[1])+a[1],n=r*(255-a[2])+a[2];i.style.backgroundColor=o.Util.makeHexColor(0|e,0|t,0|n)}const l=document.createElement("h1");l.dir=this.titleObj.dir,l.textContent=this.titleObj.str,i.appendChild(l);const c=s.PDFDateString.toDateObject(this.modificationDate);if(c){const e=document.createElement("span");e.className="popupDate",e.textContent="{{date}}, {{time}}",e.dataset.l10nId="annotation_date_string",e.dataset.l10nArgs=JSON.stringify({date:c.toLocaleDateString(),time:c.toLocaleTimeString()}),i.appendChild(e)}if(!(null==(e=this.richText)?void 0:e.str)||(null==(t=this.contentsObj)?void 0:t.str)&&this.contentsObj.str!==this.richText.str){const e=this._formatContents(this.contentsObj);i.appendChild(e)}else u.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:i}),i.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const o of this.trigger)o.addEventListener("click",this._toggle.bind(this)),o.addEventListener("mouseover",this._show.bind(this,!1)),o.addEventListener("mouseout",this._hide.bind(this,!1));return i.addEventListener("click",this._hide.bind(this,!0)),n.appendChild(i),n}_formatContents({str:e,dir:t}){const r=document.createElement("p");r.className="popupContent",r.dir=t;const n=e.split(/(?:\r\n?|\n)/);for(let i=0,o=n.length;i<o;++i){const e=n[i];r.appendChild(document.createTextNode(e)),i<o-1&&r.appendChild(document.createElement("br"))}return r}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class E extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class x extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const e=this.data,{width:t,height:r}=h(e.rect),n=this.svgFactory.create(t,r),i=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),n.appendChild(i),this.container.append(n),this._createPopup(i,e),this.container}}class T extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const e=this.data,{width:t,height:r}=h(e.rect),n=this.svgFactory.create(t,r),i=e.borderStyle.width,o=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",i/2),o.setAttribute("y",i/2),o.setAttribute("width",t-i),o.setAttribute("height",r-i),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.appendChild(o),this.container.append(n),this._createPopup(o,e),this.container}}class k extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const e=this.data,{width:t,height:r}=h(e.rect),n=this.svgFactory.create(t,r),i=e.borderStyle.width,o=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",t/2),o.setAttribute("cy",r/2),o.setAttribute("rx",t/2-i/2),o.setAttribute("ry",r/2-i/2),o.setAttribute("stroke-width",i||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.appendChild(o),this.container.append(n),this._createPopup(o,e),this.container}}class O extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:r}=h(e.rect),n=this.svgFactory.create(t,r);let i=[];for(const s of e.vertices){const t=s.x-e.rect[0],r=e.rect[3]-s.y;i.push(t+","+r)}i=i.join(" ");const o=this.svgFactory.createElement(this.svgElementName);return o.setAttribute("points",i),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),n.appendChild(o),this.container.append(n),this._createPopup(o,e),this.container}}class P extends O{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class R extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,{width:t,height:r}=h(e.rect),n=this.svgFactory.create(t,r);for(const i of e.inkLists){let t=[];for(const n of i){const r=n.x-e.rect[0],i=e.rect[3]-n.y;t.push(`${r},${i}`)}t=t.join(" ");const r=this.svgFactory.createElement(this.svgElementName);r.setAttribute("points",t),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),this._createPopup(r,e),n.appendChild(r)}return this.container.append(n),this.container}}class L extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class M extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class N extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class D extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class B extends f{constructor(e){var t,r,n;const i=!!(e.data.hasPopup||(null==(t=e.data.titleObj)?void 0:t.str)||(null==(r=e.data.contentsObj)?void 0:r.str)||(null==(n=e.data.richText)?void 0:n.str));super(e,{isRenderable:i,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends f{constructor(e){var t;super(e,{isRenderable:!0});const{filename:r,content:n}=this.data.file;this.filename=(0,s.getFilenameFromUrl)(r),this.content=n,null==(t=this.linkService.eventBus)||t.dispatch("fileattachmentannotation",{source:this,filename:r,content:n})}render(){var e,t;this.container.className="fileAttachmentAnnotation";const r=document.createElement("div");return r.style.height=this.container.style.height,r.style.width=this.container.style.width,r.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(e=this.data.titleObj)?void 0:e.str)||(null==(t=this.data.contentsObj)?void 0:t.str)||this.data.richText)&&this._createPopup(r,this.data),this.container.appendChild(r),this.container}_download(){var e;null==(e=this.downloadManager)||e.openOrDownloadData(this.container,this.content,this.filename)}}class j{static render(e){const t=[],r=[];for(const n of e.annotations){if(!n)continue;const{width:e,height:i}=h(n.rect);e<=0||i<=0||(n.annotationType!==o.AnnotationType.POPUP?t.push(n):r.push(n))}r.length&&t.push(...r);const l=e.div;for(const n of t){const t=p.create({data:n,layer:l,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new s.DOMSVGFactory,annotationStorage:e.annotationStorage||new a.AnnotationStorage,enableScripting:e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,mouseState:e.mouseState||{isDown:!1}});if(t.isRenderable){const e=t.render();if(n.hidden&&(e.style.visibility="hidden"),Array.isArray(e))for(const t of e)l.appendChild(t);else t instanceof C?l.prepend(e):l.appendChild(e)}}__privateMethod(this,n,i).call(this,l,e.annotationCanvasMap)}static update(e){const{page:t,viewport:r,annotations:s,annotationCanvasMap:a,div:l}=e,u=r.transform,c=`matrix(${u.join(",")})`;let d,h;for(const n of s){const e=l.querySelectorAll(`[data-annotation-id="${n.id}"]`);if(e)for(const r of e)if(n.hasOwnCanvas){const e=o.Util.normalizeRect([n.rect[0],t.view[3]-n.rect[1]+t.view[1],n.rect[2],t.view[3]-n.rect[3]+t.view[1]]);if(!h){d=Math.abs(u[0]||u[1]);const e=u.slice();for(let t=0;t<4;t++)e[t]=Math.sign(e[t]);h=`matrix(${e.join(",")})`}const i=e[0]*d,s=e[1]*d;r.style.left=`${i}px`,r.style.top=`${s}px`,r.style.transformOrigin=`${-i}px ${-s}px`,r.style.transform=h}else r.style.transform=c}__privateMethod(this,n,i).call(this,l,a),l.hidden=!1}}n=new WeakSet,i=function(e,t){if(t){for(const[r,n]of t){const t=e.querySelector(`[data-annotation-id="${r}"]`);if(!t)continue;const{firstChild:i}=t;"CANVAS"===i.nodeName?t.replaceChild(n,i):t.insertBefore(n,i)}t.clear()}},__privateAdd(j,n),t.AnnotationLayer=j},(e,t)=>{function r(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;class n{static CMYK_G([e,t,r,n]){return["G",1-Math.min(1,.3*e+.59*r+.11*t+n)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_HTML([e]){const t=r(e);return`#${t}${t}${t}`}static RGB_G([e,t,r]){return["G",.3*e+.59*t+.11*r]}static RGB_HTML([e,t,n]){const i=r(e),o=r(t),s=r(n);return`#${i}${o}${s}`}static T_HTML(){return"#00000000"}static CMYK_RGB([e,t,r,n]){return["RGB",1-Math.min(1,e+n),1-Math.min(1,r+n),1-Math.min(1,t+n)]}static CMYK_HTML(e){return this.RGB_HTML(this.CMYK_RGB(e))}static RGB_CMYK([e,t,r]){const n=1-e,i=1-t,o=1-r,s=Math.min(n,i,o);return["CMYK",n,i,o,s]}}t.ColorConverters=n},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=r(18);class i{static setupStorage(e,t,r,n,i){const o=n.getValue(t,{value:null});switch(r.name){case"textarea":if(null!==o.value&&(e.textContent=o.value),"print"===i)break;e.addEventListener("input",(e=>{n.setValue(t,{value:e.target.value})}));break;case"input":if("radio"===r.attributes.type||"checkbox"===r.attributes.type){if(o.value===r.attributes.xfaOn?e.setAttribute("checked",!0):o.value===r.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",(e=>{n.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})}))}else{if(null!==o.value&&e.setAttribute("value",o.value),"print"===i)break;e.addEventListener("input",(e=>{n.setValue(t,{value:e.target.value})}))}break;case"select":if(null!==o.value)for(const e of r.children)e.attributes.value===o.value&&(e.attributes.selected=!0);e.addEventListener("input",(e=>{const r=e.target.options,i=-1===r.selectedIndex?"":r[r.selectedIndex].value;n.setValue(t,{value:i})}));break}}static setAttributes({html:e,element:t,storage:r=null,intent:n,linkService:i}){const{attributes:o}=t,s=e instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${n}`);for(const[a,l]of Object.entries(o))if(null!==l&&void 0!==l&&"dataId"!==a)if("style"!==a)if("textContent"===a)e.textContent=l;else if("class"===a)l.length&&e.setAttribute(a,l.join(" "));else{if(s&&("href"===a||"newWindow"===a))continue;e.setAttribute(a,l)}else Object.assign(e.style,l);s&&i.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,t,r)}static render(e){var t;const r=e.annotationStorage,i=e.linkService,o=e.xfaHtml,s=e.intent||"display",a=document.createElement(o.name);o.attributes&&this.setAttributes({html:a,element:o,intent:s,linkService:i});const l=[[o,-1,a]],u=e.div;if(u.appendChild(a),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=t}"richText"!==s&&u.setAttribute("class","xfaLayer xfaFont");const c=[];while(l.length>0){const[e,o,a]=l[l.length-1];if(o+1===e.children.length){l.pop();continue}const u=e.children[++l[l.length-1][1]];if(null===u)continue;const{name:d}=u;if("#text"===d){const e=document.createTextNode(u.value);c.push(e),a.appendChild(e);continue}let h;if(h=(null==(t=null==u?void 0:u.attributes)?void 0:t.xmlns)?document.createElementNS(u.attributes.xmlns,d):document.createElement(d),a.appendChild(h),u.attributes&&this.setAttributes({html:h,element:u,storage:r,intent:s,linkService:i}),u.children&&u.children.length>0)l.push([u,-1,h]);else if(u.value){const e=document.createTextNode(u.value);n.XfaText.shouldBuildText(d)&&c.push(e),h.appendChild(e)}}for(const n of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:c}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}t.XfaLayer=i},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderTextLayer=v;var n=r(1);const i=1e5,o=30,s=.8,a=new Map,l=/^\s+$/g;function u(e,t){const r=a.get(e);if(r)return r;t.save(),t.font=`${o}px ${e}`;const n=t.measureText("");let i=n.fontBoundingBoxAscent,l=Math.abs(n.fontBoundingBoxDescent);if(i){t.restore();const r=i/(i+l);return a.set(e,r),r}t.strokeStyle="red",t.clearRect(0,0,o,o),t.strokeText("g",0,0);let u=t.getImageData(0,0,o,o).data;l=0;for(let s=u.length-1-3;s>=0;s-=4)if(u[s]>0){l=Math.ceil(s/4/o);break}t.clearRect(0,0,o,o),t.strokeText("A",0,o),u=t.getImageData(0,0,o,o).data,i=0;for(let s=0,a=u.length;s<a;s+=4)if(u[s]>0){i=o-Math.floor(s/4/o);break}if(t.restore(),i){const t=i/(i+l);return a.set(e,t),t}return a.set(e,s),s}function c(e,t,r,i){const o=document.createElement("span"),s=e._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL};e._textDivs.push(o);const a=n.Util.transform(e._viewport.transform,t.transform);let c=Math.atan2(a[1],a[0]);const d=r[t.fontName];d.vertical&&(c+=Math.PI/2);const h=Math.hypot(a[2],a[3]),p=h*u(d.fontFamily,i);let f,g;0===c?(f=a[4],g=a[5]-p):(f=a[4]+p*Math.sin(c),g=a[5]-p*Math.cos(c)),o.style.left=`${f}px`,o.style.top=`${g}px`,o.style.fontSize=`${h}px`,o.style.fontFamily=d.fontFamily,o.setAttribute("role","presentation"),o.textContent=t.str,o.dir=t.dir,e._fontInspectorEnabled&&(o.dataset.fontName=t.fontName),0!==c&&(s.angle=c*(180/Math.PI));let m=!1;if(t.str.length>1||e._enhanceTextSelection&&l.test(t.str))m=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),r=Math.abs(t.transform[3]);e!==r&&Math.max(e,r)/Math.min(e,r)>1.5&&(m=!0)}if(m&&(d.vertical?s.canvasWidth=t.height*e._viewport.scale:s.canvasWidth=t.width*e._viewport.scale),e._textDivProperties.set(o,s),e._textContentStream&&e._layoutText(o),e._enhanceTextSelection&&s.hasText){let r=1,i=0;0!==c&&(r=Math.cos(c),i=Math.sin(c));const s=(d.vertical?t.height:t.width)*e._viewport.scale,a=h;let l,u;0!==c?(l=[r,i,-i,r,f,g],u=n.Util.getAxialAlignedBoundingBox([0,0,s,a],l)):u=[f,g,f+s,g+a],e._bounds.push({left:u[0],top:u[1],right:u[2],bottom:u[3],div:o,size:[s,a],m:l})}}function d(e){if(e._canceled)return;const t=e._textDivs,r=e._capability,n=t.length;if(n>i)return e._renderingDone=!0,void r.resolve();if(!e._textContentStream)for(let i=0;i<n;i++)e._layoutText(t[i]);e._renderingDone=!0,r.resolve()}function h(e,t,r){let n=0;for(let i=0;i<r;i++){const r=e[t++];r>0&&(n=n?Math.min(r,n):r)}return n}function p(e){const t=e._bounds,r=e._viewport,i=f(r.width,r.height,t);for(let o=0;o<i.length;o++){const r=t[o].div,s=e._textDivProperties.get(r);if(0===s.angle){s.paddingLeft=t[o].left-i[o].left,s.paddingTop=t[o].top-i[o].top,s.paddingRight=i[o].right-t[o].right,s.paddingBottom=i[o].bottom-t[o].bottom,e._textDivProperties.set(r,s);continue}const a=i[o],l=t[o],u=l.m,c=u[0],d=u[1],p=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],f=new Float64Array(64);for(let e=0,t=p.length;e<t;e++){const t=n.Util.applyTransform(p[e],u);f[e+0]=c&&(a.left-t[0])/c,f[e+4]=d&&(a.top-t[1])/d,f[e+8]=c&&(a.right-t[0])/c,f[e+12]=d&&(a.bottom-t[1])/d,f[e+16]=d&&(a.left-t[0])/-d,f[e+20]=c&&(a.top-t[1])/c,f[e+24]=d&&(a.right-t[0])/-d,f[e+28]=c&&(a.bottom-t[1])/c,f[e+32]=c&&(a.left-t[0])/-c,f[e+36]=d&&(a.top-t[1])/-d,f[e+40]=c&&(a.right-t[0])/-c,f[e+44]=d&&(a.bottom-t[1])/-d,f[e+48]=d&&(a.left-t[0])/d,f[e+52]=c&&(a.top-t[1])/-c,f[e+56]=d&&(a.right-t[0])/d,f[e+60]=c&&(a.bottom-t[1])/-c}const g=1+Math.min(Math.abs(c),Math.abs(d));s.paddingLeft=h(f,32,16)/g,s.paddingTop=h(f,48,16)/g,s.paddingRight=h(f,0,16)/g,s.paddingBottom=h(f,16,16)/g,e._textDivProperties.set(r,s)}}function f(e,t,r){const n=r.map((function(e,t){return{x1:e.left,y1:e.top,x2:e.right,y2:e.bottom,index:t,x1New:void 0,x2New:void 0}}));g(e,n);const i=new Array(r.length);for(const o of n){const e=o.index;i[e]={left:o.x1New,top:0,right:o.x2New,bottom:0}}r.map((function(t,r){const o=i[r],s=n[r];s.x1=t.top,s.y1=e-o.right,s.x2=t.bottom,s.y2=e-o.left,s.index=r,s.x1New=void 0,s.x2New=void 0})),g(t,n);for(const o of n){const e=o.index;i[e].top=o.x1New,i[e].bottom=o.x2New}return i}function g(e,t){t.sort((function(e,t){return e.x1-t.x1||e.index-t.index}));const r={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},n=[{start:-1/0,end:1/0,boundary:r}];for(const i of t){let e=0;while(e<n.length&&n[e].end<=i.y1)e++;let t,r,o=n.length-1;while(o>=0&&n[o].start>=i.y2)o--;let s,a,l=-1/0;for(s=e;s<=o;s++){let e;t=n[s],r=t.boundary,e=r.x2>i.x1?r.index>i.index?r.x1New:i.x1:void 0===r.x2New?(r.x2+i.x1)/2:r.x2New,e>l&&(l=e)}for(i.x1New=l,s=e;s<=o;s++)t=n[s],r=t.boundary,void 0===r.x2New?r.x2>i.x1?r.index>i.index&&(r.x2New=r.x2):r.x2New=l:r.x2New>l&&(r.x2New=Math.max(l,r.x2));const u=[];let c=null;for(s=e;s<=o;s++){t=n[s],r=t.boundary;const e=r.x2>i.x2?r:i;c===e?u[u.length-1].end=t.end:(u.push({start:t.start,end:t.end,boundary:e}),c=e)}for(n[e].start<i.y1&&(u[0].start=i.y1,u.unshift({start:n[e].start,end:i.y1,boundary:n[e].boundary})),i.y2<n[o].end&&(u[u.length-1].end=i.y2,u.push({start:i.y2,end:n[o].end,boundary:n[o].boundary})),s=e;s<=o;s++){if(t=n[s],r=t.boundary,void 0!==r.x2New)continue;let i=!1;for(a=e-1;!i&&a>=0&&n[a].start>=r.y1;a--)i=n[a].boundary===r;for(a=o+1;!i&&a<n.length&&n[a].end<=r.y2;a++)i=n[a].boundary===r;for(a=0;!i&&a<u.length;a++)i=u[a].boundary===r;i||(r.x2New=l)}Array.prototype.splice.apply(n,[e,o-e+1].concat(u))}for(const i of n){const t=i.boundary;void 0===t.x2New&&(t.x2New=Math.max(e,t.x2))}}class m{constructor({textContent:e,textContentStream:t,container:r,viewport:i,textDivs:o,textContentItemsStr:s,enhanceTextSelection:a}){var l;this._textContent=e,this._textContentStream=t,this._container=r,this._document=r.ownerDocument,this._viewport=i,this._textDivs=o||[],this._textContentItemsStr=s||[],this._enhanceTextSelection=!!a,this._fontInspectorEnabled=!!(null==(l=globalThis.FontInspector)?void 0:l.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,n.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally((()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(e,t){for(let r=0,n=e.length;r<n;r++)if(void 0!==e[r].str)this._textContentItemsStr.push(e[r].str),c(this,e[r],t,this._layoutTextCtx);else if("beginMarkedContentProps"===e[r].type||"beginMarkedContent"===e[r].type){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==e[r].id&&this._container.setAttribute("id",`${e[r].id}`),t.appendChild(this._container)}else"endMarkedContent"===e[r].type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._textDivProperties.get(e);let r="";if(0!==t.canvasWidth&&t.hasText){const{fontSize:n,fontFamily:i}=e.style;n===this._layoutTextLastFontSize&&i===this._layoutTextLastFontFamily||(this._layoutTextCtx.font=`${n} ${i}`,this._layoutTextLastFontSize=n,this._layoutTextLastFontFamily=i);const{width:o}=this._layoutTextCtx.measureText(e.textContent);if(o>0){const e=t.canvasWidth/o;this._enhanceTextSelection&&(t.scale=e),r=`scaleX(${e})`}}if(0!==t.angle&&(r=`rotate(${t.angle}deg) ${r}`),r.length>0&&(this._enhanceTextSelection&&(t.originalTransform=r),e.style.transform=r),t.hasText&&this._container.appendChild(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.appendChild(e)}}_render(e=0){const t=(0,n.createPromiseCapability)();let r=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=o,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){const e=this._textContent.items,r=this._textContent.styles;this._processItems(e,r),t.resolve()}else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const e=()=>{this._reader.read().then((({value:n,done:i})=>{i?t.resolve():(Object.assign(r,n.styles),this._processItems(n.items,r),e())}),t.reject)};this._reader=this._textContentStream.getReader(),e()}}t.promise.then((()=>{r=null,e?this._renderTimer=setTimeout((()=>{d(this),this._renderTimer=null}),e):d(this)}),this._capability.reject)}expandTextDivs(e=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(p(this),this._bounds=null);const t=[],r=[];for(let n=0,i=this._textDivs.length;n<i;n++){const i=this._textDivs[n],o=this._textDivProperties.get(i);o.hasText&&(e?(t.length=0,r.length=0,o.originalTransform&&t.push(o.originalTransform),o.paddingTop>0?(r.push(`${o.paddingTop}px`),t.push(`translateY(${-o.paddingTop}px)`)):r.push(0),o.paddingRight>0?r.push(o.paddingRight/o.scale+"px"):r.push(0),o.paddingBottom>0?r.push(`${o.paddingBottom}px`):r.push(0),o.paddingLeft>0?(r.push(o.paddingLeft/o.scale+"px"),t.push(`translateX(${-o.paddingLeft/o.scale}px)`)):r.push(0),i.style.padding=r.join(" "),t.length&&(i.style.transform=t.join(" "))):(i.style.padding=null,i.style.transform=o.originalTransform))}}}function v(e){const t=new m({textContent:e.textContent,textContentStream:e.textContentStream,container:e.container,viewport:e.viewport,textDivs:e.textDivs,textContentItemsStr:e.textContentItemsStr,enhanceTextSelection:e.enhanceTextSelection});return t._render(e.timeout),t}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=r(1),i=r(5),o=r(3);let s=class{constructor(){(0,n.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=s;{let e=function(e){let t=[];const r=[];for(const n of e)"save"!==n.fn?"restore"===n.fn?t=r.pop():t.push(n):(t.push({fnId:92,fn:"group",items:[]}),r.push(t),t=t[t.length-1].items);return t},r=function(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let r=t.length-1;if("0"!==t[r])return t;do{r--}while("0"===t[r]);return t.substring(0,"."===t[r]?r:r+1)},a=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${r(e[0])} ${r(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const t=180*Math.acos(e[0])/Math.PI;return`rotate(${r(t)})`}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${r(e[4])} ${r(e[5])})`;return`matrix(${r(e[0])} ${r(e[1])} ${r(e[2])} ${r(e[3])} ${r(e[4])} ${r(e[5])})`};const l={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},u="http://www.w3.org/XML/1998/namespace",c="http://www.w3.org/1999/xlink",d=["butt","round","square"],h=["miter","round","bevel"],p=function(e,t="",r=!1){if(URL.createObjectURL&&"undefined"!==typeof Blob&&!r)return URL.createObjectURL(new Blob([e],{type:t}));const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`data:${t};base64,`;for(let o=0,s=e.length;o<s;o+=3){const t=255&e[o],r=255&e[o+1],a=255&e[o+2],l=t>>2,u=(3&t)<<4|r>>4,c=o+1<s?(15&r)<<2|a>>6:64,d=o+2<s?63&a:64;i+=n[l]+n[u]+n[c]+n[d]}return i},f=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=12,r=new Int32Array(256);for(let n=0;n<256;n++){let e=n;for(let t=0;t<8;t++)e=1&e?3988292384^e>>1&2147483647:e>>1&2147483647;r[n]=e}function i(e,t,n){let i=-1;for(let o=t;o<n;o++){const t=255&(i^e[o]),n=r[t];i=i>>>8^n}return~i}function s(e,t,r,n){let o=n;const s=t.length;r[o]=s>>24&255,r[o+1]=s>>16&255,r[o+2]=s>>8&255,r[o+3]=255&s,o+=4,r[o]=255&e.charCodeAt(0),r[o+1]=255&e.charCodeAt(1),r[o+2]=255&e.charCodeAt(2),r[o+3]=255&e.charCodeAt(3),o+=4,r.set(t,o),o+=t.length;const a=i(r,n+4,o);r[o]=a>>24&255,r[o+1]=a>>16&255,r[o+2]=a>>8&255,r[o+3]=255&a}function a(e,t,r){let n=1,i=0;for(let o=t;o<r;++o)n=(n+(255&e[o]))%65521,i=(i+n)%65521;return i<<16|n}function l(e){if(!o.isNodeJS)return u(e);try{let t;t=parseInt(process.versions.node)>=8?e:Buffer.from(e);const r=require_zlib().deflateSync(t,{level:9});return r instanceof Uint8Array?r:new Uint8Array(r)}catch(t){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return u(e)}function u(e){let t=e.length;const r=65535,n=Math.ceil(t/r),i=new Uint8Array(2+t+5*n+4);let o=0;i[o++]=120,i[o++]=156;let s=0;while(t>r)i[o++]=0,i[o++]=255,i[o++]=255,i[o++]=0,i[o++]=0,i.set(e.subarray(s,s+r),o),o+=r,s+=r,t-=r;i[o++]=1,i[o++]=255&t,i[o++]=t>>8&255,i[o++]=255&~t,i[o++]=(65535&~t)>>8&255,i.set(e.subarray(s),o),o+=e.length-s;const l=a(e,0,e.length);return i[o++]=l>>24&255,i[o++]=l>>16&255,i[o++]=l>>8&255,i[o++]=255&l,i}function c(r,i,o,a){const u=r.width,c=r.height;let d,h,f;const g=r.data;switch(i){case n.ImageKind.GRAYSCALE_1BPP:h=0,d=1,f=u+7>>3;break;case n.ImageKind.RGB_24BPP:h=2,d=8,f=3*u;break;case n.ImageKind.RGBA_32BPP:h=6,d=8,f=4*u;break;default:throw new Error("invalid format")}const m=new Uint8Array((1+f)*c);let v=0,y=0;for(let e=0;e<c;++e)m[v++]=0,m.set(g.subarray(y,y+f),v),y+=f,v+=f;if(i===n.ImageKind.GRAYSCALE_1BPP&&a){v=0;for(let e=0;e<c;e++){v++;for(let e=0;e<f;e++)m[v++]^=255}}const _=new Uint8Array([u>>24&255,u>>16&255,u>>8&255,255&u,c>>24&255,c>>16&255,c>>8&255,255&c,d,h,0,0,0]),b=l(m),S=e.length+3*t+_.length+b.length,w=new Uint8Array(S);let C=0;return w.set(e,C),C+=e.length,s("IHDR",_,w,C),C+=t+_.length,s("IDATA",b,w,C),C+=t+b.length,s("IEND",new Uint8Array(0),w,C),p(w,"image/png",o)}return function(e,t,r){const i=void 0===e.kind?n.ImageKind.GRAYSCALE_1BPP:e.kind;return c(e,i,t,r)}}();class g{constructor(){this.fontSizeScale=1,this.fontWeight=l.fontWeight,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=l.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}let m=0,v=0,y=0;t.SVGGraphics=s=class{constructor(e,t,r=!1){this.svgFactory=new i.DOMSVGFactory,this.current=new g,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!r,this._operatorIdMapping=[];for(const i in n.OPS)this._operatorIdMapping[n.OPS[i]]=i}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,r=e.argsArray;for(let i=0,o=t.length;i<o;i++)if(t[i]===n.OPS.dependency)for(const e of r[i]){const t=e.startsWith("g_")?this.commonObjs:this.objs,r=new Promise((r=>{t.get(e,r)}));this.current.dependencies.push(r)}return Promise.all(this.current.dependencies)}transform(e,t,r,i,o,s){const a=[e,t,r,i,o,s];this.transformMatrix=n.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(e,t){this.viewport=t;const r=this._initialize(t);return this.loadDependencies(e).then((()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),r)))}convertOpList(t){const r=this._operatorIdMapping,n=t.argsArray,i=t.fnArray,o=[];for(let e=0,s=i.length;e<s;e++){const t=i[e];o.push({fnId:t,fn:r[t],args:n[e]})}return e(o)}executeOpTree(e){for(const t of e){const e=t.fn,r=t.fnId,i=t.args;switch(0|r){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(i);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(i[0],i[1]);break;case n.OPS.setFont:this.setFont(i);break;case n.OPS.showText:this.showText(i[0]);break;case n.OPS.showSpacedText:this.showText(i[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(i[0],i[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(i[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(i[0]);break;case n.OPS.setHScale:this.setHScale(i[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(i[0],i[1],i[2],i[3],i[4],i[5]);break;case n.OPS.setTextRise:this.setTextRise(i[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(i[0]);break;case n.OPS.setLineWidth:this.setLineWidth(i[0]);break;case n.OPS.setLineJoin:this.setLineJoin(i[0]);break;case n.OPS.setLineCap:this.setLineCap(i[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(i[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(i[0],i[1],i[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(i[0],i[1],i[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(i);break;case n.OPS.setFillColorN:this.setFillColorN(i);break;case n.OPS.shadingFill:this.shadingFill(i[0]);break;case n.OPS.setDash:this.setDash(i[0],i[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(i[0]);break;case n.OPS.setFlatness:this.setFlatness(i[0]);break;case n.OPS.setGState:this.setGState(i[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(i[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(i[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(i[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(i[0],i[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(i[0],i[1],i[2],i[3],i[4],i[5]);break;case n.OPS.constructPath:this.constructPath(i[0],i[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,n.warn)(`Unimplemented operator ${e}`);break}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,i,o,s){const a=this.current;a.textMatrix=a.lineMatrix=[e,t,n,i,o,s],a.textMatrixScale=Math.hypot(e,t),a.x=a.lineX=0,a.y=a.lineY=0,a.xcoords=[],a.ycoords=[],a.tspan=this.svgFactory.createElement("svg:tspan"),a.tspan.setAttributeNS(null,"font-family",a.fontFamily),a.tspan.setAttributeNS(null,"font-size",`${r(a.fontSize)}px`),a.tspan.setAttributeNS(null,"y",r(-a.y)),a.txtElement=this.svgFactory.createElement("svg:text"),a.txtElement.appendChild(a.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=n.IDENTITY_MATRIX,e.lineMatrix=n.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${r(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",r(-n.y))}showText(e){const t=this.current,i=t.font,o=t.fontSize;if(0===o)return;const s=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,h=t.fontDirection,p=t.textHScale*h,f=i.vertical,g=f?1:-1,m=i.defaultVMetrics,v=o*t.fontMatrix[0];let y=0;for(const r of e){if(null===r){y+=h*d;continue}if("number"===typeof r){y+=g*r*o/1e3;continue}const e=(r.isSpace?d:0)+c,n=r.fontChar;let a,l,u,p=r.width;if(f){let e;const t=r.vmetric||m;e=r.vmetric?t[1]:.5*p,e=-e*v;const n=t[2]*v;p=t?-t[0]:p,a=e/s,l=(y+n)/s}else a=y/s,l=0;(r.isInFont||i.missingFile)&&(t.xcoords.push(t.x+a),f&&t.ycoords.push(-t.y+l),t.tspan.textContent+=n),u=f?p*v-e*h:p*v+e*h,y+=u}t.tspan.setAttributeNS(null,"x",t.xcoords.map(r).join(" ")),f?t.tspan.setAttributeNS(null,"y",t.ycoords.map(r).join(" ")):t.tspan.setAttributeNS(null,"y",r(-t.y)),f?t.y-=y:t.x+=y*p,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${r(t.fontSize)}px`),t.fontStyle!==l.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==l.fontWeight&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const _=t.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(_===n.TextRenderingMode.FILL||_===n.TextRenderingMode.FILL_STROKE?(t.fillColor!==l.fillColor&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),_===n.TextRenderingMode.STROKE||_===n.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let b=t.textMatrix;0!==t.textRise&&(b=b.slice(),b[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${a(b)} scale(${r(p)}, -1)`),t.txtElement.setAttributeNS(u,"xml:space","preserve"),t.txtElement.appendChild(t.tspan),t.txtgrp.appendChild(t.txtElement),this._ensureTransformGroup().appendChild(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const t=p(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,i=this.commonObjs.get(e[0]);let o=e[1];t.font=i,!this.embedFonts||i.missingFile||this.embeddedFonts[i.loadedName]||(this.addFontStyle(i),this.embeddedFonts[i.loadedName]=i),t.fontMatrix=i.fontMatrix||n.FONT_IDENTITY_MATRIX;let s="normal";i.black?s="900":i.bold&&(s="bold");const a=i.italic?"italic":"normal";o<0?(o=-o,t.fontDirection=-1):t.fontDirection=1,t.fontSize=o,t.fontFamily=i.loadedName,t.fontWeight=s,t.fontStyle=a,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",r(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){var e;const t=this.current;t.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(e=t.txtElement)?void 0:e.hasChildNodes())&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=d[e]}setLineJoin(e){this.current.lineJoin=h[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,r){this.current.strokeColor=n.Util.makeHexColor(e,t,r)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,r){this.current.fillColor=n.Util.makeHexColor(e,t,r),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const t=this.viewport.width,r=this.viewport.height,i=n.Util.inverseTransform(this.transformMatrix),o=n.Util.applyTransform([0,0],i),s=n.Util.applyTransform([0,r],i),a=n.Util.applyTransform([t,0],i),l=n.Util.applyTransform([t,r],i),u=Math.min(o[0],s[0],a[0],l[0]),c=Math.min(o[1],s[1],a[1],l[1]),d=Math.max(o[0],s[0],a[0],l[0]),h=Math.max(o[1],s[1],a[1],l[1]),p=this.svgFactory.createElement("svg:rect");p.setAttributeNS(null,"x",u),p.setAttributeNS(null,"y",c),p.setAttributeNS(null,"width",d-u),p.setAttributeNS(null,"height",h-c),p.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&p.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(p)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],r=e[2],i=e[3]||n.IDENTITY_MATRIX,[o,s,a,l]=e[4],u=e[5],c=e[6],d=e[7],h="shading"+y++,[p,f,g,m]=n.Util.normalizeRect([...n.Util.applyTransform([o,s],i),...n.Util.applyTransform([a,l],i)]),[v,_]=n.Util.singularValueDecompose2dScale(i),b=u*v,S=c*_,w=this.svgFactory.createElement("svg:pattern");w.setAttributeNS(null,"id",h),w.setAttributeNS(null,"patternUnits","userSpaceOnUse"),w.setAttributeNS(null,"width",b),w.setAttributeNS(null,"height",S),w.setAttributeNS(null,"x",`${p}`),w.setAttributeNS(null,"y",`${f}`);const C=this.svg,A=this.transformMatrix,E=this.current.fillColor,x=this.current.strokeColor,T=this.svgFactory.create(g-p,m-f);if(this.svg=T,this.transformMatrix=i,2===d){const e=n.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(r)),this.svg=C,this.transformMatrix=A,this.current.fillColor=E,this.current.strokeColor=x,w.appendChild(T.childNodes[0]),this.defs.appendChild(w),`url(#${h})`}_makeShadingPattern(e){switch("string"===typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading"+y++,r=e[3];let i;switch(e[1]){case"axial":const r=e[4],n=e[5];i=this.svgFactory.createElement("svg:linearGradient"),i.setAttributeNS(null,"id",t),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"x1",r[0]),i.setAttributeNS(null,"y1",r[1]),i.setAttributeNS(null,"x2",n[0]),i.setAttributeNS(null,"y2",n[1]);break;case"radial":const o=e[4],s=e[5],a=e[6],l=e[7];i=this.svgFactory.createElement("svg:radialGradient"),i.setAttributeNS(null,"id",t),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"cx",s[0]),i.setAttributeNS(null,"cy",s[1]),i.setAttributeNS(null,"r",l),i.setAttributeNS(null,"fx",o[0]),i.setAttributeNS(null,"fy",o[1]),i.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of r){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),i.appendChild(t)}return this.defs.appendChild(i),`url(#${t})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const i=this.current;let o=i.x,s=i.y,a=[],l=0;for(const u of e)switch(0|u){case n.OPS.rectangle:o=t[l++],s=t[l++];const e=t[l++],i=t[l++],u=o+e,c=s+i;a.push("M",r(o),r(s),"L",r(u),r(s),"L",r(u),r(c),"L",r(o),r(c),"Z");break;case n.OPS.moveTo:o=t[l++],s=t[l++],a.push("M",r(o),r(s));break;case n.OPS.lineTo:o=t[l++],s=t[l++],a.push("L",r(o),r(s));break;case n.OPS.curveTo:o=t[l+4],s=t[l+5],a.push("C",r(t[l]),r(t[l+1]),r(t[l+2]),r(t[l+3]),r(o),r(s)),l+=6;break;case n.OPS.curveTo2:a.push("C",r(o),r(s),r(t[l]),r(t[l+1]),r(t[l+2]),r(t[l+3])),o=t[l+2],s=t[l+3],l+=4;break;case n.OPS.curveTo3:o=t[l+2],s=t[l+3],a.push("C",r(t[l]),r(t[l+1]),r(o),r(s),r(o),r(s)),l+=4;break;case n.OPS.closePath:a.push("Z");break}a=a.join(" "),i.path&&e.length>0&&e[0]!==n.OPS.rectangle&&e[0]!==n.OPS.moveTo?a=i.path.getAttributeNS(null,"d")+a:(i.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(i.path)),i.path.setAttributeNS(null,"d",a),i.path.setAttributeNS(null,"fill","none"),i.element=i.path,i.setCurrentPoint(o,s)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath"+m++,r=this.svgFactory.createElement("svg:clipPath");r.setAttributeNS(null,"id",t),r.setAttributeNS(null,"transform",a(this.transformMatrix));const n=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?n.setAttributeNS(null,"clip-rule","evenodd"):n.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,r.appendChild(n),this.defs.appendChild(r),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;r.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,r]of e)switch(t){case"LW":this.setLineWidth(r);break;case"LC":this.setLineCap(r);break;case"LJ":this.setLineJoin(r);break;case"ML":this.setMiterLimit(r);break;case"D":this.setDash(r[0],r[1]);break;case"RI":this.setRenderingIntent(r);break;case"FL":this.setFlatness(r);break;case"Font":this.setFont(r);break;case"CA":this.setStrokeAlpha(r);break;case"ca":this.setFillAlpha(r);break;default:(0,n.warn)(`Unimplemented graphic state operator ${t}`);break}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,t=1){const n=this.current;let i=n.dashArray;1!==t&&i.length>0&&(i=i.map((function(e){return t*e}))),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",r(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",r(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",i.map(r).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",r(t*n.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}paintImageXObject(e){const t=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);t?this.paintInlineImageXObject(t):(0,n.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const n=e.width,i=e.height,o=f(e,this.forceDataSchema,!!t),s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y","0"),s.setAttributeNS(null,"width",r(n)),s.setAttributeNS(null,"height",r(i)),this.current.element=s,this.clip("nonzero");const a=this.svgFactory.createElement("svg:image");a.setAttributeNS(c,"xlink:href",o),a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y",r(-i)),a.setAttributeNS(null,"width",r(n)+"px"),a.setAttributeNS(null,"height",r(i)+"px"),a.setAttributeNS(null,"transform",`scale(${r(1/n)} ${r(-1/i)})`),t?t.appendChild(a):this._ensureTransformGroup().appendChild(a)}paintImageMaskXObject(e){const t=this.current,n=e.width,i=e.height,o=t.fillColor;t.maskId="mask"+v++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",t.maskId);const a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x","0"),a.setAttributeNS(null,"y","0"),a.setAttributeNS(null,"width",r(n)),a.setAttributeNS(null,"height",r(i)),a.setAttributeNS(null,"fill",o),a.setAttributeNS(null,"mask",`url(#${t.maskId})`),this.defs.appendChild(s),this._ensureTransformGroup().appendChild(a),this.paintInlineImageXObject(e,s)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",t[0]),i.setAttributeNS(null,"y",t[1]),i.setAttributeNS(null,"width",r(e)),i.setAttributeNS(null,"height",r(n)),this.current.element=i,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),r=this.svgFactory.createElement("svg:defs");t.appendChild(r),this.defs=r;const n=this.svgFactory.createElement("svg:g");return n.setAttributeNS(null,"transform",a(e.transform)),t.appendChild(n),this.svg=n,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",a(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=r(1),i=r(26);const o=require_fs(),s=require_http(),a=require_https(),l=require_url(),u=/^file:\/\/\/[a-zA-Z]:\//;function c(e){const t=l.parse(e);return"file:"===t.protocol||t.host?t:/^[a-z]:[/\\]/i.test(e)?l.parse(`file:///${e}`):(t.host||(t.protocol="file:"),t)}class d{constructor(e){this.source=e,this.url=c(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new v(this):new g(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=this.isFsUrl?new y(this,e,t):new m(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}t.PDFNodeStream=d;class h{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)(),this._headersCapability=(0,n.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=(0,n.createPromiseCapability)(),this.read();this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const t=new Uint8Array(e).buffer;return{value:t,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class p{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,n.createPromiseCapability)();const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();if(null===e)return this._readCapability=(0,n.createPromiseCapability)(),this.read();this._loaded+=e.length,this.onProgress&&this.onProgress({loaded:this._loaded});const t=new Uint8Array(e).buffer;return{value:t,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",(()=>{this._readCapability.resolve()})),e.on("end",(()=>{e.destroy(),this._done=!0,this._readCapability.resolve()})),e.on("error",(e=>{this._error(e)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function f(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class g extends h{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const r=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:o,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(r)};this._request=null,"http:"===this._url.protocol?this._request=s.request(f(this._url,e.httpHeaders),t):this._request=a.request(f(this._url,e.httpHeaders),t),this._request.on("error",(e=>{this._storedError=e,this._headersCapability.reject(e)})),this._request.end()}}class m extends p{constructor(e,t,r){super(e),this._httpHeaders={};for(const n in e.httpHeaders){const t=e.httpHeaders[n];"undefined"!==typeof t&&(this._httpHeaders[n]=t)}this._httpHeaders.Range=`bytes=${t}-${r-1}`;const i=e=>{if(404!==e.statusCode)this._setReadableStream(e);else{const e=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=e}};this._request=null,"http:"===this._url.protocol?this._request=s.request(f(this._url,this._httpHeaders),i):this._request=a.request(f(this._url,this._httpHeaders),i),this._request.on("error",(e=>{this._storedError=e})),this._request.end()}}class v extends h{constructor(e){super(e);let t=decodeURIComponent(this._url.path);u.test(this._url.href)&&(t=t.replace(/^\//,"")),o.lstat(t,((e,r)=>{if(e)return"ENOENT"===e.code&&(e=new n.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=r.size,this._setReadableStream(o.createReadStream(t)),this._headersCapability.resolve()}))}}class y extends p{constructor(e,t,r){super(e);let n=decodeURIComponent(this._url.path);u.test(this._url.href)&&(n=n.replace(/^\//,"")),this._setReadableStream(o.createReadStream(n,{start:t,end:r-1}))}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=l,t.extractFilenameFromHeader=a,t.validateRangeRequestCapabilities=s,t.validateResponseStatus=u;var n=r(1),i=r(27),o=r(5);function s({getResponseHeader:e,isHttp:t,rangeChunkSize:r,disableRange:n}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);if(!Number.isInteger(o))return i;if(i.suggestedLength=o,o<=2*r)return i;if(n||!t)return i;if("bytes"!==e("Accept-Ranges"))return i;const s=e("Content-Encoding")||"identity";return"identity"!==s||(i.allowRangeRequests=!0),i}function a(e){const t=e("Content-Disposition");if(t){let e=(0,i.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(r){}if((0,o.isPdfFile)(e))return e}return null}function l(e,t){return 404===e||0===e&&t.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+t+'".'):new n.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)}function u(e){return 200===e||206===e}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var n=r(1);function i(e){let t=!0,r=i("filename\\*","i").exec(e);if(r){r=r[1];let e=l(r);return e=unescape(e),e=u(e),e=c(e),s(e)}if(r=a(e),r){const e=c(r);return s(e)}if(r=i("filename","i").exec(e),r){r=r[1];let e=l(r);return e=c(e),s(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function o(e,r){if(e){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const i=new TextDecoder(e,{fatal:!0}),o=(0,n.stringToBytes)(r);r=i.decode(o),t=!1}catch(i){}}return r}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=o("utf-8",e),t&&(e=o("iso-8859-1",e))),e}function a(e){const t=[];let r;const n=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");while(null!==(r=n.exec(e))){let[,e,n,i]=r;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[n,i]}const o=[];for(let i=0;i<t.length;++i){if(!(i in t))break;let[e,r]=t[i];r=l(r),e&&(r=unescape(r),0===i&&(r=u(r))),o.push(r)}return o.join("")}function l(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const r=t[e].indexOf('"');-1!==r&&(t[e]=t[e].slice(0,r),t.length=e+1),t[e]=t[e].replace(/\\(.)/g,"$1")}e=t.join('"')}return e}function u(e){const t=e.indexOf("'");if(-1===t)return e;const r=e.slice(0,t),n=e.slice(t+1),i=n.replace(/^[^']*'/,"");return o(r,i)}function c(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(e,t,r,n){if("q"===r||"Q"===r)return n=n.replace(/_/g," "),n=n.replace(/=([0-9a-fA-F]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))})),o(t,n);try{n=atob(n)}catch(i){}return o(t,n)}))}return""}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=r(1),i=r(26);const o=200,s=206;function a(e){const t=e.response;if("string"!==typeof t)return t;const r=(0,n.stringToBytes)(t);return r.buffer}class l{constructor(e,t={}){this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.getXhr=t.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,r){const n={begin:e,end:t};for(const i in r)n[i]=r[i];return this.request(n)}requestFull(e){return this.request(e)}request(e){const t=this.getXhr(),r=this.currXhrId++,n=this.pendingRequests[r]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const i in this.httpHeaders){const e=this.httpHeaders[i];"undefined"!==typeof e&&t.setRequestHeader(i,e)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),n.expectedStatus=s):n.expectedStatus=o,t.responseType="arraybuffer",e.onError&&(t.onerror=function(r){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,r),t.onprogress=this.onProgress.bind(this,r),n.onHeadersReceived=e.onHeadersReceived,n.onDone=e.onDone,n.onError=e.onError,n.onProgress=e.onProgress,t.send(null),r}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&(null==(r=n.onProgress)||r.call(n,t))}onStateChange(e,t){var r,n,i;const l=this.pendingRequests[e];if(!l)return;const u=l.xhr;if(u.readyState>=2&&l.onHeadersReceived&&(l.onHeadersReceived(),delete l.onHeadersReceived),4!==u.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===u.status&&this.isHttp)return void(null==(r=l.onError)||r.call(l,u.status));const c=u.status||o,d=c===o&&l.expectedStatus===s;if(!d&&c!==l.expectedStatus)return void(null==(n=l.onError)||n.call(l,u.status));const h=a(u);if(c===s){const e=u.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);l.onDone({begin:parseInt(t[1],10),chunk:h})}else h?l.onDone({begin:0,chunk:h}):null==(i=l.onError)||i.call(l,u.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class u{constructor(e){this._source=e,this._manager=new l(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new c(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const r=new d(this._manager,e,t);return r.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(r),r}cancelAllRequests(e){var t;null==(t=this._fullRequestReader)||t.cancel(e);for(const r of this._rangeRequestReaders.slice(0))r.cancel(e)}}t.PDFNetworkStream=u;class c{constructor(e,t){this._manager=e;const r={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(r),this._headersReceivedCapability=(0,n.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),r=e=>t.getResponseHeader(e),{allowRangeRequests:n,suggestedLength:o}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){const t=this._requests.shift();t.resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null==(t=this.onProgress)||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0){const e=this._cachedChunks.shift();return{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class d{constructor(e,t,r){this._manager=e;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,r,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var e;null==(e=this.onClosed)||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){const e=this._requests.shift();e.resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||null==(t=this.onProgress)||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=(0,n.createPromiseCapability)();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=r(1),i=r(26);function o(e,t,r){return{method:"GET",headers:e,signal:null==r?void 0:r.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function s(e){const t=new Headers;for(const r in e){const n=e[r];"undefined"!==typeof n&&t.append(r,n)}return t}class a{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return(null==(e=this._fullRequestReader)?void 0:e._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const r=new u(this,e,t);return this._rangeRequestReaders.push(r),r}cancelAllRequests(e){this._fullRequestReader&&this._fullRequestReader.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}t.PDFFetchStream=a;class l{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=(0,n.createPromiseCapability)(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=s(this._stream.httpHeaders);const r=t.url;fetch(r,o(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,r);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:o,suggestedLength:s}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();if(t)return{value:e,done:t};this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength});const r=new Uint8Array(e).buffer;return{value:r,done:!1}}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}class u{constructor(e,t,r){this._stream=e,this._reader=null,this._loaded=0;const a=e.source;this._withCredentials=a.withCredentials||!1,this._readCapability=(0,n.createPromiseCapability)(),this._isStreamingSupported=!a.disableStream,"undefined"!==typeof AbortController&&(this._abortController=new AbortController),this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${r-1}`);const l=a.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then((e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,l);this._readCapability.resolve(),this._reader=e.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();if(t)return{value:e,done:t};this._loaded+=e.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded});const r=new Uint8Array(e).buffer;return{value:r,done:!1}}cancel(e){this._reader&&this._reader.cancel(e),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__w_pdfjs_require__),r.exports}var __nested_webpack_exports__={};return(()=>{var e=__nested_webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return i.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return o.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"LoopbackPort",{enumerable:!0,get:function(){return r.LoopbackPort}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return r.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return r.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return l.SVGGraphics}}),Object.defineProperty(e,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return t.UNSUPPORTED_FEATURES}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return u.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return r.build}}),Object.defineProperty(e,"createPromiseCapability",{enumerable:!0,get:function(){return t.createPromiseCapability}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return r.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return r.version}});var t=__w_pdfjs_require__(1),r=__w_pdfjs_require__(4),n=__w_pdfjs_require__(5),i=__w_pdfjs_require__(20),o=__w_pdfjs_require__(13),s=__w_pdfjs_require__(3),a=__w_pdfjs_require__(23),l=__w_pdfjs_require__(24),u=__w_pdfjs_require__(22);if(s.isNodeJS){const{PDFNodeStream:e}=__w_pdfjs_require__(25);(0,r.setPDFNetworkStreamFactory)((t=>new e(t)))}else{const{PDFNetworkStream:e}=__w_pdfjs_require__(28),{PDFFetchStream:t}=__w_pdfjs_require__(29);(0,r.setPDFNetworkStreamFactory)((r=>(0,n.isValidFetchUrl)(r.url)?new t(r):new e(r)))}})(),__nested_webpack_exports__})()))}});init_polyfills(),init_polyfills(),init_polyfills();var import_publication=__toESM(require_publication()),import_ta_json_x2=__toESM(require_cjs());init_polyfills();var import_ta_json_x=__toESM(require_cjs());function TaJsonDeserialize(e,t){return import_ta_json_x.TaJson.deserialize(e,t)}var Publication=class extends import_publication.Publication{static async fromUrl(e,t){const r=await fetch(e.href,t),n=await r.json();let i=TaJsonDeserialize(n,Publication);return i.manifestUrl=e,i}get readingOrder(){return this.Spine??[]}get resources(){return this.Resources??[]}get tableOfContents(){var e,t;return(null==(e=this.sample)?void 0:e.isSampleRead)&&(null==(t=this.positions)?void 0:t.length)>0?this.limitedTOC():this.TOC||[]}limitedTOC(){var e;function t(e){for(let r=0;r<e.Children.length;r++){let n=e.Children[r];n.Href=void 0,n.Children&&t(n)}}let r=null==(e=this.TOC)?void 0:e.map((e=>{var r,n;if(e.Href){const i=this.positionsByHref(this.getRelativeHref(e.Href));if((null==i?void 0:i.length)>0){const o=i[0];let s=Math.round(100*(o.locations.totalProgression?o.locations.totalProgression:0));if(null==(r=this.sample)?void 0:r.limit){let r=s<=(null==(n=this.sample)?void 0:n.limit);r||(e.Href=void 0,e.Children&&t(e))}}}return e}));return r||[]}get landmarks(){return this.Landmarks}get pageList(){return this.PageList}get isFixedLayout(){var e;return"fixed"===(null==(e=this.Metadata.Rendition)?void 0:e.Layout)}get isReflowable(){return!this.isFixedLayout}get layout(){return this.isFixedLayout?"fixed":"reflowable"}get hasMediaOverlays(){return!!this.readingOrder&&this.readingOrder.filter((e=>{var t;return null==(t=e.Properties)?void 0:t.MediaOverlay})).length>0}getStartLink(){if(void 0!==this.readingOrder&&this.readingOrder.length>0)return this.readingOrder[0]}getPreviousSpineItem(e){const t=this.getSpineIndex(e);if(void 0!==t&&void 0!==this.readingOrder&&t>0)return this.readingOrder[t-1]}getNextSpineItem(e){const t=this.getSpineIndex(e);if(void 0!==t&&void 0!==this.readingOrder&&t<this.readingOrder.length-1)return this.readingOrder[t+1]}getSpineItem(e){const t=this.getSpineIndex(e);if(void 0!==t&&void 0!==this.readingOrder)return this.readingOrder[t]}getSpineIndex(e){var t;return null==(t=this.readingOrder)?void 0:t.findIndex((t=>t.Href&&this.getAbsoluteHref(t.Href)===e))}getAbsoluteHref(e){return new URL(e,this.manifestUrl.href).href}getRelativeHref(e){const t=this.manifestUrl.href.replace("/manifest.json","");let r=e.replace(t,"");return r.indexOf("#")>0&&(r=r.slice(0,r.indexOf("#"))),"/"===r.charAt(0)&&(r=r.substring(1)),r}getTOCItemAbsolute(e){const t=this.getAbsoluteHref(e),r=(e,t)=>{for(let n=0;n<t.length;n++){const i=t[n];if(i.Href){const t=-1!==i.Href.indexOf("#")?i.Href.slice(0,i.Href.indexOf("#")):i.Href,r=this.getAbsoluteHref(t);if(r===e)return i}if(i.Children){const t=r(e,i.Children);if(void 0!==t)return t}}};let n=r(t,this.tableOfContents);return void 0===n&&void 0!==this.readingOrder&&(n=r(t,this.readingOrder)),n}getTOCItem(e){const t=(e,r)=>{for(let n=0;n<r.length;n++){const i=r[n];if(i.Href){const t=this.getAbsoluteHref(i.Href);if(t===e)return i}if(i.Children){const r=t(e,i.Children);if(void 0!==r)return r}}};let r=t(e,this.tableOfContents);if(void 0===r&&void 0!==this.readingOrder&&(r=t(e,this.readingOrder)),void 0===r&&-1!==e.indexOf("#")){const n=e.slice(0,e.indexOf("#"));r=t(n,this.tableOfContents),void 0===r&&void 0!==this.readingOrder&&(r=t(n,this.readingOrder))}return r}positionsByHref(e){var t;const r=decodeURI(e)??"";return null==(t=this.positions)?void 0:t.filter((e=>r.includes(e.href)))}async autoGeneratePositions(e,t=fetchContentBytesLength){let r=0,n=0;const i=[];if(void 0!==this.readingOrder)for(const o of this.readingOrder)if(this.isFixedLayout){const e={href:o.Href,locations:{progression:0,position:r+1},type:o.TypeLink};i.push(e),r+=1}else{let s=this.getAbsoluteHref(o.Href),a=await t(s,e);o.contentLength=a,n+=a;let l=1024,u=Math.max(1,Math.ceil(a/l));for(let e=0;e<u;e++){const t={href:o.Href,locations:{progression:e/u,position:r+(e+1)},type:o.TypeLink};i.push(t)}r+=u}if(this.isReflowable&&void 0!==this.readingOrder)for(const o of this.readingOrder){if(!o.contentLength)return void console.error("Link is missing contentLength",o);o.contentWeight=100/n*o.contentLength,o.contentWeight}for(const o of i){const e=i.filter((e=>e.href===decodeURI(o.href))),t=Math.ceil((o.locations.progression?o.locations.progression:0)*(e.length-1));o.locations.position&&(o.locations.totalProgression=(o.locations.position-1)/i.length),o.locations.remainingPositions=Math.abs(t-(e.length-1)),o.locations.position&&(o.locations.totalRemainingPositions=Math.abs(o.locations.position-1-(i.length-1)))}this.positions=i}async fetchPositionsFromService(e,t){const r=await fetch(e,t),n=await r.json();this.positions=n.positions}async fetchWeightsFromService(e,t){if(this.isFixedLayout)return void console.warn("Not fetching weights from service for fixed layout publication.");const r=await fetch(e,t),n=await r.json();void 0!==this.readingOrder&&this.readingOrder.forEach((e=>{e.contentWeight=n[e.Href]}))}};Publication=__decorateClass([(0,import_ta_json_x2.JsonObject)()],Publication);var fetchContentBytesLength=async(e,t)=>{const r=await fetch(e,t),n=await r.blob();return n.size};init_polyfills(),init_polyfills();var UserProperty=class{json(){return JSON.stringify(this)}},Stringable=class extends UserProperty{constructor(e,t,r){super(),this.value=e,this.ref=t,this.name=r}toString(){return this.value}},JSONable=class extends UserProperty{constructor(e,t,r){super(),this.value=e,this.ref=t,this.name=r}toString(){return this.value}toJson(){return JSON.parse(this.value)}},Enumerable=class extends UserProperty{constructor(e,t,r,n){super(),this.value=e,this.values=t,this.ref=r,this.name=n}toString(){return this.values[this.value]}},Incremental=class extends UserProperty{constructor(e,t,r,n,i,o,s){super(),this.countDecimals=function(e){return e%1!==0?e.toString().split(".")[1].length:1},this.value=e,this.min=t,this.max=r,this.step=n,this.suffix=i,this.ref=o,this.name=s}toString(){return this.value.toString()+this.suffix}increment(){const e=this.countDecimals(this.max);parseFloat(this.value.toFixed(e))<this.max&&(this.value=parseFloat(this.value.toFixed(e))+this.step)}decrement(){const e=this.countDecimals(this.min);parseFloat(this.value.toFixed(e))>this.min&&(this.value=parseFloat(this.value.toFixed(e))-this.step)}},Switchable=class extends UserProperty{constructor(e,t,r,n,i){super(),this.value=r,this.onValue=e,this.offValue=t,this.ref=n,this.name=i}toString(){return this.value?this.onValue:this.offValue}switch(){this.value=!this.value}},UserProperties=class{constructor(){this.properties=[]}addIncremental(e,t,r,n,i,o,s){this.properties.push(new Incremental(e,t,r,n,i,o,s))}addStringable(e,t,r){this.properties.push(new Stringable(e,t,r))}addJSONable(e,t,r){this.properties.push(new JSONable(e,t,r))}addSwitchable(e,t,r,n,i){this.properties.push(new Switchable(e,t,r,n,i))}addEnumerable(e,t,r,n){this.properties.push(new Enumerable(e,t,r,n))}getByRef(e){let t=this.properties.filter((t=>t.ref===e));return t.length>0?t[0]:null}getByKey(e){let t=this.properties.filter((t=>t.key===e));return t.length>0?t[0]:null}};init_polyfills();var _ReadiumCSS=class{};_ReadiumCSS.FONT_SIZE_REF="fontSize",_ReadiumCSS.FONT_FAMILY_REF="fontFamily",_ReadiumCSS.FONT_OVERRIDE_REF="fontOverride",_ReadiumCSS.APPEARANCE_REF="appearance",_ReadiumCSS.SCROLL_REF="scroll",_ReadiumCSS.TEXT_ALIGNMENT_REF="textAlign",_ReadiumCSS.COLUMN_COUNT_REF="colCount",_ReadiumCSS.DIRECTION_REF="direction",_ReadiumCSS.WORD_SPACING_REF="wordSpacing",_ReadiumCSS.LETTER_SPACING_REF="letterSpacing",_ReadiumCSS.PAGE_MARGINS_REF="pageMargins",_ReadiumCSS.LINE_HEIGHT_REF="lineHeight",_ReadiumCSS.FONT_SIZE_KEY="--USER__"+_ReadiumCSS.FONT_SIZE_REF,_ReadiumCSS.FONT_FAMILY_KEY="--USER__"+_ReadiumCSS.FONT_FAMILY_REF,_ReadiumCSS.FONT_OVERRIDE_KEY="--USER__"+_ReadiumCSS.FONT_OVERRIDE_REF,_ReadiumCSS.APPEARANCE_KEY="--USER__"+_ReadiumCSS.APPEARANCE_REF,_ReadiumCSS.SCROLL_KEY="--USER__"+_ReadiumCSS.SCROLL_REF,_ReadiumCSS.TEXT_ALIGNMENT_KEY="--USER__"+_ReadiumCSS.TEXT_ALIGNMENT_REF,_ReadiumCSS.COLUMN_COUNT_KEY="--USER__"+_ReadiumCSS.COLUMN_COUNT_REF,_ReadiumCSS.DIRECTION_KEY="--USER__"+_ReadiumCSS.DIRECTION_REF,_ReadiumCSS.WORD_SPACING_KEY="--USER__"+_ReadiumCSS.WORD_SPACING_REF,_ReadiumCSS.LETTER_SPACING_KEY="--USER__"+_ReadiumCSS.LETTER_SPACING_REF,_ReadiumCSS.PAGE_MARGINS_KEY="--USER__"+_ReadiumCSS.PAGE_MARGINS_REF,_ReadiumCSS.LINE_HEIGHT_KEY="--USER__"+_ReadiumCSS.LINE_HEIGHT_REF;var ReadiumCSS=_ReadiumCSS;function findElement(e,t){return e.querySelector(t)}function findRequiredElement(e,t){const r=findElement(e,t);if(r&&r instanceof HTMLElement)return r;throw new Error("required element "+t+" not found")}function findIframeElement(e,t){if(null===e)throw new Error("parent element is null");return e.querySelector(t)}function findRequiredIframeElement(e,t){const r=findIframeElement(e,t);if(r)return r;throw new Error("required element "+t+" not found in iframe")}function setAttr(e,t,r){e.setAttribute(t,r)}init_polyfills(),init_polyfills(),init_polyfills();var import_sanitize_html=__toESM(require_sanitize_html()),Popup=class{constructor(e){this.getScrollingElement=e=>e.scrollingElement?e.scrollingElement:e.body,this.navigator=e}async handleFootnote(e,t){var r,n;const i=e.getAttribute("href");if(i&&i.indexOf("#")>0){let e=function(e){const t=document.location.href;return new URL(e,t).href};const o=i.substring(i.indexOf("#")+1);let s=e(i);s&&(s=s.substring(0,s.indexOf("#")),t.preventDefault(),t.stopPropagation(),(null==(r=this.navigator.api)?void 0:r.getContent)?await(null==(n=this.navigator.api)?void 0:n.getContent(i).then((e=>{const r=new DOMParser,n=r.parseFromString(e,"text/html"),i=n.querySelector("#"+o);i&&(t.preventDefault(),t.stopPropagation(),this.showPopup(i,t))}))):await fetch(s,this.navigator.requestConfig).then((e=>e.text())).then((async e=>{const r=new DOMParser,n=r.parseFromString(e,"text/html"),i=n.querySelector("#"+o);i&&(t.preventDefault(),t.stopPropagation(),this.showPopup(i,t))})))}}async hidePopover(){var e,t;let r=null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.getElementById("d2-popover");r&&(null==(t=r.parentElement)||t.removeChild(r));const n=findRequiredElement(document,"#iframe-wrapper");n.style.overflow="auto"}async showPopover(e,t){var r,n,i,o,s,a;const l=e.getAttribute("href"),u=e.getAttribute("src");function c(e){const t=document.location.href;return new URL(e,t).href}if(l){let e=c(l);if(e){t.preventDefault(),t.stopPropagation();let s=null==(r=this.navigator.iframes[0].contentDocument)?void 0:r.getElementById("d2-popover");s&&(null==(n=s.parentElement)||n.removeChild(s));const a=document.createElement("div");a.id="d2-popover",a.className="d2-popover is-active";const u=findRequiredElement(document,"#iframe-wrapper");u.style.overflow="hidden",a.style.top=u.scrollTop+"px",a.style.height=.9*u.clientHeight+"px";const c=document.createElement("div");c.className="d2-popover-wrapper",a.appendChild(c);const d=document.createElement("div");d.className="d2-popover-content",c.appendChild(d),(null==(i=this.navigator.api)?void 0:i.getContent)?await(null==(o=this.navigator.api)?void 0:o.getContent(l).then((e=>{d.innerHTML=e;let t=this.navigator.iframes[0].contentDocument;t&&t.body.appendChild(a)}))):await fetch(e,this.navigator.requestConfig).then((e=>e.text())).then((async e=>{d.innerHTML=e;let t=this.navigator.iframes[0].contentDocument;t&&t.body.appendChild(a)}));let h=this.navigator.iframes[0].contentWindow;if(!h)return;let p=this;h.addEventListener("click",(function(e){t.target!==e.target&&a.parentElement&&(p.hidePopover(),e.stopImmediatePropagation())}),{once:!0,capture:!0})}}else if(u){let e=c(u);if(e){t.preventDefault(),t.stopPropagation();let e=null==(s=this.navigator.iframes[0].contentDocument)?void 0:s.getElementById("d2-popover");e&&(null==(a=e.parentElement)||a.removeChild(e));const r=document.createElement("div");r.id="d2-popover",r.className="d2-popover is-active";const n=findRequiredElement(document,"#iframe-wrapper");n.style.overflow="hidden",r.style.top=n.scrollTop+"px",r.style.height=.9*n.clientHeight+"px";const i=document.createElement("div");i.className="d2-popover-wrapper",r.appendChild(i);const o=document.createElement("img");o.className="d2-popover-content",i.appendChild(o),o.src=u;let l=this.navigator.iframes[0].contentDocument;l&&l.body.appendChild(r);let c=this.navigator.iframes[0].contentWindow;if(!c)return;let d=this;c.addEventListener("click",(function(e){t.target!==e.target&&r.parentElement&&(d.hidePopover(),e.stopImmediatePropagation())}),{once:!0,capture:!0})}}}showPopup(e,t){var r,n,i;let o=null==(r=this.navigator.iframes[0].contentDocument)?void 0:r.getElementById("d2-popup");o&&(null==(n=o.parentElement)||n.removeChild(o));const s=document.createElement("aside");s.id="d2-popup",s.className="d2-popup is-active";const a=document.createElement("div");a.className="d2-popup-wrapper",s.appendChild(a);const l=document.createElement("div");l.className="d2-popup-content",a.appendChild(l);const u=document.createElement("p");l.appendChild(u),u.innerHTML="string"===typeof e?e:(0,import_sanitize_html.default)(e.innerHTML,{allowedTags:[],allowedAttributes:{}});const c=null==(i=this.navigator.view)?void 0:i.isPaginated();let d=this.navigator.iframes[0].contentDocument;if(!d)return;const h=this.getScrollingElement(d),p=c?h.scrollLeft:0,f=c?h.scrollTop:0,g=t.x+p,m=t.y+f;s.style.top=m+"px",c&&(s.style.left=g+"px"),d.body.appendChild(s);let v=this.navigator.iframes[0].contentWindow;v&&(v.onclick=function(e){t.target!==e.target&&s.parentElement&&(s.style.display="none",s.parentElement.removeChild(s),v&&(v.onclick=null))})}},import_loglevel=__toESM(require_loglevel());function addEventListenerOptional(e,t,r){e&&e.addEventListener(t,r,!0)}function removeEventListenerOptional(e,t,r){e&&e.removeEventListener(t,r,!0)}var EventHandler=class{constructor(e){this.onInternalLink=()=>{},this.onClickThrough=()=>{},this.checkForLink=e=>{let t=e.target;while(t&&"body"!==t.tagName.toLowerCase()){if("a"===t.tagName.toLowerCase()&&t.href)return t;t=t.parentElement}return null},this.linkInPublication=(e,t)=>e.some((e=>{var r;return!(null==(r=e.Rel)?void 0:r.includes("external"))&&this.navigator.publication.getRelativeHref(t).includes(e.Href)})),this.isReadingOrderInternal=e=>{import_loglevel.default.log("clickedLink: ",e);const t=this.linkInPublication(this.navigator.publication.readingOrder,e.href);return t},this.isResourceInternal=e=>{import_loglevel.default.log("clickedLink: ",e);const t=this.linkInPublication(this.navigator.publication.resources,e.href);return t},this.handleLinks=async e=>{import_loglevel.default.log("R2 Click Handler");const t=this.checkForLink(e);if(t){const r=window.location.protocol===t.protocol&&window.location.port===t.port&&window.location.hostname===t.hostname,n=this.isReadingOrderInternal(t),i=this.isResourceInternal(t);i||await this.popup.hidePopover();const o=t.href.indexOf("#");if(n||i)if(e.target.href=t.href,(r||n)&&-1!==o){const t=e.target;if(t){const r="noteref"===t.getAttribute("epub:type");r?await this.popup.handleFootnote(t,e):i&&!n?await this.popup.showPopover(t,e):this.onInternalLink(e)}else this.onInternalLink(e)}else(r||n)&&-1===o&&this.onInternalLink(e);else window.open(t.href,t.target??"_blank"),e.preventDefault(),e.stopPropagation()}else this.onClickThrough(e)},this.navigator=e,this.popup=new Popup(this.navigator)}setupEvents(e){if(null===e)throw"cannot setup events for null";e.addEventListener("dblclick",(async e=>{let t=e.target;e.target&&"img"===t.tagName.toLowerCase()&&await this.popup.showPopover(t,e)}),!0),e.addEventListener("click",this.handleLinks.bind(this),!0)}};function getWidth(){const e=findRequiredElement(document,"#iframe-wrapper");return e.clientWidth}function getHeight(){const e=findRequiredElement(document,"#iframe-wrapper");return e.clientHeight}init_polyfills(),init_polyfills();var import_debounce=__toESM(require_debounce()),ReflowableBookView=class{constructor(e){this.layout="reflowable",this.USERSETTINGS="userSetting",this.sideMargin=20,this.height=0,this.attributes={margin:0},this.hasFixedScrollWidth=!1,this.store=e,this.scrollMode?(this.name="readium-scroll-on",this.label="Scrolling"):(this.name="readium-scroll-off",this.label="Paginated")}setMode(e){var t;if(this.scrollMode=e,e){this.name="readium-scroll-on",this.label="Scrolling";let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"head");if(t){const e=findElement(t,"meta[name=viewport]");e&&e.remove()}const r=findIframeElement(e,"html");r&&r.style.setProperty("--USER__scroll","readium-scroll-on")}this.setSize(),this.setIframeHeight(this.iframe)}else{this.height=getHeight()-40-this.attributes.margin,this.name="readium-scroll-off",this.label="Paginated",this.checkForFixedScrollWidth();let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"html");t&&t.style.setProperty("--USER__scroll","readium-scroll-off")}this.setSize()}this.navigator.rights.enableContentProtection&&(null==(t=this.navigator.contentProtectionModule)||t.recalculate())}start(){if(this.scrollMode){let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"head");if(t){const e=findElement(t,"meta[name=viewport]");e&&e.remove()}}this.setSize(),this.setIframeHeight(this.iframe)}else{this.iframe.height="0",this.iframe.width="0",this.setSize();const e=document.createElement("meta");e.name="viewport",e.content="width=device-width, initial-scale=1, maximum-scale=1",this.checkForFixedScrollWidth()}}stop(){this.iframe.height="0",this.iframe.width="0";let e=this.iframe.contentDocument;if(e){const e=findIframeElement(this.iframe.contentDocument,"body"),t=Array.prototype.slice.call(e.querySelectorAll("img"));for(const r of t)r.style.maxWidth=""}}getCurrentPosition(){const e=findRequiredElement(document,"#iframe-wrapper");if(this.scrollMode)return e.scrollTop/this.scrollingElement.scrollHeight;{const e=this.getColumnWidth(),t=this.getLeftColumnsWidth(),r=this.getRightColumnsWidth(),n=t+e+r;return t/n}}goToProgression(e){const t=findRequiredElement(document,"#iframe-wrapper");if(this.scrollMode)t.scrollTop=this.scrollingElement.scrollHeight*e;else{const t=this.getColumnWidth(),r=this.getLeftColumnsWidth(),n=this.getRightColumnsWidth(),i=r+t+n,o=e*i;let s=Math.round(o/t)*t;s>=i&&(s-=t),this.setLeftColumnsWidth(s)}}goToCssSelector(e,t){let r=this.iframe.contentDocument;if(r){let n=r.querySelector(e);this.goToElement(n,t)}}goToFragment(e,t){let r=this.iframe.contentDocument;if(r){const n=r.getElementById(e);this.goToElement(n,t)}}snap(e,t){var r;if(e)if(this.scrollMode);else{const t=e.style.height;e.style.height="0";const n=this.getColumnWidth(),i=this.getLeftColumnsWidth()+e.getBoundingClientRect().left;let o=Math.floor(i/n)*n;e.style.height=t,this.setLeftColumnsWidth(o),this.navigator.rights.enableContentProtection&&(null==(r=this.navigator.contentProtectionModule)||r.recalculate(0))}}goToElement(e,t){var r;if(this.scrollMode)e&&e.scrollIntoView({block:"center"});else if(e){const n=e.style.height;e.style.height="0";const i=e.getBoundingClientRect().left,o=this.getColumnWidth(),s=this.scrollingElement.scrollLeft-o;let a=Math.ceil(i/o)*o+s;if(t){const e=this.getLeftColumnsWidth();a=Math.ceil(i/o)*o+e}e.style.height=n,this.setLeftColumnsWidth(a),this.navigator.rights.enableContentProtection&&(null==(r=this.navigator.contentProtectionModule)||r.recalculate(200))}}atStart(){if(this.scrollMode){const e=findRequiredElement(document,"#iframe-wrapper");return 0===e.scrollTop}{const e=this.getLeftColumnsWidth();return e<=0}}atEnd(){if(this.scrollMode){const e=findRequiredElement(document,"#iframe-wrapper");return Math.ceil(this.scrollingElement.scrollHeight-e.scrollTop)-1<=getHeight()}{const e=Math.floor(this.getRightColumnsWidth());return e<=0||Math.ceil(this.getCurrentPage())===this.getPageCount()}}goToPreviousPage(){var e;const t=findRequiredElement(document,"#iframe-wrapper");if(this.scrollMode){const e=t.scrollTop,r=this.getScreenHeight()-40,n=e-r;t.scrollTop=n>=0?n:0}else{const e=this.getLeftColumnsWidth(),t=this.getColumnWidth(),r=e-t;r>=0?this.setLeftColumnsWidth(r):this.setLeftColumnsWidth(0),this.navigator.checkResourcePosition()}this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate())}goToNextPage(){var e;const t=findRequiredElement(document,"#iframe-wrapper");if(this.scrollMode){const e=t.scrollTop,r=this.getScreenHeight()-40,n=this.scrollingElement.scrollHeight,i=e+r;t.scrollTop=i<n?i:n}else{const e=this.getLeftColumnsWidth(),t=this.getColumnWidth(),r=this.scrollWidth,n=e+t;n<r?this.setLeftColumnsWidth(n):this.setLeftColumnsWidth(r),this.navigator.checkResourcePosition()}this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate())}getCurrentPage(){return this.scrollMode?0:this.getCurrentPosition()*this.getPageCount()+1}getPageCount(){if(this.scrollMode)return 0;{const e=this.getColumnWidth();return this.scrollWidth/e}}isPaginated(){if(this.iframe){let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"html");if(t){const e="readium-scroll-on"===t.style.getPropertyValue("--USER__scroll");return!e}}}return!this.scrollMode}isScrollMode(){if(this.iframe){let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"html");if(t)return"readium-scroll-on"===t.style.getPropertyValue("--USER__scroll")}}return this.scrollMode}async getProperty(e){let t=await this.store.get(this.USERSETTINGS);if(t){let r=JSON.parse(t);return r=r.filter((t=>t.name===e)),0===r.length?null:r[0]}return null}getScreenHeight(){const e=findRequiredElement(document,"#iframe-wrapper");return e.clientHeight}setIframeHeight(e){let t=(0,import_debounce.debounce)((e=>{if(e){let t=e.contentWindow.document.body,r=e.contentWindow.document.documentElement,n=Math.max(null==t?void 0:t.scrollHeight,null==t?void 0:t.offsetHeight,null==r?void 0:r.clientHeight,null==r?void 0:r.scrollHeight,null==r?void 0:r.offsetHeight);if(n){const t=getHeight()-this.attributes.margin;e.height=Math.max(t,n)+"px"}}}),200);t(e)}checkForFixedScrollWidth(){let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"body"),r=null==t?void 0:t.scrollWidth;this.hasFixedScrollWidth=(null==t?void 0:t.scrollWidth)===r}}setSize(){var e,t;if(this.iframe.width=getWidth()+"px",this.scrollMode){let r=null==(t=null==(e=this.iframe.contentWindow)?void 0:e.document)?void 0:t.documentElement;this.iframe.height=(null==r?void 0:r.offsetHeight)+"px"}else{let e=this.iframe.contentDocument;e&&e.documentElement&&(e.documentElement.style.height=this.height+"px"),this.iframe.height=this.height+"px"}}getLeftColumnsWidth(){return Math.ceil(this.scrollingElement.scrollLeft)}getRightColumnsWidth(){const e=this.getColumnWidth();let t=this.scrollWidth-e;if(this.hasFixedScrollWidth){const e=this.getLeftColumnsWidth();t=Math.max(0,t-e)}return t}getColumnWidth(){return this.scrollingElement.clientWidth}setLeftColumnsWidth(e){this.scrollingElement.scrollLeft=e}get scrollingElement(){var e,t,r,n;return(null==(e=this.iframe.contentDocument)?void 0:e.scrollingElement)?null==(t=this.iframe.contentDocument)?void 0:t.scrollingElement:(null==(r=this.iframe.contentDocument)?void 0:r.body)?null==(n=this.iframe.contentDocument)?void 0:n.body:document.createElement("body")}get scrollWidth(){var e;const t=null==(e=this.scrollingElement)?void 0:e.scrollWidth,r=this.getColumnWidth(),n=Math.ceil(t/r);return n*r}};init_polyfills();var FixedBookView=class{constructor(){this.layout="fixed",this.sideMargin=20,this.height=0,this.attributes={margin:0}}start(){}stop(){}getCurrentPosition(){return 0}getScreenHeight(){const e=findRequiredElement(document,"#iframe-wrapper");return e.clientHeight}goToProgression(e){}goToCssSelector(e,t){}goToFragment(e,t){}snap(e,t){}getCurrentPage(){return 0}getPageCount(){return 1}setSize(){}isPaginated(){return!0}isScrollMode(){return!1}atEnd(){return!0}atStart(){return!0}},import_loglevel2=__toESM(require_loglevel());init_polyfills();var _R2D2BC=class{};_R2D2BC.FIXED_LAYOUT_MARGIN_REF="fixedLayoutMargin",_R2D2BC.FIXED_LAYOUT_SHADOW_REF="fixedLayoutShadow",_R2D2BC.FIXED_LAYOUT_MARGIN_KEY="--USER__"+_R2D2BC.FIXED_LAYOUT_MARGIN_REF,_R2D2BC.FIXED_LAYOUT_SHADOW_KEY="--USER__"+_R2D2BC.FIXED_LAYOUT_SHADOW_REF;var R2D2BC=_R2D2BC,_UserSettings=class e{constructor(e,t,r,n,i){var o;this.USERSETTINGS="userSetting",this.fontSize=100,this.fontOverride=!1,this.fontFamily=0,this.appearance=0,this.verticalScroll=!0,this.textAlignment=0,this.columnCount=0,this.direction=0,this.wordSpacing=0,this.letterSpacing=0,this.pageMargins=2,this.lineHeight=1,this.fixedLayoutMargin=100,this.fixedLayoutShadow=!0,this.settingsChangeCallback=()=>{},this.settingsColumnsChangeCallback=()=>{},this.viewChangeCallback=()=>{},this.store=e,this.view="fixed"===i?new FixedBookView:new ReflowableBookView(this.store),this.headerMenu=t,this.api=r,this.injectables=n,null==(o=this.injectables)||o.forEach((e=>{"style"===e.type&&(e.fontFamily&&this.addFont(e.fontFamily),e.appearance&&this.addAppearance(e.appearance))}))}async isPaginated(){let e=await this.getPropertyAndFallback("verticalScroll",ReadiumCSS.SCROLL_KEY);return!e}async isScrollMode(){return!await this.isPaginated()}static async create(t){const r=new this(t.store,t.headerMenu,t.api,t.injectables,t.layout);if(await r.initialise(),t.initialUserSettings){r.userProperties||(r.userProperties=r.getUserSettings());let n=t.initialUserSettings;if(void 0!==n.verticalScroll){r.verticalScroll=this.parseScrollSetting(n.verticalScroll);let e=r.userProperties.getByRef(ReadiumCSS.SCROLL_REF);e&&(e.value=r.verticalScroll,await r.saveProperty(e)),import_loglevel2.default.log(r.verticalScroll)}if(n.appearance){r.appearance=e.parseAppearanceSetting(n.appearance);let t=r.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF);t&&(t.value=r.appearance,await r.saveProperty(t)),import_loglevel2.default.log(r.appearance)}if(n.fontSize){r.fontSize=n.fontSize;let e=r.userProperties.getByRef(ReadiumCSS.FONT_SIZE_REF);e&&(e.value=r.fontSize,await r.saveProperty(e)),import_loglevel2.default.log(r.fontSize)}if(n.fontFamily){r.fontFamily=e.fontFamilyValues.findIndex((e=>e===n.fontFamily));let t=r.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF);t&&(t.value=r.fontFamily,await r.saveProperty(t)),import_loglevel2.default.log(r.fontFamily),0!==r.fontFamily&&(r.fontOverride=!0)}if(n.textAlignment){r.textAlignment=e.textAlignmentValues.findIndex((e=>e===n.textAlignment));let t=r.userProperties.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF);t&&(t.value=r.textAlignment,await r.saveProperty(t)),import_loglevel2.default.log(r.textAlignment)}if(n.columnCount){r.columnCount=e.columnCountValues.findIndex((e=>e===n.columnCount));let t=r.userProperties.getByRef(ReadiumCSS.COLUMN_COUNT_REF);t&&(t.value=r.columnCount,await r.saveProperty(t)),import_loglevel2.default.log(r.columnCount)}if(n.direction){r.direction=e.directionValues.findIndex((e=>e===n.direction));let t=r.userProperties.getByRef(ReadiumCSS.DIRECTION_REF);t&&(t.value=r.direction,await r.saveProperty(t)),import_loglevel2.default.log(r.direction)}if(n.wordSpacing){r.wordSpacing=n.wordSpacing;let e=r.userProperties.getByRef(ReadiumCSS.WORD_SPACING_REF);e&&(e.value=r.wordSpacing,await r.saveProperty(e)),import_loglevel2.default.log(r.wordSpacing)}if(n.letterSpacing){r.letterSpacing=n.letterSpacing;let e=r.userProperties.getByRef(ReadiumCSS.LETTER_SPACING_REF);e&&(e.value=r.letterSpacing,await r.saveProperty(e)),import_loglevel2.default.log(r.letterSpacing)}if(n.pageMargins){r.pageMargins=n.pageMargins;let e=r.userProperties.getByRef(ReadiumCSS.PAGE_MARGINS_REF);e&&(e.value=r.pageMargins,await r.saveProperty(e)),import_loglevel2.default.log(r.pageMargins)}if(n.lineHeight){r.lineHeight=n.lineHeight;let e=r.userProperties.getByRef(ReadiumCSS.LINE_HEIGHT_REF);e&&(e.value=r.lineHeight,await r.saveProperty(e)),import_loglevel2.default.log(r.lineHeight)}if(n.fixedLayoutMargin>=0){r.fixedLayoutMargin=n.fixedLayoutMargin;let e=r.userProperties.getByRef(R2D2BC.FIXED_LAYOUT_MARGIN_REF);e&&(e.value=r.fixedLayoutMargin,await r.saveProperty(e)),import_loglevel2.default.log(r.fixedLayoutMargin)}if("fixedLayoutShadow"in n){r.fixedLayoutShadow=n.fixedLayoutShadow;let e=r.userProperties.getByRef(R2D2BC.FIXED_LAYOUT_SHADOW_REF);e&&(e.value=r.fixedLayoutShadow,await r.saveProperty(e)),import_loglevel2.default.log(r.fixedLayoutShadow)}r.userProperties=r.getUserSettings(),await r.initialise()}return await r.initializeSelections(),new Promise((e=>e(r)))}stop(){import_loglevel2.default.log("book settings stop")}async initialise(){this.appearance=await this.getPropertyAndFallback("appearance",ReadiumCSS.APPEARANCE_KEY),this.verticalScroll=await this.getPropertyAndFallback("verticalScroll",ReadiumCSS.SCROLL_KEY),this.fontFamily=await this.getPropertyAndFallback("fontFamily",ReadiumCSS.FONT_FAMILY_KEY),0!==this.fontFamily&&(this.fontOverride=!0),this.textAlignment=await this.getPropertyAndFallback("textAlignment",ReadiumCSS.TEXT_ALIGNMENT_KEY),this.columnCount=await this.getPropertyAndFallback("columnCount",ReadiumCSS.COLUMN_COUNT_KEY),this.direction=await this.getPropertyAndFallback("columnCount",ReadiumCSS.DIRECTION_KEY),this.fontSize=await this.getPropertyAndFallback("fontSize",ReadiumCSS.FONT_SIZE_KEY),this.wordSpacing=await this.getPropertyAndFallback("wordSpacing",ReadiumCSS.WORD_SPACING_KEY),this.letterSpacing=await this.getPropertyAndFallback("letterSpacing",ReadiumCSS.LETTER_SPACING_KEY),this.pageMargins=await this.getPropertyAndFallback("pageMargins",ReadiumCSS.PAGE_MARGINS_KEY),this.lineHeight=await this.getPropertyAndFallback("lineHeight",ReadiumCSS.LINE_HEIGHT_KEY),this.fixedLayoutMargin=await this.getPropertyAndFallback("fixedLayoutMargin",R2D2BC.FIXED_LAYOUT_MARGIN_KEY),this.fixedLayoutShadow=await this.getPropertyAndFallback("fixedLayoutShadow",R2D2BC.FIXED_LAYOUT_SHADOW_KEY),this.userProperties=this.getUserSettings()}async reset(){this.appearance=0,this.verticalScroll=!0,this.fontSize=100,this.fontOverride=!1,this.fontFamily=0,this.textAlignment=0,this.columnCount=0,this.direction=0,this.wordSpacing=0,this.letterSpacing=0,this.pageMargins=2,this.lineHeight=1,this.fixedLayoutMargin=100,this.fixedLayoutShadow=!0,this.userProperties=this.getUserSettings();let e=this.iframe.contentDocument;if(e){const t=findIframeElement(e,"html");if(t){const e=findElement(document,"#root")||document.documentElement,r=findElement(t,"body");t.style.removeProperty(ReadiumCSS.FONT_SIZE_KEY),t.style.removeProperty(ReadiumCSS.WORD_SPACING_KEY),t.style.removeProperty(ReadiumCSS.LETTER_SPACING_KEY),t.style.removeProperty(ReadiumCSS.COLUMN_COUNT_KEY),t.style.removeProperty(ReadiumCSS.DIRECTION_KEY),t.style.removeProperty(ReadiumCSS.TEXT_ALIGNMENT_KEY),t.style.removeProperty(ReadiumCSS.LINE_HEIGHT_KEY),t.style.removeProperty(ReadiumCSS.PAGE_MARGINS_KEY),t.style.removeProperty(ReadiumCSS.APPEARANCE_KEY),e&&setAttr(e,"data-viewer-theme","day"),r&&setAttr(r,"data-viewer-theme","day"),t.style.removeProperty(ReadiumCSS.FONT_FAMILY_KEY),setAttr(t,"data-viewer-font","publisher"),t.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-off")}}}async initializeSelections(){this.headerMenu&&(this.settingsView=findElement(this.headerMenu,"#container-view-settings"))}async applyProperties(){var e,t,r,n,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,_,b,S,w,C;this.userProperties=this.getUserSettings();let A=this.iframe.contentDocument;if(A){const E=findIframeElement(A,"html");if(E){const A=findElement(document,"#root")||document.documentElement,x=findElement(E,"body");if((null==(e=this.view)?void 0:e.navigator.publication.isReflowable)&&(await this.getProperty(ReadiumCSS.FONT_SIZE_KEY)&&E.style.setProperty(ReadiumCSS.FONT_SIZE_KEY,(null==(t=this.userProperties.getByRef(ReadiumCSS.FONT_SIZE_REF))?void 0:t.toString())??null),await this.getProperty(ReadiumCSS.WORD_SPACING_KEY)&&E.style.setProperty(ReadiumCSS.WORD_SPACING_KEY,(null==(r=this.userProperties.getByRef(ReadiumCSS.WORD_SPACING_REF))?void 0:r.toString())??null),await this.getProperty(ReadiumCSS.LETTER_SPACING_KEY)&&E.style.setProperty(ReadiumCSS.LETTER_SPACING_KEY,(null==(n=this.userProperties.getByRef(ReadiumCSS.LETTER_SPACING_REF))?void 0:n.toString())??null)),await this.getProperty(ReadiumCSS.COLUMN_COUNT_KEY)&&E.style.setProperty(ReadiumCSS.COLUMN_COUNT_KEY,(null==(i=this.userProperties.getByRef(ReadiumCSS.COLUMN_COUNT_REF))?void 0:i.toString())??null),(null==(o=this.view)?void 0:o.navigator.publication.isReflowable)&&(await this.getProperty(ReadiumCSS.TEXT_ALIGNMENT_KEY)&&("auto"===(null==(s=this.userProperties.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF))?void 0:s.toString())?E.style.removeProperty(ReadiumCSS.TEXT_ALIGNMENT_KEY):E.style.setProperty(ReadiumCSS.TEXT_ALIGNMENT_KEY,(null==(a=this.userProperties.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF))?void 0:a.toString())??null)),await this.getProperty(ReadiumCSS.LINE_HEIGHT_KEY)&&E.style.setProperty(ReadiumCSS.LINE_HEIGHT_KEY,(null==(l=this.userProperties.getByRef(ReadiumCSS.LINE_HEIGHT_REF))?void 0:l.toString())??null),await this.getProperty(ReadiumCSS.PAGE_MARGINS_KEY)&&E.style.setProperty(ReadiumCSS.PAGE_MARGINS_KEY,(null==(u=this.userProperties.getByRef(ReadiumCSS.PAGE_MARGINS_REF))?void 0:u.toString())??null)),await this.getProperty(ReadiumCSS.APPEARANCE_KEY)?(E.style.setProperty(ReadiumCSS.APPEARANCE_KEY,(null==(c=this.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:c.toString())??null),0===(null==(d=this.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:d.value)?(A&&setAttr(A,"data-viewer-theme","day"),x&&setAttr(x,"data-viewer-theme","day")):1===(null==(h=this.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:h.value)?(A&&setAttr(A,"data-viewer-theme","sepia"),x&&setAttr(x,"data-viewer-theme","sepia")):2===(null==(p=this.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:p.value)&&(A&&setAttr(A,"data-viewer-theme","night"),x&&setAttr(x,"data-viewer-theme","night"))):(E.style.setProperty(ReadiumCSS.APPEARANCE_KEY,(null==(f=this.userProperties.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:f.toString())??null),A&&setAttr(A,"data-viewer-theme","day"),x&&setAttr(x,"data-viewer-theme","day")),(null==(g=this.view)?void 0:g.navigator.publication.isFixedLayout)&&await this.getProperty(ReadiumCSS.DIRECTION_KEY)){let e=(null==(m=this.userProperties.getByRef(ReadiumCSS.DIRECTION_REF))?void 0:m.toString())??null;E.style.setProperty(ReadiumCSS.DIRECTION_KEY,e),this.view.navigator.setDirection(e)}if(null==(v=this.view)?void 0:v.navigator.publication.isReflowable){if(await this.getProperty(ReadiumCSS.FONT_FAMILY_KEY))if(E.style.setProperty(ReadiumCSS.FONT_FAMILY_KEY,(null==(y=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:y.toString())??null),0===(null==(_=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:_.value))setAttr(E,"data-viewer-font","publisher"),E.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-off");else if(1===(null==(b=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:b.value))setAttr(E,"data-viewer-font","serif"),E.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-on");else if(2===(null==(S=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:S.value))setAttr(E,"data-viewer-font","sans"),E.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-on");else{let e=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF);e&&setAttr(E,"data-viewer-font",e.toString()),E.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-on")}else E.style.setProperty(ReadiumCSS.FONT_FAMILY_KEY,(null==(w=this.userProperties.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:w.toString())??null),setAttr(E,"data-viewer-font","publisher"),E.style.setProperty(ReadiumCSS.FONT_OVERRIDE_KEY,"readium-font-off");await this.getProperty(ReadiumCSS.SCROLL_KEY)?!0===(null==(C=this.userProperties.getByRef(ReadiumCSS.SCROLL_REF))?void 0:C.value)?E.style.setProperty("--USER__scroll","readium-scroll-on"):E.style.setProperty("--USER__scroll","readium-scroll-off"):E.style.setProperty("--USER__scroll","readium-scroll-on"),E.style.setProperty("--USER__advancedSettings","readium-advanced-on"),this.isScrollMode().then((e=>{var t,r;null==(r=null==(t=this.view)?void 0:t.setMode)||r.call(t,e)}))}}}}setIframe(t){this.iframe=t,this.view&&(this.view.iframe=t),this.settingsView&&e.renderControls(this.settingsView)}static renderControls(e){addEventListenerOptional(findElement(e,"ul"),"click",(e=>{e.stopPropagation()}))}onSettingsChange(e){this.settingsChangeCallback=e}onColumnSettingsChange(e){this.settingsColumnsChangeCallback=e}onViewChange(e){this.viewChangeCallback=e}async storeProperty(e){await this.updateUserSettings(),await this.saveProperty(e)}addAppearance(t){e.appearanceValues.includes(t)||e.appearanceValues.push(t)}initAddedAppearance(){this.applyProperties()}addFont(t){e.fontFamilyValues.includes(t)||e.fontFamilyValues.push(t)}initAddedFont(){this.applyProperties()}async updateUserSettings(){var t,r,n,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,_,b;let S={fontFamily:e.fontFamilyValues[await(null==(r=null==(t=this.userProperties)?void 0:t.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:r.value)],fontSize:null==(i=null==(n=this.userProperties)?void 0:n.getByRef(ReadiumCSS.FONT_SIZE_REF))?void 0:i.value,appearance:e.appearanceValues[await(null==(s=null==(o=this.userProperties)?void 0:o.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:s.value)],textAlignment:e.textAlignmentValues[await(null==(l=null==(a=this.userProperties)?void 0:a.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF))?void 0:l.value)],columnCount:e.columnCountValues[await(null==(c=null==(u=this.userProperties)?void 0:u.getByRef(ReadiumCSS.COLUMN_COUNT_REF))?void 0:c.value)],direction:e.directionValues[await(null==(h=null==(d=this.userProperties)?void 0:d.getByRef(ReadiumCSS.DIRECTION_REF))?void 0:h.value)],wordSpacing:null==(f=null==(p=this.userProperties)?void 0:p.getByRef(ReadiumCSS.WORD_SPACING_REF))?void 0:f.value,letterSpacing:null==(m=null==(g=this.userProperties)?void 0:g.getByRef(ReadiumCSS.LETTER_SPACING_REF))?void 0:m.value,verticalScroll:null==(y=null==(v=this.userProperties)?void 0:v.getByRef(ReadiumCSS.SCROLL_REF))?void 0:y.value};(null==(_=this.api)?void 0:_.updateSettings)&&(null==(b=this.api)||b.updateSettings(S).then((e=>{import_loglevel2.default.log("api updated user settings",JSON.stringify(S))})))}getUserSettings(){let t=new UserProperties;return t.addSwitchable("readium-font-on","readium-font-off",this.fontOverride,ReadiumCSS.FONT_OVERRIDE_REF,ReadiumCSS.FONT_OVERRIDE_KEY),t.addEnumerable(this.columnCount,e.columnCountValues,ReadiumCSS.COLUMN_COUNT_REF,ReadiumCSS.COLUMN_COUNT_KEY),t.addEnumerable(this.direction,e.directionValues,ReadiumCSS.DIRECTION_REF,ReadiumCSS.DIRECTION_KEY),t.addEnumerable(this.appearance,e.appearanceValues,ReadiumCSS.APPEARANCE_REF,ReadiumCSS.APPEARANCE_KEY),t.addIncremental(this.pageMargins,.5,4,.25,"",ReadiumCSS.PAGE_MARGINS_REF,ReadiumCSS.PAGE_MARGINS_KEY),t.addEnumerable(this.textAlignment,e.textAlignmentValues,ReadiumCSS.TEXT_ALIGNMENT_REF,ReadiumCSS.TEXT_ALIGNMENT_KEY),t.addEnumerable(this.fontFamily,e.fontFamilyValues,ReadiumCSS.FONT_FAMILY_REF,ReadiumCSS.FONT_FAMILY_KEY),t.addIncremental(this.fontSize,100,300,25,"%",ReadiumCSS.FONT_SIZE_REF,ReadiumCSS.FONT_SIZE_KEY),t.addIncremental(this.lineHeight,1,2,.25,"em",ReadiumCSS.LINE_HEIGHT_REF,ReadiumCSS.LINE_HEIGHT_KEY),t.addIncremental(this.wordSpacing,0,1,.25,"rem",ReadiumCSS.WORD_SPACING_REF,ReadiumCSS.WORD_SPACING_KEY),t.addIncremental(this.letterSpacing,0,.5,.0625,"em",ReadiumCSS.LETTER_SPACING_REF,ReadiumCSS.LETTER_SPACING_KEY),t.addSwitchable("readium-scroll-on","readium-scroll-off",this.verticalScroll,ReadiumCSS.SCROLL_REF,ReadiumCSS.SCROLL_KEY),t.addIncremental(this.fixedLayoutMargin,0,500,10,"",R2D2BC.FIXED_LAYOUT_MARGIN_REF,R2D2BC.FIXED_LAYOUT_MARGIN_KEY),t.addSwitchable("true","false",this.fixedLayoutShadow,R2D2BC.FIXED_LAYOUT_SHADOW_REF,R2D2BC.FIXED_LAYOUT_SHADOW_KEY),t}async saveProperty(e){let t=await this.store.get(this.USERSETTINGS);if(t){let r=JSON.parse(t);r=r.filter((t=>t.name!==e.name)),void 0!==e.value&&r.push(e),await this.store.set(this.USERSETTINGS,JSON.stringify(r))}else{let t=[];t.push(e),await this.store.set(this.USERSETTINGS,JSON.stringify(t))}return new Promise((t=>t(e)))}async getProperty(e){let t=await this.store.get(this.USERSETTINGS);if(t){let r=JSON.parse(t);return r=r.filter((t=>t.name===e)),0===r.length?null:r[0]}return null}async getPropertyAndFallback(e,t){var r;return(null==(r=await this.getProperty(t))?void 0:r.value)??this[e]}async resetUserSettings(){await this.store.remove(this.USERSETTINGS),await this.reset(),this.settingsChangeCallback()}get currentSettings(){var t,r,n,i,o,s,a,l,u,c;return{appearance:e.appearanceValues[null==(r=null==(t=this.userProperties)?void 0:t.getByRef(ReadiumCSS.APPEARANCE_REF))?void 0:r.value],fontFamily:e.fontFamilyValues[null==(i=null==(n=this.userProperties)?void 0:n.getByRef(ReadiumCSS.FONT_FAMILY_REF))?void 0:i.value],textAlignment:e.textAlignmentValues[null==(s=null==(o=this.userProperties)?void 0:o.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF))?void 0:s.value],columnCount:e.columnCountValues[null==(l=null==(a=this.userProperties)?void 0:a.getByRef(ReadiumCSS.COLUMN_COUNT_REF))?void 0:l.value],direction:e.directionValues[null==(c=null==(u=this.userProperties)?void 0:u.getByRef(ReadiumCSS.DIRECTION_REF))?void 0:c.value],verticalScroll:this.verticalScroll,fontSize:this.fontSize,wordSpacing:this.wordSpacing,letterSpacing:this.letterSpacing,pageMargins:this.pageMargins,lineHeight:this.lineHeight,fixedLayoutMargin:this.fixedLayoutMargin,fixedLayoutShadow:this.fixedLayoutShadow}}async applyUserSettings(t){var r,n,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y;if(t.appearance){this.appearance=e.parseAppearanceSetting(t.appearance);let n=null==(r=this.userProperties)?void 0:r.getByRef(ReadiumCSS.APPEARANCE_REF);n&&(n.value=this.appearance,await this.storeProperty(n))}if(t.fontSize){this.fontSize=t.fontSize;let e=null==(n=this.userProperties)?void 0:n.getByRef(ReadiumCSS.FONT_SIZE_REF);e&&(e.value=this.fontSize,await this.storeProperty(e))}if(t.fontFamily){this.fontFamily=e.fontFamilyValues.findIndex((e=>e===t.fontFamily));let r=null==(i=this.userProperties)?void 0:i.getByRef(ReadiumCSS.FONT_FAMILY_REF);r&&(r.value=this.fontFamily,await this.storeProperty(r))}if(t.letterSpacing){this.letterSpacing=t.letterSpacing;let e=null==(o=this.userProperties)?void 0:o.getByRef(ReadiumCSS.LETTER_SPACING_REF);e&&(e.value=this.letterSpacing,await this.storeProperty(e))}if(t.wordSpacing){this.wordSpacing=t.wordSpacing;let e=null==(s=this.userProperties)?void 0:s.getByRef(ReadiumCSS.WORD_SPACING_REF);e&&(e.value=this.wordSpacing,await this.storeProperty(e))}if(t.columnCount){this.columnCount=e.columnCountValues.findIndex((e=>e===t.columnCount));let r=null==(a=this.userProperties)?void 0:a.getByRef(ReadiumCSS.COLUMN_COUNT_REF);r&&(r.value=this.columnCount,await this.storeProperty(r)),this.settingsColumnsChangeCallback()}if(t.direction){this.direction=e.directionValues.findIndex((e=>e===t.direction));let r=null==(l=this.userProperties)?void 0:l.getByRef(ReadiumCSS.DIRECTION_REF);r&&(r.value=this.direction,await this.storeProperty(r))}if(t.textAlignment){this.textAlignment=e.textAlignmentValues.findIndex((e=>e===t.textAlignment));let r=null==(u=this.userProperties)?void 0:u.getByRef(ReadiumCSS.TEXT_ALIGNMENT_REF);r&&(r.value=this.textAlignment,await this.storeProperty(r))}if(t.lineHeight){this.lineHeight=t.lineHeight;let e=null==(c=this.userProperties)?void 0:c.getByRef(ReadiumCSS.LINE_HEIGHT_REF);e&&(e.value=this.lineHeight,await this.storeProperty(e))}if("fixedLayoutMargin"in t){this.fixedLayoutMargin=t.fixedLayoutMargin;let e=null==(d=this.userProperties)?void 0:d.getByRef(R2D2BC.FIXED_LAYOUT_MARGIN_REF);e&&(e.value=this.fixedLayoutMargin,await this.storeProperty(e))}if("fixedLayoutShadow"in t){this.fixedLayoutShadow=t.fixedLayoutShadow;let e=null==(h=this.userProperties)?void 0:h.getByRef(R2D2BC.FIXED_LAYOUT_SHADOW_REF);e&&(e.value=this.lineHeight,await this.storeProperty(e))}if(t.pageMargins){this.pageMargins=t.pageMargins;let e=null==(p=this.userProperties)?void 0:p.getByRef(ReadiumCSS.PAGE_MARGINS_REF);e&&(e.value=this.pageMargins,await this.storeProperty(e))}if(void 0!==t.verticalScroll){const r=null==(f=this.view)?void 0:f.getCurrentPosition();this.verticalScroll=e.parseScrollSetting(t.verticalScroll);let n=null==(g=this.userProperties)?void 0:g.getByRef(ReadiumCSS.SCROLL_REF);n&&(n.value=this.verticalScroll,await this.saveProperty(n)),null==(v=null==(m=this.view)?void 0:m.setMode)||v.call(m,this.verticalScroll),r&&(null==(y=this.view)||y.goToProgression(r)),this.viewChangeCallback()}await this.applyProperties(),this.settingsChangeCallback()}static parseScrollSetting(e){switch(e){case!0:case"scroll":case"readium-scroll-on":return!0;case!1:case"paginated":case"readium-scroll-off":return!1;default:return!1}}static parseAppearanceSetting(t){let r;return r="day"===t||"readium-default-on"===t?e.appearanceValues[0]:"sepia"===t||"readium-sepia-on"===t?e.appearanceValues[1]:"night"===t||"readium-night-on"===t?e.appearanceValues[2]:t,e.appearanceValues.findIndex((e=>e===r))}async scroll(e){var t,r,n,i,o;const s=null==(t=this.view)?void 0:t.getCurrentPosition();this.verticalScroll=e;let a=null==(r=this.userProperties)?void 0:r.getByRef(ReadiumCSS.SCROLL_REF);a&&(a.value=this.verticalScroll,await this.saveProperty(a)),await this.applyProperties(),null==(i=null==(n=this.view)?void 0:n.setMode)||i.call(n,this.verticalScroll),s&&(null==(o=this.view)||o.goToProgression(s)),this.viewChangeCallback()}async increase(e){var t,r,n,i,o,s,a,l,u,c,d,h,p,f,g,m;if("fontSize"===e){(null==(t=this.userProperties)?void 0:t.getByRef(ReadiumCSS.FONT_SIZE_REF)).increment(),this.fontSize=null==(n=null==(r=this.userProperties)?void 0:r.getByRef(ReadiumCSS.FONT_SIZE_REF))?void 0:n.value;let e=null==(i=this.userProperties)?void 0:i.getByRef(ReadiumCSS.FONT_SIZE_REF);e&&await this.storeProperty(e)}else if("letterSpacing"===e){(null==(o=this.userProperties)?void 0:o.getByRef(ReadiumCSS.LETTER_SPACING_REF)).increment(),this.letterSpacing=null==(a=null==(s=this.userProperties)?void 0:s.getByRef(ReadiumCSS.LETTER_SPACING_REF))?void 0:a.value;let e=null==(l=this.userProperties)?void 0:l.getByRef(ReadiumCSS.LETTER_SPACING_REF);e&&await this.storeProperty(e)}else if("wordSpacing"===e){(null==(u=this.userProperties)?void 0:u.getByRef(ReadiumCSS.WORD_SPACING_REF)).increment(),this.wordSpacing=null==(d=null==(c=this.userProperties)?void 0:c.getByRef(ReadiumCSS.WORD_SPACING_REF))?void 0:d.value;let e=null==(h=this.userProperties)?void 0:h.getByRef(ReadiumCSS.WORD_SPACING_REF);e&&await this.storeProperty(e)}else if("lineHeight"===e){(null==(p=this.userProperties)?void 0:p.getByRef(ReadiumCSS.LINE_HEIGHT_REF)).increment(),this.lineHeight=null==(g=null==(f=this.userProperties)?void 0:f.getByRef(ReadiumCSS.LINE_HEIGHT_REF))?void 0:g.value;let e=null==(m=this.userProperties)?void 0:m.getByRef(ReadiumCSS.LINE_HEIGHT_REF);e&&await this.storeProperty(e)}await this.applyProperties(),this.settingsChangeCallback()}async decrease(e){var t,r,n,i,o,s,a,l,u,c,d,h,p,f,g,m;if("fontSize"===e){(null==(t=this.userProperties)?void 0:t.getByRef(ReadiumCSS.FONT_SIZE_REF)).decrement(),this.fontSize=null==(n=null==(r=this.userProperties)?void 0:r.getByRef(ReadiumCSS.FONT_SIZE_REF))?void 0:n.value;let e=null==(i=this.userProperties)?void 0:i.getByRef(ReadiumCSS.FONT_SIZE_REF);e&&await this.storeProperty(e)}else if("letterSpacing"===e){(null==(o=this.userProperties)?void 0:o.getByRef(ReadiumCSS.LETTER_SPACING_REF)).decrement(),this.letterSpacing=null==(a=null==(s=this.userProperties)?void 0:s.getByRef(ReadiumCSS.LETTER_SPACING_REF))?void 0:a.value;let e=null==(l=this.userProperties)?void 0:l.getByRef(ReadiumCSS.LETTER_SPACING_REF);e&&await this.storeProperty(e)}else if("wordSpacing"===e){(null==(u=this.userProperties)?void 0:u.getByRef(ReadiumCSS.WORD_SPACING_REF)).decrement(),this.wordSpacing=null==(d=null==(c=this.userProperties)?void 0:c.getByRef(ReadiumCSS.WORD_SPACING_REF))?void 0:d.value;let e=null==(h=this.userProperties)?void 0:h.getByRef(ReadiumCSS.WORD_SPACING_REF);e&&await this.storeProperty(e)}else if("lineHeight"===e){(null==(p=this.userProperties)?void 0:p.getByRef(ReadiumCSS.LINE_HEIGHT_REF)).decrement(),this.wordSpacing=null==(g=null==(f=this.userProperties)?void 0:f.getByRef(ReadiumCSS.LINE_HEIGHT_REF))?void 0:g.value;let e=null==(m=this.userProperties)?void 0:m.getByRef(ReadiumCSS.LINE_HEIGHT_REF);e&&await this.storeProperty(e)}await this.applyProperties(),this.settingsChangeCallback()}};_UserSettings.appearanceValues=["readium-default-on","readium-sepia-on","readium-night-on"],_UserSettings.fontFamilyValues=["Original","serif","sans-serif"],_UserSettings.textAlignmentValues=["auto","justify","start"],_UserSettings.columnCountValues=["auto","1","2"],_UserSettings.directionValues=["auto","ltr","rtl"];var UserSettings=_UserSettings;init_polyfills(),init_polyfills(),init_polyfills(),init_polyfills(),init_polyfills(),init_polyfills(),init_polyfills(),init_polyfills();var Hex={stringify(e){const t=e.nSigBytes,r=e.words,n=[];for(let i=0;i<t;i++){const e=r[i>>>2]>>>24-i%4*8&255;n.push((e>>>4).toString(16)),n.push((15&e).toString(16))}return n.join("")},parse(e){const t=e.length;if(t%2!==0)throw new Error("Hex string count must be even");if(!/^[a-fA-F0-9]+$/.test(e))throw new Error(`Invalid Hex string: ${e}`);const r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new Word32Array(r,t/2)}};init_polyfills(),init_polyfills();var ua="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",IEVer=(()=>{let e=parseInt((/msie (\d+)/.exec(ua)||[])[1],10);return isNaN(e)?(e=parseInt((/trident\/.*; rv:(\d+)/.exec(ua)||[])[1],10),!isNaN(e)&&e):e})();function isIE(e,t){return!1!==IEVer&&(!t||("<"===e?IEVer<t:"<="===e?IEVer<=t:">"===e?IEVer>t:">="===e?IEVer>=t:IEVer===t))}function makeRandFunction(){if("undefined"!==typeof window){const e=window.crypto||window.msCrypto;if(!e){if(isIE("<",11))return console.warn("IE <= 10 uses insecure random generator. Please consider to use IE11 or another modern browser"),function(){return Math.floor(512*Math.random())%256};throw new Error("Crypto module not found")}return function(){return e.getRandomValues(new Uint32Array(1))[0]}}if("undefined"!==typeof globalThis&&globalThis.crypto)return function(){return globalThis.crypto.randomBytes(4).readInt32LE()};if("function"===typeof __require)return function(){return require("crypto").randomBytes(4).readInt32LE()};throw new Error("Unable to find crypto module")}var random=makeRandFunction(),Word32Array=class e{constructor(t,r){if(Array.isArray(t)||!t)return this._words=Array.isArray(t)?t:[],void(this._nSignificantBytes="number"===typeof r?r:4*this._words.length);if(t instanceof e)return this._words=t.words.slice(),void(this._nSignificantBytes=t.nSigBytes);let n;try{t instanceof ArrayBuffer?n=new Uint8Array(t):(t instanceof Uint8Array||t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw new Error("Invalid argument")}if(!n)throw new Error("Invalid argument");const i=n.byteLength,o=[];for(let e=0;e<i;e++)o[e>>>2]|=n[e]<<24-e%4*8;this._words=o,this._nSignificantBytes=i}get nSigBytes(){return this._nSignificantBytes}set nSigBytes(e){this._nSignificantBytes=e}get words(){return this._words}toString(e){return e?e.stringify(this):Hex.stringify(this)}toUint8Array(){const e=this._words,t=this._nSignificantBytes,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e[n>>>2]>>>24-n%4*8&255;return r}concat(e){const t=e.words.slice(),r=e.nSigBytes;if(this.clamp(),this._nSignificantBytes%4)for(let n=0;n<r;n++){const e=t[n>>>2]>>>24-n%4*8&255;this._words[this._nSignificantBytes+n>>>2]|=e<<24-(this._nSignificantBytes+n)%4*8}else for(let n=0;n<r;n+=4)this._words[this._nSignificantBytes+n>>>2]=t[n>>>2];return this._nSignificantBytes+=r,this}clamp(){const e=this._nSignificantBytes;this._words[e>>>2]&=4294967295<<32-e%4*8,this._words.length=Math.ceil(e/4)}clone(){return new e(this._words.slice(),this._nSignificantBytes)}static random(t){const r=[];for(let e=0;e<t;e+=4)r.push(random());return new e(r,t)}};init_polyfills(),init_polyfills();var Latin1={stringify(e){const t=e.nSigBytes,r=e.words,n=[];for(let i=0;i<t;i++){const e=r[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(e))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new Word32Array(r,t)}},Utf8={stringify(e){try{return decodeURIComponent(escape(Latin1.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse(e){return Latin1.parse(unescape(encodeURIComponent(e)))}},BufferedBlockAlgorithm=class{constructor(e){this._minBufferSize=0,this._blockSize=0,this._props=e,this._data=e&&"undefined"!==typeof e.data?e.data.clone():new Word32Array,this._nBytes=e&&"number"===typeof e.nBytes?e.nBytes:0}get blockSize(){return this._blockSize}reset(e,t){this._data="undefined"!==typeof e?e.clone():new Word32Array,this._nBytes="number"===typeof t?t:0}_append(e){const t="string"===typeof e?Utf8.parse(e):e;this._data.concat(t),this._nBytes+=t.nSigBytes}_process(e){let t;const r=this._data.words,n=this._data.nSigBytes,i=this._blockSize,o=4*this._blockSize;let s=n/o;s=e?Math.ceil(s):Math.max((0|s)-this._minBufferSize,0);const a=s*i,l=Math.min(4*a,n);if(a){for(let e=0;e<a;e+=i)this._doProcessBlock(r,e);t=r.splice(0,a),this._data.nSigBytes-=l}return new Word32Array(t,l)}_doProcessBlock(e,t){throw new Error("Not implemented")}},Hasher=class extends BufferedBlockAlgorithm{constructor(e){super(e),this._blockSize=16,this._props=e,e&&"number"===typeof e.blockSize&&(this._blockSize=e.blockSize),this.reset(e?e.data:void 0,e?e.nBytes:void 0)}get blockSize(){return this._blockSize}reset(e,t){super.reset.call(this,e,t),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){return e&&this._append(e),this._doFinalize()}_doReset(){throw new Error("Not implemented")}_doFinalize(){throw new Error("Not implemented")}},H=[],K=[];function isPrime(e){const t=Math.sqrt(e);for(let r=2;r<=t;r++)if(!(e%r))return!1;return!0}function getFractionalBits(e){return 4294967296*(e-(0|e))|0}(function(){let e=2,t=0;while(t<64)isPrime(e)&&(t<8&&(H[t]=getFractionalBits(Math.pow(e,.5))),K[t]=getFractionalBits(Math.pow(e,1/3)),t++),e++})();var W=[],SHA256=class e extends Hasher{constructor(e){super(e),this._hash=new Word32Array(H.slice(0)),this._props=e,e&&"undefined"!==typeof e.hash&&(this._hash=e.hash.clone())}_doReset(){this._hash=new Word32Array(H.slice(0))}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],l=r[5],u=r[6],c=r[7];for(let d=0;d<64;d++){if(d<16)W[d]=0|e[t+d];else{const e=W[d-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,r=W[d-2],n=(r<<15|r>>>17)^(r<<13|r>>>19)^r>>>10;W[d]=t+W[d-7]+n+W[d-16]}const r=a&l^~a&u,h=n&i^n&o^i&o,p=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),f=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),g=c+f+r+K[d]+W[d],m=p+h;c=u,u=l,l=a,a=s+g|0,s=o,o=i,i=n,n=g+m|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+l|0,r[6]=r[6]+u|0,r[7]=r[7]+c|0}_doFinalize(){const e=this._data.words,t=8*this._nBytes,r=8*this._data.nSigBytes;return e[r>>>5]|=128<<24-r%32,e[14+(r+64>>>9<<4)]=Math.floor(t/4294967296),e[15+(r+64>>>9<<4)]=t,this._data.nSigBytes=4*e.length,this._process(),this._hash}clone(){const t={hash:this._hash,blockSize:this._blockSize,data:this._data,nBytes:this._nBytes};return new e(t)}static hash(t,r){return new e(r).finalize(t)}},import_debounce2=__toESM(require_debounce());init_polyfills(),init_polyfills();var import_loglevel3=__toESM(require_loglevel());function getClientRectsNoOverlap(e,t){const r=e.getClientRects();return getClientRectsNoOverlap_(r,t)}function getClientRectsNoOverlap_(e,t){const r=1,n=[];for(const l of e)n.push({bottom:l.bottom,height:l.height,left:l.left,right:l.right,top:l.top,width:l.width});const i=mergeTouchingRects(n,r,t),o=removeContainedRects(i,r),s=replaceOverlappingRects(o),a=4;for(let l=s.length-1;l>=0;l--){const e=s[l],t=e.width*e.height>a;if(!t){if(!(s.length>1)){import_loglevel3.default.log("CLIENT RECT: remove small, but keep otherwise empty!");break}import_loglevel3.default.log("CLIENT RECT: remove small"),s.splice(l,1)}}return checkOverlaps(s),import_loglevel3.default.log(`CLIENT RECT: reduced ${n.length} --\x3e ${s.length}`),s}function almostEqual(e,t,r){return Math.abs(e-t)<=r}function rectIntersect(e,t){const r=Math.max(e.left,t.left),n=Math.min(e.right,t.right),i=Math.max(e.top,t.top),o=Math.min(e.bottom,t.bottom);return{bottom:o,height:Math.max(0,o-i),left:r,right:n,top:i,width:Math.max(0,n-r)}}function rectSubtract(e,t){const r=rectIntersect(t,e);if(0===r.height||0===r.width)return[e];const n=[];{const t={bottom:e.bottom,height:0,left:e.left,right:r.left,top:e.top,width:0};t.width=t.right-t.left,t.height=t.bottom-t.top,0!==t.height&&0!==t.width&&n.push(t)}{const t={bottom:r.top,height:0,left:r.left,right:r.right,top:e.top,width:0};t.width=t.right-t.left,t.height=t.bottom-t.top,0!==t.height&&0!==t.width&&n.push(t)}{const t={bottom:e.bottom,height:0,left:r.left,right:r.right,top:r.bottom,width:0};t.width=t.right-t.left,t.height=t.bottom-t.top,0!==t.height&&0!==t.width&&n.push(t)}{const t={bottom:e.bottom,height:0,left:r.right,right:e.right,top:e.top,width:0};t.width=t.right-t.left,t.height=t.bottom-t.top,0!==t.height&&0!==t.width&&n.push(t)}return n}function rectContainsPoint(e,t,r,n){return(e.left<t||almostEqual(e.left,t,n))&&(e.right>t||almostEqual(e.right,t,n))&&(e.top<r||almostEqual(e.top,r,n))&&(e.bottom>r||almostEqual(e.bottom,r,n))}function rectContains(e,t,r){return rectContainsPoint(e,t.left,t.top,r)&&rectContainsPoint(e,t.right,t.top,r)&&rectContainsPoint(e,t.left,t.bottom,r)&&rectContainsPoint(e,t.right,t.bottom,r)}function getBoundingRect(e,t){const r=Math.min(e.left,t.left),n=Math.max(e.right,t.right),i=Math.min(e.top,t.top),o=Math.max(e.bottom,t.bottom);return{bottom:o,height:o-i,left:r,right:n,top:i,width:n-r}}function rectsTouchOrOverlap(e,t,r){return(e.left<t.right||r>=0&&almostEqual(e.left,t.right,r))&&(t.left<e.right||r>=0&&almostEqual(t.left,e.right,r))&&(e.top<t.bottom||r>=0&&almostEqual(e.top,t.bottom,r))&&(t.top<e.bottom||r>=0&&almostEqual(t.top,e.bottom,r))}function mergeTouchingRects(e,t,r){for(let n=0;n<e.length;n++)for(let i=n+1;i<e.length;i++){const o=e[n],s=e[i];if(o===s){import_loglevel3.default.log("mergeTouchingRects rect1 === rect2 ??!");continue}const a=almostEqual(o.top,s.top,t)&&almostEqual(o.bottom,s.bottom,t),l=almostEqual(o.left,s.left,t)&&almostEqual(o.right,s.right,t),u=!r,c=l&&u||a&&!l,d=c&&rectsTouchOrOverlap(o,s,t);if(d){import_loglevel3.default.log(`CLIENT RECT: merging two into one, VERTICAL: ${a} HORIZONTAL: ${l} (${r})`);const n=e.filter((e=>e!==o&&e!==s)),i=getBoundingRect(o,s);return n.push(i),mergeTouchingRects(n,t,r)}}return e}function replaceOverlappingRects(e){for(let t=0;t<e.length;t++)for(let r=t+1;r<e.length;r++){const n=e[t],i=e[r];if(n!==i){if(rectsTouchOrOverlap(n,i,-1)){let t,r,o=[];const s=rectSubtract(n,i);if(1===s.length)o=s,t=n,r=i;else{const e=rectSubtract(i,n);s.length<e.length?(o=s,t=n,r=i):(o=e,t=i,r=n)}const a=[];a.push(r),Array.prototype.push.apply(a,o),checkOverlaps(a),import_loglevel3.default.log(`CLIENT RECT: overlap, cut one rect into ${o.length}`);const l=e.filter((e=>e!==t));return Array.prototype.push.apply(l,o),replaceOverlappingRects(l)}}else import_loglevel3.default.log("replaceOverlappingRects rect1 === rect2 ??!")}return e}function getRectOverlapX(e,t){return Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left))}function getRectOverlapY(e,t){return Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))}function removeContainedRects(e,t){const r=new Set(e);for(const n of e){const i=n.width>1&&n.height>1;if(i){for(const o of e)if(n!==o&&r.has(o)&&rectContains(o,n,t)){import_loglevel3.default.log("CLIENT RECT: remove contained"),r.delete(n);break}}else import_loglevel3.default.log("CLIENT RECT: remove tiny"),r.delete(n)}return Array.from(r)}function checkOverlaps(e){const t=[];for(const r of e)for(const n of e){if(r===n)continue;const e=t.indexOf(r)>=0,i=t.indexOf(n)>=0;if((!e||!i)&&rectsTouchOrOverlap(r,n,-1)){e||t.push(r),i||t.push(n),import_loglevel3.default.log("CLIENT RECT: overlap ---"),import_loglevel3.default.log(`#1 TOP:${r.top} BOTTOM:${r.bottom} LEFT:${r.left} RIGHT:${r.right} WIDTH:${r.width} HEIGHT:${r.height}`),import_loglevel3.default.log(`#2 TOP:${n.top} BOTTOM:${n.bottom} LEFT:${n.left} RIGHT:${n.right} WIDTH:${n.width} HEIGHT:${n.height}`);const o=getRectOverlapX(r,n);import_loglevel3.default.log(`xOverlap: ${o}`);const s=getRectOverlapY(r,n);import_loglevel3.default.log(`yOverlap: ${s}`)}}t.length&&import_loglevel3.default.log(`CLIENT RECT: overlaps ${t.length}`)}init_polyfills();var import_loglevel4=__toESM(require_loglevel());function getCurrentSelectionInfo(e,t){const r=e?e.getSelection():null;if(!r)return;if(r.isCollapsed)return void import_loglevel4.default.log("^^^ SELECTION COLLAPSED.");const n=r.toString(),i=n.trim().replace(/\n/g," ").replace(/\s\s+/g," ");if(0===i.length)return void import_loglevel4.default.log("^^^ SELECTION TEXT EMPTY.");if(!r.anchorNode||!r.focusNode)return;const o=1===r.rangeCount?r.getRangeAt(0):createOrderedRange(r.anchorNode,r.anchorOffset,r.focusNode,r.focusOffset);if(!o||o.collapsed)return void import_loglevel4.default.log("$$$$$$$$$$$$$$$$$ CANNOT GET NON-COLLAPSED SELECTION RANGE?!");const s=normalizeRange(o);s.startContainer!==o.startContainer&&(import_loglevel4.default.log(">>>>>>>>>>>>>>>>>>>>>>> SELECTION RANGE NORMALIZE diff: startContainer"),import_loglevel4.default.log(s.startContainer),import_loglevel4.default.log(o.startContainer)),s.startOffset!==o.startOffset&&(import_loglevel4.default.log(">>>>>>>>>>>>>>>>>>>>>>> SELECTION RANGE NORMALIZE diff: startOffset"),import_loglevel4.default.log(`${s.startOffset} !== ${o.startOffset}`)),s.endContainer!==o.endContainer&&(import_loglevel4.default.log(">>>>>>>>>>>>>>>>>>>>>>> SELECTION RANGE NORMALIZE diff: endContainer"),import_loglevel4.default.log(s.endContainer),import_loglevel4.default.log(o.endContainer)),s.endOffset!==o.endOffset&&(import_loglevel4.default.log(">>>>>>>>>>>>>>>>>>>>>>> SELECTION RANGE NORMALIZE diff: endOffset"),import_loglevel4.default.log(`${s.endOffset} !== ${o.endOffset}`));const a=convertRange(s,t);if(a)return{rangeInfo:a,cleanText:i,rawText:n,range:s};import_loglevel4.default.log("^^^ SELECTION RANGE INFO FAIL?!")}function createOrderedRange(e,t,r,n){try{const i=new Range;if(i.setStart(e,t),i.setEnd(r,n),!i.collapsed)return import_loglevel4.default.log(">>> createOrderedRange RANGE OK"),i;import_loglevel4.default.log(">>> createOrderedRange COLLAPSED ... RANGE REVERSE?");const o=new Range;return o.setStart(r,n),o.setEnd(e,t),o.collapsed?void import_loglevel4.default.log(">>> createOrderedRange RANGE REVERSE ALSO COLLAPSED?!"):(import_loglevel4.default.log(">>> createOrderedRange RANGE REVERSE OK."),i)}catch(i){return void console.warn(i.message)}}function convertRange(e,t){const r=e.startContainer.nodeType===Node.ELEMENT_NODE,n=r?e.startContainer:e.startContainer.parentNode&&e.startContainer.parentNode.nodeType===Node.ELEMENT_NODE?e.startContainer.parentNode:void 0;if(!n)return;const i=r?-1:Array.from(n.childNodes).indexOf(e.startContainer);if(i<-1)return;const o=t(n),s=e.endContainer.nodeType===Node.ELEMENT_NODE,a=s?e.endContainer:e.endContainer.parentNode&&e.endContainer.parentNode.nodeType===Node.ELEMENT_NODE?e.endContainer.parentNode:void 0;if(!a)return;const l=s?-1:Array.from(a.childNodes).indexOf(e.endContainer);if(l<-1)return;const u=t(a),c=getCommonAncestorElement(e.startContainer,e.endContainer);if(c){if(e.commonAncestorContainer){const r=e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE?e.commonAncestorContainer:e.commonAncestorContainer.parentNode;r&&r.nodeType===Node.ELEMENT_NODE&&c!==r&&(import_loglevel4.default.log(">>>>>> COMMON ANCESTOR CONTAINER DIFF??!"),import_loglevel4.default.log(t(c)),import_loglevel4.default.log(t(r)))}return u&&o?{endContainerChildTextNodeIndex:l,endContainerElementCssSelector:u,endOffset:e.endOffset,startContainerChildTextNodeIndex:i,startContainerElementCssSelector:o,startOffset:e.startOffset}:void 0}import_loglevel4.default.log("^^^ NO RANGE COMMON ANCESTOR?!")}function convertRangeInfo(e,t){const r=e.querySelector(t.startContainerElementCssSelector);if(!r)return void import_loglevel4.default.log("^^^ convertRangeInfo NO START ELEMENT CSS SELECTOR?!");let n=r;if(t.startContainerChildTextNodeIndex>=0){if(t.startContainerChildTextNodeIndex>=r.childNodes.length)return void import_loglevel4.default.log("^^^ convertRangeInfo rangeInfo.startContainerChildTextNodeIndex >= startElement.childNodes.length?!");if(n=r.childNodes[t.startContainerChildTextNodeIndex],n.nodeType!==Node.TEXT_NODE)return void import_loglevel4.default.log("^^^ convertRangeInfo startContainer.nodeType !== Node.TEXT_NODE?!")}const i=e.querySelector(t.endContainerElementCssSelector);if(!i)return void import_loglevel4.default.log("^^^ convertRangeInfo NO END ELEMENT CSS SELECTOR?!");let o=i;if(t.endContainerChildTextNodeIndex>=0){if(t.endContainerChildTextNodeIndex>=i.childNodes.length)return void import_loglevel4.default.log("^^^ convertRangeInfo rangeInfo.endContainerChildTextNodeIndex >= endElement.childNodes.length?!");if(o=i.childNodes[t.endContainerChildTextNodeIndex],o.nodeType!==Node.TEXT_NODE)return void import_loglevel4.default.log("^^^ convertRangeInfo endContainer.nodeType !== Node.TEXT_NODE?!")}return createOrderedRange(n,t.startOffset,o,t.endOffset)}function getCommonAncestorElement(e,t){if(e.nodeType===Node.ELEMENT_NODE&&e===t)return e;if(e.nodeType===Node.ELEMENT_NODE&&e.contains(t))return e;if(t.nodeType===Node.ELEMENT_NODE&&t.contains(e))return t;const r=[];let n=e.parentNode;while(n&&n.nodeType===Node.ELEMENT_NODE)r.push(n),n=n.parentNode;const i=[];n=t.parentNode;while(n&&n.nodeType===Node.ELEMENT_NODE)i.push(n),n=n.parentNode;let o=r.find((e=>i.indexOf(e)>=0));return o||(o=i.find((e=>r.indexOf(e)>=0))),o}function normalizeRange(e){const t=e.cloneRange();let r=t.startContainer,n=t.startOffset,i=t.endContainer,o=t.endOffset;r.childNodes.length&&n>0&&(r=lastLeaf(r.childNodes[n-1]),n=r.length||0),o<i.childNodes.length&&(i=firstLeaf(i.childNodes[o]),o=0);let s=firstLeaf(r),a=lastLeaf(i);function l(e){if(e.childNodes.length)return!1;const t=e.length||0;return(e!==r||n!==t)&&!(e===i&&0===o)}while(s&&!l(s)&&s!==a)s=documentForward(s);s===r?t.setStart(r,n):null!==s&&(3===s.nodeType?t.setStart(s,0):t.setStartBefore(s));while(a&&!l(a)&&a!==s)a=documentReverse(a);return a===i?t.setEnd(i,o):null!==a&&(3===a.nodeType?t.setEnd(a,a.length):t.setEndAfter(a)),t}function documentForward(e){if(e.firstChild)return e.firstChild;let t=e;while(!t.nextSibling)if(t=t.parentNode,!t)return null;return t.nextSibling}function documentReverse(e){if(e.lastChild)return e.lastChild;let t=e;while(!t.previousSibling)if(t=t.parentNode,!t)return null;return t.previousSibling}function firstLeaf(e){while(e.firstChild)e=e.firstChild;return e}function lastLeaf(e){while(e.lastChild)e=e.lastChild;return e}init_polyfills();var import_cssesc=__toESM(require_cssesc()),config,rootDocument;function uniqueCssSelector(e,t,r){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if("html"===e.tagName.toLowerCase())return e.tagName.toLowerCase();const n={className:e=>!0,idName:e=>!0,optimizedMinLength:2,root:t.body,seedMinLength:1,tagName:e=>!0,threshold:1e3};config={...n,...r},rootDocument=findRootDocument(config.root,n);let i=bottomUpSearch(e,0,(()=>bottomUpSearch(e,1,(()=>bottomUpSearch(e,2)))));if(i){const t=sort(optimize(i,e));return t.length>0&&(i=t[0]),selector(i)}throw new Error("Selector was not found.")}function findRootDocument(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}function bottomUpSearch(e,t,r){let n=null;const i=[];let o=e,s=0;while(o&&o!==config.root.parentElement){let e=maybe(id(o))||maybe(...classNames(o))||maybe(tagName(o))||[any()];const a=index(o);if(0===t)a&&(e=e.concat(e.filter(dispensableNth).map((e=>nthChild(e,a)))));else if(1===t)e=e.slice(0,1),a&&(e=e.concat(e.filter(dispensableNth).map((e=>nthChild(e,a)))));else if(2===t){const[t]=e=e.slice(0,1);a&&dispensableNth(t)&&(e=[nthChild(t,a)])}for(const t of e)t.level=s;if(i.push(e),i.length>=config.seedMinLength&&(n=findUniquePath(i,r),n))break;o=o.parentElement,s++}return n||(n=findUniquePath(i,r)),n}function findUniquePath(e,t){const r=sort(combinations(e));if(r.length>config.threshold)return t?t():null;for(const n of r)if(unique(n))return n;return null}function selector(e){let t=e[0],r=t.name;for(let n=1;n<e.length;n++){const i=e[n].level||0;r=t.level===i-1?`${e[n].name} > ${r}`:`${e[n].name} ${r}`,t=e[n]}return r}function penalty(e){return e.map((e=>e.penalty)).reduce(((e,t)=>e+t),0)}function unique(e){switch(rootDocument.querySelectorAll(selector(e)).length){case 0:throw new Error(`Can't select any node with this selector: ${selector(e)}`);case 1:return!0;default:return!1}}function id(e){const t=e.getAttribute("id");return t&&config.idName(t)?{name:"#"+(0,import_cssesc.default)(t,{isIdentifier:!0}),penalty:0}:null}function classNames(e){const t=Array.from(e.classList).filter(config.className);return t.map((e=>({name:"."+(0,import_cssesc.default)(e,{isIdentifier:!0}),penalty:1})))}function tagName(e){const t=e.tagName.toLowerCase();return config.tagName(t)?{name:t,penalty:2}:null}function any(){return{name:"*",penalty:3}}function index(e){const t=e.parentNode;if(!t)return null;let r=t.firstChild;if(!r)return null;let n=0;while(r){if(r.nodeType===Node.ELEMENT_NODE&&n++,r===e)break;r=r.nextSibling}return n}function nthChild(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function dispensableNth(e){return"html"!==e.name&&!e.name.startsWith("#")}function maybe(...e){const t=e.filter(notEmpty);return t.length>0?t:null}function notEmpty(e){return null!==e&&void 0!==e}function*combinations(e,t=[]){if(e.length>0)for(const r of e[0])yield*combinations(e.slice(1,e.length),t.concat(r));else yield t}function sort(e){return Array.from(e).sort(((e,t)=>penalty(e)-penalty(t)))}function*optimize(e,t){if(e.length>2&&e.length>config.optimizedMinLength)for(let r=1;r<e.length-1;r++){const n=[...e];n.splice(r,1),unique(n)&&same(n,t)&&(yield n,yield*optimize(n,t))}}function same(e,t){return rootDocument.querySelector(selector(e))===t}init_polyfills(),init_polyfills();var WIDTH_ATTR=24,HEIGHT_ATTR=24,VIEWBOX_ATTR="0 0 24 24",iconTemplate=(e,t,r,n="icon")=>`<svg xmlns="http://www.w3.org/2000/svg" width="${WIDTH_ATTR}" height="${HEIGHT_ATTR}" viewBox="${VIEWBOX_ATTR}" preserveAspectRatio="xMidYMid meet" role="img" class="${n}" aria-labelledBy="${e}">\n  <title id="${e}">${t}</title>\n  ${r}\n</svg>`,iconTemplateWithViewBox=(e,t,r,n,i="icon")=>`<svg xmlns="http://www.w3.org/2000/svg" width="${WIDTH_ATTR}" height="${WIDTH_ATTR}" viewBox="${n}" preserveAspectRatio="xMidYMid meet" role="img" class="${i}" aria-labelledBy="${e}">\n  <title id="${e}">${t}</title>\n  ${r}\n</svg>`,iconTemplateColored=(e,t,r,n="icon",i,o)=>`<svg xmlns="http://www.w3.org/2000/svg" width="${i}" height="${i}" viewBox="${VIEWBOX_ATTR}" style="fill:${o}" preserveAspectRatio="xMidYMid meet" role="img" class="${n}" aria-labelledBy="${e}">\n  <title id="${e}">${t}</title>\n  ${r}\n</svg>`,icons={error:iconTemplate("error-icon","Warning",'<path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>'),home:'<path d="M12 5.69l5 4.5V18h-2v-6H9v6H7v-7.81l5-4.5M12 3L2 12h3v8h6v-6h2v6h6v-8h3L12 3z"/>',expand:iconTemplate("expand-icon","Enter fullscreen",'<path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>',"icon active-icon"),loading:iconTemplateWithViewBox("loading-icon","Loading",'<path fill="#BBBBBB" d="M145,241.6c-53.3,0-96.6-43.2-96.6-96.6c0-53.3,43.2-96.6,96.6-96.6c53.3,0,96.6,43.2,96.6,96.6 c0,26.7-10.8,50.9-28.3,68.3l7.6,7.6c19.4-19.4,31.5-46.3,31.5-75.9c0-59.3-48-107.3-107.3-107.3S37.7,85.7,37.7,145 c0,59.3,48,107.3,107.3,107.3V241.6z"/>',"0 0 290 290"),next:iconTemplate("next-icon","Next Chapter",'<path d="M6.49 20.13l1.77 1.77 9.9-9.9-9.9-9.9-1.77 1.77L14.62 12l-8.13 8.13z"/>'),previous:iconTemplate("previous-icon","Previous Chapter",'<path d="M17.51 3.87L15.73 2.1 5.84 12l9.9 9.9 1.77-1.77L9.38 12l8.13-8.13z"/>'),settings:iconTemplate("settings-icon","Settings",'<path d="M19.43 12.98c.04-.32.07-.64.07-.98 0-.34-.03-.66-.07-.98l2.11-1.65c.19-.15.24-.42.12-.64l-2-3.46c-.09-.16-.26-.25-.44-.25-.06 0-.12.01-.17.03l-2.49 1c-.52-.4-1.08-.73-1.69-.98l-.38-2.65C14.46 2.18 14.25 2 14 2h-4c-.25 0-.46.18-.49.42l-.38 2.65c-.61.25-1.17.59-1.69.98l-2.49-1c-.06-.02-.12-.03-.18-.03-.17 0-.34.09-.43.25l-2 3.46c-.13.22-.07.49.12.64l2.11 1.65c-.04.32-.07.65-.07.98 0 .33.03.66.07.98l-2.11 1.65c-.19.15-.24.42-.12.64l2 3.46c.09.16.26.25.44.25.06 0 .12-.01.17-.03l2.49-1c.52.4 1.08.73 1.69.98l.38 2.65c.03.24.24.42.49.42h4c.25 0 .46-.18.49-.42l.38-2.65c.61-.25 1.17-.59 1.69-.98l2.49 1c.06.02.12.03.18.03.17 0 .34-.09.43-.25l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.65zm-1.98-1.71c.04.31.05.52.05.73 0 .21-.02.43-.05.73l-.14 1.13.89.7 1.08.84-.7 1.21-1.27-.51-1.04-.42-.9.68c-.43.32-.84.56-1.25.73l-1.06.43-.16 1.13-.2 1.35h-1.4l-.19-1.35-.16-1.13-1.06-.43c-.43-.18-.83-.41-1.23-.71l-.91-.7-1.06.43-1.27.51-.7-1.21 1.08-.84.89-.7-.14-1.13c-.03-.31-.05-.54-.05-.74s.02-.43.05-.73l.14-1.13-.89-.7-1.08-.84.7-1.21 1.27.51 1.04.42.9-.68c.43-.32.84-.56 1.25-.73l1.06-.43.16-1.13.2-1.35h1.39l.19 1.35.16 1.13 1.06.43c.43.18.83.41 1.23.71l.91.7 1.06-.43 1.27-.51.7 1.21-1.07.85-.89.7.14 1.13zM12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>',"icon open"),toc:iconTemplate("toc-icon","Table of Contents",'<path d="M3 9h14V7H3v2zm0 4h14v-2H3v2zm0 4h14v-2H3v2zm16 0h2v-2h-2v2zm0-10v2h2V7h-2zm0 6h2v-2h-2v2z"/>',"icon open"),bookmarks:iconTemplate("toc-icon","Bookmarks",'<path d="M4,6H2v16h16v-2H4V6z"/><path d="M22,2H6v16h16V2z M20,12l-2.5-1.5L15,12V4h5V12z"/>',"icon open"),bookmark:iconTemplate("toc-icon","Bookmark",'<path d="M19,3H5v18l7-3l7,3V3z"/>',"icon open"),delete:iconTemplate("delete-icon","Delete",'<path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>',"icon open"),close:iconTemplate("close-icon","Close",'<path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>',"icon open"),text:iconTemplate("text-icon","Text",'<path d="M5 4v3h5.5v12h3V7H19V4z"/>',"icon open"),speak:iconTemplate("speak-icon","Speak",'<circle cx="9" cy="9" r="4"/><path d="M9 15c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4zm7.76-9.64l-1.68 1.69c.84 1.18.84 2.71 0 3.89l1.68 1.69c2.02-2.02 2.02-5.07 0-7.27zM20.07 2l-1.63 1.63c2.77 3.02 2.77 7.56 0 10.74L20.07 16c3.9-3.89 3.91-9.95 0-14z"/><path d="M0 0h24v24H0z" fill="none"/>',"icon open"),note:iconTemplate("note-icon","Note",'<polygon points="17.71 24.66 22.3 20.07 17.71 20.07 17.71 24.66" fill="none"/><path d="M22.42.07H5.58A3.28,3.28,0,0,0,2.29,3.35V24.79a3.28,3.28,0,0,0,3.29,3.28H16.71a1,1,0,0,0,.71-.29l8-8a1,1,0,0,0,.29-.71V3.35A3.28,3.28,0,0,0,22.42.07Zm-8.17,15h-7v-2h7Zm-7-6v-2h13v2ZM16.5,25.86v-6a1,1,0,0,1,1-1h6Z" />',"icon open"),highlight:iconTemplate("highlight-icon","Highlight",'<path d="M27.71,7.78,21.12,1.19a1,1,0,0,0-1.38,0L4.32,15A1,1,0,0,0,4,15.7a1,1,0,0,0,.3.73c1.22,1.22,1.2,2.37,0,3.62a1,1,0,0,0,0,1.41l3.2,3.2a1,1,0,0,0,1.41,0c1.28-1.28,2.36-1.29,3.62,0a1,1,0,0,0,1.45,0L27.74,9.16A1,1,0,0,0,27.71,7.78Z" /><path d="M3.09,22.59l-2.8,2.8a1,1,0,0,0-.21,1.09A1,1,0,0,0,1,27.1H4.6a1,1,0,0,0,.71-.29l1-1Z" />',"icon open")},lodash=__toESM(require_lodash()),import_loglevel5=__toESM(require_loglevel()),HighlightContainer=(e=>(e["R2_ID_HIGHLIGHTS_CONTAINER"]="R2_ID_HIGHLIGHTS_CONTAINER",e["R2_ID_BOOKMAKRS_CONTAINER"]="R2_ID_BOOKMAKRS_CONTAINER",e["R2_ID_READALOUD_CONTAINER"]="R2_ID_READALOUD_CONTAINER",e["R2_ID_PAGEBREAK_CONTAINER"]="R2_ID_PAGEBREAK_CONTAINER",e["R2_ID_SEARCH_CONTAINER"]="R2_ID_SEARCH_CONTAINER",e["R2_ID_DEFINITIONS_CONTAINER"]="R2_ID_DEFINITIONS_CONTAINER",e["R2_ID_LINEFOCUS_CONTAINER"]="R2_ID_LINEFOCUS_CONTAINER",e["R2_ID_GUTTER_RIGHT_CONTAINER"]="R2_ID_GUTTER_RIGHT_CONTAINER",e))(HighlightContainer||{}),CLASS_HIGHLIGHT_CONTAINER="R2_CLASS_HIGHLIGHT_CONTAINER",CLASS_HIGHLIGHT_BOUNDING_AREA="R2_CLASS_HIGHLIGHT_BOUNDING_AREA",CLASS_HIGHLIGHT_AREA="R2_CLASS_HIGHLIGHT_AREA",CLASS_HIGHLIGHT_ICON="R2_CLASS_HIGHLIGHT_ICON",DEFAULT_BACKGROUND_COLOR_OPACITY=.5,ALT_BACKGROUND_COLOR_OPACITY=.75,DEFAULT_BACKGROUND_COLOR={blue:100,green:50,red:230},_highlights=[],DATA_ATTR="data-highlighted",TIMESTAMP_ATTR="data-timestamp",NODE_TYPE={ELEMENT_NODE:1,TEXT_NODE:3},_blacklistIdClassForCssSelectors=["R2_ID_HIGHLIGHTS_CONTAINER","R2_ID_PAGEBREAK_CONTAINER","R2_ID_SEARCH_CONTAINER","R2_ID_READALOUD_CONTAINER","R2_ID_BOOKMAKRS_CONTAINER","R2_ID_DEFINITIONS_CONTAINER","R2_ID_LINEFOCUS_CONTAINER","R2_ID_GUTTER_RIGHT_CONTAINER",CLASS_HIGHLIGHT_CONTAINER,CLASS_HIGHLIGHT_AREA,CLASS_HIGHLIGHT_BOUNDING_AREA],lastMouseDownX=-1,lastMouseDownY=-1,TextHighlighter=class e{constructor(e,t,r,n,i){this.lastSelectedHighlight=void 0,this.activeAnnotationMarkerId=void 0,this.showTool=(0,import_debounce2.debounce)((e=>{this.isAndroid()||this.snapSelectionToWord(e),this.toolboxShow()}),navigator.userAgent.toLowerCase().indexOf("firefox")>-1?200:100),this.isSelectionMenuOpen=!1,this.selectionMenuOpened=(0,import_debounce2.debounce)((()=>{var e,t;this.isSelectionMenuOpen||(this.isSelectionMenuOpen=!0,(null==(e=this.api)?void 0:e.selectionMenuOpen)&&(null==(t=this.api)||t.selectionMenuOpen()),this.navigator.emit("toolbox.opened","opened"))}),100),this.selectionMenuClosed=(0,import_debounce2.debounce)((()=>{var e,t;this.isSelectionMenuOpen&&(this.isSelectionMenuOpen=!1,(null==(e=this.api)?void 0:e.selectionMenuClose)&&(null==(t=this.api)||t.selectionMenuClose()),this.navigator.emit("toolbox.closed","closed"))}),100),this.selection=(0,import_debounce2.debounce)(((e,t)=>{var r,n;(null==(r=this.api)?void 0:r.selection)&&(null==(n=this.api)||n.selection(e,t))}),100),this.getScrollingElement=e=>(null==e?void 0:e.scrollingElement)?null==e?void 0:e.scrollingElement:(null==e?void 0:e.body)?null==e?void 0:e.body:document.createElement("body"),this.layerSettings=e,this.properties=t,void 0===this.properties.menuPosition&&(this.properties.menuPosition="inline"),this.api=i,this.hasEventListener=r,this.options=this.defaults(n,{color:"#fce300",highlightedClass:"highlighted",contextClass:"highlighter-context",onBeforeHighlight:function(){return!0},onAfterHighlight:function(){}})}static async create(e){const t=new this(e.layerSettings,e,!1,{},e.api);return new Promise((e=>e(t)))}async initialize(e){var t;let r=e.contentDocument;r&&this.dom(r.body).addClass(this.options.contextClass),this.bindEvents(null==(t=e.contentDocument)?void 0:t.body,this,this.hasEventListener),this.initializeToolbox(),lastMouseDownX=-1,lastMouseDownY=-1;let n=this;async function i(){void 0===n.lastSelectedHighlight||(n.lastSelectedHighlight=void 0)}setTimeout((async()=>{var t;let r=e.contentDocument;r&&await(null==(t=r.body)?void 0:t.addEventListener("click",i))}),100)}haveSameColor(e,t){return this.dom(e).color()===this.dom(t).color()}defaults(e,t){e=e||{};for(let r in t)t.hasOwnProperty(r)&&void 0===e[r]&&(e[r]=t[r]);return e}unique(e){return e.filter((function(e,t,r){return r.indexOf(e)===t}))}refineRangeBoundaries(e){let t=e.startContainer,r=e.endContainer,n=e.commonAncestorContainer,i=!0;if(0===e.endOffset){while(!r.previousSibling&&r.parentNode!==n)r=r.parentNode;r=r.previousSibling}else r.nodeType===NODE_TYPE.TEXT_NODE?e.endOffset<r.nodeValue.length&&r.splitText(e.endOffset):e.endOffset>0&&(r=r.childNodes.item(e.endOffset-1));return t.nodeType===NODE_TYPE.TEXT_NODE?e.startOffset===t.nodeValue.length?i=!1:e.startOffset>0&&(t=t.splitText(e.startOffset),r===t.previousSibling&&(r=t)):t=e.startOffset<t.childNodes.length?t.childNodes.item(e.startOffset):t.nextSibling,{startContainer:t,endContainer:r,goDeeper:i}}sortByDepth(e,t){let r=this;e.sort((function(e,n){return r.dom(t?n:e).parents().length-r.dom(t?e:n).parents().length}))}groupHighlights(e){let t=[],r={},n=[];return e.forEach((function(e){let n=e.getAttribute(TIMESTAMP_ATTR);"undefined"===typeof r[n]&&(r[n]=[],t.push(n)),r[n].push(e)})),t.forEach((function(e){let t=r[e];n.push({chunks:t,timestamp:e,toString:function(){return t.map((function(e){return e.textContent})).join("")}})})),n}dom(e){let t=this;return{addClass:function(t){e.classList?e.classList.add(t):e.className+=" "+t},removeClass:function(t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t+"(\\b|$)","gi")," ")},prepend:function(t){let r=Array.prototype.slice.call(t),n=r.length;while(n--)e.insertBefore(r[n],e.firstChild)},append:function(t){let r=Array.prototype.slice.call(t);for(let n=0,i=r.length;n<i;++n)e.appendChild(r[n])},insertAfter:function(t){var r;return null==(r=t.parentNode)?void 0:r.insertBefore(e,t.nextSibling)},insertBefore:function(t){var r;return null==(r=t.parentNode)?void 0:r.insertBefore(e,t)},remove:function(){e.parentNode.removeChild(e),e=null},contains:function(t){return e!==t&&e.contains(t)},wrap:function(t){return e.parentNode&&e.parentNode.insertBefore(t,e),t.appendChild(e),t},unwrap:function(){let r,n=Array.prototype.slice.call(e.childNodes);return n.forEach((function(e){r=e.parentNode,t.dom(e).insertBefore(e.parentNode),t.dom(r).remove()})),n},parents:function(){let t,r=[];while(t=e.parentNode)r.push(t),e=t;return r},normalizeTextNodes:function(){if(e){if(e.nodeType===NODE_TYPE.TEXT_NODE)while(e.nextSibling&&e.nextSibling.nodeType===NODE_TYPE.TEXT_NODE)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else t.dom(e.firstChild).normalizeTextNodes();t.dom(e.nextSibling).normalizeTextNodes()}},color:function(){return e.style.backgroundColor},fromHTML:function(e){let t=document.createElement("div");return t.innerHTML=e,t.childNodes},getRange:function(){var r;let n,i=null==(r=t.dom(e))?void 0:r.getSelection();return(null==i?void 0:i.rangeCount)>0&&(n=null==i?void 0:i.getRangeAt(0)),n},removeAllRanges:function(){var r;let n=null==(r=t.dom(e))?void 0:r.getSelection();null==n||n.removeAllRanges(),t.toolboxHide()},getSelection:function(){var r;return null==(r=t.dom(e).getWindow())?void 0:r.getSelection()},getWindow:function(){var r;return null==(r=t.dom(e).getDocument())?void 0:r.defaultView},getDocument:function(){return(null==e?void 0:e.ownerDocument)||e}}}disableContext(e){return e.preventDefault(),e.stopPropagation(),!1}bindEvents(e,t,r){let n=e.ownerDocument;e.addEventListener("mouseup",this.toolboxShowDelayed.bind(this)),e.addEventListener("touchend",this.toolboxShowDelayed.bind(this)),n.addEventListener("mouseup",this.toolboxShowDelayed.bind(this)),n.addEventListener("touchend",this.toolboxShowDelayed.bind(this)),r||window.addEventListener("resize",this.toolboxPlacement.bind(this)),n.addEventListener("selectionchange",this.toolboxPlacement.bind(this)),n.addEventListener("selectionchange",this.toolboxShowDelayed.bind(this)),e.addEventListener("mousedown",this.toolboxHide.bind(this)),e.addEventListener("touchstart",this.toolboxHide.bind(this)),this.isAndroid()&&e.addEventListener("contextmenu",this.disableContext),e.addEventListener("mousedown",this.mousedown.bind(this)),e.addEventListener("mouseup",this.mouseup.bind(this)),e.addEventListener("touchstart",this.mousedown.bind(this)),e.addEventListener("touchend",this.mouseup.bind(this)),this.hasEventListener=!0}async mousedown(e){var t;if(lastMouseDownX=e.clientX,lastMouseDownY=e.clientY,null==(t=this.properties)?void 0:t.preventScrollOnSelection){const e=findRequiredElement(document,"#iframe-wrapper");e.style.overflow="hidden"}}async mouseup(e){Math.abs(lastMouseDownX-e.clientX)<3&&Math.abs(lastMouseDownY-e.clientY)<3&&await this.processMouseEvent(e)}async mousemove(e){await this.processMouseEvent(e)}unbindEvents(e,t){let r=e.ownerDocument;e.removeEventListener("mouseup",this.toolboxShowDelayed.bind(this)),e.removeEventListener("touchend",this.toolboxShowDelayed.bind(this)),r.removeEventListener("mouseup",this.toolboxShowDelayed.bind(this)),r.removeEventListener("touchend",this.toolboxShowDelayed.bind(this)),window.removeEventListener("resize",this.toolboxPlacement.bind(this)),r.removeEventListener("selectionchange",this.toolboxPlacement.bind(this)),e.removeEventListener("mousedown",this.toolboxHide.bind(this)),e.removeEventListener("touchstart",this.toolboxHide.bind(this)),this.isAndroid()&&e.removeEventListener("contextmenu",this.disableContext),e.removeEventListener("mousedown",this.mousedown.bind(this)),e.removeEventListener("mouseup",this.mouseup.bind(this)),e.removeEventListener("mousemove",this.mousemove.bind(this)),e.removeEventListener("touchstart",this.mousedown.bind(this)),e.removeEventListener("touchend",this.mouseup.bind(this)),e.removeEventListener("touchmove",this.mousemove.bind(this)),this.hasEventListener=!1}destroy(){this.toolboxHide();let e=this.navigator.iframes[0].contentDocument;e&&(this.unbindEvents(e.body,this),this.dom(e.body).removeClass(this.options.contextClass))}initializeToolbox(){let t=document.getElementById("highlight-toolbox-mode-colors"),r=document.getElementById("highlight-toolbox-mode-add"),n=["#fce300","#48e200","#00bae5","#157cf9","#6a39b7","#ea426a","#ff8500"],i=document.getElementById("colorIcon"),o=document.getElementById("actionIcon"),s=document.getElementById("dismissIcon"),a=document.getElementById("collapseIcon"),l=document.getElementById("highlightIcon"),u=this;if(s&&(s.innerHTML=icons.close,s.addEventListener("click",(function(){u.toolboxMode("add")}))),a&&(a.innerHTML=icons.close,a.addEventListener("click",(function(){u.toolboxMode("add")}))),i){i.style.position="relative",i.style.zIndex="20",n.forEach((e=>{let n=document.getElementById(e),i=document.getElementById(`c${e}`);n&&(null==t?void 0:t.contains(n))&&t.removeChild(n),r&&i&&r.contains(i)&&r.removeChild(i)}));const o=[],a=[];if(i.addEventListener("click",(function(){u.toolboxMode("colors")})),this.navigator.rights.enableAnnotations){let t=10;n.forEach((n=>{t--;const o=null==i?void 0:i.cloneNode(!0),s=o.lastChild;let u=e.hexToRgbChannels(n);s.style.backgroundColor="rgba("+[u.red,u.green,u.blue].join(",")+",.5)",o.id=`c${n}`,o.style.display="unset",o.style.position="relative",o.style.zIndex=`${t}`,o.style.marginLeft="-30px",a.push(o),null==r||r.insertBefore(o,l)}))}n.forEach((e=>{const r=null==i?void 0:i.cloneNode(!0),n=r.lastChild;n.style.backgroundColor=e,r.id=e,r.style.position="relative",r.style.display="unset",o.push(r),i&&r.addEventListener("click",(function(){var t,r,n;u.setColor(e);let o=null==i?void 0:i.lastChild;o&&(o.style.backgroundColor=e);const s=document.getElementById("highlightIcon"),a=document.getElementById("underlineIcon"),l=document.getElementById("noteIcon");((null==(t=null==s?void 0:s.getElementsByTagName)?void 0:t.call(s,"span").length)??0)>0&&((null==s?void 0:s.getElementsByTagName("span")[0]).style.background=u.getColor()),((null==(r=null==a?void 0:a.getElementsByTagName)?void 0:r.call(a,"span").length)??0)>0&&((null==a?void 0:a.getElementsByTagName("span")[0]).style.borderBottomColor=u.getColor()),((null==(n=null==l?void 0:l.getElementsByTagName)?void 0:n.call(l,"span").length)??0)>0&&((null==l?void 0:l.getElementsByTagName("span")[0]).style.borderBottomColor=u.getColor()),u.toolboxMode("add")})),null==t||t.insertBefore(r,s)}))}o&&o.addEventListener("click",(function(){u.toolboxMode("action")})),u.toolboxMode("add")}toolboxMode(e){let t=document.getElementById("highlight-toolbox-mode-colors"),r=document.getElementById("highlight-toolbox-mode-add"),n=document.getElementById("highlight-toolbox-mode-edit"),i=document.getElementById("highlight-toolbox-mode-action");switch(e){case"colors":t&&(t.style.display="unset"),r&&(r.style.display="none"),n&&(n.style.display="none"),i&&(i.style.display="none");break;case"edit":t&&(t.style.display="none"),r&&(r.style.display="none"),n&&(n.style.display="unset"),i&&(i.style.display="none");break;case"action":t&&(t.style.display="none"),r&&(r.style.display="none"),n&&(n.style.display="none"),i&&(i.style.display="unset");break;default:t&&(t.style.display="none"),r&&(r.style.display="unset"),n&&(n.style.display="none"),i&&(i.style.display="none");break}}toolboxHide(){var e;let t=document.getElementById("highlight-toolbox");if(t&&(t.style.display="none"),this.selectionMenuClosed(),null==(e=this.properties)?void 0:e.preventScrollOnSelection){const e=findRequiredElement(document,"#iframe-wrapper");e.style.overflow="auto"}}toolboxShowDelayed(e){this.showTool(1===e.detail)}snapSelectionToWord(e=!1){var t;let r=this,n=this.navigator.iframes[0].contentDocument;if(n){let o=null==(t=r.dom(n.body))?void 0:t.getSelection();if(r.dom(n.body)&&o&&!(null==o?void 0:o.isCollapsed)){let t=function(e){const t=e.match(new RegExp("[^a-zA-Z0-9]+$"));return t&&t.index?e.slice(0,t.index):e},r=o.toString(),n=r.length-r.trimStart().length,s=r.length-r.trimEnd().length,a=r.length;var i=/[-!$%^&*()_+|~=`{}[\]:/;<>?,.@#]/;r=r.replace(i,""),n=a-r.trimStart().length,r=t(r),s=a-r.trimEnd().length;let l=document.createRange();e?(l.setStart(o.anchorNode,o.anchorOffset+n),l.setEnd(o.focusNode,o.focusOffset-s)):(l.setStart(o.anchorNode,o.anchorOffset),l.setEnd(o.focusNode,o.focusOffset));let u=l.collapsed;l.detach();let c,d=o.focusNode;e?(c=o.focusOffset-s,o.collapse(o.anchorNode,o.anchorOffset+n)):(c=o.focusOffset,o.collapse(o.anchorNode,o.anchorOffset));let h=["forward","backward"];u&&(h=["backward","forward"]),e?(o.modify("move",h[0],"character"),o.modify("move",h[1],"word"),o.extend(d,c),o.modify("extend",h[1],"character"),o.modify("extend",h[0],"word")):o.extend(d,c),this.selection(o.toString(),o)}return o}}toolboxShow(){var e;if(void 0===this.activeAnnotationMarkerId){let t=this,r=document.getElementById("highlight-toolbox-mode-add"),n=this.dom(null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.body).getRange();if((!n||n.collapsed)&&r)return void("none"!==getComputedStyle(r).display&&t.toolboxHide());this.isIOS()&&setTimeout((function(){let e=t.navigator.iframes[0].contentDocument;if(e){let r=t.dom(e.body).getSelection();r.removeAllRanges(),setTimeout((function(){var e,i;function o(e){const r={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let n=t.navigator.iframes[0].contentDocument;return n?uniqueCssSelector(e,n,r):void 0}r.addRange(n);let s=t.navigator.iframes[0].contentWindow;const a=getCurrentSelectionInfo(s,o);null==(i=null==(e=t.navigator.annotationModule)?void 0:e.annotator)||i.saveTemporarySelectionInfo(a)}),5)}}),100),this.toolboxPlacement(),this.toolboxHandler()}}toolboxPlacement(){var e,t,r,n,i;let o=this.dom(null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.body).getRange();if(!o||o.collapsed)return;let s=o.getBoundingClientRect(),a=document.getElementById("highlight-toolbox");if(a)if("top"===(null==(t=this.properties)?void 0:t.menuPosition))a.style.left="0px",a.style.transform="revert",a.style.width="100%",a.style.textAlign="center",a.style.position="absolute",a.style.setProperty("--content","revert");else if("bottom"===(null==(r=this.properties)?void 0:r.menuPosition))a.style.bottom="0px",a.style.left="0px",a.style.transform="revert",a.style.width="100%",a.style.textAlign="center",a.style.position="absolute",a.style.setProperty("--content","revert");else{const e=null==(n=this.navigator.view)?void 0:n.isPaginated();a.style.top=e?s.top+((null==(i=this.navigator.attributes)?void 0:i.navHeight)??0)+"px":s.top+"px",a.style.left=(s.right-s.left)/2+s.left+"px"}}toolboxHandler(){var e,t,r,n,i,o,s;let a=document.getElementById("highlight-toolbox");if(a&&"none"===getComputedStyle(a).display){a.style.display="block";const l=null==(e=this.navigator.view)?void 0:e.isPaginated();a.style.position=l?"absolute":"relative",this.selectionMenuOpened();let u=this;u.toolboxMode("add");let c=document.getElementById("highlightIcon"),d=document.getElementById("collapseIcon"),h=document.getElementById("underlineIcon"),p=document.getElementById("noteIcon"),f=document.getElementById("colorIcon"),g=document.getElementById("speakIcon");if(this.navigator.rights.enableAnnotations){if(c&&(c.style.display="unset",f&&c.getElementsByTagName("span").length>0&&(c.getElementsByTagName("span")[0].style.background=this.getColor())),h&&(h.style.display="unset",f&&h.getElementsByTagName("span").length>0&&(h.getElementsByTagName("span")[0].style.borderBottomColor=this.getColor())),p&&(p.style.display="unset",f&&p.getElementsByTagName("span").length>0&&(p.getElementsByTagName("span")[0].style.borderBottomColor=this.getColor())),f){f.style.display="unset";let e=f.lastChild;e.style.backgroundColor=this.getColor()}if(c){let e=function(){u.doHighlight(!1,0),u.toolboxHide(),null==c||c.removeEventListener("click",e)};const r=c.cloneNode(!0);null==(t=null==c?void 0:c.parentNode)||t.replaceChild(r,c),c=document.getElementById("highlightIcon"),null==c||c.addEventListener("click",e)}if(h){let e=function(){u.doHighlight(!1,1),u.toolboxHide(),null==h||h.removeEventListener("click",e)};const t=h.cloneNode(!0);null==(r=null==h?void 0:h.parentNode)||r.replaceChild(t,h),h=document.getElementById("underlineIcon"),null==h||h.addEventListener("click",e)}if(p){let e=function(){u.doHighlight(!1,4),u.toolboxHide(),null==p||p.removeEventListener("click",e)};const t=p.cloneNode(!0);null==(n=null==p?void 0:p.parentNode)||n.replaceChild(t,p),p=document.getElementById("noteIcon"),null==p||p.addEventListener("click",e)}}else c&&c.style.setProperty("display","none"),h&&h.style.setProperty("display","none"),p&&p.style.setProperty("display","none"),f&&f.style.setProperty("display","none"),d&&d.style.setProperty("display","none");if(this.navigator.rights.enableTTS){if(g){let e=function(){null==g||g.removeEventListener("click",e),u.speak()};const t=g.cloneNode(!0);null==(i=null==g?void 0:g.parentNode)||i.replaceChild(t,g),g=document.getElementById("speakIcon"),null==g||g.addEventListener("click",e)}}else g&&g.style.setProperty("display","none");((null==(o=this.properties)?void 0:o.selectionMenuItems)??1)&&((null==(s=this.properties)?void 0:s.selectionMenuItems)??[]).forEach((e=>{var t;e.icon&&(e.icon.id=e.id);let r=document.getElementById(e.id);const n=this;function i(){var t,o,s,a,l,u,c;function d(e){const t={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let r=n.navigator.iframes[0].contentDocument;return r?uniqueCssSelector(e,r,t):void 0}null==r||r.removeEventListener("click",i);let h=n.navigator.iframes[0].contentWindow;if(h){let r=getCurrentSelectionInfo(h,d);if(void 0===r){let e=n.navigator.iframes[0].contentDocument;r=null==(o=null==(t=n.navigator.annotationModule)?void 0:t.annotator)?void 0:o.getTemporarySelectionInfo(e)}if(void 0!==r)if(e.callback)e.callback(r.cleanText,null==(s=r.range)?void 0:s.startContainer.parentElement);else{let t=null==(a=e.highlight)?void 0:a.style,i=e.marker?e.marker:3;if(3===i&&n.navigator.rights.enableAnnotations||2===i&&n.navigator.rights.enableBookmarks){let o=n.navigator.iframes[0].contentDocument;if(o){let s=n.createHighlight(n.dom(o.body).getWindow(),r,null==(l=e.highlight)?void 0:l.color,!0,i,e.icon,e.popup,t);n.options.onAfterHighlight(s,i),n.navigator.rights.enableAnnotations?null==(u=n.navigator.annotationModule)||u.saveAnnotation(s[0]).then((t=>{var r,i;(null==e?void 0:e.note)&&t.highlight&&(null==(i=null==(r=n.navigator.annotationModule)?void 0:r.api)||i.addCommentToAnnotation(t).then((e=>{var t;null==(t=n.navigator.annotationModule)||t.updateAnnotation(e).then((async()=>{import_loglevel5.default.log("update highlight "+e.id)}))})))})):n.navigator.rights.enableBookmarks&&(null==(c=n.navigator.bookmarkModule)||c.saveAnnotation(s[0]))}}}}n.callbackComplete()}if(r){const n=r.cloneNode(!0);null==(t=null==r?void 0:r.parentNode)||t.replaceChild(n,r),r=document.getElementById(e.id),null==r||r.addEventListener("click",i)}}))}}doHighlight(t,r){var n,i,o,s,a,l;let u=this;function c(e){const t={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let r=u.navigator.iframes[0].contentDocument;return r?uniqueCssSelector(e,r,t):void 0}let d=u.navigator.iframes[0].contentWindow;if(d){let h=getCurrentSelectionInfo(d,c);if(void 0===h){let e=u.navigator.iframes[0].contentDocument;h=null==(i=null==(n=this.navigator.annotationModule)?void 0:n.annotator)?void 0:i.getTemporarySelectionInfo(e)}if(h){if(!0===this.options.onBeforeHighlight(h)){let t;t=this.getColor(),e.isHexColor(t)&&(t=e.hexToRgbChannels(t));let n=u.navigator.iframes[0].contentDocument;if(n){let e=this.createHighlight(u.dom(n.body).getWindow(),h,t,!0,r??0);this.options.onAfterHighlight(e,r),this.navigator.rights.enableAnnotations&&2!==r?null==(o=this.navigator.annotationModule)||o.saveAnnotation(e[0]):this.navigator.rights.enableBookmarks&&2===r&&(null==(s=this.navigator.bookmarkModule)||s.saveAnnotation(e[0]))}}t||this.dom(null==(a=this.navigator.iframes[0].contentDocument)?void 0:a.body).removeAllRanges()}else t||this.dom(null==(l=this.navigator.iframes[0].contentDocument)?void 0:l.body).removeAllRanges()}}speak(){var e,t;if(this.navigator.rights.enableTTS){let r=function(e){const t={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let r=n.navigator.iframes[0].contentDocument;return r?uniqueCssSelector(e,r,t):void 0},n=this,i=n.navigator.iframes[0].contentWindow;if(i){let o=getCurrentSelectionInfo(i,r);if(void 0===o){let r=n.navigator.iframes[0].contentDocument;o=null==(t=null==(e=n.navigator.annotationModule)?void 0:e.annotator)?void 0:t.getTemporarySelectionInfo(r)}void 0!==o&&this.navigator.ttsModule.speak(o,!0,(()=>{}))}let o=n.navigator.iframes[0].contentDocument;if(o){const e=n.dom(o.body).getSelection();e.removeAllRanges()}const s=document.getElementById("highlight-toolbox");s&&(s.style.display="none"),this.selectionMenuClosed()}}stopReadAloud(){this.navigator.rights.enableTTS&&this.doneSpeaking()}callbackComplete(){this.toolboxHide();let e=this.navigator.iframes[0].contentDocument;e&&this.dom(e.body).removeAllRanges()}isOutsideViewport(e){let t=findRequiredElement(document,"#iframe-wrapper");const r=t.scrollLeft,n=r+t.clientWidth,i=e.left+e.width,o=e.top+e.height,s=t.scrollTop,a=s+t.clientHeight,l=o<s,u=e.top>a,c=i<r,d=e.left>n;return l||u||c||d}isInsideViewport(e){let t=findRequiredElement(document,"#iframe-wrapper");const r=t.scrollTop,n=r+t.clientHeight,i=e.top+20>=r,o=e.top<=n,s=t.scrollLeft,a=s+t.clientWidth,l=e.left+e.width,u=e.left>s,c=l<a;return i&&o&&u&&c}get visibleTextRects(){let e=this.navigator.iframes[0].contentDocument;if(e){let t=function(e,r=[]){var n;let i=e.firstChild;while(i)1===i.nodeType&&t(i,r),3===i.nodeType&&(null==(n=i.textContent)?void 0:n.trim())&&r.push(i),i=i.nextSibling;return r},r=function(e){const r=t(e);return r.map((e=>{const{top:t,height:r,left:i,width:o}=n(e);return{top:t,height:r,width:o,left:i,node:e,textContent:e.textContent??""}}))},n=function(e){try{const t=document.createRange();t.selectNode(e);const r=t.getBoundingClientRect();return t.detach(),r}catch(t){import_loglevel5.default.log("measureTextNode "+t),import_loglevel5.default.log("measureTextNode "+e),import_loglevel5.default.log(`${e.textContent}`)}};const i=findRequiredIframeElement(e,"body"),o=r(i);return o.filter((e=>this.isInsideViewport(e)))}return[]}doneSpeaking(e=!1){if(this.navigator.rights.enableTTS){this.toolboxHide();let t=this.navigator.iframes[0].contentDocument;t&&this.dom(t.body).removeAllRanges(),this.navigator.ttsModule.cancel(),e&&this.navigator.reload()}}normalizeHighlights(e){var t;return t=e.filter((function(e){return e.parentElement?e:null})),t=this.unique(t),t.sort((function(e,t){return e.offsetTop-t.offsetTop||e.offsetLeft-t.offsetLeft})),t}flattenNestedHighlights(e){let t,r=this;function n(){let t=!1;return e.forEach((function(n,i){let o=n.parentElement,s=o.previousSibling,a=o.nextSibling;r.isHighlight(o)&&(r.haveSameColor(o,n)?(o.replaceChild(n.firstChild,n),e[i]=o,t=!0):(n.nextSibling||(r.dom(n).insertBefore(a||o),t=!0),n.previousSibling||(r.dom(n).insertAfter(s||o),t=!0),o.hasChildNodes()||r.dom(o).remove()))})),t}r.sortByDepth(e,!0);do{t=n()}while(t)}mergeSiblingHighlights(e){let t=this;function r(e,r){return r&&r.nodeType===NODE_TYPE.ELEMENT_NODE&&t.haveSameColor(e,r)&&t.isHighlight(r)}e.forEach((function(e){let n=e.previousSibling,i=e.nextSibling;r(e,n)&&(t.dom(e).prepend(n.childNodes),t.dom(n).remove()),r(e,i)&&(t.dom(e).append(i.childNodes),t.dom(i).remove()),t.dom(e).normalizeTextNodes()}))}setColor(e){this.options.color=e}getColor(){return this.options.color}isHighlight(e){return e&&e.nodeType===NODE_TYPE.ELEMENT_NODE&&e.hasAttribute(DATA_ATTR)}createWrapper(){let t=document.createElement("mark");return t.style.background="linear-gradient("+e.hexToRgbA(this.options.color)+", "+e.hexToRgbA(this.options.color)+")",t.className=this.options.highlightedClass,t}static isHexColor(e){return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)}static hexToRgbString(e){let t;return t=e.substring(1).split(""),3===t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),t}static hexToRgbChannels(e){let t;if(this.isHexColor(e))return t=this.hexToRgbString(e),{red:t>>16&255,green:t>>8&255,blue:255&t};throw new Error("Bad Hex")}static hexToRgbA(e){let t;if(this.isHexColor(e))return t=this.hexToRgbChannels(e),"rgba("+[t.red,t.green,t.blue].join(",")+",.5)";if("object"===typeof e){let t=e;return"rgba("+[t.red,t.green,t.blue].join(",")+",.5)"}throw new Error("Bad Hex")}static hexToRgbAWithOpacity(e,t){let r;if(this.isHexColor(e))return r=this.hexToRgbChannels(e),"rgba("+[r.red,r.green,r.blue].join(",")+","+t+")";if("object"===typeof e){let r=e;return"rgba("+[r.red,r.green,r.blue].join(",")+","+t+")"}throw new Error("Bad Hex")}resetHighlightBoundingStyle(e){e.style.outline="none",e.style.setProperty("background-color","transparent","important")}resetHighlightAreaStyle(t,r){var n,i,o,s,a,l,u,c,d,h,p,f,g,m,v;let y=null==(n=this.navigator.iframes[0].contentWindow)?void 0:n.document;const _=t.parentNode&&t.parentNode.nodeType===Node.ELEMENT_NODE&&t.parentNode.getAttribute?t.parentNode.getAttribute("id"):void 0;if(_){const n=_highlights.find((e=>e.id===_));if(n){if(3===n.marker||2===n.marker)if(null==(i=n.style)?void 0:i.hover){if(null==(o=n.style)?void 0:o.hover)for(let r=0;r<(null==(a=null==(s=n.style)?void 0:s.hover)?void 0:a.length);r++){let e=null==(l=n.style)?void 0:l.hover[r];t.style.removeProperty(e.property)}let e="";if(null==(u=n.style)?void 0:u.default)for(let r=0;r<(null==(d=null==(c=n.style)?void 0:c.default)?void 0:d.length);r++){let i=null==(h=n.style)?void 0:h.default[r];t.style.removeProperty(i.property),e+=`${i.property}: ${i.value} !${i.priority};`}t.setAttribute("style",`${t.getAttribute("style")}; ${e}`)}else if(null==(p=n.style)?void 0:p.hoverClass){(null==(f=n.style)?void 0:f.hoverClass)&&t.classList.remove(null==(g=n.style)?void 0:g.hoverClass);let e="";(null==(m=n.style)?void 0:m.defaultClass)&&t.classList.add(null==(v=n.style)?void 0:v.defaultClass),t.setAttribute("style",`${t.getAttribute("style")}; ${e}`)}else if(e.isHexColor(n.color)){let r=e.hexToRgbChannels(n.color);t.style.setProperty("background-color",`rgba(${r.red}, ${r.green}, ${r.blue}, 0)`,"important")}else t.classList.remove("hover");else if(1===n.marker||4===n.marker)if("object"===typeof n.color){let e=n.color;t.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, 0)`,"important"),t.style.setProperty("border-bottom",`2px solid rgba(${e.red}, ${e.green}, ${e.blue}, 1)`,"important")}else if(e.isHexColor(n.color)){let r=e.hexToRgbChannels(n.color);t.style.setProperty("background-color",`rgba(${r.red}, ${r.green}, ${r.blue}, 0)`,"important"),t.style.setProperty("border-bottom",`2px solid rgba(${r.red}, ${r.green}, ${r.blue}, 1)`,"important")}else t.classList.remove("hover");else if("object"===typeof n.color){let e=n.color;t.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else if(e.isHexColor(n.color)){let r=e.hexToRgbChannels(n.color);t.style.setProperty("background-color",`rgba(${r.red}, ${r.green}, ${r.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else t.classList.remove("hover");let _;if(y){let e=y.getElementById(r);e&&(_=e.querySelector(`#${n.id}`))}if(_){let e=_.getElementsByClassName(CLASS_HIGHLIGHT_ICON);if(e.length>0){const t=e.item(0).getElementsByClassName("icon-tooltip");t.length>0&&t.item(0).style.removeProperty("display")}}}}}setHighlightAreaStyle(t,r,n){var i,o,s,a,l,u,c,d,h,p,f,g;for(const m of r){if(3===n.marker||2===n.marker)if(null==(i=n.style)?void 0:i.hover){if(null==(o=n.style)?void 0:o.default)for(let t=0;t<(null==(a=null==(s=n.style)?void 0:s.default)?void 0:a.length);t++){let e=null==(l=n.style)?void 0:l.default[t];m.style.removeProperty(e.property)}let e="";for(let t=0;t<(null==(c=null==(u=n.style)?void 0:u.hover)?void 0:c.length);t++){let r=null==(d=n.style)?void 0:d.hover[t];m.style.removeProperty(r.property),e+=`${r.property}: ${r.value} !${r.priority};`}m.setAttribute("style",`${m.getAttribute("style")}; ${e}`)}else if(null==(h=n.style)?void 0:h.hoverClass){(null==(p=n.style)?void 0:p.defaultClass)&&m.classList.remove(null==(f=n.style)?void 0:f.defaultClass);let e="";m.classList.add(null==(g=n.style)?void 0:g.hoverClass),m.setAttribute("style",`${m.getAttribute("style")}; ${e}`)}else if(e.isHexColor(n.color)){let t=e.hexToRgbChannels(n.color);m.style.setProperty("background-color",`rgba(${t.red}, ${t.green}, ${t.blue}, 0.1)`,"important")}else m.classList.add("hover");else if(1===n.marker||4===n.marker)if("object"===typeof n.color){let e=n.color;m.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, 0.1)`,"important"),m.style.setProperty("border-bottom",`2px solid rgba(${e.red}, ${e.green}, ${e.blue}, 1)`,"important")}else if(e.isHexColor(n.color)){let t=e.hexToRgbChannels(n.color);m.style.setProperty("background-color",`rgba(${t.red}, ${t.green}, ${t.blue}, 0.1)`,"important"),m.style.setProperty("border-bottom",`2px solid rgba(${t.red}, ${t.green}, ${t.blue}, 1)`,"important")}else m.classList.add("hover");else if("object"===typeof n.color){let e=n.color;m.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, ${ALT_BACKGROUND_COLOR_OPACITY})`,"important")}else if(e.isHexColor(n.color)){let t=e.hexToRgbChannels(n.color);m.style.setProperty("background-color",`rgba(${t.red}, ${t.green}, ${t.blue}, ${ALT_BACKGROUND_COLOR_OPACITY})`,"important")}else m.classList.add("hover");if(4!==n.type){let e=t.getElementById("R2_ID_HIGHLIGHTS_CONTAINER").querySelector(`#${n.id}`),r=e.getElementsByClassName(CLASS_HIGHLIGHT_ICON);if(r.length>0){const e=r.item(0).getElementsByClassName("icon-tooltip");e.length>0&&e.item(0).style.setProperty("display","block")}}}}setAndResetSearchHighlight(t,r){var n;let i=null==(n=this.navigator.iframes[0].contentWindow)?void 0:n.document;const o=Array.from(i.getElementById("R2_ID_SEARCH_CONTAINER").querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`));for(const s of o){let n=s;const o=n.parentNode&&n.parentNode.nodeType===Node.ELEMENT_NODE&&n.parentNode.getAttribute?n.parentNode.getAttribute("id"):void 0;if(r.forEach((t=>{if(o===t.id&&t){if("object"===typeof t.color){let e=t.color;n.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else if(e.isHexColor(t.color)){let r=e.hexToRgbChannels(t.color);n.style.setProperty("background-color",`rgba(${r.red}, ${r.green}, ${r.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else n.classList.remove("hover");let r=i.getElementById("R2_ID_SEARCH_CONTAINER").querySelector(`#${t.id}`),o=r.getElementsByClassName(CLASS_HIGHLIGHT_ICON);if(o.length>0){const e=o.item(0).getElementsByClassName("icon-tooltip");e.length>0&&e.item(0).style.removeProperty("display")}}})),o===t.id&&t){if("object"===typeof t.color){let e=t.color;n.style.setProperty("background-color",`rgba(${e.red}, ${e.green}, ${e.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else if(e.isHexColor(t.color)){let r=e.hexToRgbChannels(t.color);n.style.setProperty("background-color",`rgba(${r.red}, ${r.green}, ${r.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY})`,"important")}else n.classList.remove("hover");let r=i.getElementById("R2_ID_SEARCH_CONTAINER").querySelector(`#${t.id}`),o=r.getElementsByClassName(CLASS_HIGHLIGHT_ICON);if(o.length>0){const e=o.item(0).getElementsByClassName("icon-tooltip");e.length>0&&e.item(0).style.removeProperty("display")}}}}isIOS(){return null!=navigator.userAgent.match(/iPhone|iPad|iPod/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1}isAndroid(){return null!=navigator.userAgent.match(/Android/i)}async processMouseEvent(e){var t,r,n,i,o,s,a,l,u,c,d,h,p;const f=null==(t=this.navigator.iframes[0].contentWindow)?void 0:t.document;if(!f||"mouseup"!==e.type&&"click"!==e.type&&"touchup"!==e.type)return;if(!f.getElementById("R2_ID_HIGHLIGHTS_CONTAINER")&&!f.getElementById("R2_ID_SEARCH_CONTAINER")&&!f.getElementById("R2_ID_PAGEBREAK_CONTAINER")&&!f.getElementById("R2_ID_READALOUD_CONTAINER")&&!f.getElementById("R2_ID_DEFINITIONS_CONTAINER"))return;const g=e.target,m=_highlights.find((t=>{var r;return t.id===(null==(r=e.target.parentElement)?void 0:r.id)}));if(m&&g){if(g.getAttribute("data-click")&&("mouseup"===e.type||"click"===e.type||"touchup"===e.type)&&"none"!==(null==(r=g.parentElement)?void 0:r.style.display)){const t={highlight:m};import_loglevel5.default.log(JSON.stringify(t));let r,f=this;if(f.navigator.rights.enableAnnotations?r=await(null==(n=this.navigator.annotationModule)?void 0:n.getAnnotation(t.highlight)):f.navigator.rights.enableBookmarks&&(r=await(null==(i=this.navigator.bookmarkModule)?void 0:i.getAnnotation(t.highlight))),0===t.highlight.type&&(null==(s=null==(o=this.navigator.annotationModule)?void 0:o.api)||s.selectedAnnotation(r).then((async()=>{}))),null==r?void 0:r.id){import_loglevel5.default.log("selected highlight "+r.id),f.lastSelectedHighlight=r.id;let t=document.getElementById("highlight-toolbox");if(t)if(t.style.top=e.clientY+((null==(a=this.navigator.attributes)?void 0:a.navHeight)??0)+"px",t.style.left=e.clientX+"px","none"===getComputedStyle(t).display){let e=function(){var n,i;null==(i=null==(n=f.navigator.annotationModule)?void 0:n.api)||i.addCommentToAnnotation(r).then((r=>{var n;null==(n=f.navigator.annotationModule)||n.updateAnnotation(r).then((async()=>{import_loglevel5.default.log("update highlight "+r.id),t&&(t.style.display="none"),f.selectionMenuClosed()})),t&&(t.style.display="none"),f.selectionMenuClosed(),null==s||s.removeEventListener("click",e,!1)}))},n=function(){var e,n;f.navigator.rights.enableAnnotations?null==(e=f.navigator.annotationModule)||e.deleteSelectedHighlight(r).then((async()=>{import_loglevel5.default.log("delete highlight "+r.id),t&&(t.style.display="none"),f.selectionMenuClosed()})):f.navigator.rights.enableBookmarks&&(null==(n=f.navigator.bookmarkModule)||n.deleteSelectedHighlight(r).then((async()=>{import_loglevel5.default.log("delete highlight "+r.id),t&&(t.style.display="none"),f.selectionMenuClosed()})))};t.style.display="block",this.toolboxMode("edit");let i=document.getElementById("colorIcon"),o=document.getElementById("highlightIcon");i&&(i.style.display="none"),o&&(o.style.display="none");let s=document.getElementById("commentIcon"),a=document.getElementById("cloneCommentIcon");if(a){let e=a.parentElement;e&&e.removeChild(a)}if(s){s.style.display="none";let t=s.cloneNode(!0),r=s.parentElement;t.style.display="unset",t.id="cloneCommentIcon",t.addEventListener("click",e,!1),r&&r.append(t)}let l=document.getElementById("deleteIcon"),u=document.getElementById("cloneDeleteIcon");if(u){let e=u.parentElement;e&&e.removeChild(u)}if(l){l.style.display="none";let e=l.cloneNode(!0),t=l.parentElement;e.style.display="unset",e.id="cloneDeleteIcon",e.addEventListener("click",n,!1),t&&t.append(e)}}else t.style.display="none",this.selectionMenuClosed(),t.offsetWidth,t.style.display="block"}else{if(g.dataset.definition){const t=new Popup(this.navigator);t.showPopup(g.dataset.definition,e)}let t=null==(c=null==(u=null==(l=this.navigator.definitionsModule)?void 0:l.properties)?void 0:u.definitions)?void 0:c.filter((e=>e.order===Number(null==g?void 0:g.dataset.order)))[0];import_loglevel5.default.log(t),(null==(h=null==(d=this.navigator.definitionsModule)?void 0:d.api)?void 0:h.click)&&(null==(p=this.navigator.definitionsModule.api)||p.click(lodash.omit(t,"callbacks"),lodash.omit(m,"definition")),this.navigator.emit("definition.click",t,m))}}}else for(let v in HighlightContainer){let e=f.getElementById(v);if(e){const t=e.querySelectorAll(`.${CLASS_HIGHLIGHT_BOUNDING_AREA}`);for(const e of t)this.resetHighlightBoundingStyle(e);const r=Array.from(e.querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`));for(const e of r)this.resetHighlightAreaStyle(e,v)}}}async prepareContainers(e){for(let t in HighlightContainer)await this.ensureHighlightsContainer(e,t)}async ensureHighlightsContainer(e,t){var r,n;const i=e.document;if(!i.getElementById(t)){let e=i.createElement("div");e.setAttribute("id",t),"R2_ID_GUTTER_RIGHT_CONTAINER"!==t&&e.style.setProperty("pointer-events","none"),"fixed"===(null==(r=this.navigator.view)?void 0:r.layout)&&(e.style.setProperty("position","absolute"),e.style.setProperty("top","0"),e.style.setProperty("left","0")),i.body&&i.body.append(e),!1===(null==(n=await this.layerSettings.getProperty(t))?void 0:n.value)&&(e.style.display="none")}return i.getElementById(t)}hideAllhighlights(e){this.removeAllChildNodes(e.getElementById("R2_ID_HIGHLIGHTS_CONTAINER")),this.removeAllChildNodes(e.getElementById("R2_ID_SEARCH_CONTAINER")),this.removeAllChildNodes(e.getElementById("R2_ID_READALOUD_CONTAINER")),this.removeAllChildNodes(e.getElementById("R2_ID_PAGEBREAK_CONTAINER")),this.removeAllChildNodes(e.getElementById("R2_ID_DEFINITIONS_CONTAINER"))}destroyAllhighlights(e){this.hideAllhighlights(e),_highlights.splice(0,_highlights.length)}removeAllChildNodes(e){while(e.firstChild)e.removeChild(e.firstChild)}destroyHighlights(e){var t;let r=null==(t=this.navigator.iframes[0].contentWindow)?void 0:t.document;if(r){let t;switch(e){case 2:t=r.getElementById("R2_ID_READALOUD_CONTAINER"),t&&this.removeAllChildNodes(t);break;case 1:t=r.getElementById("R2_ID_SEARCH_CONTAINER"),t&&this.removeAllChildNodes(t);break;case 3:t=r.getElementById("R2_ID_PAGEBREAK_CONTAINER"),t&&this.removeAllChildNodes(t);break;case 4:t=r.getElementById("R2_ID_DEFINITIONS_CONTAINER"),t&&this.removeAllChildNodes(t);break;case 5:t=r.getElementById("R2_ID_LINEFOCUS_CONTAINER"),t&&this.removeAllChildNodes(t);break;case 6:t=r.getElementById("R2_ID_GUTTER_RIGHT_CONTAINER"),t&&this.removeAllChildNodes(t);break;default:t=r.getElementById("R2_ID_HIGHLIGHTS_CONTAINER"),t&&this.removeAllChildNodes(t),_highlights.splice(0,_highlights.length);break}}}destroyHighlight(e,t){if(!e)return;let r=-1;const n=_highlights.find(((e,n)=>(r=n,e.id===t)));n&&r>=0&&r<_highlights.length&&_highlights.splice(r,1);const i=e.getElementById(t);i&&this.removeAllChildNodes(i)}createHighlight(e,t,r,n,i,o,s,a,l,u){try{const c=`${t.rangeInfo.startContainerElementCssSelector}${t.rangeInfo.startContainerChildTextNodeIndex}${t.rangeInfo.startOffset}${t.rangeInfo.endContainerElementCssSelector}${t.rangeInfo.endContainerChildTextNodeIndex}${t.rangeInfo.endOffset}`,d=SHA256.hash(c),h=(u||"R2_HIGHLIGHT_")+d;this.destroyHighlight(e.document,h);let p=`rgb(${DEFAULT_BACKGROUND_COLOR.red}, ${DEFAULT_BACKGROUND_COLOR.green}, ${DEFAULT_BACKGROUND_COLOR.blue})`;const f={color:r||p,id:h,pointerInteraction:n,selectionInfo:t,marker:i,icon:o,popup:s,style:a,type:l||0};0!==l&&4!==l&&void 0!==l||_highlights.push(f);let g=this.createHighlightDom(e,f);return f.position=parseInt(((null==g?void 0:g.hasChildNodes())?g.childNodes[0]:g).style.top.replace("px","")),[f,g]}catch(c){throw"Can't create highlight: "+c}}createHighlightDom(t,r){var n,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,_,b,S,w,C,A,E,x,T,k,O,P,R,I,L,M;const N=t.document,D=convertRangeInfo(N,r.selectionInfo.rangeInfo);if(!D)return;for(let e in HighlightContainer)this.ensureHighlightsContainer(t,e);const B=N.createElement("div");B.setAttribute("id",r.id),B.setAttribute("class",CLASS_HIGHLIGHT_CONTAINER),B.style.setProperty("pointer-events","none"),r.pointerInteraction&&(B.setAttribute("data-click","1"),B.addEventListener("mouseover",(e=>{var t;if(e.target.classList.contains("R2_CLASS_HIGHLIGHT_AREA")){const r=e.currentTarget,n=_highlights.find((t=>t.id===e.currentTarget.id));if("mouseover"===e.type&&"none"!==(null==(t=r.parentElement)?void 0:t.style.display)&&n){const e=Array.from(r.querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`));this.setHighlightAreaStyle(N,e,n)}}})),B.addEventListener("mouseleave",(e=>{const t=e.currentTarget,r=Array.from(t.querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`));for(const o of r)this.resetHighlightAreaStyle(o,t.id);const n=t.querySelector(`.${CLASS_HIGHLIGHT_BOUNDING_AREA}`),i=t.querySelectorAll(`.${CLASS_HIGHLIGHT_BOUNDING_AREA}`);for(const o of i)n&&o===n||this.resetHighlightBoundingStyle(o)})));const F=null==(n=this.navigator.view)?void 0:n.isPaginated();N.body.style.position=F?"revert":"relative";const j=N.body.getBoundingClientRect(),H=this.getScrollingElement(N),q=F?-H.scrollLeft:j.left,U=F?-H.scrollTop:j.top,G=1;let z=!1,V=!1,$=!1,J=z||V||$;import_loglevel5.default.debug(J),J=!0;const W=getClientRectsNoOverlap(D,J),Y=3,K=2,X=3;let Q,Z,ee=0,te=24;for(const se of W){const t=N.createElement("div");t.setAttribute("class",CLASS_HIGHLIGHT_AREA),t.dataset.marker=""+r.marker;let n="";if(z&&3!==r.marker&&2!==r.marker&&4!==r.marker){let t=r.color;e.isHexColor(t)&&(t=e.hexToRgbChannels(t)),n+=`border-bottom: ${K*G}px solid rgba(${t.red}, ${t.green}, ${t.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY}) !important`}if(3===r.marker||2===r.marker)if(null==(i=r.style)?void 0:i.default){for(let e=0;e<(null==(s=null==(o=r.style)?void 0:o.default)?void 0:s.length);e++){let t=null==(a=r.style)?void 0:a.default[e];n+=`${t.property}: ${t.value} !${t.priority};`}t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; ${n}`)}else(null==(l=r.style)?void 0:l.defaultClass)&&(t.classList.add(null==(u=r.style)?void 0:u.defaultClass),t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; ${n}`));else if(1===r.marker||4===r.marker)if("object"===typeof r.color){let e=r.color;t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; background-color: rgba(${e.red}, ${e.green}, ${e.blue}, 0) !important; ${n}`),t.style.setProperty("border-bottom",`2px solid rgba(${e.red}, ${e.green}, ${e.blue}, 1)`,"important")}else if(e.isHexColor(r.color)){let i=e.hexToRgbChannels(r.color);t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; background-color: rgba(${i.red}, ${i.green}, ${i.blue}, 0) !important; ${n}`),t.style.setProperty("border-bottom",`2px solid rgba(${i.red}, ${i.green}, ${i.blue}, 1)`,"important")}else t.setAttribute("style",`border-radius: ${Y}px !important; ${n}`);else if("object"===typeof r.color){let e=r.color;t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; background-color: rgba(${e.red}, ${e.green}, ${e.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY}) !important; ${n}`)}else if(e.isHexColor(r.color)){let i=e.hexToRgbChannels(r.color);t.setAttribute("style",`mix-blend-mode: multiply; border-radius: ${Y}px !important; background-color: rgba(${i.red}, ${i.green}, ${i.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY}) !important; ${n}`)}else t.setAttribute("style",`border-radius: ${Y}px !important; ${n}`);1===r.type||2===r.type||5===r.type||3===r.type?t.style.setProperty("pointer-events","none"):(t.style.setProperty("pointer-events","all"),t.style.setProperty("cursor","hand")),t.style.position="absolute",t.scale=G,t.rect={height:se.height,left:se.left-q,top:se.top-U,width:se.width},r.pointerInteraction&&(t.setAttribute("data-click","1"),t.tabIndex=0),t.style.width=t.rect.width*G+"px",t.style.height=t.rect.height*G+"px",t.style.left=t.rect.left*G+"px",t.style.top=t.rect.top*G+"px",B.append(t);let p=parseInt(t.style.top.replace("px",""));if((p<ee||0===ee)&&(ee=p),te=parseInt(t.style.height.replace("px","")),V){const t=N.createElement("div");t.setAttribute("class",CLASS_HIGHLIGHT_AREA);let n=r.color;e.isHexColor(n)&&(n=e.hexToRgbChannels(n)),t.setAttribute("style",`background-color: rgba(${n.red}, ${n.green}, ${n.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY}) !important;`),1===r.type||2===r.type||5===r.type||3===r.type?t.style.setProperty("pointer-events","none"):(t.style.setProperty("pointer-events","all"),t.style.setProperty("cursor","hand")),t.style.position="absolute",t.scale=G,t.rect={height:se.height,left:se.left-q,top:se.top-U,width:se.width},t.style.width=t.rect.width*G+"px",t.style.height=X*G+"px",t.style.left=t.rect.left*G+"px",t.style.top=(t.rect.top+t.rect.height/2-X/2)*G+"px",B.append(t)}let f=null==(c=this.navigator.iframes[0].contentWindow)?void 0:c.innerWidth,g=parseInt(getComputedStyle(N.documentElement).getPropertyValue("column-count")),m=parseInt(getComputedStyle(N.documentElement).getPropertyValue("column-width")),v=parseInt(getComputedStyle(N.body).getPropertyValue("padding-left")),y=f/(g||1);y<m&&(y=f),F||(y=parseInt(getComputedStyle(N.body).width.replace("px","")));let _=this.navigator.settings.fontSize/100,b=20*_;_<=1&&(b=-60);let S=0*_;_<=1&&(S=-60),Q=Math.floor(se.left/y)*y+y-(te<40?40:te)+S,Z=Math.floor(se.left/y)*y+(te<40?40:te)-b;let w=parseInt(this.navigator.iframes[0].contentDocument.documentElement.style.getPropertyValue("--USER__pageMargins"));w>=2&&(Z+=v/g,Q-=v/g),F||(Q=parseInt(getComputedStyle(null==(d=this.navigator.iframes[0].contentDocument)?void 0:d.body).width.replace("px","")),Z=parseInt(getComputedStyle(null==(h=this.navigator.iframes[0].contentDocument)?void 0:h.body).width.replace("px",""))-y,w>=2&&(Z+=v/2,Q-=v/2))}const re=D.getBoundingClientRect(),ne=N.createElement("div");ne.setAttribute("class",CLASS_HIGHLIGHT_BOUNDING_AREA),ne.style.setProperty("pointer-events","none"),ne.style.position="absolute",ne.scale=G,ne.rect={height:re.height,left:re.left-q,top:re.top-U,width:re.width},ne.style.width=ne.rect.width*G+"px",ne.style.height=ne.rect.height*G+"px",ne.style.left=ne.rect.left*G+"px",ne.style.top=ne.rect.top*G+"px",B.append(ne);const ie=N.createElement("div");if(ie.setAttribute("class",CLASS_HIGHLIGHT_ICON),"left"===(null==(p=r.icon)?void 0:p.position))ie.setAttribute("style",`position: absolute;top:${ee}px;left:${Z+(null==(g=null==(f=this.navigator.iframes[0].contentDocument)?void 0:f.scrollingElement)?void 0:g.scrollLeft)}px;height:${te}px; width:${te}px;`);else if("inline"===(null==(m=r.icon)?void 0:m.position))ie.setAttribute("style",`position: absolute;top:${ee-te/2}px;left:${parseInt(ne.style.left.replace("px",""))+parseInt(ne.style.width.replace("px",""))-te/2}px;height:${te}px; width:${te}px;`);else if("center"===(null==(v=r.icon)?void 0:v.position)){let e=te/3,t=2*e;ie.setAttribute("style",`position: absolute;top:${ee}px;left:${parseInt(ne.style.left.replace("px",""))+parseInt(ne.style.width.replace("px",""))-t}px;height:${te}px; width:${te}px;`)}else r.note&&3!==r.marker&&2!==r.marker&&4!==r.marker&&0!==r.marker&&1!==r.marker?ie.setAttribute("style",`position: absolute;top:${ee-te/2}px;left:${parseInt(ne.style.left.replace("px",""))+parseInt(ne.style.width.replace("px",""))-te/2}px;height:${te}px; width:${te}px;`):r.note&&4===r.marker||0===r.marker||1===r.marker?ie.setAttribute("style",`position: absolute;top:${ee}px;left:${Q+(null==(_=null==(y=this.navigator.iframes[0].contentDocument)?void 0:y.scrollingElement)?void 0:_.scrollLeft)}px;height:${te}px; width:${te}px;`):ie.setAttribute("style",`position: absolute;top:${ee}px;left:${Q+(null==(S=null==(b=this.navigator.iframes[0].contentDocument)?void 0:b.scrollingElement)?void 0:S.scrollLeft)}px;height:${te}px; width:${te}px;`);if(3===r.marker||2===r.marker)(null==(w=r.icon)?void 0:w.class)?(ie.classList.add(null==(C=r.icon)?void 0:C.class),ie.id=null==(A=r.icon)?void 0:A.id):(null==(E=r.icon)?void 0:E.svgPath)?ie.innerHTML=iconTemplateColored(`${null==(x=r.icon)?void 0:x.id}`,`${null==(T=r.icon)?void 0:T.title}`,`${null==(k=r.icon)?void 0:k.svgPath}`,"icon open",te,`${null==(O=r.icon)?void 0:O.color} !important`):(null==(P=r.icon)?void 0:P.title)&&(ie.innerHTML=null==(R=r.icon)?void 0:R.title);else if(r.note){let t=r.color;e.isHexColor(t)&&(t=e.hexToRgbChannels(t)),4===r.marker||0===r.marker||1===r.marker?ie.innerHTML=iconTemplateColored("","",'<path d="M24 24H0V0h24v24z" fill="none"/><circle cx="12" cy="12" r="14"/>',"icon open",te/2,`rgba(${t.red}, ${t.green}, ${t.blue}, 1) !important`):ie.innerHTML=iconTemplateColored("note-icon","Note",'<rect fill="none" height="24" width="24"/><path d="M19,5v9l-5,0l0,5H5V5H19 M19,3H5C3.9,3,3,3.9,3,5v14c0,1.1,0.9,2,2,2h10l6-6V5C21,3.9,20.1,3,19,3z M12,14H7v-2h5V14z M17,10H7V8h10V10z"/>',"icon open",te,`rgba(${t.red}, ${t.green}, ${t.blue}, 1) !important`)}1===r.type||2===r.type||5===r.type||3===r.type?ie.style.setProperty("pointer-events","none"):(ie.style.setProperty("pointer-events","all"),ie.style.setProperty("cursor","hand"));let oe=this;if(3!==r.type&&4!==r.type&&ie.addEventListener("click",(async function(e){var t,n,i,o,s;let a;oe.navigator.rights.enableAnnotations?(a=await(null==(t=oe.navigator.annotationModule)?void 0:t.getAnnotationByID(r.id)),null==(i=null==(n=oe.navigator.annotationModule)?void 0:n.api)||i.selectedAnnotation(a).then((async()=>{}))):oe.navigator.rights.enableBookmarks&&(a=await(null==(o=oe.navigator.bookmarkModule)?void 0:o.getAnnotationByID(r.id))),import_loglevel5.default.log("selected highlight "+a.id),oe.lastSelectedHighlight=a.id;let l=document.getElementById("highlight-toolbox");if(l)if(l.style.top=e.clientY+((null==(s=oe.navigator.attributes)?void 0:s.navHeight)??0)+"px",l.style.left=e.clientX+"px","none"===getComputedStyle(l).display){let e=function(){var e,t;oe.navigator.rights.enableAnnotations?null==(e=oe.navigator.annotationModule)||e.deleteSelectedHighlight(a).then((async()=>{import_loglevel5.default.log("delete highlight "+a.id),l.style.display="none",oe.selectionMenuClosed()})):oe.navigator.rights.enableBookmarks&&(null==(t=oe.navigator.bookmarkModule)||t.deleteSelectedHighlight(a).then((async()=>{import_loglevel5.default.log("delete highlight "+a.id),l.style.display="none",oe.selectionMenuClosed()})))};l.style.display="block",oe.toolboxMode("edit");let t=document.getElementById("colorIcon"),r=document.getElementById("highlightIcon");t&&(t.style.display="none"),r&&(r.style.display="none");let n=document.getElementById("commentIcon"),i=document.getElementById("cloneCommentIcon");if(i){let e=i.parentElement;e&&e.removeChild(i)}n&&(n.style.display="none");let o=document.getElementById("deleteIcon"),s=document.getElementById("cloneDeleteIcon");if(s){let e=s.parentElement;e&&e.removeChild(s)}if(o){o.style.display="none";let t=o.cloneNode(!0),r=o.parentElement;t.style.display="unset",t.id="cloneDeleteIcon",t.addEventListener("click",e,!1),r&&r.append(t)}}else l.style.display="none",oe.selectionMenuClosed(),l.offsetWidth,l.style.display="block";const u=Array.from(B.querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`));oe.setHighlightAreaStyle(N,u,r)})),r.note){let e=document.createElement("span");e.innerHTML=r.note,e.className="icon-tooltip",3===r.marker||2===r.marker?((null==(I=r.popup)?void 0:I.background)&&e.style.setProperty("background",r.popup.background),(null==(L=r.popup)?void 0:L.textColor)&&e.style.setProperty("color",r.popup.textColor),(null==(M=r.popup)?void 0:M.class)&&e.classList.add(r.popup.class)):(e.style.setProperty("background","lightyellow"),e.style.setProperty("color","black"))}switch((r.note||3===r.marker||2===r.marker)&&B.append(ie),r.type){case 1:N.getElementById("R2_ID_SEARCH_CONTAINER").append(B);break;case 2:N.getElementById("R2_ID_READALOUD_CONTAINER").append(B);break;case 3:N.getElementById("R2_ID_PAGEBREAK_CONTAINER").append(B);break;case 4:N.getElementById("R2_ID_DEFINITIONS_CONTAINER").append(B);break;default:N.getElementById("R2_ID_HIGHLIGHTS_CONTAINER").append(B);break}return B}addSelectionMenuItem(e){var t,r;((null==(t=this.properties)?void 0:t.selectionMenuItems)??1)&&((null==(r=this.properties)?void 0:r.selectionMenuItems)??[]).push(e)}},import_uuid=__toESM(require_uuid());init_polyfills();var import_loglevel6=__toESM(require_loglevel()),_getCssSelectorOptions={className:e=>!0,idName:e=>!0,tagName:e=>!0},lodash2=__toESM(require_lodash()),import_loglevel8=__toESM(require_loglevel());init_polyfills();var import_loglevel7=__toESM(require_loglevel()),ConsumptionModule=class{constructor(e,t,r){this.currSeconds=0,this.publication=e,this.properties=t,this.api=r}static async create(e){const t=new this(e.publication,e,e.api);return await t.start(),t}async start(){this.startResearchSession()}async stop(){import_loglevel7.default.log("Consumption module stop"),this.endResearchSession()}initialize(e){let t=e.contentWindow;if(t){const e=this;t.onload=function(){e.resetTimer()},t.onmousemove=function(){e.resetTimer()},t.onmousedown=function(){e.resetTimer()},t.ontouchstart=function(){e.resetTimer()},t.onclick=function(){e.resetTimer()},t.onkeypress=function(){e.resetTimer()}}}trackAction(e,t){var r;null==(r=this.api)||r.actionTracked(e,t)}startReadingSession(e){if(this.firstReadingLocator&&this.lastReadingLocator){let e=this.lastReadingLocator.locations.totalProgression-this.firstReadingLocator.locations.totalProgression,t=((new Date).getTime()-this.startReadingTimer.getTime())/1e3;this.readingSessions.push({lastLocator:this.lastReadingLocator,firstLocator:this.firstReadingLocator,time:t,progress:Math.round(100*e)})}this.firstReadingLocator=e,this.startReadingTimer=new Date}continueReadingSession(e){this.properties.enableTrackingSession&&(void 0===this.startResearchTimer&&this.startResearchSession(),(void 0===this.lastReadingLocator||this.lastReadingLocator.locations.totalProgression<e.locations.totalProgression)&&(this.lastReadingLocator=e),void 0===this.firstReadingLocator&&(this.firstReadingLocator=e),void 0===this.startReadingTimer&&(this.startReadingTimer=new Date))}startResearchSession(){var e;if(this.properties.enableTrackingSession){this.startResearchTimer=new Date,this.readingSessions=[],clearInterval(this.readingSessionsInterval);let t=((new Date).getTime()-this.startResearchTimer.getTime())/1e3;this.researchSessionId=null==(e=this.api)?void 0:e.startResearchSession(this.readingSessions,Math.round(t));const r=this;this.readingSessionsInterval=setInterval((function(){r.updateResearchSession()}),1e3*this.properties.updateSessionInterval)}}updateResearchSession(){var e;if(this.properties.enableTrackingSession){let t=((new Date).getTime()-this.startResearchTimer.getTime())/1e3;null==(e=this.api)||e.updateResearchSession(this.researchSessionId,this.readingSessions,Math.round(t))}}endResearchSession(){var e,t;if(this.properties.enableTrackingSession){if(this.firstReadingLocator&&this.lastReadingLocator){let e=this.lastReadingLocator.locations.totalProgression-this.firstReadingLocator.locations.totalProgression,t=((new Date).getTime()-this.startReadingTimer.getTime())/1e3;this.readingSessions.push({lastLocator:this.lastReadingLocator,firstLocator:this.firstReadingLocator,time:t,progress:Math.round(100*e)})}let r=((new Date).getTime()-this.startResearchTimer.getTime())/1e3;null==(e=this.api)||e.updateResearchSession(this.researchSessionId,this.readingSessions,Math.round(r)),null==(t=this.api)||t.endResearchSession(this.researchSessionId,this.readingSessions,Math.round(r)),this.researchSessionId=void 0,this.readingSessions=[],this.startResearchTimer=void 0,clearInterval(this.readingSessionsInterval),clearInterval(this.timer)}}startIdleTimer(){var e;this.currSeconds++,this.currSeconds===this.properties.idleTimeout&&(null==(e=this.api)||e.idleSince(this.currSeconds),void 0!==this.startResearchTimer?this.updateResearchSession():this.startResearchSession()),this.currSeconds===this.properties.idleTimeout+this.properties.responseTimeout&&this.endResearchSession()}resetTimer(){clearInterval(this.timer),this.currSeconds=0;const e=this;this.timer=setInterval((function(){e.startIdleTimer()}),1e3)}},AnnotationModule=class e{constructor(e,t,r,n,i,o,s,a){this.hide=findElement(document,"#menu-button-hide"),this.show=findElement(document,"#menu-button-show"),this.annotator=e,this.rights=t,this.publication=r,this.headerMenu=a,this.initialAnnotations=n,this.highlighter=o,this.properties=i,this.api=s}static async create(e){const t=new this(e.annotator,e.rights||{enableAnnotations:!1,enableTTS:!1},e.publication,e.initialAnnotations||null,e,e.highlighter,e.api,e.headerMenu);return await t.start(),t}async stop(){import_loglevel8.default.log("Annotation module stop")}async start(){var e;if(this.headerMenu&&(this.highlightsView=findElement(this.headerMenu,"#container-view-highlights")),this.initialAnnotations){var t=this.initialAnnotations["highlights"]||null;t&&(null==(e=this.annotator)||e.initAnnotations(t))}setTimeout((()=>{var e;(null==(e=this.properties)?void 0:e.hideLayer)?this.navigator.hideLayer("highlights"):this.navigator.showLayer("highlights")}),10)}hideAnnotationLayer(){let e=this.navigator.iframes[0].contentDocument;if(e){const t=findElement(e,"#R2_ID_HIGHLIGHTS_CONTAINER");t&&(t.style.display="none")}this.show&&this.hide&&(this.show.style.display="block",this.hide.style.display="none")}showAnnotationLayer(){let e=this.navigator.iframes[0].contentDocument;if(e){const t=findElement(e,"#R2_ID_HIGHLIGHTS_CONTAINER");t&&(t.style.display="block")}this.show&&this.hide&&(this.show.style.display="none",this.hide.style.display="block")}async handleResize(){setTimeout((async()=>{await this.drawHighlights(),await this.showHighlights()}),200)}initialize(e){return new Promise((async t=>{await document.fonts.ready,this.rights.enableAnnotations&&setTimeout((()=>{var t;this.drawHighlights(),this.showHighlights(),addEventListenerOptional(null==(t=e.contentDocument)?void 0:t.body,"click",this.click.bind(this))}),300),t(null)}))}click(e){var t,r,n,i,o,s,a;if(this.activeAnnotationMarkerId){let e=null==(n=null==(r=null==(t=this.highlighter)?void 0:t.properties)?void 0:r.selectionMenuItems)?void 0:n.filter((e=>e.id===this.activeAnnotationMarkerId));if(e&&(null==e?void 0:e.length)>0){let t=lodash2.cloneDeep(e[0]);t.marker=3,this.activeAnnotationMarkerPosition&&(t.icon.position=this.activeAnnotationMarkerPosition),t.highlight.style.default=null,t.highlight.style.hover=null;let r=this.navigator.iframes[0].contentDocument;if(r){let e=function(e){try{let t=c.navigator.iframes[0].contentDocument;return t?uniqueCssSelector(e,t,_getCssSelectorOptions):""}catch(t){return import_loglevel8.default.log("uniqueCssSelector:"),import_loglevel8.default.error(t),""}};const n=null==(i=this.highlighter)?void 0:i.dom(r.body).getSelection();let l=n.getRangeAt(0),u=n.anchorNode;l.setStart(u,l.startOffset),l.setEnd(u,l.endOffset+1),n.removeAllRanges(),n.addRange(l);let c=this;const d=convertRange(l,e);if(n.removeAllRanges(),d){let e={rangeInfo:d},n=null==(s=this.navigator.highlighter)?void 0:s.createHighlight(null==(o=this.navigator.highlighter)?void 0:o.dom(r.body).getWindow(),e,t.highlight.color,!0,2,t.icon,t.popup,t.highlight.style);n&&this.saveAnnotation(n[0]).then((e=>{import_loglevel8.default.log("saved bookmark "+e.id)}))}null==(a=r.getSelection())||a.removeAllRanges()}}}}async scrollToHighlight(e){var t;import_loglevel8.default.log("still need to scroll to "+e);var r=await(null==(t=this.annotator)?void 0:t.getAnnotationElement(e,this.navigator.iframes[0].contentWindow));r.scrollIntoView({block:"center",behavior:"smooth"})}async updateLocalHighlight(e){if(this.annotator){let t=await this.annotator.deleteAnnotation(e.id),r=await this.addAnnotation(e);return import_loglevel8.default.log("Highlight deleted "+JSON.stringify(t)),import_loglevel8.default.log("Highlight added "+JSON.stringify(r)),await this.showHighlights(),await this.drawHighlights(),r}return new Promise((e=>e(null)))}async deleteLocalHighlight(e){if(this.annotator){var t=await this.annotator.deleteAnnotation(e);return import_loglevel8.default.log("Highlight deleted "+JSON.stringify(t)),await this.showHighlights(),await this.drawHighlights(),t}return new Promise((e=>e(null)))}async deleteAnnotation(e){await this.deleteLocalHighlight(e.id)}async addAnnotation(e){var t;await(null==(t=this.annotator)?void 0:t.saveAnnotation(e)),await this.showHighlights(),await this.drawHighlights()}async deleteHighlight(e){var t,r;(null==(t=this.api)?void 0:t.deleteAnnotation)?null==(r=this.api)||r.deleteAnnotation(e).then((async()=>{this.deleteLocalHighlight(e.id)})):this.deleteLocalHighlight(e.id)}async deleteSelectedHighlight(e){var t;(null==(t=this.api)?void 0:t.deleteAnnotation)?this.api.deleteAnnotation(e).then((async()=>{this.deleteLocalHighlight(e.id)})):this.deleteLocalHighlight(e.id)}async updateAnnotation(e){var t;(null==(t=this.api)?void 0:t.updateAnnotation)?this.api.updateAnnotation(e).then((async()=>{this.updateLocalHighlight(e)})):this.updateLocalHighlight(e)}async saveAnnotation(e){var t,r,n;if(this.annotator){var i=this.publication.getTOCItem(this.navigator.currentChapterLink.href);this.navigator.currentTocUrl&&(i=this.publication.getTOCItem(this.navigator.currentTocUrl)),void 0===i&&(i=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href));const s=null==(t=this.navigator.view)?void 0:t.getCurrentPosition();let a=this.navigator.iframes[0].contentDocument;if(a){const t=findRequiredIframeElement(a,"body"),l=e.position?e.position/t.scrollHeight:s,u=(0,import_uuid.v4)();let c;if(i){let t=i.Href;if(t.indexOf("#")>0&&(t=t.slice(0,t.indexOf("#"))),this.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions){const r=this.publication.positionsByHref(this.publication.getRelativeHref(this.navigator.currentChapterLink.href)),n=Math.ceil((l??0)*(r.length-1)),i=r[n];c={...i,id:u,href:t,created:new Date,title:this.navigator.currentChapterLink.title,highlight:e,text:{highlight:e.selectionInfo.cleanText}}}else c={id:u,href:t,locations:{progression:l},created:new Date,type:this.navigator.currentChapterLink.type,title:this.navigator.currentChapterLink.title,highlight:e,text:{highlight:e.selectionInfo.cleanText}}}if(c){if(null==(r=this.navigator.consumptionModule)||r.trackAction(c,"HighlightCreated"),!(null==(n=this.api)?void 0:n.addAnnotation)){const e=await this.annotator.saveAnnotation(c);return await this.showHighlights(),await this.drawHighlights(),new Promise((t=>t(e)))}try{let e=await this.api.addAnnotation(c);const t=await this.annotator.saveAnnotation(e);return await this.showHighlights(),await this.drawHighlights(),new Promise((e=>e(t)))}catch(o){await this.showHighlights(),await this.drawHighlights()}}}}return new Promise((e=>e(null)))}getAnnotations(){let e=[];return this.annotator&&(e=this.annotator.getAnnotations()),e}showHighlights(){let e=[];this.annotator&&(e=this.annotator.getAnnotations(),e&&(e=e.filter((e=>2!==e.highlight.marker)),e.forEach((e=>{_highlights.push(e.highlight)})))),this.highlightsView&&this.createTree(1,e,this.highlightsView)}async drawHighlights(){var e,t,r,n;if(this.rights.enableAnnotations&&this.highlighter){if(this.api){let t=[];if(this.annotator&&(t=this.annotator.getAnnotationsByChapter(this.navigator.currentLocator().href)),this.highlighter&&t&&"complete"===(null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.readyState)){await this.highlighter.destroyHighlights(0);for(const e of t){_highlights.push(e.highlight);const t=e;let r=this.navigator.currentChapterLink.href;var i=this.publication.getTOCItem(r);if(void 0!==this.navigator.currentTocUrl&&(i=this.publication.getTOCItem(this.navigator.currentTocUrl)),null===i&&(i=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href)),i){let r=i.Href;r.indexOf("#")>0&&(r=r.slice(0,r.indexOf("#"))),t.href===r&&(await this.highlighter.createHighlightDom(this.navigator.iframes[0].contentWindow,e.highlight),setTimeout((async()=>{var r,n;if(1===(null==(r=t.highlight)?void 0:r.marker)){const r=await(null==(n=this.annotator)?void 0:n.getAnnotationPosition(e.id,this.navigator.iframes[0].contentWindow)),i='<div class="comment" style="top: '+r+'px;width:20px"></div>';let o=document.createElement("div");o.innerHTML=i;let s=o.childNodes[0],a=document.createElement("i");a.innerHTML="sticky_note_2",a.className="material-icons",a.style.color=t.highlight.color,s.appendChild(a),addEventListenerOptional(o,"click",(e=>{e.preventDefault(),e.stopPropagation(),this.scrollToHighlight(t.id)}))}}),100))}}}}else{let e=[];if(this.annotator&&(e=this.annotator.getAnnotationsByChapter(this.navigator.currentLocator().href)),this.highlighter&&e&&"complete"===(null==(t=this.navigator.iframes[0].contentDocument)?void 0:t.readyState)){await this.highlighter.destroyHighlights(0);for(const t of e){_highlights.push(t.highlight);const e=t;let r=this.navigator.currentChapterLink.href,n=this.publication.getTOCItem(r);if(this.navigator.currentTocUrl&&(n=this.publication.getTOCItem(this.navigator.currentTocUrl)),null===n&&(n=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href)),n){let r=n.Href;r.indexOf("#")>0&&(r=r.slice(0,r.indexOf("#"))),e.href===r&&(await this.highlighter.createHighlightDom(this.navigator.iframes[0].contentWindow,t.highlight),setTimeout((async()=>{var r,n,i;if(1===(null==(r=e.highlight)?void 0:r.marker)){const r=await(null==(n=this.annotator)?void 0:n.getAnnotationPosition(t.id,this.navigator.iframes[0].contentWindow)),o='<div class="comment" style="top: '+r+"px;background: "+(null==(i=e.highlight)?void 0:i.color)+';width:20px"></div>';let s=document.createElement("div");s.innerHTML=o,s.childNodes[0].innerHTML=icons.note,addEventListenerOptional(s,"click",(t=>{t.preventDefault(),t.stopPropagation(),this.scrollToHighlight(e.id)}))}}),100))}}}}(null==(r=this.properties)?void 0:r.initialAnnotationColor)&&this.highlighter.setColor(null==(n=this.properties)?void 0:n.initialAnnotationColor),this.repositionGutters()}}repositionGutters(){var e,t,r,n,i,o;let s=this.navigator.iframes[0].contentDocument;if(s&&(this.commentGutter=s.getElementById("R2_ID_GUTTER_RIGHT_CONTAINER"),(null==(e=this.navigator.view)?void 0:e.isScrollMode())&&(null==(t=this.properties)?void 0:t.enableComments)?null==(r=this.commentGutter)||r.style.removeProperty("display"):null==(n=this.commentGutter)||n.style.setProperty("display","none"),this.commentGutter&&(null==(i=this.navigator.view)?void 0:i.isScrollMode())&&(null==(o=this.properties)?void 0:o.enableComments))){this.commentGutter.innerHTML="";let e=[];this.annotator&&(e=this.annotator.getAnnotationsByChapter(this.navigator.currentLocator().href),e&&(e=e.filter((e=>{var t,r;return(null==(r=null==(t=e.highlight)?void 0:t.note)?void 0:r.length)>0})),e=this.syncPosition(e),e=this.reposition(e),e.forEach((e=>{var t,r;let n=document.createElement("i");n.innerHTML="sticky_note_2",n.className="material-icons",n.style.color=e.highlight.color;let i,o,a=s.getElementById("R2_ID_HIGHLIGHTS_CONTAINER");a&&(i=a.querySelector(`#${e.highlight.id}`));let l=i.getElementsByClassName(CLASS_HIGHLIGHT_AREA);o=l[0];const u=parseInt(o.style.height.replace("px","")),c=e.highlight.position,d=s.createElement("div");d.setAttribute("style",`position: absolute;top:${c}px;display: flex;max-width: 250px !important;height:${u}px;width: 200px;align-items: center;`);const h=s.createElement("div");d.appendChild(h);let p=e.highlight.color;TextHighlighter.isHexColor(p)&&(p=TextHighlighter.hexToRgbChannels(p)),d.innerHTML=iconTemplateColored("","",'<path d="M24 24H0V0h24v24z" fill="none"/><circle cx="12" cy="12" r="8"/>',"icon open",10,`rgba(${p.red}, ${p.green}, ${p.blue}, 1) !important`);const f=s.createElement("div");f.innerHTML=null==(t=e.highlight)?void 0:t.note,f.setAttribute("style",`height:${u}px;overflow: hidden;padding-left: 5px;`),d.appendChild(f),addEventListenerOptional(d,"click",(t=>{t.preventDefault(),t.stopPropagation(),this.scrollToHighlight(e.highlight.id)})),null==(r=this.commentGutter)||r.appendChild(d)}))))}}createTree(t,r,n){if(r){const i=this,o=this.publication.readingOrder;if(o.length){const s=(n,o)=>{let a=document.createElement("ul");a.className="sidenav-annotations";for(const l of o){let o=document.createElement("li");const u=document.createElement("a"),c=document.createElement("span");if(u.tabIndex=-1,u.className="chapter-link",l.Href){const e=this.publication.getAbsoluteHref(l.Href),t=this.publication.getTOCItemAbsolute(e);u.href=e,u.innerHTML=(null==t?void 0:t.Title)||"",o.appendChild(u)}else c.innerHTML=l.Title||"",c.className="chapter-title",o.appendChild(c);addEventListenerOptional(u,"click",(e=>{e.preventDefault(),e.stopPropagation();const t={href:u.href,locations:{progression:0},type:l.TypeLink,title:u.title};this.navigator.stopReadAloud(),this.navigator.navigate(t)}));const d=document.createElement("ol");r.forEach((function(r){var n,o,s,a,u,c,h;const p=-1!==l.Href.indexOf("#")?l.Href.slice(0,l.Href.indexOf("#")):l.Href;if(l.Href&&r.href.endsWith(p)){let l=document.createElement("li");l.className="annotation-item";let p=document.createElement("a");if(p.setAttribute("href",r.href),1===t){p.className="highlight-link";let e=document.createElement("span"),t=document.createElement("span");if(e.className="title",t.innerHTML=r.highlight.selectionInfo.cleanText,1===(null==(n=r.highlight)?void 0:n.marker))if("object"===typeof(null==(o=r.highlight)?void 0:o.color)){let e=null==(s=r.highlight)?void 0:s.color;e&&t.style.setProperty("border-bottom",`2px solid ${TextHighlighter.hexToRgbA(e)}`,"important")}else t.style.setProperty("border-bottom",`2px solid ${null==(a=r.highlight)?void 0:a.color}`,"important");else if("object"===typeof(null==(u=r.highlight)?void 0:u.color)){let e=null==(c=r.highlight)?void 0:c.color;e&&(t.style.backgroundColor=TextHighlighter.hexToRgbA(e))}else{let e=null==(h=r.highlight)?void 0:h.color;e&&(t.style.backgroundColor=e)}e.appendChild(t),p.appendChild(e);let i=document.createElement("span"),l=Math.round(100*(r.locations.progression??0))+"% through resource";i.className="subtitle",i.innerHTML=l,p.appendChild(i)}let f=document.createElement("span");if(f.className="timestamp",f.innerHTML=e.readableTimestamp(r.created),p.appendChild(f),addEventListenerOptional(p,"click",(e=>{e.preventDefault(),e.stopPropagation(),i.handleAnnotationLinkClick(e,r)})),l.appendChild(p),i.navigator.sideNavExpanded){let e=document.createElement("button");e.className="delete",e.innerHTML=icons.delete,addEventListenerOptional(e,"click",(e=>{e.preventDefault(),e.stopPropagation(),i.handleAnnotationLinkDeleteClick(t,e,r)})),l.appendChild(e)}d.appendChild(l)}})),d.children.length>0&&(a.appendChild(o),a.appendChild(d)),a.children.length>0&&n.appendChild(a),l.Children&&l.Children.length>0&&s(n,l.Children)}};n.innerHTML="",s(n,o)}}}handleAnnotationLinkClick(e,t){t?(t.href=this.publication.getAbsoluteHref(t.href),this.navigator.stopReadAloud(),this.navigator.navigate(t)):import_loglevel8.default.log("annotation data missing: ",e)}handleAnnotationLinkDeleteClick(e,t,r){import_loglevel8.default.log("annotation data locator: ",r),r?1===e&&this.deleteHighlight(r):import_loglevel8.default.log("annotation data missing: ",t)}static readableTimestamp(e){const t=new Date(e);return t.toDateString()+" "+t.toLocaleTimeString()}async getAnnotation(e){var t;return null==(t=this.annotator)?void 0:t.getAnnotation(e)}async getAnnotationByID(e){var t;return null==(t=this.annotator)?void 0:t.getAnnotationByID(e)}syncPosition(e){let t=this.navigator.iframes[0].contentDocument;const r=(e,r)=>{let n,i,o=t.getElementById("R2_ID_HIGHLIGHTS_CONTAINER");o&&(n=o.querySelector(`#${r.highlight.id}`));let s=n.getElementsByClassName(CLASS_HIGHLIGHT_AREA);i=s[0];const a=parseInt(i.style.top.replace("px","")),l={...r,highlight:{...r.highlight,position:a}};return[...e,l]};return e.reduce(r,[])}reposition(e){let t=this.navigator.iframes[0].contentDocument;const r=(r,n,i)=>{const o=e[0];let s,a,l=t.getElementById("R2_ID_HIGHLIGHTS_CONTAINER");l&&(s=l.querySelector(`#${o.highlight.id}`));let u=s.getElementsByClassName(CLASS_HIGHLIGHT_AREA);a=u[0];const c=parseInt(a.style.height.replace("px",""));let d=n.highlight.position;const h=r[i-1]&&r[i-1].highlight.position,p=c,f=0===i?0:h+p+0,g=f>d?f:d,m={...n,highlight:{...n.highlight,position:g}};return[...r,m]};return e.sort((function(e,t){return e.highlight.position-t.highlight.position})).reduce(r,[])}};init_polyfills();var import_uuid2=__toESM(require_uuid()),import_loglevel9=__toESM(require_loglevel()),BookmarkModule=class e{static async create(e){const t=new this(e.annotator,e.rights||{enableBookmarks:!1},e.publication,e,e.initialAnnotations,e.api,e.headerMenu);return await t.start(),new Promise((e=>e(t)))}constructor(e,t,r,n,i,o,s){this.annotator=e,this.rights=t,this.publication=r,this.headerMenu=s,this.initialAnnotations=i,this.properties=n,this.api=o}stop(){import_loglevel9.default.log("Bookmark module stop")}async start(){var e,t;if(this.headerMenu&&(this.bookmarksView=findElement(this.headerMenu,"#container-view-bookmarks")),this.headerMenu&&(this.sideNavSectionBookmarks=findElement(this.headerMenu,"#sidenav-section-bookmarks")),this.headerMenu){const t=findElement(this.headerMenu,"#menu-button-bookmark");t&&(null==(e=t.parentElement)||e.style.removeProperty("display")),t&&addEventListenerOptional(t,"click",this.saveBookmark.bind(this))}if(this.initialAnnotations){const e=this.initialAnnotations["bookmarks"]||null;e&&(null==(t=this.annotator)||t.initBookmarks(e))}}async handleResize(){setTimeout((async()=>{await this.drawBookmarks(),await this.showBookmarks(),setTimeout((()=>{this.properties.hideLayer?this.navigator.hideLayer("highlights"):this.navigator.showLayer("highlights")}),10)}),100)}initialize(){return new Promise((async e=>{await document.fonts.ready,this.rights.enableBookmarks&&setTimeout((()=>{this.drawBookmarks(),this.showBookmarks()}),300),e(null)}))}async deleteBookmark(e){var t,r;if(this.annotator){if(null==(t=this.api)?void 0:t.deleteBookmark){await(null==(r=this.api)?void 0:r.deleteBookmark(e));let t=await this.annotator.deleteBookmark(e);return import_loglevel9.default.log("Bookmark deleted "+JSON.stringify(t)),await this.showBookmarks(),await this.drawBookmarks(),t}{let t=await this.annotator.deleteBookmark(e);return import_loglevel9.default.log("Bookmark deleted "+JSON.stringify(t)),await this.showBookmarks(),await this.drawBookmarks(),t}}return new Promise((e=>e(null)))}async saveBookmarkPlus(){await this.addBookmarkPlus()}async saveBookmark(){var e,t,r;if(this.annotator){var n=this.publication.getTOCItem(this.navigator.currentChapterLink.href);if(this.navigator.currentTocUrl&&(n=this.publication.getTOCItem(this.navigator.currentTocUrl)),void 0===n&&(n=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href)),n){let i=n.Href;i.indexOf("#")>0&&(i=i.slice(0,i.indexOf("#")));const o=null==(e=this.navigator.view)?void 0:e.getCurrentPosition(),s=(0,import_uuid2.v4)();let a;if(this.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions){const e=this.publication.positionsByHref(this.publication.getRelativeHref(this.navigator.currentChapterLink.href)),t=Math.ceil((o??0)*(e.length-1)),r=e[t];a={...r,id:s,href:i,created:new Date,title:this.navigator.currentChapterLink.title}}else a={id:s,href:i,locations:{progression:o},created:new Date,type:this.navigator.currentChapterLink.type,title:this.navigator.currentChapterLink.title};if(!this.annotator.locatorExists(a,0)){if(null==(t=this.navigator.consumptionModule)||t.trackAction(a,"BookmarkCreated"),null==(r=this.api)?void 0:r.addBookmark){const e=await this.api.addBookmark(a);e&&(a=e),import_loglevel9.default.log(a);let t=this.annotator.saveBookmark(a);return import_loglevel9.default.log("Bookmark added "+JSON.stringify(t)),this.showBookmarks(),await this.drawBookmarks(),t}{let e=this.annotator.saveBookmark(a);return import_loglevel9.default.log("Bookmark added "+JSON.stringify(e)),this.showBookmarks(),await this.drawBookmarks(),e}}}}}async addBookmarkPlus(){var e,t,r,n,i,o,s,a,l,u,c,d,h;let p=this,f=null==(e=this.navigator.highlighter)?void 0:e.visibleTextRects[0],g=this.navigator.iframes[0].contentDocument;if(g){const e=null==(t=this.navigator.highlighter)?void 0:t.dom(g.body).getWindow().document.createRange(),o=null==(n=this.navigator.highlighter)?void 0:n.dom(null==(r=this.navigator.iframes[0].contentDocument)?void 0:r.body).getSelection();o.removeAllRanges(),f&&e.selectNodeContents(f.node),o.addRange(e);const s=getClientRectsNoOverlap(e,!1);let a=0;for(const t of s){if(!(null==(i=this.navigator.highlighter)?void 0:i.isOutsideViewport(t))){const e=o.focusNode,t=o.focusOffset;o.collapse(o.anchorNode,o.anchorOffset);for(let s=0;s<a;s++)o.modify("move","forward","line");o.extend(e,t);const r=o.focusNode,n=o.focusNode.length;o.collapse(o.anchorNode,o.anchorOffset);let i=n;i=o.anchorOffset>n?n:o.anchorOffset+1,o.modify("move","forward","character"),o.modify("move","backward","word"),o.extend(r,i),o.modify("extend","backward","character"),o.modify("extend","forward","word");break}a++}}function m(e){var t;const r={};let n=p.navigator.iframes[0].contentDocument;return n?uniqueCssSelector(e,null==(t=p.navigator.highlighter)?void 0:t.dom(n.body).getDocument(),r):void 0}let v=this.navigator.iframes[0].contentWindow,y={id:"bookmarkIcon",marker:2,icon:{id:"bookmarkIcon",title:"Bookmark",svgPath:'<path d="M0 0h24v24H0V0z" fill="none"/><path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/>',color:"#000000",position:"left"},popup:{background:"#000000",textColor:"#ffffff"},highlight:{color:"#000000",style:{default:[{property:"border-bottom",value:"0px dashed #000000",priority:"important"}]}}};if(null!==v){let e=getCurrentSelectionInfo(v,m);if(void 0===e){let t=p.navigator.iframes[0].contentDocument;e=null==(s=null==(o=this.navigator.annotationModule)?void 0:o.annotator)?void 0:s.getTemporarySelectionInfo(t)}let t=p.navigator.iframes[0].contentDocument;if(e&&t){let r=null==(c=this.navigator.highlighter)?void 0:c.createHighlight(null==(a=this.navigator.highlighter)?void 0:a.dom(t.body).getWindow(),e,null==(l=y.highlight)?void 0:l.color,!0,2,y.icon,y.popup,null==(u=y.highlight)?void 0:u.style);if(null==(h=null==(d=this.navigator.iframes[0].contentDocument)?void 0:d.getSelection())||h.removeAllRanges(),r)return this.saveAnnotation(r[0]).then((e=>{import_loglevel9.default.log("saved bookmark "+(null==e?void 0:e.id))}))}}}async saveAnnotation(e){var t,r,n;if(this.annotator){var i=this.publication.getTOCItem(this.navigator.currentChapterLink.href);this.navigator.currentTocUrl&&(i=this.publication.getTOCItem(this.navigator.currentTocUrl)),null===i&&(i=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href));const o=null==(t=this.navigator.view)?void 0:t.getCurrentPosition();let s=this.navigator.iframes[0].contentDocument;if(s){const t=findRequiredIframeElement(s,"body"),a=e.position?e.position/t.scrollHeight:o,l=(0,import_uuid2.v4)();let u;if(i){let t=i.Href;if(t.indexOf("#")>0&&(t=t.slice(0,t.indexOf("#"))),this.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions){const r=this.publication.positionsByHref(this.publication.getRelativeHref(this.navigator.currentChapterLink.href)),n=Math.ceil((a??0)*(r.length-1)),i=r[n];u={...i,id:l,href:t,created:new Date,title:this.navigator.currentChapterLink.title,highlight:e,text:{highlight:e.selectionInfo.cleanText}}}else u={id:l,href:t,locations:{progression:a},created:new Date,type:this.navigator.currentChapterLink.type,title:this.navigator.currentChapterLink.title,highlight:e,text:{highlight:e.selectionInfo.cleanText}}}if(u){if(null==(r=this.navigator.consumptionModule)||r.trackAction(u,"BookmarkCreated"),null==(n=this.api)?void 0:n.addBookmark){let e=await this.api.addBookmark(u);const t=await this.annotator.saveAnnotation(e);return await this.showBookmarks(),await this.drawBookmarks(),new Promise((e=>e(t)))}{const e=await this.annotator.saveAnnotation(u);return await this.showBookmarks(),await this.drawBookmarks(),new Promise((t=>t(e)))}}}}return new Promise((e=>e(void 0)))}getBookmarks(){let e=[];return this.annotator&&(e=this.annotator.getBookmarks()),e}showBookmarks(){let e=[];this.annotator&&(e=this.annotator.getBookmarks());let t=[];this.annotator&&(t=this.annotator.getAnnotations(),t&&(t=t.filter((e=>2===e.highlight.marker)),e?e.push.apply(e,t):e=t)),this.bookmarksView&&this.createTree(0,e,this.bookmarksView)}async drawBookmarks(){var e,t;if(this.rights.enableBookmarks&&this.navigator.highlighter)if(this.api){let t=[];if(this.annotator&&(t=await this.annotator.getAnnotations()),this.navigator.highlighter&&t&&"complete"===(null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.readyState)){await this.navigator.highlighter.destroyHighlights(0);for(const e of t){_highlights.push(e.highlight);const t=e;let n=this.navigator.currentChapterLink.href;var r=this.publication.getTOCItem(n);if(this.navigator.currentTocUrl&&(r=this.publication.getTOCItem(this.navigator.currentTocUrl)),void 0===r&&(r=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href)),r){let n=r.Href;n.indexOf("#")>0&&(n=n.slice(0,n.indexOf("#"))),t.href===n&&await this.navigator.highlighter.createHighlightDom(this.navigator.iframes[0].contentWindow,e.highlight)}}}}else{let e=[];if(this.annotator&&(e=await this.annotator.getAnnotations()),this.navigator.highlighter&&e&&"complete"===(null==(t=this.navigator.iframes[0].contentDocument)?void 0:t.readyState)){await this.navigator.highlighter.destroyHighlights(0);for(const t of e){_highlights.push(t.highlight);const e=t;let r=this.navigator.currentChapterLink.href,n=this.publication.getTOCItem(r);if(this.navigator.currentTocUrl&&(n=this.publication.getTOCItem(this.navigator.currentTocUrl)),void 0===n&&(n=this.publication.getTOCItemAbsolute(this.navigator.currentChapterLink.href)),n){let r=n.Href;r.indexOf("#")>0&&(r=r.slice(0,r.indexOf("#"))),e.href===r&&await this.navigator.highlighter.createHighlightDom(this.navigator.iframes[0].contentWindow,t.highlight)}}}}}async deleteSelectedHighlight(e){var t;(null==(t=this.api)?void 0:t.deleteBookmark)?this.api.deleteBookmark(e).then((async()=>{this.deleteLocalHighlight(e.id)})):this.deleteLocalHighlight(e.id)}async deleteLocalHighlight(e){if(this.annotator){var t=await this.annotator.deleteAnnotation(e);return import_loglevel9.default.log("Highlight deleted "+JSON.stringify(t)),await this.showBookmarks(),await this.drawBookmarks(),t}return new Promise((e=>e(null)))}createTree(t,r,n){if(r){const i=this,o=this.publication.readingOrder;if(o.length){const s=(n,o)=>{let a=document.createElement("ul");a.className="sidenav-annotations";for(const l of o){let o=document.createElement("li");const u=document.createElement("a"),c=document.createElement("span");if(u.tabIndex=-1,u.className="chapter-link",l.Href){const e=this.publication.getAbsoluteHref(l.Href),t=this.publication.getTOCItemAbsolute(e);u.href=e,u.innerHTML=(null==t?void 0:t.Title)||"",o.appendChild(u)}else c.innerHTML=l.Title||"",c.className="chapter-title",o.appendChild(c);addEventListenerOptional(u,"click",(e=>{e.preventDefault(),e.stopPropagation();const t={href:u.href,locations:{progression:0},type:l.TypeLink,title:u.title};this.navigator.stopReadAloud(),this.navigator.navigate(t)}));const d=document.createElement("ol");r.forEach((function(r){const n=-1!==l.Href.indexOf("#")?l.Href.slice(0,l.Href.indexOf("#")):l.Href;if(l.Href&&r.href.endsWith(n)){let n=document.createElement("li");n.className="annotation-item";let o=document.createElement("a");if(o.setAttribute("href",r.href),0===t){o.className="bookmark-link";let e=document.createElement("span"),t=Math.round(100*(r.locations.progression??0))+"% through resource";e.className="title",e.innerHTML=t,o.appendChild(e)}let s=document.createElement("span");if(s.className="timestamp",s.innerHTML=e.readableTimestamp(r.created),o.appendChild(s),addEventListenerOptional(o,"click",(e=>{e.preventDefault(),e.stopPropagation(),i.handleAnnotationLinkClick(e,r)})),n.appendChild(o),i.navigator.sideNavExpanded){let e=document.createElement("button");e.className="delete",e.innerHTML=icons.delete,addEventListenerOptional(e,"click",(e=>{e.preventDefault(),e.stopPropagation(),i.handleAnnotationLinkDeleteClick(t,e,r)})),n.appendChild(e)}d.appendChild(n)}})),d.children.length>0&&(a.appendChild(o),a.appendChild(d)),a.children.length>0&&n.appendChild(a),l.Children&&l.Children.length>0&&s(n,l.Children)}};n.innerHTML="",s(n,o)}}}handleAnnotationLinkClick(e,t){t?(t.href=this.publication.getAbsoluteHref(t.href),this.navigator.stopReadAloud(),this.navigator.navigate(t)):import_loglevel9.default.log("bookmark data missing: ",e)}handleAnnotationLinkDeleteClick(e,t,r){import_loglevel9.default.log("bookmark data locator: ",r),r?0===e&&this.deleteBookmark(r):import_loglevel9.default.log("bookmark data missing: ",t)}static readableTimestamp(e){const t=new Date(e);return t.toDateString()+" "+t.toLocaleTimeString()}async getAnnotation(e){var t;return null==(t=this.annotator)?void 0:t.getAnnotation(e)}async getAnnotationByID(e){var t;return null==(t=this.annotator)?void 0:t.getAnnotationByID(e)}};init_polyfills();var import_media_overlay=__toESM(require_media_overlay());init_polyfills();var import_loglevel10=__toESM(require_loglevel()),R2_MO_CLASS_ACTIVE="r2-mo-active",_MEDIAOVERLAYREFS=class{};_MEDIAOVERLAYREFS.COLOR_REF="color",_MEDIAOVERLAYREFS.AUTO_SCROLL_REF="autoscroll",_MEDIAOVERLAYREFS.AUTO_TURN_REF="autoturn",_MEDIAOVERLAYREFS.VOLUME_REF="volume",_MEDIAOVERLAYREFS.RATE_REF="rate",_MEDIAOVERLAYREFS.COLOR_KEY="mediaoverlay-"+_MEDIAOVERLAYREFS.COLOR_REF,_MEDIAOVERLAYREFS.AUTO_SCROLL_KEY="mediaoverlay-"+_MEDIAOVERLAYREFS.AUTO_SCROLL_REF,_MEDIAOVERLAYREFS.AUTO_TURN_KEY="mediaoverlay-"+_MEDIAOVERLAYREFS.AUTO_TURN_REF,_MEDIAOVERLAYREFS.VOLUME_KEY="mediaoverlay-"+_MEDIAOVERLAYREFS.VOLUME_REF,_MEDIAOVERLAYREFS.RATE_KEY="mediaoverlay-"+_MEDIAOVERLAYREFS.RATE_REF;var MEDIAOVERLAYREFS=_MEDIAOVERLAYREFS,MediaOverlaySettings=class{constructor(e,t,r){this.MEDIAOVERLAYSETTINGS="mediaOverlaySetting",this.color="r2-mo-active",this.autoScroll=!0,this.autoTurn=!0,this.volume=1,this.rate=1,this.playing=!1,this.resourceReady=!1,this.wait=1,this.settingsChangeCallback=()=>{},this.store=e,this.api=t,this.headerMenu=r,this.initialise(),import_loglevel10.default.log(this.api)}static create(e){const t=new this(e.store,e.api,e.headerMenu);if(e.initialMediaOverlaySettings){let r=e.initialMediaOverlaySettings;(null==r?void 0:r.color)&&(t.color=r.color,import_loglevel10.default.log(t.color)),(null==r?void 0:r.autoScroll)&&(t.autoScroll=r.autoScroll,import_loglevel10.default.log(t.autoScroll)),(null==r?void 0:r.autoTurn)&&(t.autoTurn=r.autoTurn,import_loglevel10.default.log(t.autoScroll)),(null==r?void 0:r.volume)&&(t.volume=r.volume,import_loglevel10.default.log(t.volume)),(null==r?void 0:r.rate)&&(t.rate=r.rate,import_loglevel10.default.log(t.rate)),(null==r?void 0:r.wait)&&(t.wait=r.wait,import_loglevel10.default.log(t.wait))}return t.initializeSelections(),t}stop(){import_loglevel10.default.log("MediaOverlay settings stop")}initialise(){this.autoScroll=null!=this.getProperty(MEDIAOVERLAYREFS.AUTO_SCROLL_KEY)?this.getProperty(MEDIAOVERLAYREFS.AUTO_SCROLL_KEY).value:this.autoScroll,this.autoTurn=null!=this.getProperty(MEDIAOVERLAYREFS.AUTO_TURN_KEY)?this.getProperty(MEDIAOVERLAYREFS.AUTO_TURN_KEY).value:this.autoTurn,this.color=null!=this.getProperty(MEDIAOVERLAYREFS.COLOR_KEY)?this.getProperty(MEDIAOVERLAYREFS.COLOR_KEY).value:this.color,this.volume=null!=this.getProperty(MEDIAOVERLAYREFS.VOLUME_KEY)?this.getProperty(MEDIAOVERLAYREFS.VOLUME_KEY).value:this.volume,this.rate=null!=this.getProperty(MEDIAOVERLAYREFS.RATE_KEY)?this.getProperty(MEDIAOVERLAYREFS.RATE_KEY).value:this.rate,this.userProperties=this.getMediaOverlaySettings()}reset(){this.color="redtext",this.autoScroll=!0,this.autoTurn=!0,this.volume=1,this.rate=1,this.wait=1,this.userProperties=this.getMediaOverlaySettings()}initializeSelections(){this.headerMenu&&(this.settingsView=findElement(this.headerMenu,"#container-view-mediaoverlay-settings"))}setControls(){this.settingsView&&this.renderControls(this.settingsView)}renderControls(e){this.headerMenu&&(this.speechAutoTurn=findElement(this.headerMenu,"#mediaOverlayAutoTurn")),this.headerMenu&&(this.speechAutoScroll=findElement(this.headerMenu,"#mediaOverlayAutoScroll")),this.headerMenu&&(this.speechVolume=findElement(this.headerMenu,"#mediaOverlayVolume")),this.headerMenu&&(this.speechRate=findElement(this.headerMenu,"#mediaOverlayRate")),this.speechAutoScroll&&(this.speechAutoScroll.checked=this.autoScroll),this.speechAutoTurn&&(this.speechAutoTurn.checked=this.autoTurn),this.speechVolume&&(this.speechVolume.value=this.volume.toString()),this.speechRate&&(this.speechRate.value=this.volume.toString()),addEventListenerOptional(findElement(e,"ul"),"click",(e=>{e.stopPropagation()}))}onSettingsChange(e){this.settingsChangeCallback=e}storeProperty(e){this.updateUserSettings(),this.saveProperty(e)}updateUserSettings(){var e,t,r,n,i,o,s;let a={color:null==(e=this.userProperties.getByRef(MEDIAOVERLAYREFS.COLOR_REF))?void 0:e.value,autoScroll:null==(t=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_SCROLL_REF))?void 0:t.value,autoTurn:null==(r=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_TURN_REF))?void 0:r.value,volume:null==(n=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF))?void 0:n.value,rate:null==(i=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF))?void 0:i.value};this.applyMediaOverlaySettings(a),(null==(o=this.api)?void 0:o.updateSettings)&&(null==(s=this.api)||s.updateSettings(a).then((async e=>{import_loglevel10.default.log("api updated sync settings",e)})))}getMediaOverlaySettings(){let e=new UserProperties;return e.addSwitchable("mediaoverlay-auto-scroll-off","mediaoverlay-auto-scroll-on",this.autoScroll,MEDIAOVERLAYREFS.AUTO_SCROLL_REF,MEDIAOVERLAYREFS.AUTO_SCROLL_KEY),e.addSwitchable("mediaoverlay-auto-turn-off","mediaoverlay-auto-turn-on",this.autoTurn,MEDIAOVERLAYREFS.AUTO_TURN_REF,MEDIAOVERLAYREFS.AUTO_TURN_KEY),e.addStringable(this.color,MEDIAOVERLAYREFS.COLOR_REF,MEDIAOVERLAYREFS.COLOR_KEY),e.addIncremental(this.volume,.1,1,.1,"",MEDIAOVERLAYREFS.VOLUME_REF,MEDIAOVERLAYREFS.VOLUME_KEY),e.addIncremental(this.rate,.1,3,.1,"",MEDIAOVERLAYREFS.RATE_REF,MEDIAOVERLAYREFS.RATE_KEY),e}saveProperty(e){let t=this.store.get(this.MEDIAOVERLAYSETTINGS);if(t){let r=JSON.parse(t);r=r.filter((t=>t.name!==e.name)),r.push(e),this.store.set(this.MEDIAOVERLAYSETTINGS,JSON.stringify(r))}else{let t=[];t.push(e),this.store.set(this.MEDIAOVERLAYSETTINGS,JSON.stringify(t))}return e}getProperty(e){let t=this.store.get(this.MEDIAOVERLAYSETTINGS);if(t){let r=JSON.parse(t);return r=r.filter((t=>t.name===e)),0===r.length?null:r[0]}return null}resetMediaOverlaySettings(){this.store.remove(this.MEDIAOVERLAYSETTINGS),this.reset(),this.settingsChangeCallback()}applyMediaOverlaySettings(e){if(e.color){this.color=e.color;let t=this.userProperties.getByRef(MEDIAOVERLAYREFS.COLOR_REF);t&&(t.value=this.color,this.saveProperty(t)),this.settingsChangeCallback()}if(void 0!==e.autoScroll){import_loglevel10.default.log("autoScroll "+this.autoScroll),this.autoScroll=e.autoScroll;let t=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_SCROLL_REF);t&&(t.value=this.autoScroll,this.saveProperty(t)),this.settingsChangeCallback()}if(void 0!==e.autoTurn){import_loglevel10.default.log("autoTurn "+this.autoTurn),this.autoTurn=e.autoTurn;let t=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_TURN_REF);t&&(t.value=this.autoTurn,this.saveProperty(t)),this.settingsChangeCallback()}if(e.volume){import_loglevel10.default.log("volume "+this.volume),this.volume=e.volume;let t=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF);t&&(t.value=this.volume,this.saveProperty(t)),this.settingsChangeCallback()}if(e.rate){import_loglevel10.default.log("rate "+this.rate),this.rate=e.rate;let t=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF);t&&(t.value=this.rate,this.saveProperty(t)),this.settingsChangeCallback()}}applyMediaOverlaySetting(e,t){if(e===MEDIAOVERLAYREFS.COLOR_REF){this.color=t;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.COLOR_REF);e&&(e.value=this.color,this.saveProperty(e)),this.settingsChangeCallback()}else if(e===MEDIAOVERLAYREFS.AUTO_SCROLL_REF){this.autoScroll=t;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_SCROLL_REF);e&&(e.value=this.autoScroll,this.saveProperty(e)),this.settingsChangeCallback()}else if(e===MEDIAOVERLAYREFS.AUTO_TURN_REF){this.autoTurn=t;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.AUTO_TURN_REF);e&&(e.value=this.autoTurn,this.saveProperty(e)),this.settingsChangeCallback()}}increase(e){var t,r;if("mo_volume"===e){this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF).increment(),this.volume=null==(t=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF))?void 0:t.value;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF);e&&this.storeProperty(e),this.settingsChangeCallback()}else if("mo_rate"===e){this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF).increment(),this.rate=null==(r=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF))?void 0:r.value;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF);e&&this.storeProperty(e),this.settingsChangeCallback()}}decrease(e){var t,r;if("mo_volume"===e){this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF).decrement(),this.volume=null==(t=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF))?void 0:t.value;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.VOLUME_REF);e&&this.storeProperty(e),this.settingsChangeCallback()}else if("mo_rate"===e){this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF).decrement(),this.rate=null==(r=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF))?void 0:r.value;let e=this.userProperties.getByRef(MEDIAOVERLAYREFS.RATE_REF);e&&this.storeProperty(e),this.settingsChangeCallback()}}},import_loglevel11=__toESM(require_loglevel()),MediaOverlayModule=class{constructor(e,t,r){this.play=findElement(document,"#menu-button-play"),this.pause=findElement(document,"#menu-button-pause"),this.currentLinkIndex=0,this.pid=void 0,this.__ontimeupdate=!1,this.ontimeupdate=async e=>{import_loglevel11.default.log("ontimeupdate"),this.trackCurrentTime()},this.ensureOnTimeUpdate=(e,t)=>{e?this.__ontimeupdate&&(this.__ontimeupdate=!1,this.audioElement&&this.audioElement.removeEventListener("timeupdate",this.ontimeupdate),cancelAnimationFrame(this.myReq)):this.__ontimeupdate&&!t||(this.__ontimeupdate=!0,t&&(this.audioElement&&this.audioElement.removeEventListener("timeupdate",this.ontimeupdate),this.audioElement.addEventListener("timeupdate",this.ontimeupdate)))},this.publication=e,this.settings=t,this.properties=r}static create(e){const t=new this(e.publication,e.settings,e);return t.start(),t}stop(){import_loglevel11.default.log("MediaOverlay module stop")}start(){import_loglevel11.default.log("MediaOverlay module start")}async initialize(){return new Promise((async e=>{await document.fonts.ready,this.settings.setControls(),this.settings.onSettingsChange((()=>{this.audioElement.volume=this.settings.volume,this.audioElement.playbackRate=this.settings.rate})),e()}))}async initializeResource(e){this.currentLinks=e,this.currentLinkIndex=0,await this.playLink()}async playLink(){var e,t;let r=this.currentLinks[this.currentLinkIndex];if(null==(e=null==r?void 0:r.Properties)?void 0:e.MediaOverlay){this.ensureOnTimeUpdate(!1,!1);const e=null==(t=r.Properties)?void 0:t.MediaOverlay,i=new URL(e,this.publication.manifestUrl),o=i.toString();let s,a;try{s=await fetch(o,this.navigator.requestConfig)}catch(n){return void console.error(n,o)}s.ok||import_loglevel11.default.log("BAD RESPONSE?!");try{a=await s.json()}catch(n){console.error(n)}if(!a)return void import_loglevel11.default.log("## moJson"+a);r.MediaOverlays=TaJsonDeserialize(a,import_media_overlay.MediaOverlayNode),r.MediaOverlays.initialized=!0;const l=r.HrefDecoded||r.Href,u=new URL("https://dita.digital/"+l);await this.playMediaOverlays(u.pathname.substr(1),r.MediaOverlays,void 0)}else this.audioElement&&await this.audioElement.pause(),this.currentLinks.length>1&&0===this.currentLinkIndex?(this.currentLinkIndex++,await this.playLink()):this.settings.autoTurn&&this.settings.playing?(this.audioElement&&await this.audioElement.pause(),this.navigator.nextResource()):await this.stopReadAloud()}async startReadAloud(){var e;if(this.navigator.rights.enableMediaOverlays){if(this.settings.playing=!0,this.audioElement&&(null==(e=this.currentLinks[this.currentLinkIndex])?void 0:e.Properties.MediaOverlay)){const e=this.currentAudioBegin?this.currentAudioBegin:0;this.audioElement.currentTime=e,await this.audioElement.play(),this.ensureOnTimeUpdate(!1,!0),this.audioElement.volume=this.settings.volume,this.audioElement.playbackRate=this.settings.rate}else this.currentLinks.length>1&&0===this.currentLinkIndex?(this.currentLinkIndex++,await this.playLink()):this.settings.autoTurn&&this.settings.playing?this.navigator.nextResource():await this.stopReadAloud();this.play&&(this.play.style.display="none"),this.pause&&this.pause.style.removeProperty("display")}}async stopReadAloud(){this.navigator.rights.enableMediaOverlays&&(this.settings.playing=!1,this.audioElement&&this.audioElement.pause(),this.play&&this.play.style.removeProperty("display"),this.pause&&(this.pause.style.display="none"))}pauseReadAloud(){this.navigator.rights.enableMediaOverlays&&(this.settings.playing=!1,this.audioElement.pause(),this.play&&this.play.style.removeProperty("display"),this.pause&&(this.pause.style.display="none"))}async resumeReadAloud(){this.navigator.rights.enableMediaOverlays&&(this.settings.playing=!0,await this.audioElement.play(),this.play&&(this.play.style.display="none"),this.pause&&this.pause.style.removeProperty("display"))}findDepthFirstTextAudioPair(e,t,r){let n,i;if(import_loglevel11.default.log("findDepthFirstTextAudioPair()"),t.Text){const o=new URL("https://dita.digital/"+t.Text);if(o.pathname.substr(1)===e){if(n=!0,o.hash&&r){i=!1;const e=o.hash.substr(1);for(const t of r)if(t===e){i=!0;break}}}else n=!1}if(import_loglevel11.default.log("isFragmentIDMatch: "+i),import_loglevel11.default.log("isTextUrlMatch: "+n),!t.Children||!t.Children.length)return import_loglevel11.default.log("findDepthFirstTextAudioPair() - leaf text/audio pair"),n?i||n&&!r?(import_loglevel11.default.log("findDepthFirstTextAudioPair() - leaf - isFragmentIDMatch || (isTextUrlMatch && !textFragmentIDChain"),t):void 0:void import_loglevel11.default.log("findDepthFirstTextAudioPair() - leaf - !isTextUrlMatch");const o=r;let s=r;for(const a of t.Children){import_loglevel11.default.log("findDepthFirstTextAudioPair() - child"),import_loglevel11.default.log(JSON.stringify(a));const t=this.findDepthFirstTextAudioPair(e,a,s);if(null===t&&(import_loglevel11.default.log("findDepthFirstTextAudioPair() - child - match null (skip)"),s=void 0),t)return import_loglevel11.default.log("findDepthFirstTextAudioPair() - child - match"),import_loglevel11.default.log(JSON.stringify(t)),t}if(i){import_loglevel11.default.log("findDepthFirstTextAudioPair() - post isFragmentIDMatch");const r=this.findDepthFirstTextAudioPair(e,t,void 0);return r?(import_loglevel11.default.log("findDepthFirstTextAudioPair() - post isFragmentIDMatch - match"),import_loglevel11.default.log(JSON.stringify(r)),r):r}return o&&!s?null:void 0}trackCurrentTime(){if(cancelAnimationFrame(this.myReq),this.mediaOverlayTextAudioPair)try{this.currentAudioEnd&&this.audioElement.currentTime>=this.currentAudioEnd-.05&&(import_loglevel11.default.log("ontimeupdate - mediaOverlaysNext()"),this.mediaOverlaysNext());const e=this.mediaOverlayTextAudioPair.Text.lastIndexOf("#"),t=this.mediaOverlayTextAudioPair.Text.substr(e+1);this.mediaOverlayHighlight(t),this.myReq=requestAnimationFrame(this.trackCurrentTime.bind(this))}catch(e){}}mediaOverlaysNext(e){if(import_loglevel11.default.log("mediaOverlaysNext()"),this.mediaOverlayRoot&&this.mediaOverlayTextAudioPair){const t=this.findNextTextAudioPair(this.mediaOverlayRoot,this.mediaOverlayTextAudioPair,{prev:void 0},!!e);if(t){let e=!1;if(this.mediaOverlayTextAudioPair.Text&&t.Text){const r=new URL("https://dita.digital/"+this.mediaOverlayTextAudioPair.Text),n=new URL("https://dita.digital/"+t.Text);r.pathname!==n.pathname&&(import_loglevel11.default.log("mediaOverlaysNext() SWITCH! "+r.pathname+" != "+n.pathname),e=!0)}e?this.mediaOverlaysStop():(import_loglevel11.default.log("mediaOverlaysNext() - playMediaOverlaysAudio()"),setTimeout((async()=>{await this.playMediaOverlaysAudio(t,void 0,void 0)}),0))}else import_loglevel11.default.log("mediaOverlaysNext() - navLeftOrRight()"),this.mediaOverlaysStop(),this.currentLinks.length>1&&0===this.currentLinkIndex?(this.currentLinkIndex++,this.playLink()):(this.audioElement.pause(),this.settings.autoTurn&&this.settings.playing?(this.audioElement.pause(),this.navigator.nextResource()):this.stopReadAloud())}else import_loglevel11.default.log("mediaOverlaysNext() - navLeftOrRight() 2"),this.mediaOverlaysStop(),this.currentLinks.length>1&&0===this.currentLinkIndex?(this.currentLinkIndex++,this.playLink()):(this.audioElement.pause(),this.settings.autoTurn&&this.settings.playing?(this.audioElement.pause(),this.navigator.nextResource()):this.stopReadAloud())}mediaOverlaysStop(){import_loglevel11.default.log("mediaOverlaysStop()"),this.mediaOverlaysPause(),this.mediaOverlayRoot=void 0,this.mediaOverlayTextAudioPair=void 0}mediaOverlaysPause(){import_loglevel11.default.log("mediaOverlaysPause()"),this.mediaOverlayHighlight(void 0),this.audioElement&&this.audioElement.pause()}findNextTextAudioPair(e,t,r,n){if(!e.Children||!e.Children.length)return(null==r?void 0:r.prev)===t?(import_loglevel11.default.log("findNextTextAudioPair() - prevMo === moToMatch"),e):(import_loglevel11.default.log("findNextTextAudioPair() - set previous"),import_loglevel11.default.log(JSON.stringify(e)),void(r.prev=e));for(const i of e.Children){import_loglevel11.default.log("findNextTextAudioPair() - child"),import_loglevel11.default.log(JSON.stringify(i));const e=this.findNextTextAudioPair(i,t,r,n);if(e)return import_loglevel11.default.log("findNextTextAudioPair() - match"),import_loglevel11.default.log(JSON.stringify(e)),e}}async playMediaOverlaysAudio(e,t,r){if(import_loglevel11.default.log("playMediaOverlaysAudio()"),this.mediaOverlayTextAudioPair=e,!e.Audio)return;const n=new URL(e.Audio,this.publication.manifestUrl),i=n.toString(),o=new URL(i);o.hash="",o.search="";const s=o.toString(),a="undefined"!==typeof t,l="undefined"!==typeof r;if(this.previousAudioEnd=this.currentAudioEnd,this.currentAudioBegin=void 0,this.currentAudioEnd=void 0,a||l)this.currentAudioBegin=t,this.currentAudioEnd=r;else if(n.hash){const e=n.hash.match(/t=([0-9.]+)(,([0-9.]+))?/);if(e&&e.length>=1){const t=e[1];try{this.currentAudioBegin=parseFloat(t)}catch(c){import_loglevel11.default.error(c)}if(e.length>=3){const t=e[3];try{this.currentAudioEnd=parseFloat(t)}catch(c){import_loglevel11.default.error(c)}}}}import_loglevel11.default.log(`${i} => [${this.currentAudioBegin}-${this.currentAudioEnd}]`);const u=async e=>{if(!this.audioElement)return;const t=this.currentAudioBegin?this.currentAudioBegin:0;if(e||this.audioElement.paused)if(e&&!t||this.audioElement.currentTime===t){if(import_loglevel11.default.log("playMediaOverlaysAudio() - playClip() - _currentAudioElement.play()"),this.ensureOnTimeUpdate(!1,!1),this.audioElement.playbackRate=this.settings.rate,this.audioElement.volume=this.settings.volume,this.settings.playing){let e=function(){t.settings.resourceReady?setTimeout((async()=>{await t.audioElement.play(),t.ensureOnTimeUpdate(!1,!0)}),1e3*t.settings.wait):setTimeout(e,200)},t=this;e()}}else{import_loglevel11.default.log("playMediaOverlaysAudio() - playClip() - ontimeupdateSeeked");const e=async t=>{if(this.audioElement.removeEventListener("timeupdate",e),import_loglevel11.default.log("playMediaOverlaysAudio() - playClip() - ontimeupdateSeeked - .play()"),this.ensureOnTimeUpdate(!1,!1),this.audioElement&&(this.audioElement.playbackRate=this.settings.rate,this.audioElement.volume=this.settings.volume,this.settings.playing)){let e=function(){t.settings.resourceReady?setTimeout((async()=>{await t.audioElement.play(),t.ensureOnTimeUpdate(!1,!0)}),1e3*t.settings.wait):setTimeout(e,200)},t=this;e()}};this.audioElement.addEventListener("timeupdate",e),this.audioElement.currentTime=t}else{const e=this.previousAudioUrl===this.currentAudioUrl&&"undefined"!==typeof this.previousAudioEnd&&this.previousAudioEnd>t-.02&&this.previousAudioEnd<=t&&this.audioElement.currentTime>=t-.1;this.ensureOnTimeUpdate(!1,!1),e?import_loglevel11.default.log("playMediaOverlaysAudio() - playClip() - ensureOnTimeUpdate"):(import_loglevel11.default.log("playMediaOverlaysAudio() - playClip() - currentTime = timeToSeekTo"),this.audioElement.currentTime=t)}};if(this.previousAudioUrl=this.currentAudioUrl,this.currentAudioUrl&&s===this.currentAudioUrl)import_loglevel11.default.log("playMediaOverlaysAudio() - playClip()"),await u(!1);else{this.currentAudioUrl=s,import_loglevel11.default.log("playMediaOverlaysAudio() - RESET: "+this.previousAudioUrl+" => "+this.currentAudioUrl),this.audioElement=document.getElementById("AUDIO_MO_ID"),this.audioElement&&(this.audioElement.pause(),this.audioElement.setAttribute("src",""),this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement)),this.audioElement=document.createElement("audio"),this.audioElement.setAttribute("style","display: none"),this.audioElement.setAttribute("id","AUDIO_MO_ID"),this.audioElement.setAttribute("role","media-overlays"),this.audioElement.volume=this.settings.volume,this.audioElement.playbackRate=this.settings.rate,document.body.appendChild(this.audioElement),this.audioElement.addEventListener("error",(e=>{import_loglevel11.default.log("-1) error: "+(this.currentAudioUrl!==e.currentTarget.src?this.currentAudioUrl+" -- ":"")+e.currentTarget.src.substr(e.currentTarget.src.lastIndexOf("/"))),this.audioElement&&this.audioElement.error&&(import_loglevel11.default.log(this.audioElement.error.code),import_loglevel11.default.log(this.audioElement.error.message))}));const e=async t=>{const r=t.currentTarget;r.removeEventListener("canplaythrough",e),import_loglevel11.default.log("oncanplaythrough"),await u(!0)};this.audioElement.addEventListener("canplaythrough",e);const t=async e=>{import_loglevel11.default.log("onended"),this.currentLinks.length>1&&0===this.currentLinkIndex?(this.currentLinkIndex++,await this.playLink()):this.settings.autoTurn&&this.settings.playing?(this.audioElement.pause(),this.navigator.nextResource()):this.stopReadAloud()};this.audioElement.addEventListener("ended",t),this.audioElement.playbackRate=this.settings.rate,this.audioElement.setAttribute("src",this.currentAudioUrl)}}async playMediaOverlays(e,t,r){import_loglevel11.default.log("playMediaOverlays()");let n=r?r.filter((e=>e)):void 0;n&&0===n.length&&(n=void 0);let i=this.findDepthFirstTextAudioPair(e,t,n);!i&&n&&(import_loglevel11.default.log("playMediaOverlays() - findDepthFirstTextAudioPair() SECOND CHANCE "),import_loglevel11.default.log(JSON.stringify(n,null,4)),import_loglevel11.default.log(JSON.stringify(t,null,4)),i=this.findDepthFirstTextAudioPair(e,t,void 0)),i?i.Audio&&(import_loglevel11.default.log("playMediaOverlays() - playMediaOverlaysAudio()"),this.mediaOverlayRoot=t,await this.playMediaOverlaysAudio(i,void 0,void 0)):import_loglevel11.default.log("playMediaOverlays() - !moTextAudioPair "+e)}mediaOverlayHighlight(e){var t,r,n,i,o,s,a,l,u;import_loglevel11.default.log("moHighlight:  ## "+e);let c=null==(r=null==(t=this.publication.Metadata)?void 0:t.MediaOverlay)?void 0:r.ActiveClass;c||(c=this.settings.color);const d=null==(n=this.navigator.iframes[0].contentDocument)?void 0:n.documentElement.getAttribute("style"),h=!!d&&d.indexOf("readium-night-on")>0,p=!!d&&d.indexOf("readium-sepia-on")>0;if("fixed"!==((null==(i=this.publication.Metadata.Rendition)?void 0:i.Layout)??"unknown")&&(c=h||p?R2_MO_CLASS_ACTIVE:c||R2_MO_CLASS_ACTIVE),this.pid){let e;e=0===this.currentLinkIndex?null==(o=this.navigator.iframes[0].contentDocument)?void 0:o.getElementById(this.pid):null==(s=this.navigator.iframes[1].contentDocument)?void 0:s.getElementById(this.pid),e&&e.classList.remove(c)}let f;e&&(f=0===this.currentLinkIndex?null==(a=this.navigator.iframes[0].contentDocument)?void 0:a.getElementById(e):null==(l=this.navigator.iframes[1].contentDocument)?void 0:l.getElementById(e),f&&f.classList.add(c),this.pid=e),f&&"fixed"!==((null==(u=this.publication.Metadata.Rendition)?void 0:u.Layout)??"unknown")&&f.scrollIntoView({block:"center",behavior:"smooth"})}};init_polyfills();var import_loglevel12=__toESM(require_loglevel()),TimelineModule=class{static async create(e){const t=new this(e.publication);return await t.start(),t}constructor(e){this.publication=e}async stop(){import_loglevel12.default.log("Timeline module stop")}async start(){this.timelineContainer=findElement(document,"#container-view-timeline"),this.positionSlider=findElement(document,"#positionSlider"),this.publication.positions?this.positionSlider&&(this.positionSlider.style.display="block"):this.positionSlider&&(this.positionSlider.style.display="none")}async initialize(){return new Promise((async e=>{var t;await document.fonts.ready;let r=this.navigator.currentLocator();(this.navigator.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions)&&(this.positionSlider&&(this.positionSlider.value=(r.locations.position??0).toString()),this.positionSlider&&(this.positionSlider.max=((r.locations.totalRemainingPositions??0)+(r.locations.position??0)).toString())),this.timelineContainer&&(this.timelineContainer.innerHTML=""),null==(t=this.publication.readingOrder)||t.forEach((e=>{var t,r;const n=this.publication.getAbsoluteHref(e.Href),i=this.publication.getTOCItemAbsolute(n),o=-1!==(null==i?void 0:i.Href.indexOf("#"))?null==i?void 0:i.Href.slice(0,null==i?void 0:i.Href.indexOf("#")):i.Href,s=this.publication.getAbsoluteHref(o??"");var a;a=this.publication.positions&&"fixed"!==(null==(t=this.navigator.view)?void 0:t.layout)?e.contentWeight?e.contentWeight:1:100/((null==(r=this.publication.readingOrder)?void 0:r.length)??0);var l=document.createElement("div");if(l.style.height=a+"%",l.style.width="100%",l.className="chapter",void 0!==(null==i?void 0:i.Title)){var u=document.createElement("span");u.innerHTML=i.Title,u.className="chapter-tooltip",l.appendChild(u)}addEventListenerOptional(l,"click",(t=>{var r;t.preventDefault(),t.stopPropagation(),this.publication.positions||this.navigator.rights.autoGeneratePositions&&this.publication.positions?(r={...this.publication.positions.filter((t=>t.href===e.Href))[0]},r.href=this.publication.getAbsoluteHref(r.href)):r={href:s,locations:{progression:0},type:e.TypeLink,title:e.Title},import_loglevel12.default.log(r),this.navigator.navigate(r)})),s===this.navigator.currentChapterLink.href?l.className+=" active":l.className=l.className.replace(" active",""),this.timelineContainer&&this.timelineContainer.appendChild(l)})),e()}))}};init_polyfills();var import_debounce3=__toESM(require_debounce());init_polyfills();var import_loglevel13=__toESM(require_loglevel());function delay(e,t){return new Promise((function(r){setTimeout(r.bind(null,t),e)}))}var IS_DEV=!1;import_loglevel13.default.setLevel(IS_DEV?"trace":"warn",!0);var import_devtools_detector=__toESM(require_devtools_detector()),import_loglevel14=__toESM(require_loglevel());init_polyfills();var import_browserslist=__toESM(require_browserslist(),1),import_regexp_tree=__toESM(require_regexp_tree3(),1);init_polyfills();var regexes=[{regex:/IE (\d+)\.(\d+)/,family:"ie",maxVersion:[7,1/0,1/0]},{regex:/Trident\/4\.0/,family:"ie",version:[8,0,0]},{regex:/Trident\/5\.0/,family:"ie",version:[9,0,0]},{regex:/Trident\/6\.0/,family:"ie",version:[10,0,0]},{regex:/Trident\/[78]\.0/,family:"ie",version:[11,0,0]},{regex:/Edge?\/(\d+)(\.(\d+)|)(\.(\d+)|)/,family:"edge"},{regex:/Firefox\/(\d+)\.(\d+)(\.(\d+)|)/,family:"firefox"},{regex:/Chrom(ium|e)\/(\d+)\.(\d+)(\.(\d+)|)/,family:"chrome"},{regex:/Chrom(ium|e)\/(\d+)\.(\d+)(\.(\d+)|)([\d.]+$|.*Safari\/(?![\d.]+ Edge\/[\d.]+$))/,family:"chrome",maxVersion:[70,1/0,1/0]},{regex:/Maci.+ Version\/(\d+)\.(\d+)([.,](\d+)|)( \(\w+\)|)( Mobile\/\w+|) Safari\//,family:"safari"},{regex:/Opera\/9\.80.+Version\/(\d+)\.(\d+)(\.(\d+)|)/,family:"opera",maxVersion:[12,15,0]},{regex:/Chrome.+OPR\/(\d+)\.(\d+)\.(\d+)/,family:"opera",minVersion:[15,0,0]},{regex:/(CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(\d+)[_.](\d+)([_.](\d+)|)/,family:"ios_saf"},{regex:/[^e] (CPU[ +]OS|iPhone[ +]OS|CPU[ +]iPhone|CPU IPhone OS|CPU iPad OS)[ +]+(\d+)[_.](\d+)([_.](\d+)|)/,family:"ios_saf",version:[7,0,3]},{regex:/Opera Mini/,family:"op_mini"},{regex:/Android Donut/,family:"android",version:[1,2,0]},{regex:/Android Eclair/,family:"android",version:[2,1,0]},{regex:/Android Froyo/,family:"android",version:[2,2,0]},{regex:/Android Gingerbread/,family:"android",version:[2,3,0]},{regex:/Android Honeycomb/,family:"android",version:[3,0,0]},{regex:/Android:?[ /-](\d+)(\.(\d+)|)(\.(\d+)|)/,family:"android"},{regex:/Android:?[ /-](\d+)(\.(\d+)|)(\.(\d+)|);(?! ARM; Trident)/,family:"android",version:[4,0,0]},{regex:/PlayBook.+RIM Tablet OS (\d+)\.(\d+)\.(\d+)/,family:"bb"},{regex:/(Black[bB]erry|BB10).+Version\/(\d+)\.(\d+)\.(\d+)/,family:"bb"},{regex:/Opera\/.+Opera Mobi.+Version\/(\d+)\.(\d+)/,family:"op_mob",maxVersion:[12,16,0]},{regex:/Mobile Safari.+OPR\/(\d+)\.(\d+)\.(\d+)/,family:"op_mob",minVersion:[14,0,0]},{regex:/Android.+Firefox\/(\d+)\.(\d+)(\.(\d+)|)/,family:"and_ff"},{regex:/Android.+Chrom(ium|e)\/(\d+)\.(\d+)(\.(\d+)|)/,family:"and_chr"},{regex:/IEMobile[ /](\d+)\.(\d+)/,family:"ie_mob"},{regex:/Android.+(UC? ?Browser|UCWEB|U3)[ /]?(\d+)\.(\d+)\.(\d+)/,family:"and_uc"},{regex:/SamsungBrowser\/(\d+)\.(\d+)/,family:"samsung"},{regex:/Android.+MQQBrowser\/(\d+)(\.(\d+)|)(\.(\d+)|)/,family:"and_qq"},{regex:/baidubrowser[/\s](\d+)(\.(\d+)|)(\.(\d+)|)/,family:"baidu"},{regex:/K[Aa][Ii]OS\/(\d+)\.(\d+)(\.(\d+)|)/,family:"kaios"}],SemverPart;function numbersToRanges(e){return"number"===typeof e?e:1===e.length?e[0]:[e[0],e[e.length-1]]}function semverify(e){const t=Array.isArray(e)?e:e.toString().split(".");if("all"===t[0])return[1/0,0,0];let r=null,n=null;const i=[0,0,0];for(let o=0;o<3;o++)if(r=t[o],"undefined"!==typeof r){if(n="number"===typeof r?r:parseInt(r,10),isNaN(n))return null;i[o]=n}return i}function rangeSemver(e,t){let r=0;const n=[];for(let i=2;i>=0;i--)if(e[i]!==t[i]){r=i;break}for(let i=e[r],o=t[r];i<=o;i++)n.push(e.map(((e,t)=>t===r?i:e)));return n}function compareSemvers(e,t,r){const[n,i,o]=e,[s,a,l]=t,{ignoreMinor:u,ignorePatch:c,allowHigherVersions:d}=r;if(s===1/0)return!0;const h=!u,p=h&&!c;return d?!(p&&o<l||h&&i<a)&&n>=s:!(p&&o!==l||h&&i!==a)&&n===s}function getRequiredSemverPartsCount(e,t){const{ignoreMinor:r,ignorePatch:n,allowZeroSubversions:i}=t;let o=r?1:n?2:3;if(i)for(let s=o-1;s>0;s--){if(0!==e[s]||1===o)break;o--}return o}function parseBrowsersList(e){return e.reduce(((e,t)=>{const[r,n,i]=t.split(/ |-/),o=semverify(n),s=o?i?rangeSemver(o,semverify(i)):[o]:[];return s.reduce(((e,t)=>(t&&e.push({family:r,version:t}),e)),e)}),[])}function getBrowsersList(e={}){const{browsers:t,...r}=e,n=(0,import_browserslist.default)(t,r),i=parseBrowsersList(n);return i}function compareArrays(e,t,r=0){const n=e.length;for(let i=r;i<n;i++)if(e[i]!==t[i])return!1;return!0}function clone(e){if(null===e||"object"!==typeof e)return e;const t=Array.isArray(e)?[]:{};let r;for(r in e)t[r]=clone(e[r]);return t}function concat(e){return[].concat(...e)}function mergeBrowserVersions(e){const t=new Map;return e.forEach((({family:e,version:r})=>{const n=t.get(e);if(n){const e=r.join(".");n.every((t=>t.join(".")!==e))&&n.push(r)}else t.set(e,[r])})),t.forEach((e=>{e.sort(((e,t)=>{for(const r in e)if(e[r]!==t[r])return e[r]-t[r];return 0}))})),t}function versionsListToRanges(e){if(e.length<2)return e;const t=e.length+1,r=[];let n=null,i=e[0],o=[i[SemverPart.Major]],s=[i[SemverPart.Minor]],a=[i[SemverPart.Patch]],l=null;for(let u=1;u<t;u++){n=e[u-1],i=e[u]||[];for(let e=SemverPart.Major;e<=SemverPart.Patch;e++){if((e===l||null===l)&&n[e]+1===i[e]&&compareArrays(n,i,e+1)){l=e,e===SemverPart.Major?o.push(i[SemverPart.Major]):o=i[SemverPart.Major],e===SemverPart.Minor?s.push(i[SemverPart.Minor]):s=i[SemverPart.Minor],e===SemverPart.Patch?a.push(i[SemverPart.Patch]):a=i[SemverPart.Patch];break}if(l===e||n[e]!==i[e]){r.push([numbersToRanges(o),numbersToRanges(s),numbersToRanges(a)]),o=[i[SemverPart.Major]],s=[i[SemverPart.Minor]],a=[i[SemverPart.Patch]],l=null;break}}}return r}function AstRegExpNode(e){return{type:"RegExp",body:e,flags:""}}function AlternativeNode(...e){const t=concat(e).filter(Boolean);return 1===t.length?t[0]:{type:"Alternative",expressions:t}}function SimpleCharNode(e){return{type:"Char",kind:"simple",value:String(e),codePoint:NaN}}function MetaCharNode(e){return{type:"Char",kind:"meta",value:e,codePoint:NaN}}function ClassRangeNode(e,t){return{type:"ClassRange",from:e,to:t}}function CharacterClassNode(...e){return{type:"CharacterClass",expressions:concat(e).filter(Boolean)}}function SimpleQuantifierNode(e){return{type:"Quantifier",kind:e,greedy:!0}}function RangeQuantifierNode(e,t){return{type:"Quantifier",kind:"Range",from:e,to:t,greedy:!0}}function CapturingGroupNode(e){return{type:"Group",capturing:!0,expression:e,number:null}}function RepetitionNode(e,t){return{type:"Repetition",expression:e,quantifier:t}}function DisjunctionNode(...e){const t=concat(e).filter(Boolean);if(1===t.length)return t[0];const r={type:"Disjunction",left:null,right:t.pop()};return t.reduceRight(((e,t,r)=>0===r?(e.left=t,e):(e.left={type:"Disjunction",left:null,right:t},e.left)),r),r}function DisjunctionCapturingGroupNode(...e){const t=DisjunctionNode(...e);return"Disjunction"===t.type?CapturingGroupNode(t):t}function DigitPatternNode(){return MetaCharNode("\\d")}function NumberPatternNode(e=SimpleQuantifierNode("+")){const t=RepetitionNode(DigitPatternNode(),e);return t}function NumberCharsNode(e){return AlternativeNode(Array.from(String(e),SimpleCharNode))}function isNumberPatternNode(e){if("Group"===e.type&&"Repetition"===e.expression.type){const{expression:t,quantifier:r}=e.expression;return"Char"===t.type&&"\\d"===t.value&&"+"===r.kind&&r.greedy}return!1}function isCharNode(e,t){return!(!e||"Char"!==e.type)&&("undefined"===typeof t||t instanceof RegExp&&t.test(e.value)||String(t)===e.value)}function isDigitRangeNode(e){if("CharacterClass"===e.type&&1===e.expressions.length){const[t]=e.expressions;return"ClassRange"===t.type&&isCharNode(t.from,/\d/)&&isCharNode(t.to,/\d/)}return!1}function isExpressionNode(e){return"RegExp"!==e.type&&"ClassRange"!==e.type&&"Quantifier"!==e.type}function parseRegex(e){return"string"===typeof e?import_regexp_tree.default.parse(e.replace(/^([^/])/,"/$1").replace(/([^/])$/,"$1/")):e instanceof RegExp?import_regexp_tree.default.parse(e):e}function toRegex(e){return"string"===typeof e?new RegExp(e):new RegExp(import_regexp_tree.default.generate(e.body),e.flags)}function toString(e){return"string"===typeof e?e:e instanceof RegExp?e.toString():import_regexp_tree.default.generate(e)}(function(e){e[e["Major"]=0]="Major",e[e["Minor"]=1]="Minor",e[e["Patch"]=2]="Patch"})(SemverPart||(SemverPart={}));var classes=["RegExp","Disjunction","Alternative","Assertion","Char","CharacterClass","ClassRange","Backreference","Group","Repetition","Quantifier"];function visitors(e){const{every:t}=e;return t?"function"===typeof t?{"*":t,...e}:classes.reduce(((r,n)=>{const i=e[n],o=i?"pre"in i?i.pre:i:null,s=i&&"post"in i?i.post:null;return r[n]={pre(e){return!1===t.pre(e)||!o||o(e)},post(e){return!1===t.post(e)||!s||s(e)}},r}),{}):e}function optimizeRegex(e){const t=import_regexp_tree.default.optimize(parseRegex(toString(e))).getAST();return import_regexp_tree.default.traverse(t,{Group(e){const{parent:t,node:r}=e,{expression:n}=r;r.capturing=!0,("RegExp"===t.type||"Disjunction"!==n.type&&"Repetition"!==t.type||"Disjunction"===n.type&&"Disjunction"===t.type)&&e.replace(e.node.expression)}}),t}function mergeDigits(e,t){return isCharNode(e)&&isCharNode(t)&&e.value===t.value?t:isCharNode(e,/\d/)&&isDigitRangeNode(t)&&Number(t.expressions[0].from.value)-Number(e.value)===1?{...t,expressions:[{...t.expressions[0],from:e}]}:isDigitRangeNode(e)&&isCharNode(t,/\d/)&&Number(t.value)-Number(e.expressions[0].to.value)===1?{...e,expressions:[{...e.expressions[0],to:t}]}:null}function optimizeSegmentNumberPatterns(e){return e.reduce(((e,t)=>{const r=e[e.length-1];if(r&&"Alternative"===t.type&&"Alternative"===r.type&&t.expressions.length===r.expressions.length){const n=r.expressions.reduceRight(((e,r,n)=>{if(!e)return e;const i=mergeDigits(r,t.expressions[n]);return i?(e.unshift(i),e):null}),[]);n&&(t.expressions=n,e.pop())}return e.push(t),e}),[])}function numberToDigits(e){return Array.from(e.toString(),Number)}function rayRangeDigitPattern(e,t){const r=e+Number(!t);return 0===r?DigitPatternNode():9===r?SimpleCharNode("9"):r>9?null:CharacterClassNode(ClassRangeNode(SimpleCharNode(r),SimpleCharNode("9")))}function rayToNumberPatterns(e){if(0===e)return[NumberPatternNode()];const t=numberToDigits(e),r=t.length,n=NumberPatternNode(RangeQuantifierNode(r+1)),i=r-1;if(e/Math.pow(10,i)===t[0])return[AlternativeNode(rayRangeDigitPattern(t[0],!0),Array.from({length:i},DigitPatternNode)),n];const o=t.reduce(((e,n,i)=>{const o=r-i-1,s=0===i;let a=SimpleCharNode("");const l=t.reduce(((e,t,r)=>{if(r<o)e.push(SimpleCharNode(t));else if(a)if(r>o)e.push(DigitPatternNode());else{if(a=rayRangeDigitPattern(t,s),!a)return[];e.push(a)}return e}),[]);return l.length&&e.push(l),e}),[]),s=o.map((e=>AlternativeNode(e)));return s.push(n),s}function segmentRangeNumberPattern(e,t,r){if(t<e)return null;const n=SimpleCharNode(e),i=SimpleCharNode(t),o="number"===typeof r&&r>0?Array.from({length:r},(()=>SimpleCharNode(0))):[],s=o.length?e=>AlternativeNode(o,e):e=>e;return s(e===t?n:0===e&&9===t?DigitPatternNode():t-e===1?CharacterClassNode(n,i):CharacterClassNode(ClassRangeNode(n,i)))}function splitToDecadeRanges(e,t){const r=[];let n=e,i=1;do{i*=10,n<i&&(r.push([n,Math.min(i-1,t)]),n=i)}while(i<=t);return r}function splitCommonDiff(e,t){const r=e.length;if(r!==t.length||e[0]!==t[0])return null;let n=e[0].toString(),i=0,o=0,s="",a="";for(let l=1;l<r;l++)i=e[l],o=t[l],i===o?n+=i:(s+=i,a+=o);return[n,parseInt(s,10),parseInt(a,10)]}function segmentToNumberPatterns(e,t,r=0){const n=numberToDigits(e),i=n.length;if(e<10&&t<10||e===t){const n=r-i;return[segmentRangeNumberPattern(e,t,n)]}const o=numberToDigits(t);if(i!==o.length){const n=splitToDecadeRanges(e,t),i=concat(n.map((([e,t])=>segmentToNumberPatterns(e,t,r))));return i}const s=splitCommonDiff(n,o);if(Array.isArray(s)){const[e,t,r]=s,n=i-e.length,o=segmentToNumberPatterns(t,r,n);return[AlternativeNode(Array.from(e,SimpleCharNode),DisjunctionCapturingGroupNode(o))]}const a=Array.from({length:i-1}),l=segmentRangeNumberPattern(n[0]+1,o[0]-1),u=[...a.map(((e,t)=>{const r=i-t-1,o=Number(t>0);return AlternativeNode(n.map(((e,t)=>t<r?SimpleCharNode(e):segmentRangeNumberPattern(t>r?0:e+o,9))))})),...l?[AlternativeNode(l,Array.from({length:i-1},(()=>DigitPatternNode())))]:[],...a.map(((e,t)=>{const r=i-t-1,n=Number(t>0);return AlternativeNode(o.map(((e,t)=>t<r?SimpleCharNode(e):segmentRangeNumberPattern(0,t>r?9:e-n))))}))];return optimizeSegmentNumberPatterns(u)}function rangeToRegex(e,t=1/0){if(e===1/0)return NumberPatternNode();const r=t===1/0?rayToNumberPatterns(e):segmentToNumberPatterns(e,t),n=DisjunctionCapturingGroupNode(r);return n}function findMatchedVersions(e,t,r,n){const i={...n,allowHigherVersions:!0},o=t=>compareSemvers(t,e,i),s=e=>compareSemvers(t,e,i),a=e&&t?e=>o(e)&&s(e):e?o:t?s:()=>!0;return r.filter(a)}function getRegexesForBrowsers(e,t,r=regexes){const n=[];let i="",o=!1;return r.forEach((r=>{const s=e.get(r.family);if(!s)return;let{version:a,minVersion:l,maxVersion:u}=r;a&&(l=a,u=a);let c=findMatchedVersions(l,u,s,t);c.length&&(i===r.family&&o&&(a=void 0,l=void 0,u=void 0,c=s,n.pop()),n.push({...r,version:a,minVersion:l,maxVersion:u,requestVersions:s,matchedVersions:c})),o=!a&&!l&&!u,i=r.family})),n}function compileRegex(e){const t=e.map((({regexAst:e})=>CapturingGroupNode(e.body))),r=optimizeRegex(AstRegExpNode(DisjunctionCapturingGroupNode(t)));return toRegex(r)}function getNumberPatternsCount(e){const t=parseRegex(e);let r=0;return import_regexp_tree.default.traverse(t,{Group(e){isNumberPatternNode(e.node)&&r++}}),r}function replaceNumberPatterns(e,t,r){let n=parseRegex(e);const i="number"===typeof r&&r<t.length?t.slice(0,r):t.slice();return import_regexp_tree.default.traverse(n,visitors({every(){return Boolean(i.length)},Group(e){return!isNumberPatternNode(e.node)||!i.length||(n===e.node?n=i.shift():e.replace(i.shift()),!1)}})),n}function getNumberPatternsPart(e,t){const r=parseRegex(e),n=Math.min(getNumberPatternsCount(r),t||1/0),i=[];let o=0,s=!1;return import_regexp_tree.default.traverse(r,visitors({every:{pre({node:e,parent:t}){return e===r||!!isExpressionNode(e)&&(t===r&&(s=!1),o<n)},post({node:e,parent:t}){e!==r&&t===r&&isExpressionNode(e)&&(s||o>0&&o<n)&&i.push(e)}},Group(e){return!(isNumberPatternNode(e.node)&&o<n)||(s=!0,o++,!1)}})),1!==i.length||isNumberPatternNode(i[0])?i:getNumberPatternsPart(i[0],n)}function rangedSemverToRegex(e,t){const{ignoreMinor:r,ignorePatch:n,allowHigherVersions:i}=t,o=e[0]===1/0?0:r?1:n?2:3;if(i){const t=[];let r=!0,n=0,i=0;const s=e=>(t,r)=>r>=o?NumberPatternNode():(i=Array.isArray(t)?t[0]:t,r<e?NumberCharsNode(i):r>e?NumberPatternNode():rangeToRegex(i+n));for(let a=o-1;a>=0;a--)r&&!e[a]||(r=!1,t.push(e.map(s(a))),n=1);return t}const s=e.map(((e,t)=>t>=o?NumberPatternNode():Array.isArray(e)?rangeToRegex(e[0],e[1]):NumberCharsNode(e)));return[s]}function applyVersionsToRegex(e,t,r){const{allowHigherVersions:n}=r,i=parseRegex(e),o=n&&t.length?[t[0]]:t,s=o.reduce(((e,t)=>Math.max(e,getRequiredSemverPartsCount(t,r))),1),a=getNumberPatternsPart(i,s),l=DisjunctionCapturingGroupNode(...o.map((e=>rangedSemverToRegex(e,r).map((e=>replaceNumberPatterns(AlternativeNode(clone(a)),e,s))))));return import_regexp_tree.default.traverse(i,visitors({every(e){return!!a.length&&(e.node===a[0]&&(1===a.length?e.replace(l):e.remove(),a.shift()),!0)}})),i}function applyVersionsToRegexes(e,t){return e.map((({regex:e,version:r,maxVersion:n,matchedVersions:i,...o})=>{let s=parseRegex(e);return r||(s=applyVersionsToRegex(s,versionsListToRanges(i),{...t,allowHigherVersions:!n&&t.allowHigherVersions})),{regex:null,sourceRegex:e,regexAst:s,version:r,maxVersion:n,matchedVersions:i,...o}}))}var defaultOptions={ignoreMinor:!1,ignorePatch:!0,allowZeroSubversions:!1,allowHigherVersions:!1};function getPreUserAgentRegexes(e={}){const t={...defaultOptions,...e},r=getBrowsersList(t),n=mergeBrowserVersions(r),i=getRegexesForBrowsers(n,t),o=applyVersionsToRegexes(i,t);return o}function getUserAgentRegex(e={}){return compileRegex(getPreUserAgentRegexes(e))}var ContentProtectionModule=class{constructor(e){this.hasEventListener=!1,this.isHacked=!1,this.properties=e}static async setupPreloadProtection(e){if(!this.isCurrentBrowserSupported(e))throw new Error("Browser not supported");e.detectInspect&&await this.startInspectorProtection(e)}static async create(e){const t=new this(e);return await t.start(),t}static async startInspectorProtection(e){const t=t=>{var r;t&&(e.clearOnInspect&&(console.clear(),window.localStorage.clear(),window.sessionStorage.clear(),window.location.replace(window.location.origin)),e.detectInspect&&"function"===typeof(null==(r=e.api)?void 0:r.inspectDetected)&&e.api.inspectDetected())};(0,import_devtools_detector.addListener)(t),(0,import_devtools_detector.launch)(),await delay(e.detectInspectInitDelay??100)}static isCurrentBrowserSupported(e){if(!e.enforceSupportedBrowsers)return!0;let t=[];(e.supportedBrowsers??[]).forEach((e=>{t.push("last 1 "+e+" version")}));const r=getUserAgentRegex({browsers:t,allowHigherVersions:!0});return r.test(navigator.userAgent)}async start(){var e;if(null==(e=this.properties)?void 0:e.enableObfuscation){this.wrapper=findRequiredElement(document,"#iframe-wrapper"),this.securityContainer=findElement(document,"#container-view-security");var t=this;this.mutationObserver=new MutationObserver((function(e){e.forEach((function(e){import_loglevel14.default.log(e.type),t.isHacked=!0}))}))}}async stop(){var e,t,r,n,i,o,s,a;if(import_loglevel14.default.log("Protection module stop"),(null==(e=this.properties)?void 0:e.enableObfuscation)&&this.mutationObserver.disconnect(),null==(t=this.properties)?void 0:t.disableKeys){removeEventListenerOptional(this.navigator.mainElement,"keydown",this.disableSave),removeEventListenerOptional(this.navigator.headerMenu,"keydown",this.disableSave);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"keydown",this.disableSave),removeEventListenerOptional(e.contentWindow,"keydown",this.disableSave);removeEventListenerOptional(window,"keydown",this.disableSave),removeEventListenerOptional(document,"keydown",this.disableSave)}if(null==(r=this.properties)?void 0:r.disableCopy){removeEventListenerOptional(this.navigator.mainElement,"copy",this.preventCopy),removeEventListenerOptional(this.navigator.headerMenu,"copy",this.preventCopy);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"copy",this.preventCopy),removeEventListenerOptional(e.contentWindow,"copy",this.preventCopy);removeEventListenerOptional(window,"copy",this.preventCopy),removeEventListenerOptional(document,"copy",this.preventCopy),removeEventListenerOptional(this.navigator.mainElement,"cut",this.preventCopy),removeEventListenerOptional(this.navigator.headerMenu,"cut",this.preventCopy);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"cut",this.preventCopy),removeEventListenerOptional(e.contentWindow,"cut",this.preventCopy);removeEventListenerOptional(window,"cut",this.preventCopy),removeEventListenerOptional(document,"cut",this.preventCopy),removeEventListenerOptional(this.navigator.mainElement,"keydown",this.preventCopyKey),removeEventListenerOptional(this.navigator.headerMenu,"keydown",this.preventCopyKey);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"keydown",this.preventCopyKey),removeEventListenerOptional(e.contentWindow,"keydown",this.preventCopyKey);removeEventListenerOptional(window,"keydown",this.preventCopyKey),removeEventListenerOptional(document,"keydown",this.preventCopyKey)}else if(null==(n=this.properties)?void 0:n.canCopy){removeEventListenerOptional(this.navigator.mainElement,"copy",this.restrictCopy),removeEventListenerOptional(this.navigator.headerMenu,"copy",this.restrictCopy);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"copy",this.restrictCopy),removeEventListenerOptional(e.contentWindow,"copy",this.restrictCopy);removeEventListenerOptional(window,"copy",this.restrictCopy),removeEventListenerOptional(document,"copy",this.restrictCopy),removeEventListenerOptional(this.navigator.mainElement,"cut",this.restrictCopy),removeEventListenerOptional(this.navigator.headerMenu,"cut",this.restrictCopy);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"cut",this.restrictCopy),removeEventListenerOptional(e.contentWindow,"cut",this.restrictCopy);removeEventListenerOptional(window,"cut",this.restrictCopy),removeEventListenerOptional(document,"cut",this.restrictCopy),removeEventListenerOptional(this.navigator.mainElement,"keydown",this.restrictCopyKey),removeEventListenerOptional(this.navigator.headerMenu,"keydown",this.restrictCopyKey);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"keydown",this.restrictCopyKey),removeEventListenerOptional(e.contentWindow,"keydown",this.restrictCopyKey);removeEventListenerOptional(window,"keydown",this.restrictCopyKey),removeEventListenerOptional(document,"keydown",this.restrictCopyKey)}if(null==(i=this.properties)?void 0:i.disablePrint){removeEventListenerOptional(this.navigator.mainElement,"beforeprint",this.beforePrint.bind(this)),removeEventListenerOptional(this.navigator.headerMenu,"beforeprint",this.beforePrint.bind(this));for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"beforeprint",this.beforePrint),removeEventListenerOptional(e.contentWindow,"beforeprint",this.beforePrint);removeEventListenerOptional(window,"beforeprint",this.beforePrint),removeEventListenerOptional(document,"beforeprint",this.beforePrint),removeEventListenerOptional(this.navigator.mainElement,"afterprint",this.afterPrint.bind(this)),removeEventListenerOptional(this.navigator.headerMenu,"afterprint",this.afterPrint.bind(this));for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"afterprint",this.afterPrint.bind(this)),removeEventListenerOptional(e.contentWindow,"afterprint",this.afterPrint.bind(this));removeEventListenerOptional(window,"afterprint",this.afterPrint.bind(this)),removeEventListenerOptional(document,"afterprint",this.afterPrint.bind(this))}if(null==(o=this.properties)?void 0:o.disableContextMenu){removeEventListenerOptional(this.navigator.mainElement,"contextmenu",this.disableContext),removeEventListenerOptional(this.navigator.headerMenu,"contextmenu",this.disableContext);for(const e of this.navigator.iframes)removeEventListenerOptional(e.contentDocument,"contextmenu",this.disableContext),removeEventListenerOptional(e.contentWindow,"contextmenu",this.disableContext);removeEventListenerOptional(window,"contextmenu",this.disableContext),removeEventListenerOptional(document,"contextmenu",this.disableContext)}(null==(s=this.properties)?void 0:s.hideTargetUrl)&&this.hideTargetUrls(!1),(null==(a=this.properties)?void 0:a.disableDrag)&&this.preventDrag(!1),removeEventListenerOptional(this.wrapper,"scroll",this.handleScroll.bind(this))}observe(){var e;if(null==(e=this.properties)?void 0:e.enableObfuscation){this.securityContainer.hasAttribute("style")&&(this.isHacked=!0),this.mutationObserver.disconnect();var t={attributes:!0,childList:!0,characterData:!0};this.mutationObserver.observe(this.securityContainer,t)}}async deactivate(){var e;(null==(e=this.properties)?void 0:e.enableObfuscation)&&(this.observe(),this.rects.forEach((e=>this.deactivateRect(e,this.securityContainer,this.isHacked))))}async activate(){var e;if(null==(e=this.properties)?void 0:e.enableObfuscation){this.observe();for(const e of this.navigator.iframes)if(e.contentDocument){const t=findRequiredIframeElement(e.contentDocument,"body");this.rects=this.findRects(t),this.rects.forEach((e=>this.toggleRect(e,this.securityContainer,this.isHacked)))}}}setupEvents(){var e,t,r,n,i,o,s,a,l,u,c,d,h,p,f;if(null==(e=this.properties)?void 0:e.disableKeys){addEventListenerOptional(this.navigator.mainElement,"keydown",this.disableSave),addEventListenerOptional(this.navigator.headerMenu,"keydown",this.disableSave);for(const e of this.navigator.iframes)addEventListenerOptional(e,"keydown",this.disableSave),addEventListenerOptional(e.ownerDocument,"keydown",this.disableSave),addEventListenerOptional(e.contentDocument,"keydown",this.disableSave),addEventListenerOptional(e.contentWindow,"keydown",this.disableSave),addEventListenerOptional(null==(t=e.contentWindow)?void 0:t.document,"keydown",this.disableSave);addEventListenerOptional(window,"keydown",this.disableSave),addEventListenerOptional(document,"keydown",this.disableSave)}if(null==(r=this.properties)?void 0:r.disableCopy){addEventListenerOptional(this.navigator.mainElement,"copy",this.preventCopy),addEventListenerOptional(this.navigator.headerMenu,"copy",this.preventCopy);for(const e of this.navigator.iframes)addEventListenerOptional(e,"copy",this.preventCopy),addEventListenerOptional(e.ownerDocument,"copy",this.preventCopy),addEventListenerOptional(e.contentDocument,"copy",this.preventCopy),addEventListenerOptional(e.contentWindow,"copy",this.preventCopy),addEventListenerOptional(null==(n=e.contentWindow)?void 0:n.document,"copy",this.preventCopy);addEventListenerOptional(window,"copy",this.preventCopy),addEventListenerOptional(document,"copy",this.preventCopy),addEventListenerOptional(this.navigator.mainElement,"cut",this.preventCopy),addEventListenerOptional(this.navigator.headerMenu,"cut",this.preventCopy);for(const e of this.navigator.iframes)addEventListenerOptional(e,"cut",this.preventCopy),addEventListenerOptional(e.ownerDocument,"cut",this.preventCopy),addEventListenerOptional(e.contentDocument,"cut",this.preventCopy),addEventListenerOptional(e.contentWindow,"cut",this.preventCopy),addEventListenerOptional(null==(i=e.contentWindow)?void 0:i.document,"cut",this.preventCopy);addEventListenerOptional(window,"cut",this.preventCopy),addEventListenerOptional(document,"cut",this.preventCopy),addEventListenerOptional(this.navigator.mainElement,"keydown",this.preventCopyKey),addEventListenerOptional(this.navigator.headerMenu,"keydown",this.preventCopyKey);for(const e of this.navigator.iframes)addEventListenerOptional(e,"keydown",this.preventCopyKey),addEventListenerOptional(e.ownerDocument,"keydown",this.preventCopyKey),addEventListenerOptional(e.contentDocument,"keydown",this.preventCopyKey),addEventListenerOptional(e.contentWindow,"keydown",this.preventCopyKey),addEventListenerOptional(null==(o=e.contentWindow)?void 0:o.document,"keydown",this.preventCopyKey);addEventListenerOptional(window,"keydown",this.preventCopyKey),addEventListenerOptional(document,"keydown",this.preventCopyKey)}else if(null==(s=this.properties)?void 0:s.canCopy){addEventListenerOptional(this.navigator.mainElement,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(this.navigator.headerMenu,"copy",this.restrictCopy.bind(this));for(const e of this.navigator.iframes)addEventListenerOptional(e,"copy",this.restrictCopy),addEventListenerOptional(e.ownerDocument,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(e.contentDocument,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(e.contentWindow,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(null==(a=e.contentWindow)?void 0:a.document,"copy",this.restrictCopy.bind(this));addEventListenerOptional(window,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(document,"copy",this.restrictCopy.bind(this)),addEventListenerOptional(this.navigator.mainElement,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(this.navigator.headerMenu,"cut",this.restrictCopy.bind(this));for(const e of this.navigator.iframes)addEventListenerOptional(e,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(e.ownerDocument,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(e.contentDocument,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(e.contentWindow,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(null==(l=e.contentWindow)?void 0:l.document,"cut",this.restrictCopy.bind(this));addEventListenerOptional(window,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(document,"cut",this.restrictCopy.bind(this)),addEventListenerOptional(this.navigator.mainElement,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(this.navigator.headerMenu,"keydown",this.restrictCopyKey.bind(this));for(const e of this.navigator.iframes)addEventListenerOptional(e,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(e.ownerDocument,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(e.contentDocument,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(e.contentWindow,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(null==(u=e.contentWindow)?void 0:u.document,"keydown",this.restrictCopyKey.bind(this));addEventListenerOptional(window,"keydown",this.restrictCopyKey.bind(this)),addEventListenerOptional(document,"keydown",this.restrictCopyKey.bind(this))}if(null==(c=this.properties)?void 0:c.disablePrint){addEventListenerOptional(this.navigator.mainElement,"beforeprint",this.beforePrint),addEventListenerOptional(this.navigator.headerMenu,"beforeprint",this.beforePrint);for(const e of this.navigator.iframes)addEventListenerOptional(e,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(e.ownerDocument,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(e.contentDocument,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(e.contentWindow,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(null==(d=e.contentWindow)?void 0:d.document,"beforeprint",this.beforePrint.bind(this));addEventListenerOptional(window,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(document,"beforeprint",this.beforePrint.bind(this)),addEventListenerOptional(this.navigator.mainElement,"afterprint",this.afterPrint),addEventListenerOptional(this.navigator.headerMenu,"afterprint",this.afterPrint);for(const e of this.navigator.iframes)addEventListenerOptional(e,"afterprint",this.afterPrint.bind(this)),addEventListenerOptional(e.ownerDocument,"afterprint",this.afterPrint.bind(this)),addEventListenerOptional(e.contentDocument,"afterprint",this.afterPrint.bind(this)),addEventListenerOptional(e.contentWindow,"afterprint",this.afterPrint.bind(this)),addEventListenerOptional(null==(h=e.contentWindow)?void 0:h.document,"afterprint",this.afterPrint.bind(this));addEventListenerOptional(window,"afterprint",this.afterPrint.bind(this)),addEventListenerOptional(document,"afterprint",this.afterPrint.bind(this))}if(null==(p=this.properties)?void 0:p.disableContextMenu){addEventListenerOptional(this.navigator.mainElement,"contextmenu",this.disableContext),addEventListenerOptional(this.navigator.headerMenu,"contextmenu",this.disableContext);for(const e of this.navigator.iframes)addEventListenerOptional(e,"contextmenu",this.disableContext),addEventListenerOptional(e.ownerDocument,"contextmenu",this.disableContext),addEventListenerOptional(e.contentDocument,"contextmenu",this.disableContext),addEventListenerOptional(e.contentWindow,"contextmenu",this.disableContext),addEventListenerOptional(null==(f=e.contentWindow)?void 0:f.document,"contextmenu",this.disableContext);addEventListenerOptional(window,"contextmenu",this.disableContext),addEventListenerOptional(document,"contextmenu",this.disableContext)}}initializeResource(){var e,t;(null==(e=this.properties)?void 0:e.hideTargetUrl)&&this.hideTargetUrls(!0),(null==(t=this.properties)?void 0:t.disableDrag)&&this.preventDrag(!0)}async initialize(e){var t;if(null==(t=this.properties)?void 0:t.enableObfuscation)return new Promise((async t=>{if(await document.fonts.ready,e.contentDocument){const r=findRequiredIframeElement(e.contentDocument,"body");this.observe(),setTimeout((()=>{this.rects=this.findRects(r),this.rects.forEach((e=>this.toggleRect(e,this.securityContainer,this.isHacked))),this.setupEvents(),this.hasEventListener||(this.hasEventListener=!0,addEventListenerOptional(this.wrapper,"scroll",this.handleScroll.bind(this))),t()}),10)}}))}handleScroll(){this.rects.forEach((e=>this.toggleRect(e,this.securityContainer,this.isHacked)))}handleResize(){var e;if(null==(e=this.properties)?void 0:e.enableObfuscation){const e=(0,import_debounce3.debounce)((()=>{this.calcRects(this.rects),void 0!==this.rects&&this.rects.forEach((e=>this.toggleRect(e,this.securityContainer,this.isHacked)))}),10);this.rects&&(this.observe(),e())}}disableContext(e){return e.preventDefault(),e.stopPropagation(),!1}disableSave(e){return("MacIntel"===navigator.platform||navigator.platform.match("Mac")?!e.metaKey:!e.ctrlKey||"s"!==e.key&&83!==e.keyCode)||(e.preventDefault(),e.stopPropagation(),!1)}preventCopy(e){return import_loglevel14.default.log("copy action initiated"),e.clipboardData.setData("text/plain","copy not allowed"),e.stopPropagation(),e.preventDefault(),!1}preventCopyKey(e){return("MacIntel"===navigator.platform||navigator.platform.match("Mac")?!e.metaKey:!e.ctrlKey||"c"!==e.key&&67!==e.keyCode)||(e.preventDefault(),e.stopPropagation(),!1)}restrictCopy(e){var t,r,n,i;if(this.citation)return;import_loglevel14.default.log("copy action initiated");let o=this.navigator.iframes[0].contentWindow;if(o){let s=function(e){const t={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let r=a.navigator.iframes[0].contentDocument;return r?uniqueCssSelector(e,r,t):void 0},a=this,l=getCurrentSelectionInfo(o,s);if(void 0===l){let e=this.navigator.iframes[0].contentDocument;l=null==(r=null==(t=this.navigator.annotationModule)?void 0:t.annotator)?void 0:r.getTemporarySelectionInfo(e)}e.clipboardData.setData("text/plain",null==(i=null==l?void 0:l.cleanText)?void 0:i.substring(0,(null==(n=this.properties)?void 0:n.charactersToCopy)??0))}else e.clipboardData.setData("text/plain","");return e.stopPropagation(),e.preventDefault(),!1}restrictCopyKey(e){var t,r,n,i;if("MacIntel"===navigator.platform||navigator.platform.match("Mac")?e.metaKey:e.ctrlKey&&("c"===e.key||67===e.keyCode)){let o=this.navigator.iframes[0].contentWindow;if(o){let e=function(e){const t={className:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0,idName:e=>_blacklistIdClassForCssSelectors.indexOf(e)<0};let r=s.navigator.iframes[0].contentDocument;return r?uniqueCssSelector(e,r,t):void 0},s=this,a=getCurrentSelectionInfo(o,e);if(void 0===a){let e=this.navigator.iframes[0].contentDocument;a=null==(r=null==(t=this.navigator.annotationModule)?void 0:t.annotator)?void 0:r.getTemporarySelectionInfo(e)}this.copyToClipboard(null==(i=null==a?void 0:a.cleanText)?void 0:i.substring(0,(null==(n=this.properties)?void 0:n.charactersToCopy)??0))}else this.copyToClipboard("");return e.stopPropagation(),e.preventDefault(),!1}return!0}copyToClipboard(e){var t;if(e=e.substring(0,(null==(t=this.properties)?void 0:t.charactersToCopy)??0),window.clipboardData)window.clipboardData.setData("text/plain",e);else{const t=this.createElementForExecCommand(e);this.selectContent(t);try{window.netscape&&netscape.security&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),document.execCommand("copy",!1)}catch(r){}document.body.removeChild(t)}}createElementForExecCommand(e){const t=document.createElement("div");return t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.innerHTML=e,document.body.appendChild(t),t.contentEditable=!0,t}selectContent(e){const t=document.createRange();t.selectNodeContents(e);const r=window.getSelection();null==r||r.removeAllRanges(),null==r||r.addRange(t)}beforePrint(e){return import_loglevel14.default.log("before print"),this.navigator&&this.navigator.headerMenu&&(this.navigator.headerMenu.style.display="none",this.navigator.mainElement.style.display="none"),e.stopPropagation(),e.preventDefault(),!1}afterPrint(e){return import_loglevel14.default.log("after print"),this.navigator&&this.navigator.headerMenu&&(this.navigator.headerMenu.style.removeProperty("display"),this.navigator.mainElement.style.removeProperty("display")),e.stopPropagation(),e.preventDefault(),!1}hideTargetUrls(e){var t;function r(e){e.preventDefault();const t=e.currentTarget.getAttribute("data-href-resolved"),r=document.createElement("a");r.setAttribute("href",t),r.click()}for(const n of this.navigator.iframes){const i=null==(t=n.contentDocument)?void 0:t.querySelectorAll("a");null==i||i.forEach((e=>{const t=e.getAttribute("data-href"),r=e.getAttribute("href");!t&&r&&(e.setAttribute("data-href",r),e.setAttribute("data-href-resolved",e.href))})),e?null==i||i.forEach((e=>{e.setAttribute("href",""),e.addEventListener("click",r)})):null==i||i.forEach((e=>{const t=e.getAttribute("data-href");t&&e.setAttribute("href",t),e.removeEventListener("click",r)}))}}preventDrag(e){var t,r,n,i,o;const s="-webkit-user-drag: none; -khtml-user-drag: none; -moz-user-drag: none; -ms-user-drag: none; user-drag: none; -webkit-pointer-events: none; -khtml-pointer-events: none; -moz-pointer-events: none; -ms-pointer-events: none; pointer-events: none;",a=e=>{e.preventDefault()};for(const l of this.navigator.iframes){const u=(null==(t=l.contentDocument)?void 0:t.body.getAttribute("style"))||"";e?(null==(r=l.contentDocument)||r.body.addEventListener("dragstart",a),null==(n=l.contentDocument)||n.body.setAttribute("style",u+s)):(null==(i=l.contentDocument)||i.body.removeEventListener("dragstart",a),null==(o=l.contentDocument)||o.body.setAttribute("style",u.replace(s,"")))}}recalculate(e=0){return new Promise((t=>{var r;if(null==(r=this.properties)?void 0:r.enableObfuscation){const r=(0,import_debounce3.debounce)((()=>{this.calcRects(this.rects),void 0!==this.rects&&this.rects.forEach((e=>this.toggleRect(e,this.securityContainer,this.isHacked))),t(!0)}),e);this.rects?(this.observe(),r()):t(!1)}else t(!1)}))}calcRects(e){void 0!==e&&e.forEach((e=>{try{const{top:t,height:r,left:n,width:i}=this.measureTextNode(e.node);e.top=t,e.height=r,e.width=i,e.left=n}catch(t){import_loglevel14.default.log("error "+t),import_loglevel14.default.log(e),import_loglevel14.default.log(e.node),import_loglevel14.default.log("scrambledTextContent "+e.scrambledTextContent),import_loglevel14.default.log("textContent "+e.textContent),import_loglevel14.default.log("isObfuscated "+e.isObfuscated)}}))}deactivateRect(e,t,r){const n=this.isBeingHacked(t);n||r?(e.node.textContent=e.scrambledTextContent,e.isObfuscated=!0):(e.node.textContent=e.textContent,e.isObfuscated=!1)}toggleRect(e,t,r){const n=this.isOutsideViewport(e),i=this.isBeingHacked(t);!e.isObfuscated||n||i||r||(e.node.textContent=e.textContent,e.isObfuscated=!1),!e.isObfuscated&&(n||i||r)&&(e.node.textContent=e.scrambledTextContent,e.isObfuscated=!0)}findRects(e){const t=this.findTextNodes(e);return t.map((e=>{var t,r,n,i;const{top:o,height:s,left:a,width:l}=this.measureTextNode(e),u=e.parentElement&&((null==(t=this.properties)?void 0:t.excludeNodes)&&(null==(r=this.properties)?void 0:r.excludeNodes.indexOf(e.parentElement.nodeName.toLowerCase()))>-1||"option"===(null==(n=e.parentElement)?void 0:n.nodeName.toLowerCase())||"script"===(null==(i=e.parentElement)?void 0:i.nodeName.toLowerCase()))?e.textContent:this.obfuscateText(e.textContent??"");let c={top:o,height:s,width:l,left:a,node:e,textContent:e.textContent??"",scrambledTextContent:u??"",isObfuscated:!1};return c}))}obfuscateText(e){return this.scramble(e,!0)}measureTextNode(e){try{const t=document.createRange();t.selectNode(e);const r=t.getBoundingClientRect();return t.detach(),r}catch(t){import_loglevel14.default.log("measureTextNode "+t),import_loglevel14.default.log("measureTextNode "+e),import_loglevel14.default.log(e.textContent)}}isBeingHacked(e){return!!(e.style.animation||e.style.transition||e.style.position||e.hasAttribute("style"))&&(import_loglevel14.default.log("content being hacked"),!0)}isOutsideViewport(e){const t=this.wrapper.scrollLeft,r=t+this.wrapper.clientWidth,n=e.left+e.width,i=e.top+e.height,o=this.wrapper.scrollTop,s=o+this.wrapper.clientHeight,a=i<o,l=e.top>s,u=n<t-window.innerWidth,c=e.left>r+window.innerWidth;return a||l||u||c}findTextNodes(e,t=[]){var r;let n=e.firstChild;while(n)1===n.nodeType&&this.findTextNodes(n,t),3===n.nodeType&&(null==(r=n.textContent)?void 0:r.trim())&&t.push(n),n=n.nextSibling;return t}scramble(e,t=!1,r=!1){var n=e.split(" ");function i(e){var t,r,n=e.length;while(n>0)r=Math.floor(Math.random()*n),n--,t=e[n],e[n]=e[r],e[r]=t;return e}return t&&(n=n.map((function(e){return e.includes("-")?e:i(e.split("")).join("")}))),r?i(n).join(" "):n.join(" ")}};init_polyfills();var import_jscrypto=__toESM(require_jscrypto());init_polyfills();var collapseWhitespaces=e=>e.replace(/\n/g," ").replace(/\s\s+/g," "),cleanupStr=e=>collapseWhitespaces(e).trim(),reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reHasRegExpChar=RegExp(reRegExpChar.source);function escapeRegExp(e){return e&&reHasRegExpChar.test(e)?e.replace(reRegExpChar,"\\$&"):e||""}var _counter=0,counter=()=>()=>Number.isSafeInteger(++_counter)?_counter:_counter=1,reset=()=>{_counter=0},getCount=counter(),getCssSelector_=e=>t=>{try{return uniqueCssSelector(t,e,_getCssSelectorOptions)}catch(r){return console.error("uniqueCssSelector:",r),""}};async function searchDocDomSeek(e,t,r,n,i=!1){var o,s,a;if(!t)return[];const l=null==(o=t.body)?void 0:o.textContent;if(!l)return[];if(e=cleanupStr(e),!e.length)return[];const u=t.createNodeIterator(t.body,NodeFilter.SHOW_TEXT,{acceptNode:e=>NodeFilter.FILTER_ACCEPT});let c=new RegExp(escapeRegExp(e).replace(/ /g,"\\s+"),"gim");i&&(c=new RegExp("\\b"+escapeRegExp(e).replace(/ /g,"\\s+")+"\\b","gim"));const d=[],h=100,p=30;let f,g=0;while(f=c.exec(l)){let e=Math.max(0,f.index-h),i=Math.min(h,f.index),o=collapseWhitespaces(l.substr(e,i));o=o.substr(o.length-p),e=c.lastIndex,i=Math.min(h,l.length-e);const m=collapseWhitespaces(l.substr(e,i)).substr(0,p),v=new Range;let y=f.index;while(g<=y){const e=u.nextNode();e&&e.nodeValue&&(g+=e.nodeValue.length)}let _=u.referenceNode.nodeValue?(null==(s=u.referenceNode.nodeValue)?void 0:s.length)-(g-y):0;v.setStart(u.referenceNode,_),y=f.index+f[0].length;while(g<=y){const e=u.nextNode();let t=null==e?void 0:e.nodeValue;t&&(g+=t.length)}_=u.referenceNode.nodeValue?(null==(a=u.referenceNode.nodeValue)?void 0:a.length)-(g-y):0,v.setEnd(u.referenceNode,_),t.getCssSelector||(t.getCssSelector=getCssSelector_(t));const b=convertRange(v,t.getCssSelector);b&&d.push({textMatch:collapseWhitespaces(f[0]),textBefore:o,textAfter:m,rangeInfo:b,href:r,title:n,uuid:getCount().toString()})}return d}var import_loglevel15=__toESM(require_loglevel()),SearchModule=class{constructor(e,t,r,n,i){this.currentChapterSearchResult=[],this.bookSearchResult=[],this.currentSearchHighlights=[],this.headerMenu=i,this.publication=e,this.properties=t,this.api=n,this.highlighter=r}static async create(e){const t=new this(e.publication,e,e.highlighter,e.api,e.headerMenu);return await t.start(),t}async stop(){import_loglevel15.default.log("Search module stop"),removeEventListenerOptional(this.searchInput,"keypress",this.handleSearch.bind(this)),removeEventListenerOptional(this.searchGo,"click",this.handleSearch.bind(this))}async start(){var e;if(this.headerMenu){this.searchInput=findElement(this.headerMenu,"#searchInput"),addEventListenerOptional(this.searchInput,"keypress",this.handleSearch.bind(this)),this.searchGo=findElement(this.headerMenu,"#searchGo"),addEventListenerOptional(this.searchGo,"click",this.handleSearch.bind(this));var t=findElement(this.headerMenu,"#menu-button-search");t&&(null==(e=t.parentElement)||e.style.removeProperty("display"))}setTimeout((()=>{this.properties.hideLayer?this.navigator.hideLayer("search"):this.navigator.showLayer("search")}),10)}async handleSearch(e){"Enter"!==e.key&&"click"!==e.type||(await this.handleSearchChapter(),await this.handleSearchBook())}async handleSearchChapter(e){var t=this,r=this.searchInput.value;let n=this.navigator.currentChapterLink.href;const i=this.publication.getSpineItem(n);if(this.headerMenu)var o=findElement(document,"#searchResultChapter");t.currentChapterSearchResult=[],t.currentSearchHighlights=[];var s=[];async function a(e){var r;if(o.innerHTML="",r=t.paginate(s,e,10),0===r.total){const e=document.createElement("a");e.className="collection-item",e.innerHTML="nothing found",o.appendChild(e)}else{for(let a=0;a<r.data.length;a++){const n=document.createElement("a"),s=r.data[a];n.className="collection-item",n.href=(null==i?void 0:i.Href)??"",n.innerHTML="..."+s.textBefore+"<mark>"+s.textMatch+"</mark>"+s.textAfter+"...",addEventListenerOptional(n,"click",(r=>{r.preventDefault(),r.stopPropagation(),t.jumpToMark(a+10*e-10)})),o.appendChild(n)}let n=document.createElement("div");n.style.textAlign="center",n.style.marginTop="10px";let s=document.createElement("ul");s.className="pagination";let l=document.createElement("li");if(l.className="disabled",l.innerHTML='<a href="#!"> < </a>',void 0!==r.pre_page){const e=r.pre_page;l.className="waves-effect",addEventListenerOptional(l,"click",(t=>{t.preventDefault(),t.stopPropagation(),a(e)}))}s.appendChild(l);for(let e=1;e<=r.total_pages;e++){let t,n=document.createElement("li");n.className="waves-effect",e===r.page&&(n.className="active",t=n),n.innerHTML='<a href="#!">'+e+"</a>",addEventListenerOptional(n,"click",(r=>{r.preventDefault(),r.stopPropagation(),t&&(t.className="waves-effect"),n.className="active",t=n,a(e)})),s.appendChild(n)}let u=document.createElement("li");if(u.className="disabled",u.innerHTML='<a href="#!"> > </a>',void 0!==r.next_page){const e=r.next_page;u.className="waves-effect",addEventListenerOptional(u,"click",(t=>{t.preventDefault(),t.stopPropagation(),a(e)}))}s.appendChild(u),n.appendChild(s),o.appendChild(n)}}await this.searchAndPaintChapter(r,e,(async e=>{var t;s=e,a(1),this.navigator.rights.enableContentProtection&&(null==(t=this.navigator.contentProtectionModule)||t.recalculate(200))}))}async searchAndPaintChapter(e,t=0,r){var n,i;this.navigator.rights.enableContentProtection&&(null==(n=this.navigator.contentProtectionModule)||n.deactivate());const o=this.publication.getAbsoluteHref(this.publication.readingOrder[this.navigator.currentResource()??0].Href);let s=this.publication.getTOCItem(o);null===s&&(s=this.publication.readingOrder[this.navigator.currentResource()??0]);let a=[];null==(i=this.highlighter)||i.destroyHighlights(1),this.navigator.rights.enableSearch&&this.drawSearch();let l=0;if(s){let n=this.navigator.iframes[0].contentDocument;n&&s&&searchDocDomSeek(e,n,s.Href,s.Title).then((e=>{e.forEach((e=>{let r={rangeInfo:e.rangeInfo};setTimeout((()=>{var n,i;let o;l===t?(o=this.createSearchHighlight(r,null==(n=this.properties)?void 0:n.current),this.jumpToMark(t)):o=this.createSearchHighlight(r,null==(i=this.properties)?void 0:i.color),e.highlight=o,a.push(e),this.currentChapterSearchResult.push(e),this.currentSearchHighlights.push(o),l++}),500)})),setTimeout((()=>{r(a)}),500)}))}}createSearchHighlight(e,t){var r;try{var n=t;TextHighlighter.isHexColor(n)&&(n=TextHighlighter.hexToRgbChannels(n));const o=`${e.rangeInfo.startContainerElementCssSelector}${e.rangeInfo.startContainerChildTextNodeIndex}${e.rangeInfo.startOffset}${e.rangeInfo.endContainerElementCssSelector}${e.rangeInfo.endContainerChildTextNodeIndex}${e.rangeInfo.endOffset}`,s=import_jscrypto.SHA256.hash(o),a="R2_SEARCH_"+s;var i=!1;const l={color:n||DEFAULT_BACKGROUND_COLOR,id:a,pointerInteraction:i,selectionInfo:e,marker:0,type:1};let u=null==(r=this.highlighter)?void 0:r.createHighlightDom(this.navigator.iframes[0].contentWindow,l);return l.position=parseInt(((null==u?void 0:u.hasChildNodes())?u.childNodes[0]:u).style.top.replace("px","")),l}catch(o){throw"Can't create highlight: "+o}}clearSearch(){var e;this.currentChapterSearchResult=[],this.currentSearchHighlights=[],null==(e=this.highlighter)||e.destroyHighlights(1)}async search(e,t){return this.currentChapterSearchResult=[],this.currentSearchHighlights=[],this.bookSearchResult=[],reset(),await this.searchAndPaintChapter(e,0,(async()=>{var e;this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate(200))})),t?(await this.searchBook(e),await this.searchChapter(e)):(await this.searchChapter(e),await this.searchBook(e))}async goToSearchID(e,t,r){var n,i=t;let o=this.navigator.currentChapterLink.href;var s=this.publication.getAbsoluteHref(e);let a=this.bookSearchResult.filter((t=>t.href===e));if(r?(n=this.currentChapterSearchResult.filter((e=>e.uuid===t))[0],i=this.currentChapterSearchResult.findIndex((e=>e.uuid===t))):(n=a.filter((e=>e.uuid===t))[0],i=a.findIndex((e=>e.uuid===t))),void 0!==n)if(o===s)this.jumpToMark(i);else{let e={progression:0};const t={href:s,locations:e,title:"title"};this.navigator.navigate(t),setTimeout((()=>{this.searchAndPaintChapter(n.textMatch,i,(async()=>{var e;this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate(200))}))}),300)}}async goToSearchIndex(e,t,r){var n,i=t;let o=this.navigator.currentChapterLink.href;var s=this.publication.getAbsoluteHref(e);let a=this.bookSearchResult.filter((t=>t.href===e));if(n=r?this.currentChapterSearchResult[i]:a[i],void 0!==n)if(o===s)this.jumpToMark(i);else{let e={progression:0};const t={href:s,locations:e,title:"title"};this.navigator.navigate(t),setTimeout((()=>{this.searchAndPaintChapter(n.textMatch,i,(async()=>{var e;this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate(200))}))}),300)}}async handleSearchBook(){var e=this,t=this.searchInput.value;if(e.headerMenu)var r=findElement(document,"#searchResultBook");async function n(o){var s;r.innerHTML="";var a=await e.searchBook(t);if(s=e.paginate(a,o,10),0===s.total){const e=document.createElement("a");e.className="collection-item",e.innerHTML="nothing found",r.appendChild(e)}else{const t=i(s.data,(e=>e.href));t.forEach((t=>{const n=document.createElement("div");if(n.style.marginBottom="10px",t[0].title){const e=document.createElement("span");e.className="collection-item",e.style.display="block",e.innerHTML=t[0].title,n.appendChild(e)}r.appendChild(n),t.forEach((t=>{const r=document.createElement("a");r.className="collection-item";var i=e.publication.getAbsoluteHref(t.href);r.innerHTML="..."+t.textBefore+"<mark>"+t.textMatch+"</mark>"+t.textAfter+"...",addEventListenerOptional(r,"click",(r=>{r.preventDefault(),r.stopPropagation();let n=a.filter((e=>e.href===t.href));const o=n.findIndex((e=>e===t));let s=e.navigator.currentChapterLink.href;if(s===i)e.jumpToMark(o);else{let t={progression:0};const r={href:i,locations:t,title:"title"};e.navigator.navigate(r),setTimeout((()=>{e.handleSearchChapter(o)}),300)}})),n.appendChild(r)}))}));let o=document.createElement("div");o.style.textAlign="center",o.style.marginTop="10px";let l=document.createElement("ul");l.className="pagination";let u=document.createElement("li");if(u.className="disabled",u.innerHTML='<a href="#!"> < </a>',null!=s.pre_page){let e=s.pre_page;u.className="waves-effect",addEventListenerOptional(u,"click",(t=>{t.preventDefault(),t.stopPropagation(),n(e)}))}l.appendChild(u);for(let e=1;e<=s.total_pages;e++){let t,r=document.createElement("li");r.className="waves-effect",e===s.page&&(r.className="active",t=r),r.innerHTML='<a href="#!">'+e+"</a>",addEventListenerOptional(r,"click",(i=>{i.preventDefault(),i.stopPropagation(),t&&(t.className="waves-effect"),r.className="active",t=r,n(e)})),l.appendChild(r)}let c=document.createElement("li");if(c.className="disabled",c.innerHTML='<a href="#!"> > </a>',null!=s.next_page){let e=s.next_page;c.className="waves-effect",addEventListenerOptional(c,"click",(t=>{t.preventDefault(),t.stopPropagation(),n(e)}))}l.appendChild(c),o.appendChild(l),r.appendChild(o)}}function i(e,t){const r=new Map;return e.forEach((e=>{const n=t(e),i=r.get(n);i?i.push(e):r.set(n,[e])})),Array.from(r.values())}n(1)}async searchBook(e){var t,r;this.bookSearchResult=[];let n=[];for(let i=0;i<this.publication.readingOrder.length;i++){const o=this.publication.getAbsoluteHref(this.publication.readingOrder?this.publication.readingOrder[i].Href:"");let s=this.publication.getTOCItem(o);if(void 0===s&&this.publication.readingOrder&&(s=this.publication.readingOrder[i]),s){let i=this.publication.getAbsoluteHref(s.Href);(null==(t=this.navigator.api)?void 0:t.getContent)?await(null==(r=this.navigator.api)?void 0:r.getContent(i).then((t=>{let r=new DOMParser,i=r.parseFromString(t,"application/xhtml+xml");s&&searchDocDomSeek(e,i,s.Href,s.Title).then((e=>{e.forEach((e=>{n.push(e),this.bookSearchResult.push(e)}))}))}))):await fetch(i,this.navigator.requestConfig).then((e=>e.text())).then((async t=>{var r;let i=new DOMParser,o=i.parseFromString((null==(r=this.navigator.requestConfig)?void 0:r.encoded)?this.decodeBase64(t):t,"application/xhtml+xml");s&&searchDocDomSeek(e,o,s.Href,s.Title).then((e=>{e.forEach((e=>{n.push(e),this.bookSearchResult.push(e)}))}))}))}if(i===this.publication.readingOrder.length-1)return n}}decodeBase64(e){const t=atob(e),r=t.length,n=new Uint8Array(r);for(let o=0;o<r;o++)n[o]=t.charCodeAt(o);const i=new TextDecoder;return i.decode(n)}async searchChapter(e){var t,r;let n=[];const i=this.publication.getAbsoluteHref(this.publication.readingOrder[this.navigator.currentResource()??0].Href);let o=this.publication.getTOCItem(i);if(null===o&&(o=this.publication.readingOrder[this.navigator.currentResource()??0]),o){let i=this.publication.getAbsoluteHref(o.Href);(null==(t=this.navigator.api)?void 0:t.getContent)?await(null==(r=this.navigator.api)?void 0:r.getContent(i).then((t=>{let r=new DOMParser,i=r.parseFromString(t,"application/xhtml+xml");o&&searchDocDomSeek(e,i,o.Href,o.Title).then((e=>{e.forEach((e=>{n.push(e)}))}))}))):await fetch(i,this.navigator.requestConfig).then((e=>e.text())).then((async t=>{var r;let i=new DOMParser,s=i.parseFromString((null==(r=this.navigator.requestConfig)?void 0:r.encoded)?this.decodeBase64(t):t,"application/xhtml+xml");o&&searchDocDomSeek(e,s,o.Href,o.Title).then((e=>{e.forEach((e=>{n.push(e)}))}))}))}return n}drawSearch(){setTimeout((()=>{this.currentSearchHighlights=[],this.currentChapterSearchResult.forEach((e=>{var t,r;let n={rangeInfo:e.rangeInfo};if(null==(t=this.properties)?void 0:t.color){let t=this.createSearchHighlight(n,null==(r=this.properties)?void 0:r.color);e.highlight=t,this.currentSearchHighlights.push(t)}}))}),100)}async handleResize(){var e;await(null==(e=this.highlighter)?void 0:e.destroyHighlights(1)),this.drawSearch()}jumpToMark(e){setTimeout((()=>{var t,r,n;if(this.currentChapterSearchResult.length){var i=this.currentChapterSearchResult[e];this.currentSearchHighlights.forEach((e=>{var t,r=null==(t=this.properties)?void 0:t.color;TextHighlighter.isHexColor(r)&&(r=TextHighlighter.hexToRgbChannels(r)),e.color=r}));var o=null==(t=this.properties)?void 0:t.current;TextHighlighter.isHexColor(o)&&(o=TextHighlighter.hexToRgbChannels(o)),i.highlight.color=o,null==(r=this.highlighter)||r.setAndResetSearchHighlight(i.highlight,this.currentSearchHighlights),null==(n=this.navigator.view)||n.goToCssSelector(i.rangeInfo.startContainerElementCssSelector),this.navigator.updatePositionInfo()}}),200)}paginate(e,t,r){let n=t||1,i=r||10,o=(n-1)*i,s=e.slice(o).slice(0,i),a=Math.ceil(e.length/i);return{page:n,per_page:i,pre_page:n-1?n-1:void 0,next_page:a>n?n+1:void 0,total:e.length,total_pages:a,data:s}}};init_polyfills();var import_loglevel16=__toESM(require_loglevel()),_TTSREFS=class{};_TTSREFS.COLOR_REF="color",_TTSREFS.AUTO_SCROLL_REF="autoscroll",_TTSREFS.RATE_REF="rate",_TTSREFS.PITCH_REF="pitch",_TTSREFS.VOLUME_REF="volume",_TTSREFS.VOICE_REF="voice",_TTSREFS.COLOR_KEY="tts-"+_TTSREFS.COLOR_REF,_TTSREFS.AUTO_SCROLL_KEY="tts-"+_TTSREFS.AUTO_SCROLL_REF,_TTSREFS.RATE_KEY="tts-"+_TTSREFS.RATE_REF,_TTSREFS.PITCH_KEY="tts-"+_TTSREFS.PITCH_REF,_TTSREFS.VOLUME_KEY="tts-"+_TTSREFS.VOLUME_REF,_TTSREFS.VOICE_KEY="tts-"+_TTSREFS.VOICE_REF;var TTSREFS=_TTSREFS,TTSSettings=class{constructor(e,t,r){this.TTSSETTINGS="ttsSetting",this.color="orange",this.autoScroll=!0,this.rate=1,this.pitch=1,this.volume=1,this.voice={usePublication:!0},this.settingsChangeCallback=()=>{},this.restartCallback=()=>{},this.store=e,this.api=t,this.headerMenu=r,this.initialise()}static create(e){const t=new this(e.store,e.api,e.headerMenu);if(e.initialTTSSettings){let r=e.initialTTSSettings;(null==r?void 0:r.rate)&&(t.rate=r.rate,import_loglevel16.default.log(t.rate)),(null==r?void 0:r.pitch)&&(t.pitch=r.pitch,import_loglevel16.default.log(t.pitch)),(null==r?void 0:r.volume)&&(t.volume=r.volume,import_loglevel16.default.log(t.volume)),(null==r?void 0:r.color)&&(t.color=r.color,import_loglevel16.default.log(t.color)),(null==r?void 0:r.autoScroll)&&(t.autoScroll=r.autoScroll,import_loglevel16.default.log(t.autoScroll)),(null==r?void 0:r.voice)&&(t.voice=r.voice,import_loglevel16.default.log(t.voice))}return t.initializeSelections(),t}stop(){import_loglevel16.default.log("tts settings stop")}initialise(){this.autoScroll=null!=this.getProperty(TTSREFS.AUTO_SCROLL_KEY)?this.getProperty(TTSREFS.AUTO_SCROLL_KEY).value:this.autoScroll,this.rate=null!=this.getProperty(TTSREFS.RATE_KEY)?this.getProperty(TTSREFS.RATE_KEY).value:this.rate,this.pitch=null!=this.getProperty(TTSREFS.PITCH_KEY)?this.getProperty(TTSREFS.PITCH_KEY).value:this.pitch,this.volume=null!=this.getProperty(TTSREFS.VOLUME_KEY)?this.getProperty(TTSREFS.VOLUME_KEY).value:this.volume,this.color=null!=this.getProperty(TTSREFS.COLOR_KEY)?this.getProperty(TTSREFS.COLOR_KEY).value:this.color,this.voice=null!=this.getProperty(TTSREFS.VOICE_REF)?this.getProperty(TTSREFS.VOICE_REF).value:this.voice,this.userProperties=this.getTTSSettings()}reset(){this.color="orange",this.autoScroll=!0,this.rate=1,this.pitch=1,this.volume=1,this.voice={usePublication:!0},this.userProperties=this.getTTSSettings()}initializeSelections(){this.headerMenu&&(this.settingsView=findElement(this.headerMenu,"#container-view-tts-settings"))}setControls(){this.settingsView&&this.renderControls(this.settingsView)}renderControls(e){this.headerMenu&&(this.speechRate=findElement(this.headerMenu,"#speechRate")),this.headerMenu&&(this.speechPitch=findElement(this.headerMenu,"#speechPitch")),this.headerMenu&&(this.speechVolume=findElement(this.headerMenu,"#speechVolume")),this.headerMenu&&(this.speechAutoScroll=findElement(this.headerMenu,"#autoScroll")),this.speechRate&&(this.speechRate.value=this.rate.toString()),this.speechPitch&&(this.speechPitch.value=this.pitch.toString()),this.speechVolume&&(this.speechVolume.value=this.volume.toString()),this.speechAutoScroll&&(this.speechAutoScroll.checked=this.autoScroll),addEventListenerOptional(findElement(e,"ul"),"click",(e=>{e.stopPropagation()}))}onSettingsChange(e){this.settingsChangeCallback=e}onRestart(e){this.restartCallback=e}storeProperty(e){this.updateUserSettings(),this.saveProperty(e)}updateUserSettings(){var e,t,r,n,i,o,s,a,l={rate:null==(e=this.userProperties.getByRef(TTSREFS.RATE_REF))?void 0:e.value,pitch:null==(t=this.userProperties.getByRef(TTSREFS.PITCH_REF))?void 0:t.value,volume:null==(r=this.userProperties.getByRef(TTSREFS.VOLUME_REF))?void 0:r.value,voice:null==(n=this.userProperties.getByRef(TTSREFS.VOLUME_REF))?void 0:n.value,color:null==(i=this.userProperties.getByRef(TTSREFS.COLOR_REF))?void 0:i.value,autoScroll:null==(o=this.userProperties.getByRef(TTSREFS.AUTO_SCROLL_REF))?void 0:o.value};this.applyTTSSettings(l),(null==(s=this.api)?void 0:s.updateSettings)&&(null==(a=this.api)||a.updateSettings(l).then((async e=>{import_loglevel16.default.log("api updated tts settings",e)})))}getTTSSettings(){var e=new UserProperties;return e.addSwitchable("tts-auto-scroll-off","tts-auto-scroll-on",this.autoScroll,TTSREFS.AUTO_SCROLL_REF,TTSREFS.AUTO_SCROLL_KEY),e.addIncremental(this.rate,.1,10,.1,"",TTSREFS.RATE_REF,TTSREFS.RATE_KEY),e.addIncremental(this.pitch,.1,2,.1,"",TTSREFS.PITCH_REF,TTSREFS.PITCH_KEY),e.addIncremental(this.volume,.1,1,.1,"",TTSREFS.VOLUME_REF,TTSREFS.VOLUME_KEY),e.addStringable(this.color,TTSREFS.COLOR_REF,TTSREFS.COLOR_KEY),e.addJSONable(JSON.stringify(this.voice),TTSREFS.VOICE_REF,TTSREFS.VOICE_KEY),e}saveProperty(e){let t=this.store.get(this.TTSSETTINGS);if(t){let r=JSON.parse(t);r=r.filter((t=>t.name!==e.name)),r.push(e),this.store.set(this.TTSSETTINGS,JSON.stringify(r))}else{let t=[];t.push(e),this.store.set(this.TTSSETTINGS,JSON.stringify(t))}return e}getProperty(e){let t=this.store.get(this.TTSSETTINGS);if(t){let r=JSON.parse(t);if(r=r.filter((t=>t.name===e)),0===r.length)return;return r[0]}}resetTTSSettings(){this.store.remove(this.TTSSETTINGS),this.reset(),this.settingsChangeCallback(),this.restartCallback()}applyTTSSettings(e){if(e.rate){import_loglevel16.default.log("rate "+this.rate),this.rate=e.rate;let t=this.userProperties.getByRef(TTSREFS.RATE_REF);t&&(t.value=this.rate,this.saveProperty(t)),this.settingsChangeCallback(),this.restartCallback()}if(e.pitch){import_loglevel16.default.log("pitch "+this.pitch),this.pitch=e.pitch;let t=this.userProperties.getByRef(TTSREFS.PITCH_REF);t&&(t.value=this.pitch,this.saveProperty(t)),this.settingsChangeCallback(),this.restartCallback()}if(e.volume){import_loglevel16.default.log("volume "+this.volume),this.volume=e.volume;let t=this.userProperties.getByRef(TTSREFS.VOLUME_REF);t&&(t.value=this.volume,this.saveProperty(t)),this.settingsChangeCallback(),this.restartCallback()}if(e.color){this.color=e.color;let t=this.userProperties.getByRef(TTSREFS.COLOR_REF);t&&(t.value=this.color,this.saveProperty(t)),this.settingsChangeCallback()}if(void 0!==e.autoScroll){import_loglevel16.default.log("autoScroll "+this.autoScroll),this.autoScroll=e.autoScroll;let t=this.userProperties.getByRef(TTSREFS.AUTO_SCROLL_REF);t&&(t.value=this.autoScroll,this.saveProperty(t)),this.settingsChangeCallback()}if(e.voice){import_loglevel16.default.log("voice "+this.voice),this.voice=e.voice;let t=this.userProperties.getByRef(TTSREFS.VOICE_REF);t&&(t.value=this.voice,this.saveProperty(t)),this.settingsChangeCallback(),this.restartCallback()}}applyPreferredVoice(e){var t=-1!==e.indexOf(":")?e.slice(0,e.indexOf(":")):void 0,r=-1!==e.indexOf(":")?e.slice(e.indexOf(":")+1):e;void 0!==t&&void 0!==r?this.applyTTSSettings({voice:{usePublication:!0,name:t,lang:r}}):void 0!==r&&void 0===t&&this.applyTTSSettings({voice:{usePublication:!0,lang:r}})}increase(e){if("rate"===e){this.userProperties.getByRef(TTSREFS.RATE_REF).increment();let e=this.userProperties.getByRef(TTSREFS.RATE_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}else if("pitch"===e){this.userProperties.getByRef(TTSREFS.PITCH_REF).increment();let e=this.userProperties.getByRef(TTSREFS.PITCH_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}else if("volume"===e){this.userProperties.getByRef(TTSREFS.VOLUME_REF).increment();let e=this.userProperties.getByRef(TTSREFS.VOLUME_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}}decrease(e){if("rate"===e){this.userProperties.getByRef(TTSREFS.RATE_REF).decrement();let e=this.userProperties.getByRef(TTSREFS.RATE_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}else if("pitch"===e){this.userProperties.getByRef(TTSREFS.PITCH_REF).decrement();let e=this.userProperties.getByRef(TTSREFS.PITCH_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}else if("volume"===e){this.userProperties.getByRef(TTSREFS.VOLUME_REF).decrement();let e=this.userProperties.getByRef(TTSREFS.VOLUME_REF);e&&this.storeProperty(e),this.settingsChangeCallback(),this.restartCallback()}}};init_polyfills(),init_polyfills();var readerLoading=`${icons.loading}`,readerError=`\n    <span>\n    ${icons.error}\n    </span>\n    <span>There was an error loading this page.</span>\n    <button id="r2d2bc-go-back">Go back</button>\n    <button id="r2d2bc-try-again">Try again</button>\n`,import_debounce7=__toESM(require_debounce());init_polyfills();var _TouchEventHandler=class e{constructor(t){this.onBackwardSwipe=()=>{},this.onForwardSwipe=()=>{},this.setupEvents=t=>{let r=null,n=null,i=this;t&&(t.addEventListener("touchstart",(function(e){1===e.changedTouches.length&&(r=e)}),!1),t.addEventListener("touchend",(function(t){if(1!==t.changedTouches.length)return;if(!r)return;const o=r.changedTouches[0],s=t.changedTouches[0];if(!o)return;const a=window.devicePixelRatio,l=(o.clientX-s.clientX)/a,u=(o.clientY-s.clientY)/a;if(Math.abs(l)<e.TAP_TOLERANCE&&Math.abs(u)<e.TAP_TOLERANCE)return n||t.timeStamp-r.timeStamp>e.LONG_PRESS_MS?(r=null,void(n=null)):(r=null,void(n=t));if(n=null,t.timeStamp-r.timeStamp>e.SLOW_SWIPE_MS)return void(r=null);const c=(o.clientY-s.clientY)/(o.clientX-s.clientX);Math.abs(c)>.5||(l<0?i.onBackwardSwipe(t):i.onForwardSwipe(t)),r=null}),!1))},this.navigator=t}};_TouchEventHandler.TAP_TOLERANCE=10,_TouchEventHandler.LONG_PRESS_MS=500,_TouchEventHandler.SLOW_SWIPE_MS=500;var TouchEventHandler=_TouchEventHandler;init_polyfills();var KeyboardEventHandler=class{constructor(e){this.onBackwardSwipe=()=>{},this.onForwardSwipe=()=>{},this.onKeydown=()=>{},this.setupEvents=e=>{e&&(this.focusin(e),this.keydown(e))},this.removeEvents=e=>{if(e){const t=this;e.removeEventListener("focusin",this.onFocusIn(t),!0),e.removeEventListener("keydown",this.onKeyDown(t),!1)}},this.focusin=e=>{const t=this;e.addEventListener("focusin",this.onFocusIn(t),!0)},this.keydown=e=>{const t=this;this.navigator.rights.customKeyboardEvents||e.addEventListener("keydown",this.onKeyDown(t),!1)},this.handlers={},this.navigator=e,this.rtl=!1}onFocusIn(e){return this.handlers["onFocusIn"]||(this.handlers["onFocusIn"]=function(t){var r;null==(r=e.navigator.view)||r.snap(t.target)})}onKeyDown(e){return this.handlers["onKeyDown"]||(this.handlers["onKeyDown"]=function(t){const r=t.target;if(/input|select|option|textarea/i.test(r.tagName))return;const n=r.ownerDocument||r,i=n.defaultView,o=i.getSelection();if(!o.isCollapsed)return;const s=t.key;switch(s){case"ArrowRight":return void(e.rtl?e.onBackwardSwipe(t):e.onForwardSwipe(t));case"ArrowLeft":return void(e.rtl?e.onForwardSwipe(t):e.onBackwardSwipe(t))}switch(t.code){case"Space":return t.ctrlKey?void e.onBackwardSwipe(t):void e.onForwardSwipe(t)}e.onKeydown(t)})}};init_polyfills();var import_debounce4=__toESM(require_debounce()),SampleReadEventHandler=class{constructor(e){this.enforceSampleRead=(0,import_debounce4.debounce)((e=>{var t,r,n,i,o,s;let a=Math.round(100*e.locations.totalProgression),l=!1;(null==(t=this.navigator.sample)?void 0:t.limit)&&(l=a<=(null==(r=this.navigator.sample)?void 0:r.limit),"fixed"===(null==(n=this.navigator.view)?void 0:n.layout)&&!l&&(null==(i=this.navigator.sample)?void 0:i.minimum)&&e.locations.position<=(null==(o=this.navigator.sample)?void 0:o.minimum)&&(l=!0));let u={37:1,38:0,39:1,40:1,32:1,33:1,34:1,35:1,36:1};function c(e){e.preventDefault()}function d(e){u[e.keyCode]&&!l&&c(e)}let h=!1,p=Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("test",(function(){}),p);let f,g=!!h&&{passive:!1};function m(e){e=e||window.event;let t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return-1!==t||l||e.preventDefault(),!1}function v(e){e=e||window.event;let t=e.target||e.srcElement,r=e.touches[0].clientY;if(r>f);else if(r<f&&!l)return t.className.match(/\baltNav\b/)||(e.returnValue=!1,e.cancelable&&(e.cancelBubble=!0),e.preventDefault&&e.cancelable&&(e.preventDefault(),e.stopPropagation())),!1;return f=r,!1}function y(e){return e=e||window.event,f=e.touches[0].clientY,!1}window.addEventListener("mousewheel",m,g),window.addEventListener("DOMMouseScroll",m,g),window.addEventListener("keydown",d,g),window.addEventListener("touchmove",v,g),window.addEventListener("touchstart",y,g),l?(this.navigator.iframes[0].focus(),this.navigator.errorMessage&&(this.navigator.errorMessage.style.display="none",this.navigator.errorMessage.style.removeProperty("background-color"))):(this.navigator.iframes[0].blur(),this.navigator.errorMessage&&(this.navigator.errorMessage.style.display="block",this.navigator.errorMessage.style.backgroundColor="rgb(255, 255, 255)",this.navigator.errorMessage.innerHTML="<span>"+(null==(s=this.navigator.sample)?void 0:s.popup)+"</span>"))}),300),this.navigator=e}};init_polyfills();var import_loglevel17=__toESM(require_loglevel()),PageBreakModule=class{static async create(e){const t=new this(e.publication,e,e.headerMenu);return await t.start(),t}constructor(e,t,r){this.headerMenu=r,this.publication=e,this.properties=t}async stop(){import_loglevel17.default.log("Page Break module stop")}async start(){var e,t;this.headerMenu&&(this.goToPageView=findElement(this.headerMenu,"#sidenav-section-gotopage")),this.headerMenu&&(this.goToPageNumberInput=findElement(this.headerMenu,"#goToPageNumberInput")),this.headerMenu&&(this.goToPageNumberButton=findElement(this.headerMenu,"#goToPageNumberButton")),addEventListenerOptional(this.goToPageNumberInput,"keypress",this.goToPageNumber.bind(this)),addEventListenerOptional(this.goToPageNumberButton,"click",this.goToPageNumber.bind(this)),this.goToPageView&&((null==(e=this.publication.pageList)?void 0:e.length)||null==(t=this.goToPageView.parentElement)||t.removeChild(this.goToPageView)),setTimeout((()=>{this.properties.hideLayer?this.navigator.hideLayer("pagebreak"):this.navigator.showLayer("pagebreak")}),10)}async goToPageNumber(e){var t;if(this.goToPageNumberInput.value&&("Enter"===e.key||"click"===e.type)){var r=null==(t=this.publication.pageList)?void 0:t.filter((e=>e.Href.slice(e.Href.indexOf("#")+1).replace(/[^0-9]/g,"")===this.goToPageNumberInput.value));if(r&&r.length>0){var n=r[0];let e={progression:0};if(-1!==n.Href.indexOf("#")){const t=n.Href.slice(n.Href.indexOf("#")+1);null!==t&&(e={fragment:t})}const t={href:this.publication.getAbsoluteHref(n.Href),locations:e,type:n.TypeLink,title:n.Title};this.navigator.goTo(t)}}}async handleResize(){var e;await(null==(e=this.navigator.highlighter)?void 0:e.destroyHighlights(3)),await this.drawPageBreaks()}async drawPageBreaks(){setTimeout((()=>{var e,t,r;const n=null==(e=this.navigator.iframes[0].contentDocument)?void 0:e.body;let i=null==n?void 0:n.querySelectorAll('[*|type="pagebreak"]');0===(null==i?void 0:i.length)&&(i=null==n?void 0:n.querySelectorAll("[epub\\:type='pagebreak']")),0===(null==i?void 0:i.length)&&(i=null==n?void 0:n.querySelectorAll("[role='doc-pagebreak']"));let o=this;function s(e){try{let t=o.navigator.iframes[0].contentDocument;return t?uniqueCssSelector(e,t,_getCssSelectorOptions):""}catch(t){return import_loglevel17.default.log("uniqueCssSelector:"),import_loglevel17.default.error(t),""}}if(i)for(let a=0;a<i.length;a++){let e=i[a];import_loglevel17.default.log(e);let n=e.innerHTML,o=!1;0===e.innerHTML.length&&(n=e.getAttribute("title")??"",e.innerHTML=n,o=!0),0===e.innerHTML.length&&(n=(e.getAttribute("id")??"").replace(/[^0-9]/g,""),e.innerHTML=n,o=!0);let l=this.navigator.iframes[0].contentDocument;if(l){const i=null==(t=this.navigator.highlighter)?void 0:t.dom(l.body).getWindow().document.createRange(),o=null==(r=this.navigator.highlighter)?void 0:r.dom(l.body).getSelection();if(o.removeAllRanges(),i.selectNodeContents(e),o.addRange(i),!o.isCollapsed){const e=convertRange(i,s);o.removeAllRanges(),e&&this.createPageBreakHighlight({rangeInfo:e,cleanText:"",rawText:""},n)}}o&&(e.innerHTML="")}}),200)}createPageBreakHighlight(e,t){var r;try{const i=`${e.rangeInfo.startContainerElementCssSelector}${e.rangeInfo.startContainerChildTextNodeIndex}${e.rangeInfo.startOffset}${e.rangeInfo.endContainerElementCssSelector}${e.rangeInfo.endContainerChildTextNodeIndex}${e.rangeInfo.endOffset}`,o=SHA256.hash(i),s="R2_PAGEBREAK_"+o;var n=!1;const a={color:"#000000",id:s,pointerInteraction:n,selectionInfo:e,marker:3,icon:{id:"pageBreak",title:t,color:"#000000",position:"left"},type:3};_highlights.push(a);let l=null==(r=this.navigator.highlighter)?void 0:r.createHighlightDom(this.navigator.iframes[0].contentWindow,a);return a.position=parseInt(((null==l?void 0:l.hasChildNodes())?l.childNodes[0]:l).style.top.replace("px","")),a}catch(i){throw"Can't create highlight: "+i}}};init_polyfills();var import_sanitize_html2=__toESM(require_sanitize_html()),import_debounce5=__toESM(require_debounce()),import_loglevel18=__toESM(require_loglevel()),TTSModule2=class{constructor(e,t,r,n,i,o){this.voices=[],this.hasEventListener=!1,this.startX=0,this.startY=0,this.index=0,this.userScrolled=!1,this.scrollPartial=!1,this.speaking=!1,this.restartIndex=-1,this.ttsQueueIndex=-1,this.ttsQueue=void 0,this.ttsPlayQueueIndexDebounced=(0,import_debounce5.debounce)(((e,t)=>{this.restartIndex>=0?(this.ttsQueueIndex=this.restartIndex,this.restartIndex=-1):this.ttsQueueIndex=e,this.ttsQueue=t,this.ttsPlayQueueIndex(this.ttsQueueIndex,t)}),150),this.tts=e,this.headerMenu=o,this.rights=t,this.highlighter=r,this.properties=n,this.api=i}initialize(e){void 0!==this.highlighter&&(this.tts.setControls(),this.tts.onRestart(this.restart.bind(this)),this.body=e,this.clean=(0,import_sanitize_html2.default)(this.body.innerHTML,{allowedTags:[],allowedAttributes:{}}),this.wrapper=findRequiredElement(document,"#iframe-wrapper"),window.speechSynthesis.getVoices(),this.initVoices(!0),this.hasEventListener||(this.hasEventListener=!0,addEventListenerOptional(document,"wheel",this.wheel.bind(this)),addEventListenerOptional(this.body,"wheel",this.wheel.bind(this)),addEventListenerOptional(document,"keydown",this.wheel.bind(this)),addEventListenerOptional(this.navigator.iframes[0].contentDocument,"keydown",this.wheel.bind(this))),addEventListenerOptional(this.body,"mousedown",this.clickStart.bind(this)),addEventListenerOptional(this.body,"mouseup",this.click.bind(this)))}clickStart(e){"clientX"in e&&(this.startX=e.clientX),"clientY"in e&&(this.startY=e.clientY)}click(e){var t;let r=0,n=0;if("clientX"in e&&(r=e.clientX),"clientY"in e&&(n=e.clientY),window.speechSynthesis.speaking&&this.speaking&&r===this.startX&&n===this.startY){let e=this.navigator.iframes[0].contentDocument;if(e){let r=this.highlighter.dom(e.body).getSelection(),n=r.getRangeAt(0),o=r.anchorNode;while(0!==n.toString().indexOf(" "))try{n.setStart(o,n.startOffset-1)}catch(i){break}n.setStart(o,n.startOffset+1);do{n.setEnd(o,o.length<n.endOffset?n.endOffset+1:o.length)}while(-1===n.toString().indexOf(" ")&&""!==n.toString().trim());let s=document.querySelector("main#iframe-wrapper iframe"),a=null==(t=s.contentWindow)?void 0:t.document.body;if(this.ttsQueue&&a){const e=this.findTtsQueueItemIndex(this.ttsQueue,r.anchorNode,r.anchorNode,r.anchorOffset,a);r.removeAllRanges(),e>=0&&(window.speechSynthesis.cancel(),this.restartIndex=e,this.ttsPlayQueueIndexDebounced(this.restartIndex,this.ttsQueue))}}}}initVoices(e){function t(){return new Promise((function(e,t){let r,n=window.speechSynthesis;r=setInterval((()=>{0!==n.getVoices().length&&(e(n.getVoices()),clearInterval(r))}),10)}))}let r=t();r.then((async t=>{if(import_loglevel18.default.log(t),this.voices=[],t.forEach((e=>{!0===e.localService&&this.voices.push(e)})),import_loglevel18.default.log(this.voices),e&&this.headerMenu){var r=findElement(this.headerMenu,"#preferred-languages");r&&this.voices.forEach((e=>{var t=document.createElement("option");t.value=e.name+":"+e.lang,t.innerHTML=e.name+" ("+e.lang+")",r.add(t)}))}}))}cancel(e=!0){var t,r,n;e&&((null==(t=this.api)?void 0:t.stopped)&&(null==(r=this.api)||r.stopped()),this.navigator.emit("readaloud.stopped","stopped")),this.userScrolled=!1,this.speaking=!1,setTimeout((()=>{window.speechSynthesis.cancel()}),0),this._ttsQueueItemHighlightsWord&&(null==(n=this.navigator.highlighter)||n.destroyHighlights(2),this._ttsQueueItemHighlightsWord=void 0)}async speak(e,t,r){var n,i,o,s,a,l,u;t||this.navigator.rights.enableContentProtection&&(null==(n=this.navigator.contentProtectionModule)||n.deactivate()),(null==(i=this.api)?void 0:i.started)&&(null==(o=this.api)||o.started()),this.navigator.emit("readaloud.started","started");const c=this;let d;if(this.userScrolled=!1,this.cancel(!1),t){let t=document.querySelector("main#iframe-wrapper iframe"),r=null==(s=t.contentWindow)?void 0:s.document.body,n=this.navigator.iframes[0].contentDocument;if(n){let t=this.highlighter.dom(n.body).getSelection();if(t.isCollapsed){let e=c.navigator.iframes[0].contentDocument;const r=null==(l=null==(a=c.navigator.annotationModule)?void 0:a.annotator)?void 0:l.getTemporarySelectionInfo(e);t.addRange(r.range)}if(r){var h=this.generateTtsQueue(r);if(!h.length)return;var p=this.findTtsQueueItemIndex(h,t.anchorNode,t.anchorNode,t.anchorOffset,r),f=this.findTtsQueueItemIndex(h,t.focusNode,t.focusNode,t.focusOffset,r);const n=getTtsQueueItemRef(h,p),i=getTtsQueueItemRef(h,f);var g;if(n&&e&&e.cleanText){const t=getTtsQueueItemRefText(n);let r=e.rangeInfo.startOffset,o=e.cleanText;if(i&&p+1===f){const n=getTtsQueueItemRefText(i);r=(t+" "+n).indexOf(e.cleanText),o=t.slice(r,t.length),g=e.cleanText.replace(o,"").trim()}else if(f>p){let n="";for(let t=p+1;t<f;t++){const r=getTtsQueueItemRef(h,t);if(r){const t=getTtsQueueItemRefText(r);n+=t,g=e.cleanText.replace(t,"")}}if(i){const e=getTtsQueueItemRefText(i);n+=" "+e}r=(t+" "+n).indexOf(e.cleanText),o=t.slice(r,t.length),g=g.replace(o,"").trim()}d=new SpeechSynthesisUtterance(o),d.rate=this.tts.rate,d.pitch=this.tts.pitch,d.volume=this.tts.volume,this.setVoice(this,d),import_loglevel18.default.log(e),import_loglevel18.default.log(o,null==(u=e.range)?void 0:u.commonAncestorContainer.textContent),import_loglevel18.default.log(n),import_loglevel18.default.log(n.item.textNodes),import_loglevel18.default.log(r),import_loglevel18.default.log(n.item.combinedText);let s=n.item.textNodes.filter((t=>{var r;return t===(null==(r=e.range)?void 0:r.commonAncestorContainer)}))[0];import_loglevel18.default.log(s),d.onboundary=e=>{this.updateTTSInfo(n,e.charIndex,e.charLength,r,d.text)}}}}}else d=new SpeechSynthesisUtterance(this.clean);function m(){d.onend=function(){var e,t;if(f>p)if(p+=1,p!==f){const e=getTtsQueueItemRef(h,p);if(e){const t=getTtsQueueItemRefText(e);d=new SpeechSynthesisUtterance(t),d.rate=c.tts.rate,d.pitch=c.tts.pitch,d.volume=c.tts.volume,c.setVoice(c,d),d.onboundary=t=>{c.updateTTSInfo(e,t.charIndex,t.charLength,0,d.text)},setTimeout((()=>{window.speechSynthesis.speak(d)}),0),m()}}else{const t=getTtsQueueItemRef(h,p);t&&(d=new SpeechSynthesisUtterance(g),d.rate=c.tts.rate,d.pitch=c.tts.pitch,d.volume=c.tts.volume,c.setVoice(c,d),d.onboundary=e=>{c.updateTTSInfo(t,e.charIndex,e.charLength,0,d.text)},setTimeout((()=>{window.speechSynthesis.speak(d)}),0),m()),p>f&&(import_loglevel18.default.log("utterance ended"),c.highlighter.doneSpeaking(),null==(e=c.api)||e.finished(),c.navigator.emit("readaloud.finished","finished"))}else import_loglevel18.default.log("utterance ended"),c.highlighter.doneSpeaking(),null==(t=c.api)||t.finished(),c.navigator.emit("readaloud.finished","finished")}}d.rate=this.tts.rate,d.pitch=this.tts.pitch,d.volume=this.tts.volume,this.setVoice(c,d),this.index=0,setTimeout((()=>{var e;window.speechSynthesis.speak(d),t||this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.recalculate(200))}),0),m(),r()}setVoice(e,t){import_loglevel18.default.log("this.tts.voice.lang",this.tts.voice.lang);let r,n=!0;this.tts.voice&&this.tts.voice.lang&&(n=-1!==this.tts.voice.lang.indexOf("-"),n||(this.tts.voice.lang=this.tts.voice.lang.replace("_","-"),n=!0)),import_loglevel18.default.log("initialVoiceHasHyphen",n),import_loglevel18.default.log("voices",this.voices),n?(r=this.tts.voice&&this.tts.voice.lang&&this.tts.voice.name?this.voices.filter((e=>{var t=e.lang.replace("_","-");return t===this.tts.voice.lang&&e.name===this.tts.voice.name}))[0]:void 0,void 0===r&&(r=this.tts.voice&&this.tts.voice.lang?this.voices.filter((e=>e.lang.replace("_","-")===this.tts.voice.lang))[0]:void 0)):(r=this.tts.voice&&this.tts.voice.lang&&this.tts.voice.name?this.voices.filter((e=>e.lang===this.tts.voice.lang&&e.name===this.tts.voice.name))[0]:void 0,void 0===r&&(r=this.tts.voice&&this.tts.voice.lang?this.voices.filter((e=>e.lang===this.tts.voice.lang))[0]:void 0)),import_loglevel18.default.log("initialVoice",r);const i=-1!==e.navigator.publication.Metadata.Language[0].indexOf("-");let o;import_loglevel18.default.log("publicationVoiceHasHyphen",i),o=i?this.tts.voice&&this.tts.voice.usePublication?this.voices.filter((t=>{var r=t.lang.replace("_","-");return r.startsWith(e.navigator.publication.Metadata.Language[0])||r.endsWith(e.navigator.publication.Metadata.Language[0].toUpperCase())}))[0]:void 0:this.tts.voice&&this.tts.voice.usePublication?this.voices.filter((t=>t.lang.startsWith(e.navigator.publication.Metadata.Language[0])||t.lang.endsWith(e.navigator.publication.Metadata.Language[0].toUpperCase())))[0]:void 0,import_loglevel18.default.log("publicationVoice",o);const s=-1!==navigator.language.indexOf("-");let a;import_loglevel18.default.log("defaultVoiceHasHyphen",s),a=s?this.voices.filter((e=>{const t=e.lang.replace("_","-");return t===navigator.language&&e.localService}))[0]:this.voices.filter((e=>{const t=e.lang;return t===navigator.language&&e.localService}))[0],void 0===a&&(a=this.voices.filter((e=>{const t=e.lang;return t.includes(navigator.language)&&e.localService}))[0]),import_loglevel18.default.log("defaultVoice",a),r?(import_loglevel18.default.log("initialVoice"),t.voice=r):o?(import_loglevel18.default.log("publicationVoice"),t.voice=o):a&&(import_loglevel18.default.log("defaultVoice"),t.voice=a),void 0!==t.voice&&null!==t.voice&&(t.lang=t.voice.lang,import_loglevel18.default.log("utterance.voice.lang",t.voice.lang),import_loglevel18.default.log("utterance.lang",t.lang)),import_loglevel18.default.log("navigator.language",navigator.language)}speakPlay(){var e,t,r,n,i;this.navigator.rights.enableContentProtection&&(null==(e=this.navigator.contentProtectionModule)||e.deactivate()),this.scrollPartial=!0,this.cancel(!1),(null==(t=this.api)?void 0:t.started)&&(null==(r=this.api)||r.started()),this.navigator.emit("readaloud.started","started");let o=this,s=document.querySelector("main#iframe-wrapper iframe"),a=null==(n=s.contentWindow)?void 0:n.document.body;if(a){let e=function(){var e;let n=o.highlighter.visibleTextRects[0],i=o.navigator.iframes[0].contentDocument;if(i){const s=o.highlighter.dom(i.body).getWindow().document.createRange(),l=o.highlighter.dom(null==(e=o.navigator.iframes[0].contentDocument)?void 0:e.body).getSelection();l.removeAllRanges(),s.selectNodeContents(n.node),l.addRange(s);let u=0;const c=l.focusNode,d=l.focusOffset;l.collapse(l.anchorNode,l.anchorOffset);for(let e=0;e<u;e++)l.modify("move","forward","line");if(l.extend(c,d),l.collapse(l.anchorNode,l.anchorOffset),a){const e=o.findTtsQueueItemIndex(t,l.anchorNode,l.anchorNode,l.anchorOffset,a);e>=0&&(r=e)}l.removeAllRanges()}};const t=this.generateTtsQueue(a);if(!t.length)return;let r=0;e(),r<0&&(r=0),setTimeout((()=>{this.startTTSSession(t,r)}),200)}this.navigator.rights.enableContentProtection&&(null==(i=this.navigator.contentProtectionModule)||i.recalculate(200))}speakPause(){var e,t,r;window.speechSynthesis.speaking&&((null==(e=this.api)?void 0:e.paused)&&(null==(t=this.api)||t.paused()),this.navigator.emit("readaloud.paused","paused"),this.userScrolled=!1,window.speechSynthesis.pause(),this.speaking=!1,this._ttsQueueItemHighlightsWord&&(null==(r=this.navigator.highlighter)||r.destroyHighlights(2),this._ttsQueueItemHighlightsWord=void 0))}speakResume(){var e,t;window.speechSynthesis.speaking&&((null==(e=this.api)?void 0:e.resumed)&&(null==(t=this.api)||t.resumed()),this.navigator.emit("readaloud.resumed","resumed"),this.userScrolled=!1,window.speechSynthesis.resume(),this.speaking=!0)}static async create(e){const t=new this(e.tts,e.rights,e.highlighter,e,e.api,e.headerMenu);return await t.start(),t}async start(){var e;if(this.headerMenu){var t=findElement(this.headerMenu,"#menu-button-tts");t&&(null==(e=t.parentElement)||e.style.removeProperty("display"))}setTimeout((()=>{var e;(null==(e=this.properties)?void 0:e.hideLayer)?this.navigator.hideLayer("readaloud"):this.navigator.showLayer("readaloud")}),10)}wheel(e){if(e instanceof KeyboardEvent){const t=e.key;switch(t){case"ArrowUp":this.userScrolled=!0;break;case"ArrowDown":this.userScrolled=!0;break}}else this.userScrolled=!0}stop(){import_loglevel18.default.log("TTS module stop"),removeEventListenerOptional(document,"wheel",this.wheel.bind(this)),removeEventListenerOptional(this.body,"wheel",this.wheel.bind(this)),removeEventListenerOptional(document,"keydown",this.wheel.bind(this)),removeEventListenerOptional(this.navigator.iframes[0].contentDocument,"keydown",this.wheel.bind(this)),removeEventListenerOptional(this.body,"click",this.click.bind(this))}generateTtsQueue(e){const t=[],r=[];function n(e){if(e.nodeType!==Node.TEXT_NODE)return;if(!e.nodeValue||!e.nodeValue.trim().length)return;const n=r[r.length-1];if(!n)return;const i=e.parentElement?getLanguage(e.parentElement):void 0,o=e.parentElement?getDirection(e.parentElement):void 0;let s=t[t.length-1];s&&s.parentElement===n&&s.lang===i&&s.dir===o||(s={combinedText:"",dir:o,lang:i,parentElement:n,textNodes:[]},t.push(s)),s.textNodes.push(e)}let i=!0;function o(e){if(e.nodeType!==Node.ELEMENT_NODE)return;const s=i||e.matches("h1, h2, h3, h4, h5, h6, p, th, td, caption, li, blockquote, q, dt, dd, figcaption, div, pre");i=!1,s&&r.push(e);for(const i of e.childNodes)switch(i.nodeType){case Node.ELEMENT_NODE:const e=i,s=e.matches("img, sup, sub, audio, video, source, button, canvas, del, dialog, embed, form, head, iframe, meter, noscript, object, s, script, select, style, textarea");if(s){if(e.tagName&&"img"===e.tagName.toLowerCase()&&e.src){const r=e.getAttribute("alt");if(r){const n=r.trim();if(n){const r=getLanguage(e),i=void 0;t.push({combinedText:n,dir:i,lang:r,parentElement:e,textNodes:[]})}}}}else o(e);break;case Node.TEXT_NODE:0!==r.length&&n(i);break;default:break}s&&r.pop()}function s(e){if(!e.textNodes||!e.textNodes.length)return void(e.combinedText&&e.combinedText.length||(e.combinedText=""));e.combinedText=combineTextNodes(e.textNodes,!0).replace(/[\r\n]/g," ");let t=e.parentElement;while(t){if(t.tagName){const e=t.tagName.toLowerCase();if("pre"===e||"code"===e||"video"===e||"audio"===e)break}t=t.parentElement}}o(e);for(const a of t)s(a);return t}findTtsQueueItemIndex(e,t,r,n,i){let o=0;for(const s of e){if(r&&s.textNodes){if(s.textNodes.includes(r))return o}else if(t===s.parentElement||s.parentElement!==t.ownerDocument.body&&s.parentElement!==i&&s.parentElement.contains(t)||t.contains(s.parentElement))return o;o++}return-1}restart(){window.speechSynthesis.speaking&&(window.speechSynthesis.cancel(),this.restartIndex=this.ttsQueueIndex,this.ttsPlayQueueIndexDebounced(this.restartIndex,this.ttsQueue))}startTTSSession(e,t){const r=getTtsQueueItemRef(e,t);r?(this.speaking=!0,this.ttsPlayQueueIndexDebounced(t,e)):this.cancel()}ttsPlayQueueIndex(e,t){if(e<0)return void this.cancel();const r=getTtsQueueItemRef(t,e);if(!r)return void this.cancel();const n=getTtsQueueItemRefText(r);if(!n)return void this.cancel();const i=new SpeechSynthesisUtterance(n);i.rate=this.tts.rate,i.pitch=this.tts.pitch,i.volume=this.tts.volume;const o=this;this.setVoice(o,i),i.onboundary=e=>{import_loglevel18.default.log(e.name),this.updateTTSInfo(r,e.charIndex,e.charLength,0,i.text)},setTimeout((()=>{window.speechSynthesis.speak(i),o.speaking||window.speechSynthesis.pause()}),0),i.onend=function(){o.speaking&&o.ttsPlayQueueIndexDebounced(e+1,t)}}updateTTSInfo(e,t,r,n,i){if(!e)return;import_loglevel18.default.log(e,t,r,i);const o=i||getTtsQueueItemRefText(e);if(t>=0&&i){const o=i.slice(0,t+1).search(/\S+$/),s=i.slice(t).search(/\s/),a=s<0?i.slice(o):i.slice(o,s+t),l=o+a.length;if(void 0===r){const e=i.substring(t).match(/^[a-z\d']*/i);e&&(r=e[0].length)}void 0===r&&(r=a.length),this.wrapHighlightWord(e,i,t+n,r,a,o,l)}return o}wrapHighlightWord(e,t,r,n,i,o,s){var a,l,u,c,d,h,p,f,g,m;import_loglevel18.default.log(e),import_loglevel18.default.log(t),import_loglevel18.default.log(r,n,i,o,s),this._ttsQueueItemHighlightsWord&&(null==(a=this.navigator.highlighter)||a.destroyHighlights(2),this._ttsQueueItemHighlightsWord=void 0);const v=e.item;let y,_,b=r,S=0,w=-1,C=-1;const A=b+n;for(const E of v.textNodes){if(!E.nodeValue&&""!==E.nodeValue)continue;const e=E.nodeValue.length;if(S+=e,y||b<S&&(y=E,w=e-(S-b)),y&&A<=S&&(_=E,C=e-(S-A)),_)break}if(y&&_){let e=function(e){try{let t=r.navigator.iframes[0].contentDocument;return t?uniqueCssSelector(e,t,_getCssSelectorOptions):""}catch(t){return import_loglevel18.default.log("uniqueCssSelector:"),import_loglevel18.default.error(t),""}};const t=new Range;t.setStart(y,w),t.setEnd(_,C);const r=this,n=convertRange(t,e);if(!n)return;let i=null==(l=this.navigator.highlighter)?void 0:l.createHighlight(this.navigator.iframes[0].contentWindow,{rangeInfo:n,cleanText:"",rawText:"",range:void 0},this.tts.color,!1,3,{id:"tts",title:"",position:"right"},void 0,{defaultClass:this.tts.color},2,"R2_READALOUD_");if(i){this._ttsQueueItemHighlightsWord=i[0];const e=null==(c=null==(u=i[1])?void 0:u.firstChild)?void 0:c.getBoundingClientRect(),t=e.top-this.wrapper.scrollTop,n=t>window.innerHeight/2-65;(null==(d=this.navigator.view)?void 0:d.isScrollMode())&&this.tts.autoScroll&&!this.userScrolled&&this.scrollPartial&&n?null==(p=null==(h=i[1])?void 0:h.firstChild)||p.scrollIntoView({block:"center",behavior:"smooth"}):(null==(f=this.navigator.view)?void 0:f.isPaginated())&&(null==(m=r.navigator.view)||m.snap(null==(g=i[1])?void 0:g.firstChild))}}}};function getLanguage(e){let t=e;while(t&&t.nodeType===Node.ELEMENT_NODE){let e=t.getAttribute("xml:lang");if(e||(e=t.getAttributeNS("http://www.w3.org/XML/1998/namespace","lang")),e||(e=t.getAttribute("lang")),e)return e;t=t.parentNode}}function getDirection(e){let t=e;while(t&&t.nodeType===Node.ELEMENT_NODE){const e=t.getAttribute("dir");if(e)return e;t=t.parentNode}}function combineTextNodes(e,t){if(e&&e.length){let r="";for(const n of e)n.nodeValue&&(r+=t?n.nodeValue:normalizeText(n.nodeValue));return r}return""}function normalizeHtmlText(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function normalizeText(e){return normalizeHtmlText(e).replace(/\n/g," ").replace(/\s\s+/g," ")}function getTtsQueueItemRef(e,t){let r=-1,n=-1;for(const i of e)if(n++,r++,t===r)return{item:i,iArray:n,iGlobal:r,iSentence:-1}}function getTtsQueueItemRefText(e){return e.item.combinedText}init_polyfills();var lodash3=__toESM(require_lodash()),import_debounce6=__toESM(require_debounce()),import_loglevel19=__toESM(require_loglevel()),DefinitionsModule=class{constructor(e,t,r,n){this.currentChapterPopupResult=[],this.currentPopupHighlights=[],this.definitions=(0,import_debounce6.debounce)((async()=>{if(await this.highlighter.destroyHighlights(4),this.properties.definitions)for(const e of this.properties.definitions)await this.define(e)}),200),this.publication=e,this.properties=t,this.api=n,this.highlighter=r}static async create(e){const t=new this(e.publication,e,e.highlighter,e.api);return await t.start(),t}async stop(){import_loglevel19.default.log("Definitions module stop")}async start(){setTimeout((()=>{this.properties.hideLayer?this.navigator.hideLayer("definitions"):this.navigator.showLayer("definitions")}),10)}async searchAndPaint(e,t){var r;const n=this.publication.getAbsoluteHref(this.publication.readingOrder?this.publication.readingOrder[this.navigator.currentResource()??0].Href:"");let i=this.publication.getTOCItem(n);void 0===i&&this.publication.readingOrder&&(i=this.publication.readingOrder[this.navigator.currentResource()??0]);let o=[];if(i)for(const s of e.terms){const n=e.terms.indexOf(s);i&&await searchDocDomSeek(s,this.navigator.iframes[0].contentDocument,i.Href,i.Title,null==(r=this.navigator.definitionsModule)?void 0:r.properties.fullWordSearch).then((r=>{let i;1===e.result?i=0:2===e.result&&(i=Math.floor(Math.random()*r.length-1)+1),r.forEach(((t,r)=>{if(void 0===i||i===r){const r={rangeInfo:t.rangeInfo},n=this.createDefinitionHighlight(r,e);t.highlight=n,o.push(lodash3.omit(n,"definition")),this.currentChapterPopupResult.push(t),this.currentPopupHighlights.push(n)}})),n===e.terms.length-1&&t(o)}))}}async define(e){await this.searchAndPaint(e,(async t=>{var r,n,i;(null==(r=this.api)?void 0:r.success)&&(null==(n=this.api)||n.success(lodash3.omit(e,"callbacks"),t),this.navigator.emit("definition.success",t),(null==(i=this.api)?void 0:i.visible)&&t.forEach((t=>{var r;let n=null==(r=this.navigator.iframes[0].contentDocument)?void 0:r.querySelector(`#${t.id}`);const i=null==n?void 0:n.querySelectorAll(`.${CLASS_HIGHLIGHT_AREA}`);let o=new IntersectionObserver(((r,n)=>{r.forEach((r=>{var n;1===r.intersectionRatio&&(null==(n=this.api)||n.visible(lodash3.omit(e,"callbacks"),lodash3.omit(t,"definition")),this.navigator.emit("definition.visible",e,t))}))}),{threshold:1});i&&i.length>0&&o.observe(i[0])})))}))}async drawDefinitions(){setTimeout((async()=>{await this.definitions()}),100)}async handleResize(){await this.drawDefinitions()}createDefinitionHighlight(e,t){var r;try{let n=null==(r=this.navigator.definitionsModule)?void 0:r.properties.color;TextHighlighter.isHexColor(n)&&(n=TextHighlighter.hexToRgbChannels(n));const i=`${e.rangeInfo.startContainerElementCssSelector}${e.rangeInfo.startContainerChildTextNodeIndex}${e.rangeInfo.startOffset}${e.rangeInfo.endContainerElementCssSelector}${e.rangeInfo.endContainerChildTextNodeIndex}${e.rangeInfo.endOffset}`,o=SHA256.hash(i),s="R2_DEFINITION_"+o;this.highlighter.destroyHighlight(this.navigator.iframes[0].contentDocument,s);const a={color:n||DEFAULT_BACKGROUND_COLOR,id:s,pointerInteraction:!0,selectionInfo:e,marker:1,type:4};_highlights.push(a);let l=this.highlighter.createHighlightDom(this.navigator.iframes[0].contentWindow,a);return l&&(t.definition&&(l.dataset.definition=t.definition),l.dataset.order=String(t.order),a.definition=t,a.position=parseInt(((null==l?void 0:l.hasChildNodes())?l.childNodes[0]:l).style.top.replace("px",""))),a}catch(n){throw"Can't create definitions highlight: "+n}}async addDefinition(e){await this.define(e)}async clearDefinitions(){await this.highlighter.destroyHighlights(4)}};init_polyfills();var import_index=__toESM(require_eventemitter3(),1),eventemitter3_default=import_index.default;init_polyfills();var import_loglevel20=__toESM(require_loglevel()),DEFAULT_BACKGROUND_COLOR_OPACITY2=.5,LineFocusModule=class{constructor(e,t,r){this.hasEventListener=!1,this.lines=[],this.index=0,this.isActive=!1,this.isDebug=!1,this.lineFocusContainer=document.getElementById("lineFocusContainer"),this.readerContainer=document.getElementById("D2Reader-Container"),this.lineFocusTopBlinder=document.getElementById("lineFocusTopBlinder"),this.lineFocusBottomBlinder=document.getElementById("lineFocusBottomBlinder"),this.wrapperHeight=void 0,this.properties=e,this.api=r,this.highlighter=t}static async create(e){const t=new this(e,e.highlighter,e.api);return await t.start(),t}async stop(){import_loglevel20.default.log("Definitions module stop"),this.hasEventListener=!1,removeEventListenerOptional(document,"keydown",this.keydown.bind(this)),removeEventListenerOptional(document,"keyup",this.keyup.bind(this)),removeEventListenerOptional(this.navigator.iframes[0].contentDocument,"keydown",this.keydown.bind(this)),removeEventListenerOptional(this.navigator.iframes[0].contentDocument,"keyup",this.keyup.bind(this))}async start(){const e=findRequiredElement(document,"#iframe-wrapper");e.style.height.length>0&&(this.wrapperHeight=e.style.height,this.lineFocusContainer&&0===this.lineFocusContainer.style.height.length&&(this.lineFocusContainer.style.height=this.wrapperHeight),this.readerContainer&&0===this.readerContainer.style.height.length&&(this.readerContainer.style.height=this.wrapperHeight),this.readerContainer&&(this.readerContainer.style.overflow="hidden"))}initialize(e){return new Promise((async t=>{await document.fonts.ready,this.hasEventListener||(this.hasEventListener=!0,addEventListenerOptional(document,"keydown",this.keydown.bind(this)),addEventListenerOptional(document,"keyup",this.keyup.bind(this)),addEventListenerOptional(e.contentDocument,"keydown",this.keydown.bind(this)),addEventListenerOptional(e.contentDocument,"keyup",this.keyup.bind(this))),t(null)}))}keydown(e){if(e instanceof KeyboardEvent&&this.isActive){const t=e.key;switch(t){case"ArrowUp":e.stopPropagation();break;case"ArrowDown":e.stopPropagation();break}}}keyup(e){if(e instanceof KeyboardEvent&&this.isActive){const t=e.key;switch(t){case"ArrowUp":this.lineUp();break;case"ArrowDown":this.lineDown();break}}}handleResize(){this.isActive&&this.lineFocus()}async enableLineFocus(){this.isActive=!0,await this.navigator.settings.scroll(!0),this.lineFocus()}disableLineFocus(e=!0){this.isActive=!1;const t=findRequiredElement(document,"#iframe-wrapper");this.wrapperHeight&&(t.style.height=this.wrapperHeight),e||(this.index=0);const r=this.navigator.iframes[0].contentDocument,n=findIframeElement(r,"html");n.style.removeProperty("--USER__maxMediaHeight"),this.wrapperHeight=void 0,this.lineFocusContainer&&(this.lineFocusContainer.style.display="none");let i=document.getElementById("container-view-timeline");i&&i.style.removeProperty("display");let o=document.getElementById("divBefore");o&&o.remove();let s=document.getElementById("divAfter");s&&s.remove(),this.highlighter.destroyHighlights(5)}lineFocus(){var e;const t=findRequiredElement(document,"#iframe-wrapper"),r=this.navigator.iframes[0].contentDocument,n=findIframeElement(r,"html");let i=this.properties.maxHeight?getHeight()*this.properties.maxHeight/100:getHeight()/2;function o(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function s(e,t){e.parentNode.insertBefore(t,e)}n.style.setProperty("--USER__maxMediaHeight",i+"px");let a=document.getElementById("container-view-timeline");a&&(a.style.display="none"),this.lineFocusContainer&&this.lineFocusContainer.style.removeProperty("display");let l=document.getElementById("divBefore");if(l)l.style.height=t.clientHeight/2+"px";else{let e=document.createElement("div");e.style.height=t.clientHeight/2+"px",e.id="divBefore",s(t,e)}let u=document.getElementById("divAfter");if(u)u.style.height=t.clientHeight/2+"px";else{let e=document.createElement("div");e.style.height=t.clientHeight/2+"px",e.id="divAfter",o(t,e)}if(this.lines=[],r){let t=function(){const e=Math.round,t=Math.random,r=255;return{blue:e(t()*r),green:e(t()*r),red:e(t()*r)}},n=function(e,t){let r=[];for(let n=0,i=0;n<e.length;n++)n>=t&&n%t===0&&i++,r[i]=r[i]||[],r[i].push(e[n]);return r},i=function(e,t){const r=Math.min(e.left,t.left),n=Math.max(e.right,t.right),i=Math.min(e.top,t.top),o=Math.max(e.bottom,t.bottom);return{bottom:o,height:o-i,left:r,right:n,top:i,width:n-r}},o=function(e){if(e.length>1){let t=i(e[0],e[1]);if(e.length>2){let r=i(t,e[2]);if(e.length>3){let t=i(r,e[3]);return e.length>4?i(t,e[4]):t}return r}return t}return e[0]},s=this.findRects(r.body);s=getClientRectsNoOverlap_(s,!0),s=s.sort((function(e,t){return e.top-t.top}));let a=[];s=s.filter((function(e){const t=e.top;return-1===a.indexOf(t)&&-1===a.indexOf(t+1)&&-1===a.indexOf(t+2)&&-1===a.indexOf(t+3)&&-1===a.indexOf(t+4)&&-1===a.indexOf(t-1)&&-1===a.indexOf(t-2)&&-1===a.indexOf(t-3)&&-1===a.indexOf(t-4)&&(a.push(t),!0)})),this.highlighter.destroyHighlights(5);let l=[];if(this.properties.lines&&this.properties.lines>1){let e=n(s,this.properties.lines);e.forEach((e=>{l.push(o(e))}))}else l=s;const u=findElement(r,"#R2_ID_LINEFOCUS_CONTAINER");if(u)for(const c of l){const n=document.createElement("div");n.setAttribute("class",CLASS_HIGHLIGHT_AREA);let i=t();if(TextHighlighter.isHexColor(i)&&(i=TextHighlighter.hexToRgbChannels(i)),this.isDebug){let e=`border-bottom: 1px solid rgba(${i.red}, ${i.green}, ${i.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY2}) !important`;n.setAttribute("style",`mix-blend-mode: multiply; border-radius: 1px !important; background-color: rgba(${i.red}, ${i.green}, ${i.blue}, ${DEFAULT_BACKGROUND_COLOR_OPACITY2}) !important; ${e}`)}n.style.outline="none",n.tabIndex=0;const o=this.navigator.iframes[0].contentWindow.document,s=this.navigator.view.isPaginated();o.body.style.position=s?"revert":"relative";const a=o.body.getBoundingClientRect(),l=this.highlighter.getScrollingElement(o),d=s?-l.scrollLeft:a.left,h=s?-l.scrollTop:a.top,p=1;let f,g,m=24,v=null==(e=this.navigator.iframes[0].contentWindow)?void 0:e.innerWidth,y=parseInt(getComputedStyle(r.documentElement).getPropertyValue("column-count")),_=parseInt(getComputedStyle(r.documentElement).getPropertyValue("column-width")),b=parseInt(getComputedStyle(r.body).getPropertyValue("padding-left"));if(v){let e=v/(y||1);e<_&&(e=v),s||(e=parseInt(getComputedStyle(r.body).width.replace("px","")));let t=this.navigator.settings.fontSize/100,n=20*t;t<=1&&(n=-60);let i=0;t<=1&&(i=-60),f=Math.floor(c.left/e)*e+e-(m<40?40:m)+i,g=Math.floor(c.left/e)*e+(m<40?40:m)-n;let o=parseInt(r.documentElement.style.getPropertyValue("--USER__pageMargins"));o>=2&&(g+=b/y,f-=b/y),s||(f=parseInt(getComputedStyle(r.body).width.replace("px","")),g=parseInt(getComputedStyle(r.body).width.replace("px",""))-e,o>=2&&(g+=b/2,f-=b/2))}n.style.setProperty("pointer-events","none"),n.style.position="absolute",n.scale=p,n.rect={height:c.height,left:c.left-d,top:c.top-h,width:c.width},n.style.width=n.rect.width*p+"px",n.style.height=n.rect.height*p+"px",n.style.left=n.rect.left*p+"px",n.style.top=n.rect.top*p+"px",this.lines.push(n),u.append(n)}setTimeout((()=>{this.currentLine()}),100)}}currentLine(){let e=this.lines[this.index],t=e.style.top,r=parseInt(e.style.top.replace("px",""))+parseInt(e.style.height.replace("px","")),n=r-parseInt(t.replace("px",""));if(this.lineFocusContainer){let e=parseInt(getComputedStyle(this.lineFocusContainer).height.replace("px","")),t=(e-n)/2;this.lineFocusTopBlinder&&(this.lineFocusTopBlinder.style.height=t+"px"),this.lineFocusBottomBlinder&&(this.lineFocusBottomBlinder.style.height=t+"px")}e.scrollIntoView({block:"center",behavior:"smooth"})}lineDown(){if(this.index<this.lines.length-1){this.index+=1,this.index>this.lines.length-1&&(this.index=this.lines.length-1);let e=this.lines[this.index],t=e.style.top,r=parseInt(e.style.top.replace("px",""))+parseInt(e.style.height.replace("px","")),n=r-parseInt(t.replace("px",""));if(this.lineFocusContainer){let e=parseInt(getComputedStyle(this.lineFocusContainer).height.replace("px","")),t=(e-n)/2;this.lineFocusTopBlinder&&(this.lineFocusTopBlinder.style.height=t+"px"),this.lineFocusBottomBlinder&&(this.lineFocusBottomBlinder.style.height=t+"px")}e.scrollIntoView({block:"center",behavior:"smooth"})}}lineUp(){if(this.index>0){this.index-=1,this.index<0&&(this.index=0);let e=this.lines[this.index],t=e.style.top,r=parseInt(e.style.top.replace("px",""))+parseInt(e.style.height.replace("px","")),n=r-parseInt(t.replace("px",""));if(this.lineFocusContainer){let e=parseInt(getComputedStyle(this.lineFocusContainer).height.replace("px","")),t=(e-n)/2;this.lineFocusTopBlinder&&(this.lineFocusTopBlinder.style.height=t+"px"),this.lineFocusBottomBlinder&&(this.lineFocusBottomBlinder.style.height=t+"px")}e.scrollIntoView({block:"center",behavior:"smooth"})}}almostEqual(e,t,r){return Math.abs(e-t)<=r}findRects(e){const t=this.findTextNodes(e),r=Array.from(e.getElementsByTagName("img"));let n=[];return t.forEach((e=>{n.push(...this.measureTextNodes(e))})),r.forEach((e=>{n.push(...this.measureImageNodes(e))})),n}findTextNodes(e,t=[]){var r,n,i,o,s,a,l;let u=e.firstChild;while(u)1===u.nodeType&&this.findTextNodes(u,t),3===u.nodeType&&(null==(r=u.textContent)?void 0:r.trim())&&(u.textContent.trim().length>1||"h1"===(null==(n=u.parentElement)?void 0:n.tagName.toLowerCase())||"h2"===(null==(i=u.parentElement)?void 0:i.tagName.toLowerCase())||"h3"===(null==(o=u.parentElement)?void 0:o.tagName.toLowerCase())||"h4"===(null==(s=u.parentElement)?void 0:s.tagName.toLowerCase())||"h5"===(null==(a=u.parentElement)?void 0:a.tagName.toLowerCase())||"h6"===(null==(l=u.parentElement)?void 0:l.tagName.toLowerCase()))&&u.parentElement&&"baseline"===getComputedStyle(u.parentElement).verticalAlign&&t.push(u),u=u.nextSibling;return t}measureTextNodes(e){try{const t=document.createRange();t.selectNodeContents(e);const r=Array.from(t.getClientRects());return t.detach(),r}catch(t){import_loglevel20.default.log("measureTextNode "+t),import_loglevel20.default.log("measureTextNode "+e),import_loglevel20.default.log(`${e.textContent}`)}}measureImageNodes(e){try{const t=document.createRange();t.selectNode(e);const r=Array.from(t.getClientRects());return t.detach(),r}catch(t){import_loglevel20.default.log("measureTextNode "+t),import_loglevel20.default.log("measureTextNode "+e),import_loglevel20.default.log(`${e.textContent}`)}}};init_polyfills();var import_loglevel21=__toESM(require_loglevel()),HistoryModule=class{constructor(e,t,r,n){this.history=[],this.headerMenu=n,this.publication=t,this.properties=r,this.annotator=e}static async create(e){const t=new this(e.annotator,e.publication,e,e.headerMenu);return await t.start(),t}async stop(){import_loglevel21.default.log("Page Break module stop"),removeEventListenerOptional(this.historyForwardAnchorElement,"click",this.handleHistoryForwardClick.bind(this)),removeEventListenerOptional(this.historyBackAnchorElement,"click",this.handleHistoryBackClick.bind(this))}async handleResize(){await this.setup()}setup(){this.history.length>0&&(this.historyForwardAnchorElement&&this.historyCurrentIndex+1<this.history.length?this.historyForwardAnchorElement.className=this.historyForwardAnchorElement.className.replace(" disabled",""):this.historyForwardAnchorElement&&(this.historyForwardAnchorElement.removeAttribute("href"),this.historyForwardAnchorElement.className+=" disabled"),this.historyBackAnchorElement&&this.historyCurrentIndex>0?this.historyBackAnchorElement.className=this.historyBackAnchorElement.className.replace(" disabled",""):this.historyBackAnchorElement&&(this.historyBackAnchorElement.removeAttribute("href"),this.historyBackAnchorElement.className+=" disabled"))}async push(e,t){let r;if(t&&this.annotator){let t=await this.annotator.getLastReadingPosition();if(t){const e=this.publication.getAbsoluteHref(t.href);t.href=e,this.historyCurrentIndex<this.history.length-1?(this.history=this.history.slice(0,this.historyCurrentIndex),this.history.push(t),this.historyCurrentIndex=this.history.length-1):(this.history.push(t),this.historyCurrentIndex=this.history.length-1)}this.historyCurrentIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyCurrentIndex)),r=this.history[this.history.length-1],(r&&r.href!==e.href||void 0===r)&&(this.history.push(e),this.historyCurrentIndex=this.history.length-1)}}async start(){this.headerMenu&&(this.historyForwardAnchorElement=findElement(this.headerMenu,"#history-forward")),this.headerMenu&&(this.historyBackAnchorElement=findElement(this.headerMenu,"#history-back")),this.historyCurrentIndex=this.history.length-1,addEventListenerOptional(this.historyForwardAnchorElement,"click",this.handleHistoryForwardClick.bind(this)),addEventListenerOptional(this.historyBackAnchorElement,"click",this.handleHistoryBackClick.bind(this))}async handleHistoryForwardClick(e){await this.historyForward(),e.preventDefault(),e.stopPropagation()}async historyForward(){this.history.length>0&&this.historyCurrentIndex+1<this.history.length&&(this.historyCurrentIndex=this.historyCurrentIndex+1,await this.navigator.navigate(this.history[this.historyCurrentIndex],!1))}async handleHistoryBackClick(e){await this.historyBack(),e.preventDefault(),e.stopPropagation()}async historyBack(){this.history.length>0&&this.historyCurrentIndex>0&&(this.historyCurrentIndex=this.historyCurrentIndex-1,await this.navigator.navigate(this.history[this.historyCurrentIndex],!1))}};init_polyfills();var import_loglevel22=__toESM(require_loglevel()),CitationStyle=(e=>(e[e["Chicago"]=0]="Chicago",e[e["MLA"]=1]="MLA",e[e["APA"]=2]="APA",e))(CitationStyle||{}),CitationModule=class{constructor(e,t,r,n){this.highlighter=t,this.properties=r,this.publication=e,this.api=n}static async create(e){const t=new this(e.publication,e.highlighter,e,e.api);return await t.start(),t}async stop(){import_loglevel22.default.log("Citation module stop")}copyToClipboard(e){var t,r,n;(null==(t=this.navigator)?void 0:t.contentProtectionModule)&&(this.navigator.contentProtectionModule.citation=!0);let i=!0;if(window.clipboardData)window.clipboardData.setData("text/plain",e);else{const t=this.createElementForExecCommand(e);this.selectContent(t);try{window.netscape&&netscape.security&&netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),i=document.execCommand("copy",!1)}catch(o){i=!1}document.body.removeChild(t)}i?null==(r=this.api)||r.citationCreated("The text was copied to the clipboard!"):null==(n=this.api)||n.citationFailed("Your browser doesn't allow clipboard access!")}createElementForExecCommand(e){const t=document.createElement("div");return t.style.position="absolute",t.style.left="-10000px",t.style.top="-10000px",t.innerHTML=e,document.body.appendChild(t),t.contentEditable=!0,t}selectContent(e){const t=document.createRange();t.selectNodeContents(e);const r=window.getSelection();null==r||r.removeAllRanges(),null==r||r.addRange(t)}async start(){var e;const t=this,r={id:"citationIcon",callback:function(e){var r,n,i;let o=function(){var e;let r="",n="",i="";if(t.properties.author)i+=t.properties.author,n+=t.properties.author,r+=t.properties.author;else if((null==(e=t.publication.Metadata.Author)?void 0:e.length)>0){let e=0;0===e&&t.publication.Metadata.Author[0].Name&&t.publication.Metadata.Author[0].Name instanceof String&&t.publication.Metadata.Author[0].Name.length>0&&(i+=t.publication.Metadata.Author[0].Name,n+=t.publication.Metadata.Author[0].Name,r+=t.publication.Metadata.Author[0].Name)}return i.length>0&&n.length>0&&r.length>0?[r+". ",n+". ",i+". "]:["","",""]},s=function(){let e="",r="",n="";return t.properties.publisher?(r+=t.properties.publisher,e+=t.properties.publisher):t.publication.Metadata.Publisher&&t.publication.Metadata.Publisher[0].Name&&(r+=t.publication.Metadata.Publisher[0].Name,e+=t.publication.Metadata.Publisher[0].Name),t.properties.published?(n=n+"("+t.properties.published+")",r=r+", "+t.properties.published,e=e+", "+t.properties.published):t.publication.Metadata.PublicationDate&&t.publication.Metadata.PublicationDate.getFullYear()>0&&(n=n+"("+t.publication.Metadata.PublicationDate.getFullYear()+")",r=r+", "+t.publication.Metadata.PublicationDate.getFullYear(),e=e+", "+t.publication.Metadata.PublicationDate.getFullYear()),n.length>0&&r.length>0&&e.length>0?[e+". ",r+". ",n+". "]:["","",""]},a=function(){return t.properties.title?["<em>"+t.properties.title+"</em>. ","<em>"+t.properties.title+"</em>. ","<em>"+t.properties.title+"</em>. "]:t.publication.Metadata.Title?["<em>"+t.publication.Metadata.Title+"</em>. ","<em>"+t.publication.Metadata.Title+"</em>. ","<em>"+t.publication.Metadata.Title+"</em>. "]:["","",""]},l=function(){return["","",""]},u=function(){let e="",r="",n="";return t.properties.publisher?(r=r+t.properties.publisher+", ",e=e+t.properties.publisher+", ",n+=t.properties.publisher):t.publication.Metadata.Publisher&&t.publication.Metadata.Publisher[0].Name&&(r=r+t.publication.Metadata.Publisher[0].Name+", ",e=e+t.publication.Metadata.Publisher[0].Name+", ",n+=t.publication.Metadata.Publisher[0].Name),n.length>0&&r.length>0&&e.length>0?[e+". ",r+". ",n+". "]:["","",""]},c=function(){return["","",""]},d=function(){return["","",""]},h=function(){return["","",""]},p=function(){return t.properties.library?["Retrieved from "+t.properties.library+". ","Retrieved from "+t.properties.library+". ","Retrieved from "+t.properties.library+". "]:["","",""]},f=function(){return t.properties.appName?[t.properties.appName+". ",t.properties.appName+". ",t.properties.appName+". "]:["","",""]},g=function(){return t.properties.appLink?[t.properties.appLink+". ",t.properties.appLink+". ",t.properties.appLink+". "]:["","",""]},m=function(){return["","",""]},v=function(e,t){return e.length>t?e.substring(0,t)+"...":e};const y=o()[0]+a()[0]+c()[0]+l()[0]+h()[0]+s()[0]+d()[0]+p()[0]+f()[0]+g()[0],_=o()[2]+s()[2]+a()[2]+l()[2]+u()[2]+c()[2]+d()[2]+h()[2]+p()[2]+f()[2]+g()[2],b=o()[1]+a()[1]+c()[1]+l()[1]+h()[1]+s()[1]+m()[1]+p()[1]+f()[1]+g()[1],S="“"+v(e,t.properties.characters)+"“<br><br>"+y,w="“"+v(e,t.properties.characters)+"“<br><br>"+_,C="“"+v(e,t.properties.characters)+"“<br><br>"+b;let A="";(null==(r=t.properties.styles)?void 0:r.includes(CitationStyle[0]))&&(t.properties.styles.length>1&&(A+="Chicago: <br>"),A=A+S+"<br><br>"),(null==(n=t.properties.styles)?void 0:n.includes(CitationStyle[2]))&&(t.properties.styles.length>1&&(A+="APA: <br>"),A=A+w+"<br><br>"),(null==(i=t.properties.styles)?void 0:i.includes(CitationStyle[1]))&&(t.properties.styles.length>1&&(A+="MLA: <br>"),A=A+C+"<br><br>"),t.copyToClipboard(A)}};null==(e=this.highlighter)||e.addSelectionMenuItem(r)}},import_loglevel23=__toESM(require_loglevel()),IFrameNavigator=class e extends eventemitter3_default{constructor(e,t=void 0,r=void 0,n,i,o,s,a,l,u,c,d,h,p){super(),this.iframes=[],this.sideNavExpanded=!1,this.currentChapterLink={href:""},this.currentSpreadLinks={},this.rights={autoGeneratePositions:!1,enableAnnotations:!1,enableBookmarks:!1,enableContentProtection:!1,enableDefinitions:!1,enableLineFocus:!1,enableMediaOverlays:!1,enablePageBreaks:!1,enableSearch:!1,enableTTS:!1,enableTimeline:!1,customKeyboardEvents:!1,enableHistory:!1,enableCitations:!1},this.didInitKeyboardEventHandler=!1,this.onResize=()=>{clearTimeout(this.timeout),this.timeout=setTimeout(this.handleResize.bind(this),200)},this.reload=async()=>{let e;if(this.annotator&&(e=await this.annotator.getLastReadingPosition()),e){const t=this.publication.getAbsoluteHref(e.href);import_loglevel23.default.log(e.href),import_loglevel23.default.log(t),e.href=t,await this.navigate(e)}},this.savePosition=(0,import_debounce7.debounce)((()=>{this.annotator&&this.saveCurrentReadingPosition()}),200),this.checkResourcePosition=(0,import_debounce7.debounce)((()=>{var e,t,r,n,i,o,s,a,l,u;(null==(e=this.view)?void 0:e.atStart())&&(null==(t=this.view)?void 0:t.atEnd())?((null==(r=this.api)?void 0:r.resourceFitsScreen)&&(null==(n=this.api)||n.resourceFitsScreen()),this.emit("resource.fits")):(null==(i=this.view)?void 0:i.atEnd())?((null==(o=this.api)?void 0:o.resourceAtEnd)&&(null==(s=this.api)||s.resourceAtEnd()),this.emit("resource.end")):(null==(a=this.view)?void 0:a.atStart())&&((null==(l=this.api)?void 0:l.resourceAtStart)&&(null==(u=this.api)||u.resourceAtStart()),this.emit("resource.start"))}),200),this.highlighter=h,this.highlighter&&(this.highlighter.navigator=this);for(const f in p){let e=p[f];e&&(e.navigator=this),p[f]instanceof AnnotationModule&&(this.annotationModule=e),p[f]instanceof BookmarkModule&&(this.bookmarkModule=e),p[f]instanceof TTSModule2&&(this.ttsModule=e),p[f]instanceof TTSModule2&&(this.ttsModule=e),p[f]instanceof SearchModule&&(this.searchModule=e),p[f]instanceof DefinitionsModule&&(this.definitionsModule=e),p[f]instanceof TimelineModule&&(this.timelineModule=e),p[f]instanceof ContentProtectionModule&&(this.contentProtectionModule=e),p[f]instanceof CitationModule&&(this.citationModule=e),p[f]instanceof MediaOverlayModule&&(this.mediaOverlayModule=e),p[f]instanceof PageBreakModule&&(this.pageBreakModule=e),p[f]instanceof LineFocusModule&&(this.lineFocusModule=e),p[f]instanceof HistoryModule&&(this.historyModule=e),p[f]instanceof ConsumptionModule&&(this.consumptionModule=e)}this.settings=e,this.annotator=t,this.view=e.view,this.view.attributes=l,this.view.navigator=this,this.eventHandler=new EventHandler(this),this.touchEventHandler=new TouchEventHandler(this),this.keyboardEventHandler=new KeyboardEventHandler(this),this.initialLastReadingPosition=r,this.publication=n,this.api=i,this.rights=o??{autoGeneratePositions:!1,enableAnnotations:!1,enableBookmarks:!1,enableContentProtection:!1,enableDefinitions:!1,enableLineFocus:!1,enableMediaOverlays:!1,enablePageBreaks:!1,enableSearch:!1,enableTTS:!1,enableTimeline:!1,customKeyboardEvents:!1,enableHistory:!1,enableCitations:!1},this.tts=s,this.injectables=a,this.attributes=l||{margin:0},this.services=u,this.sample=c,this.requestConfig=d,this.sampleReadEventHandler=new SampleReadEventHandler(this)}static async create(e){const t=new this(e.settings,e.annotator||void 0,e.initialLastReadingPosition||void 0,e.publication,e.api,e.rights,e.tts,e.injectables,e.attributes||{margin:0},e.services,e.sample,e.requestConfig,e.highlighter,e.modules);return await t.start(e.mainElement,e.headerMenu,e.footerMenu),new Promise((e=>e(t)))}stop(){import_loglevel23.default.log("Iframe navigator stop"),removeEventListenerOptional(this.previousChapterAnchorElement,"click",this.handlePreviousChapterClick.bind(this)),removeEventListenerOptional(this.nextChapterAnchorElement,"click",this.handleNextChapterClick.bind(this)),removeEventListenerOptional(this.previousChapterTopAnchorElement,"click",this.handlePreviousPageClick.bind(this)),removeEventListenerOptional(this.nextChapterBottomAnchorElement,"click",this.handleNextPageClick.bind(this)),removeEventListenerOptional(this.previousPageAnchorElement,"click",this.handlePreviousPageClick.bind(this)),removeEventListenerOptional(this.nextPageAnchorElement,"click",this.handleNextPageClick.bind(this)),removeEventListenerOptional(this.tryAgainButton,"click",this.tryAgain.bind(this)),removeEventListenerOptional(this.goBackButton,"click",e.goBack.bind(this)),removeEventListenerOptional(this.espandMenuIcon,"click",this.handleEditClick.bind(this)),removeEventListenerOptional(window,"resize",this.onResize),this.iframes.forEach((e=>{removeEventListenerOptional(e,"resize",this.onResize)})),this.didInitKeyboardEventHandler&&this.keyboardEventHandler.removeEvents(document)}setDirection(e){var t,r;let n="";"rtl"!==e&&"ltr"!==e||(n=e),"auto"===e&&(n=this.publication.Metadata.Direction2),n&&("rtl"===n&&(this.spreads.style.flexDirection="row-reverse"),"ltr"===n&&(this.spreads.style.flexDirection="row"),this.keyboardEventHandler.rtl="rtl"===n,(null==(t=this.api)?void 0:t.direction)&&(null==(r=this.api)||r.direction(n)),this.emit("direction",n))}async start(e,t,r){var n,i,o,s,a,l,u,c,d,h,p,f,g,m,v,y,_;this.headerMenu=t,this.mainElement=e;try{const t=findRequiredElement(e,"main#iframe-wrapper");t.style.overflow="auto";let O=findElement(e,"main#iframe-wrapper iframe"),P=findElement(e,"#second");if(O&&this.iframes.push(O),P&&this.iframes.push(P),window.matchMedia("screen and (max-width: 600px)").matches&&(this.settings.columnCount=1),0===this.iframes.length){t.style.overflow="auto";let e=document.createElement("iframe");if(e.setAttribute("SCROLLING","no"),e.setAttribute("allowtransparency","true"),this.iframes.push(e),this.publication.isFixedLayout){this.spreads=document.createElement("div"),this.firstSpread=document.createElement("div"),this.spreads.style.display="flex",this.spreads.style.alignItems="center",this.spreads.style.justifyContent="center",this.spreads.appendChild(this.firstSpread),this.firstSpread.appendChild(this.iframes[0]),t.appendChild(this.spreads);let e="";switch(this.settings.direction){case 0:e="auto";break;case 1:e="ltr";break;case 2:e="rtl";break}this.setDirection(e)}else e.setAttribute("height","100%"),e.setAttribute("width","100%"),t.appendChild(this.iframes[0]);if(this.publication.isFixedLayout)if(1===this.settings.columnCount||window.matchMedia("screen and (max-width: 600px)").matches)this.settings.fixedLayoutShadow&&(this.firstSpread.style.clipPath="polygon(0% -20%, 100% -20%, 120% 100%, -20% 120%)",this.firstSpread.style.boxShadow="0 0 8px 2px #ccc");else{let e=document.createElement("div");this.spreads.appendChild(e);let t=document.createElement("iframe");t.setAttribute("SCROLLING","no"),t.setAttribute("allowtransparency","true"),t.style.opacity="1",t.style.border="none",t.style.overflow="hidden",this.iframes.push(t),e.appendChild(this.iframes[1]),this.settings.fixedLayoutShadow&&(this.firstSpread.style.clipPath="polygon(0% -20%, 100% -20%, 100% 120%, -20% 120%)",this.firstSpread.style.boxShadow="0 0 8px 2px #ccc",e.style.clipPath="polygon(0% -20%, 100% -20%, 120% 100%, 0% 120%)",e.style.boxShadow="0 0 8px 2px #ccc")}else this.iframes[0].style.paddingTop=((null==(n=this.attributes)?void 0:n.iframePaddingTop)??0)+"px"}if(this.publication.isFixedLayout){const e=t.clientHeight;var b=null==(i=this.iframes[0].parentElement)?void 0:i.parentElement;b.style.height=e+40+"px"}else 2===this.iframes.length&&this.iframes.pop();if(this.loadingMessage=findElement(e,"#reader-loading"),this.loadingMessage&&(this.loadingMessage.innerHTML=readerLoading,this.loadingMessage.style.display="none"),this.errorMessage=findElement(e,"#reader-error"),this.errorMessage&&(this.errorMessage.innerHTML=readerError,this.errorMessage.style.display="none"),this.tryAgainButton=findElement(e,"#r2d2bc-try-again"),this.goBackButton=findElement(e,"#r2d2bc-go-back"),this.infoTop=findElement(e,"#reader-info-top")||findElement(e,"div[class='info top']"),this.infoBottom=findElement(e,"#reader-info-bottom")||findElement(e,"div[class='info bottom']"),this.headerMenu&&(this.bookTitle=findElement(this.headerMenu,"#book-title")),this.infoBottom&&(this.chapterTitle=findElement(this.infoBottom,"#chapter-title")||findElement(this.infoBottom,"span[class=chapter-title]")),this.infoBottom&&(this.chapterPosition=findElement(this.infoBottom,"#chapter-position")||findElement(this.infoBottom,"span[class=chapter-position]")),this.infoBottom&&(this.remainingPositions=findElement(this.infoBottom,"#remaining-positions")||findElement(this.infoBottom,"span[class=remaining-positions]")),this.headerMenu&&(this.espandMenuIcon=findElement(this.headerMenu,"#expand-menu")),this.headerMenu&&(this.links=findElement(this.headerMenu,"ul.links.top")),this.headerMenu&&(this.linksTopLeft=findElement(this.headerMenu,"#nav-mobile-left")),this.headerMenu&&(this.tocView=findElement(this.headerMenu,"#container-view-toc")),this.headerMenu&&(this.landmarksView=findElement(this.headerMenu,"#container-view-landmarks")),this.headerMenu&&(this.landmarksSection=findElement(this.headerMenu,"#sidenav-section-landmarks")),this.headerMenu&&(this.pageListView=findElement(this.headerMenu,"#container-view-pagelist")),r&&(this.linksBottom=findElement(r,"ul.links.bottom")),r&&(this.linksMiddle=findElement(r,"ul.links.middle")),this.headerMenu&&(this.nextChapterAnchorElement=findElement(this.headerMenu,"a[rel=next]")),this.headerMenu&&(this.nextChapterBottomAnchorElement=findElement(e,"#next-chapter")),r&&(this.nextPageAnchorElement=findElement(r,"a[rel=next]")),this.headerMenu&&(this.previousChapterAnchorElement=findElement(this.headerMenu,"a[rel=prev]")),this.headerMenu&&(this.previousChapterTopAnchorElement=findElement(e,"#previous-chapter")),r&&(this.previousPageAnchorElement=findElement(r,"a[rel=prev]")),this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.newPosition=void 0,this.newElementId=void 0,this.isBeingStyled=!0,this.isLoading=!0,this.settings.setIframe(this.iframes[0]),this.settings.onSettingsChange(this.handleResize.bind(this)),this.settings.onColumnSettingsChange(this.handleNumberOfIframes.bind(this)),this.settings.onViewChange(this.updateBookView.bind(this)),this.initialLastReadingPosition&&(null==(o=this.annotator)||o.initLastReadingPosition(this.initialLastReadingPosition)),this.headerMenu){var S=findElement(this.headerMenu,"#menu-button-search"),w=findElement(this.headerMenu,"#menu-button-tts"),C=findElement(this.headerMenu,"#menu-button-bookmark"),A=findElement(this.headerMenu,"#menu-button-play"),E=findElement(this.headerMenu,"#menu-button-pause"),x=findElement(this.headerMenu,"#menu-button-mediaoverlay");if(!this.rights.enableBookmarks){C&&(null==(s=C.parentElement)||s.style.setProperty("display","none"));var T=findElement(this.headerMenu,"#sidenav-section-bookmarks");T&&T.style.setProperty("display","none")}if(!this.rights.enableAnnotations){var k=findElement(this.headerMenu,"#sidenav-section-highlights");k&&k.style.setProperty("display","none")}this.rights.enableTTS||w&&(null==(a=w.parentElement)||a.style.setProperty("display","none")),this.rights.enableSearch||S&&(null==(l=S.parentElement)||l.style.setProperty("display","none")),S&&(null==(u=this.view)?void 0:u.navigator.publication.isFixedLayout)&&(null==(c=S.parentElement)||c.style.setProperty("display","none")),this.hasMediaOverlays?(A&&(null==(d=A.parentElement)||d.style.removeProperty("display")),E&&(null==(h=E.parentElement)||h.style.removeProperty("display")),x&&(null==(p=x.parentElement)||p.style.removeProperty("display"))):(A&&(null==(f=A.parentElement)||f.style.setProperty("display","none")),E&&(null==(g=E.parentElement)||g.style.setProperty("display","none")),x&&(null==(m=x.parentElement)||m.style.setProperty("display","none")))}else S&&(null==(v=S.parentElement)||v.style.setProperty("display","none")),w&&(null==(y=w.parentElement)||y.style.setProperty("display","none")),C&&(null==(_=C.parentElement)||_.style.setProperty("display","none"));return this.setupEvents(),await this.loadManifest()}catch(O){return import_loglevel23.default.error(O),this.abortOnError(O),Promise.reject(O)}}setupEvents(){for(const e of this.iframes)addEventListenerOptional(e,"load",this.handleIFrameLoad.bind(this,e));addEventListenerOptional(this.previousChapterAnchorElement,"click",this.handlePreviousChapterClick.bind(this)),addEventListenerOptional(this.nextChapterAnchorElement,"click",this.handleNextChapterClick.bind(this)),addEventListenerOptional(this.previousChapterTopAnchorElement,"click",this.handlePreviousPageClick.bind(this)),addEventListenerOptional(this.nextChapterBottomAnchorElement,"click",this.handleNextPageClick.bind(this)),addEventListenerOptional(this.previousPageAnchorElement,"click",this.handlePreviousPageClick.bind(this)),addEventListenerOptional(this.nextPageAnchorElement,"click",this.handleNextPageClick.bind(this)),addEventListenerOptional(this.tryAgainButton,"click",this.tryAgain.bind(this)),addEventListenerOptional(this.goBackButton,"click",e.goBack.bind(this)),addEventListenerOptional(this.espandMenuIcon,"click",this.handleEditClick.bind(this)),addEventListenerOptional(window,"resize",this.onResize);for(const e of this.iframes)addEventListenerOptional(e,"resize",this.onResize)}updateBookView(e){var t;"fixed"===(null==(t=this.view)?void 0:t.layout)?(this.nextPageAnchorElement&&(this.nextPageAnchorElement.style.display="none"),this.previousPageAnchorElement&&(this.previousPageAnchorElement.style.display="none"),this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.eventHandler&&(this.eventHandler.onClickThrough=this.handleClickThrough.bind(this)),this.keyboardEventHandler&&(this.keyboardEventHandler.onBackwardSwipe=this.handlePreviousChapterClick.bind(this),this.keyboardEventHandler.onForwardSwipe=this.handleNextChapterClick.bind(this),this.keyboardEventHandler.onKeydown=this.handleKeydownFallthrough.bind(this)),this.touchEventHandler&&(this.touchEventHandler.onBackwardSwipe=this.handlePreviousPageClick.bind(this),this.touchEventHandler.onForwardSwipe=this.handleNextPageClick.bind(this))):(this.settings.isPaginated().then((e=>{var t,r,n,i,o,s;if(e)this.view.height=getHeight()-40-((null==(t=this.attributes)?void 0:t.margin)??0),this.infoBottom&&this.infoBottom.style.removeProperty("display"),document.body.onscroll=()=>{},this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.nextPageAnchorElement&&(this.nextPageAnchorElement.style.display="unset"),this.previousPageAnchorElement&&(this.previousPageAnchorElement.style.display="unset"),this.chapterTitle&&(this.chapterTitle.style.display="inline"),this.chapterPosition&&(this.chapterPosition.style.display="inline"),this.remainingPositions&&(this.remainingPositions.style.display="inline"),this.eventHandler&&(this.eventHandler.onInternalLink=this.handleInternalLink.bind(this),this.eventHandler.onClickThrough=this.handleClickThrough.bind(this)),this.touchEventHandler&&(this.touchEventHandler.onBackwardSwipe=this.handlePreviousPageClick.bind(this),this.touchEventHandler.onForwardSwipe=this.handleNextPageClick.bind(this)),this.keyboardEventHandler&&(this.keyboardEventHandler.onBackwardSwipe=this.handlePreviousPageClick.bind(this),this.keyboardEventHandler.onForwardSwipe=this.handleNextPageClick.bind(this),this.keyboardEventHandler.onKeydown=this.handleKeydownFallthrough.bind(this));else{this.infoBottom&&(this.infoBottom.style.display="none"),this.nextPageAnchorElement&&(this.nextPageAnchorElement.style.display="none"),this.previousPageAnchorElement&&(this.previousPageAnchorElement.style.display="none"),"fixed"===(null==(r=this.view)?void 0:r.layout)?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none")):(null==(n=this.view)?void 0:n.atStart())&&(null==(i=this.view)?void 0:i.atEnd())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(null==(o=this.view)?void 0:o.atEnd())?(this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset")):(null==(s=this.view)?void 0:s.atStart())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"));const e=(0,import_debounce7.debounce)((()=>{this.isScrolling=!1}),200),t=findRequiredElement(document,"#iframe-wrapper");t.onscroll=async()=>{var t,r;this.isScrolling=!0,await this.savePosition(),null==(t=this.view)||t.atEnd(),"fixed"===(null==(r=this.view)?void 0:r.layout)?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none")):(this.settings.isPaginated().then((e=>{var t,r,n,i;e||((null==(t=this.view)?void 0:t.atStart())&&(null==(r=this.view)?void 0:r.atEnd())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(null==(n=this.view)?void 0:n.atEnd())?(this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset")):(null==(i=this.view)?void 0:i.atStart())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none")))})),this.checkResourcePosition()),e()},this.chapterTitle&&(this.chapterTitle.style.display="none"),this.chapterPosition&&(this.chapterPosition.style.display="none"),this.remainingPositions&&(this.remainingPositions.style.display="none"),this.eventHandler&&(this.eventHandler.onInternalLink=this.handleInternalLink.bind(this),this.eventHandler.onClickThrough=this.handleClickThrough.bind(this)),this.touchEventHandler&&(this.touchEventHandler.onBackwardSwipe=this.handlePreviousPageClick.bind(this),this.touchEventHandler.onForwardSwipe=this.handleNextPageClick.bind(this)),this.keyboardEventHandler&&(this.keyboardEventHandler.onBackwardSwipe=this.handlePreviousPageClick.bind(this),this.keyboardEventHandler.onForwardSwipe=this.handleNextPageClick.bind(this),this.keyboardEventHandler.onKeydown=this.handleKeydownFallthrough.bind(this))}})),(null==e?void 0:e.skipDrawingAnnotations)||setTimeout((async()=>{var e;await(null==(e=this.highlighter)?void 0:e.prepareContainers(this.iframes[0].contentWindow)),this.highlighter&&(this.rights.enableAnnotations&&this.annotationModule&&await this.annotationModule.drawHighlights(),this.rights.enableBookmarks&&this.bookmarkModule&&await this.bookmarkModule.drawBookmarks(),this.rights.enableSearch&&this.searchModule&&(await this.highlighter.destroyHighlights(1),this.searchModule.drawSearch()),this.rights.enablePageBreaks&&this.pageBreakModule&&(await this.highlighter.destroyHighlights(3),await this.pageBreakModule.drawPageBreaks()),this.rights.enableDefinitions&&this.definitionsModule&&await this.definitionsModule.drawDefinitions())}),200))}async loadManifest(){var e,t,r,n,i;try{const o=(e,t,r=!1)=>{var n=document.createElement("ul");r&&(n=document.createElement("ol")),n.className="sidenav-toc";for(const i of t){const e=document.createElement("li"),t=document.createElement("a"),r=document.createElement("span");t.className="chapter-link",t.tabIndex=-1;let s="";i.Href?(s=this.publication.getAbsoluteHref(i.Href),t.href=s,t.innerHTML=i.Title||"",e.appendChild(t)):(r.innerHTML=i.Title||"",r.className="chapter-title",e.appendChild(r)),i.Children&&i.Children.length>0&&o(e,i.Children,!0),n.appendChild(e)}addEventListenerOptional(n,"click",(e=>{if(e.preventDefault(),e.stopPropagation(),e.target&&"a"===e.target.tagName.toLowerCase()){let t=e.target;if(-1!==t.className.indexOf("active"))this.hideView();else{let e={progression:0};if(-1!==t.href.indexOf("#")){const r=t.href.slice(t.href.indexOf("#")+1);void 0!==r&&(e={fragment:r})}const r={href:t.href,locations:e,type:t.type,title:t.title};this.hideView(),this.navigate(r)}}})),e.appendChild(n)},s=this.publication.tableOfContents,a=this.publication.landmarks,l=this.publication.pageList;let u;this.tocView&&(s.length?o(this.tocView,s):null==(t=null==(e=this.tocView.parentElement)?void 0:e.parentElement)||t.removeChild(this.tocView.parentElement)),this.pageListView&&((null==l?void 0:l.length)?o(this.pageListView,l):null==(n=null==(r=this.pageListView.parentElement)?void 0:r.parentElement)||n.removeChild(this.pageListView.parentElement)),this.landmarksView&&((null==a?void 0:a.length)?o(this.landmarksView,a):null==(i=this.landmarksSection.parentElement)||i.removeChild(this.landmarksSection)),this.annotator&&(u=await this.annotator.getLastReadingPosition());const c=this.publication.getStartLink();let d;if(c&&c.Href&&(d=this.publication.getAbsoluteHref(c.Href)),u){const e=this.publication.getAbsoluteHref(u.href);import_loglevel23.default.log(u.href),import_loglevel23.default.log(e),u.href=e,await this.navigate(u)}else if(d){const e={href:d,locations:{progression:0},created:new Date,title:null==c?void 0:c.Title};await this.navigate(e)}return new Promise((e=>e()))}catch(o){return import_loglevel23.default.error(o),this.abortOnError(o),new Promise(((e,t)=>t(o))).catch((()=>{}))}}async handleIFrameLoad(e){var t,r,n,i,o,s,a,l,u,c,d;this.errorMessage&&(this.errorMessage.style.display="none"),this.showLoadingMessageAfterDelay();try{let h=0;this.newPosition&&(h=this.newPosition.locations.progression),await this.handleResize(),this.updateBookView({skipDrawingAnnotations:!0}),await this.settings.applyProperties();let p=this.currentChapterLink.href;if(p){const e=this.publication.getPreviousSpineItem(p);e&&e.Href&&(this.previousChapterLink={href:e.Href,title:e.Title,type:e.TypeLink})}this.previousChapterAnchorElement&&(this.previousChapterLink&&this.previousChapterLink.href?(this.previousChapterAnchorElement.href=this.publication.getAbsoluteHref(this.previousChapterLink.href),this.previousChapterAnchorElement.className=this.previousChapterAnchorElement.className.replace(" disabled","")):(this.previousChapterAnchorElement.removeAttribute("href"),this.previousChapterAnchorElement.className+=" disabled"));let f=this.publication.getNextSpineItem(p);this.nextChapterLink=f?{href:f.Href,title:f.Title,type:f.TypeLink}:void 0,this.nextChapterAnchorElement&&(this.nextChapterLink&&this.nextChapterLink.href?(this.nextChapterAnchorElement.href=this.publication.getAbsoluteHref(this.nextChapterLink.href),this.nextChapterAnchorElement.className=this.nextChapterAnchorElement.className.replace(" disabled","")):(this.nextChapterAnchorElement.removeAttribute("href"),this.nextChapterAnchorElement.className+=" disabled")),this.historyModule&&this.historyModule.setup(),void 0!==this.currentTocUrl?this.setActiveTOCItem(this.currentTocUrl):this.setActiveTOCItem(p),this.publication.Metadata.Title&&this.bookTitle&&(this.bookTitle.innerHTML=this.publication.Metadata.Title.toString());const g=this.publication.getSpineItem(p);void 0!==g&&(this.currentChapterLink.title=g.Title,this.currentChapterLink.type=g.TypeLink);let m=this.publication.getTOCItem(p);void 0!==this.currentTocUrl&&(m=this.publication.getTOCItem(this.currentTocUrl)),!this.currentChapterLink.title&&void 0!==m&&m.Title&&(this.currentChapterLink.title=m.Title),!this.currentChapterLink.type&&void 0!==m&&m.TypeLink&&(this.currentChapterLink.title=m.Title),this.currentChapterLink.title?(this.chapterTitle&&(this.chapterTitle.innerHTML="("+this.currentChapterLink.title+")"),(null==(t=this.api)?void 0:t.chapterInfo)&&(null==(r=this.api)||r.chapterInfo(this.currentChapterLink.title)),this.emit("chapterinfo",this.currentChapterLink.title)):(this.chapterTitle&&(this.chapterTitle.innerHTML="(Current Chapter)"),(null==(n=this.api)?void 0:n.chapterInfo)&&(null==(i=this.api)||i.chapterInfo(void 0)),this.emit("chapterinfo",void 0)),await this.injectInjectablesIntoIframeHead(e),"fixed"!==(null==(o=this.view)?void 0:o.layout)&&void 0!==this.highlighter&&await this.highlighter.initialize(e);const v=null==(s=e.contentDocument)?void 0:s.body;let y=null==v?void 0:v.querySelector("details");if(y){let t=this;y.addEventListener("toggle",(async r=>{var n,i;await(null==(i=null==(n=t.view)?void 0:n.setIframeHeight)?void 0:i.call(n,e))}))}if(this.eventHandler&&(this.eventHandler.setupEvents(e.contentDocument),this.touchEventHandler.setupEvents(e.contentDocument),this.keyboardEventHandler.setupEvents(e.contentDocument),this.touchEventHandler.setupEvents(this.errorMessage),this.didInitKeyboardEventHandler||(this.keyboardEventHandler.keydown(document),this.didInitKeyboardEventHandler=!0)),"fixed"!==(null==(a=this.view)?void 0:a.layout)&&(null==(l=this.view)?void 0:l.isScrollMode())&&(e.height="0",null==(c=null==(u=this.view)?void 0:u.setIframeHeight)||c.call(u,e)),this.rights.enableContentProtection&&this.contentProtectionModule&&await this.contentProtectionModule.initialize(e),this.rights.enableConsumption&&this.consumptionModule&&await this.consumptionModule.initialize(e),this.rights.enableAnnotations&&this.annotationModule&&await this.annotationModule.initialize(e),this.rights.enableBookmarks&&this.bookmarkModule&&await this.bookmarkModule.initialize(),this.rights.enableLineFocus&&this.lineFocusModule&&await this.lineFocusModule.initialize(e),this.rights.enableTTS&&this.ttsModule){const t=null==(d=e.contentDocument)?void 0:d.body,r=this.ttsModule;await r.initialize(t)}return this.rights.enableTimeline&&this.timelineModule&&await this.timelineModule.initialize(),this.rights.enableMediaOverlays&&this.mediaOverlayModule&&this.hasMediaOverlays&&await this.mediaOverlayModule.initialize(),setTimeout((async()=>{var t,r,n,i,o,s,a,l;if(this.newElementId){const n=e.contentDocument.getElementById(this.newElementId);null==(r=null==(t=this.view)?void 0:t.goToElement)||r.call(t,n),this.newElementId=void 0}else if(this.newPosition&&this.newPosition.highlight){let e=null==(n=this.newPosition.highlight)?void 0:n.selectionInfo.rangeInfo.startContainerElementCssSelector;e&&(null==(i=this.view)||i.goToCssSelector(e))}else h&&h>=0&&(null==(o=this.view)||o.goToProgression(h));if(this.newPosition=void 0,(null==(s=this.rights)?void 0:s.enableContentProtection)&&void 0!==this.contentProtectionModule&&await this.contentProtectionModule.recalculate(10),this.hideLoadingMessage(),this.showIframeContents(e),this.rights.enableMediaOverlays&&this.mediaOverlayModule&&this.hasMediaOverlays){let e=this.currentLink();await(null==(a=this.mediaOverlayModule)?void 0:a.initializeResource(e))}await this.updatePositionInfo(),await(null==(l=this.view)?void 0:l.setSize()),setTimeout((()=>{this.mediaOverlayModule&&(this.mediaOverlayModule.settings.resourceReady=!0)}),300)}),200),new Promise((e=>e()))}catch(h){return import_loglevel23.default.error(h),this.abortOnError(h),Promise.reject(h)}}async injectInjectablesIntoIframeHead(t){var r,n;const i=[],o=e=>{const t=new Promise(((t,r)=>{e.onload=()=>{t(!0)},e.onerror=t=>{const n="string"===typeof t?t:`Injectable failed to load at: ${"href"in e?e.href:e.src}`;r(new Error(n))}}));i.push(t)},s=null==(r=t.contentDocument)?void 0:r.head;if(s){const r=t.contentDocument.getElementsByTagName("base");0===r.length&&s.insertBefore(e.createBase(this.currentChapterLink.href),s.firstChild),null==(n=this.injectables)||n.forEach((t=>{if("style"===t.type){if(t.fontFamily){if(this.settings.initAddedFont(),!t.systemFont&&t.url){const r=e.createCssLink(t.url);s.appendChild(r),o(r)}}else if(t.r2before&&t.url){const r=e.createCssLink(t.url);s.insertBefore(r,s.firstChild),o(r)}else if(t.r2default&&t.url){const r=e.createCssLink(t.url);s.insertBefore(r,s.childNodes[1]),o(r)}else if(t.r2after&&t.url){t.appearance&&this.settings.initAddedAppearance();const r=e.createCssLink(t.url);s.appendChild(r),o(r)}else if(t.url){const r=e.createCssLink(t.url);s.appendChild(r),o(r)}}else if("script"===t.type&&t.url){const r=e.createJavascriptLink(t.url,t.async??!1);s.appendChild(r),o(r)}}))}0!==i.length&&await Promise.all(i)}abortOnError(e){var t;if(null==(t=this.api)?void 0:t.onError){const t=e instanceof Error?e:"string"===typeof e?new Error(e):new Error("An unknown error occurred in the IFrameNavigator.");this.api.onError(t)}else this.errorMessage&&(this.errorMessage.style.display="block"),this.isLoading&&this.hideLoadingMessage()}tryAgain(){this.precessContentForIframe()}precessContentForIframe(){var t,r,n,i,o,s;const a=this;var l=this.publication.getSpineIndex(this.currentChapterLink.href),u=(l??0)%2===1;function c(t,r){const n=new DOMParser,i=n.parseFromString(t,"application/xhtml+xml");if(i.head){const t=i.getElementsByTagName("base");0===t.length&&i.head.insertBefore(e.createBase(r),i.head.firstChild)}const o=i.documentElement.outerHTML,s=a.iframes[0].contentDocument;s&&(s.open(),s.write(o),s.close())}function d(t,r){const n=new DOMParser,i=n.parseFromString(t,"application/xhtml+xml");if(i.head){const t=i.getElementsByTagName("base");0===t.length&&i.head.insertBefore(e.createBase(r),i.head.firstChild)}const o=i.documentElement.outerHTML,s=a.iframes[1].contentDocument;s&&(s.open(),s.write(o),s.close())}this.showLoadingMessageAfterDelay();const h=new URL(this.currentChapterLink.href),p=window.location.protocol===h.protocol&&window.location.port===h.port&&window.location.hostname===h.hostname;if(null==(t=this.api)?void 0:t.getContent)if(this.publication.isFixedLayout)if(1!==this.settings.columnCount)if(u){if(this.currentSpreadLinks.left={href:this.currentChapterLink.href},null==(r=this.api)||r.getContent(this.currentChapterLink.href).then((e=>{void 0===e?p?this.iframes[0].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)})):c.call(this,e,this.currentChapterLink.href)})),2===this.iframes.length)if((l??0)<this.publication.readingOrder.length-1){const e=this.publication.getNextSpineItem(this.currentChapterLink.href);if(e){const t=this.publication.getAbsoluteHref(e.Href);this.currentSpreadLinks.right={href:t},null==(n=this.api)||n.getContent(t).then((e=>{void 0===e?p?this.iframes[1].src=t:fetch(t,this.requestConfig).then((e=>e.text())).then((async e=>{d.call(this,e,t),this.currentSpreadLinks.right={href:t}})):d.call(this,e,t)}))}}else this.iframes[1].src="about:blank"}else{if((l??0)>0){const e=this.publication.getPreviousSpineItem(this.currentChapterLink.href);if(e){const t=this.publication.getAbsoluteHref(e.Href);this.currentSpreadLinks.left={href:t},null==(i=this.api)||i.getContent(t).then((e=>{void 0===e?p?this.iframes[0].src=t:fetch(t,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,t)})):c.call(this,e,t)}))}}else this.iframes[0].src="about:blank";2===this.iframes.length&&this.publication.isFixedLayout&&(this.currentSpreadLinks.right={href:this.currentChapterLink.href},this.api.getContent(this.currentChapterLink.href).then((e=>{void 0===e?p?this.iframes[1].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{d.call(this,e,this.currentChapterLink.href)})):d.call(this,e,this.currentChapterLink.href)})))}else this.currentSpreadLinks.left={href:this.currentChapterLink.href},null==(o=this.api)||o.getContent(this.currentChapterLink.href).then((e=>{void 0===e?p?this.iframes[0].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)})):c.call(this,e,this.currentChapterLink.href)}));else null==(s=this.api)||s.getContent(this.currentChapterLink.href).then((e=>{this.currentSpreadLinks.left={href:this.currentChapterLink.href},void 0===e?p?this.iframes[0].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)})):c.call(this,e,this.currentChapterLink.href)}));else if(this.publication.isFixedLayout)if(1!==this.settings.columnCount)if(u){if(p){if(this.iframes[0].src=this.currentChapterLink.href,this.currentSpreadLinks.left={href:this.currentChapterLink.href},2===this.iframes.length)if((l??0)<this.publication.readingOrder.length-1){const e=this.publication.getNextSpineItem(this.currentChapterLink.href);if(e){const t=this.publication.getAbsoluteHref(e.Href);this.iframes[1].src=t,this.currentSpreadLinks.right={href:t}}}else this.iframes[1].src="about:blank"}else if(fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)})),2===this.iframes.length)if((l??0)<this.publication.readingOrder.length-1){const e=this.publication.getNextSpineItem(this.currentChapterLink.href);if(e){const t=this.publication.getAbsoluteHref(e.Href);this.currentSpreadLinks.right={href:t},fetch(t,this.requestConfig).then((e=>e.text())).then((async e=>{d.call(this,e,t)}))}}else this.iframes[1].src="about:blank"}else if((l??0)>0){const e=this.publication.getPreviousSpineItem(this.currentChapterLink.href);if(e){const t=this.publication.getAbsoluteHref(e.Href);this.currentSpreadLinks.left={href:t},p?(this.iframes[0].src=t,2===this.iframes.length&&(this.iframes[1].src=this.currentChapterLink.href)):(fetch(t,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,t)})),2===this.iframes.length&&(this.currentSpreadLinks.right={href:this.currentChapterLink.href},fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{d.call(this,e,this.currentChapterLink.href)}))))}}else this.iframes[0].src="about:blank",2===this.iframes.length&&(this.currentSpreadLinks.right={href:this.currentChapterLink.href},p?this.iframes[1].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{d.call(this,e,this.currentChapterLink.href)})));else this.currentSpreadLinks.left={href:this.currentChapterLink.href},p?this.iframes[0].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)}));else this.currentSpreadLinks.left={href:this.currentChapterLink.href},p?this.iframes[0].src=this.currentChapterLink.href:fetch(this.currentChapterLink.href,this.requestConfig).then((e=>e.text())).then((async e=>{c.call(this,e,this.currentChapterLink.href)}));this.publication.isFixedLayout&&setTimeout((()=>{var e,t,r;let n,i,o;if(o=0===l&&2===(null==(e=this.iframes)?void 0:e.length)?this.iframes[1].contentDocument:this.iframes[0].contentDocument,o&&o.body&&(n=getComputedStyle(o.body).height,i=getComputedStyle(o.body).width,0===parseInt(null==n?void 0:n.replace("px",""))||0===parseInt(null==i?void 0:i.replace("px","")))){const e=findIframeElement(o,"head");if(e){const t=findElement(e,"meta[name=viewport]");if(t){var s=t.content,a=s.split(",").reduce(((e,t)=>{var[r,n]=t.match(/[^\s;=]+/g);return e[r]=isNaN(Number(n))?n:+n,e}),{});n=a["height"]+"px",i=a["width"]+"px"}}}var u=0===l&&2===this.iframes.length?null==(t=this.iframes[1].parentElement)?void 0:t.parentElement:null==(r=this.iframes[0].parentElement)?void 0:r.parentElement;if(u&&i){var c=(parseInt(getComputedStyle(u).width)-this.settings.fixedLayoutMargin)/(2===this.iframes.length?2*parseInt(null==i?void 0:i.replace("px",""))+2*this.settings.fixedLayoutMargin:parseInt(null==i?void 0:i.replace("px",""))),d=(parseInt(getComputedStyle(u).height)-this.settings.fixedLayoutMargin)/parseInt(null==n?void 0:n.replace("px","")),h=Math.min(c,d);u.style.transform="scale("+h+")";for(const e of this.iframes)e.style.height=n,e.style.width=i,e.parentElement&&(e.parentElement.style.height=n)}}),400)}static goBack(){window.history.back()}handleEditClick(e){var t,r,n,i,o=e.target;if(this.headerMenu){var s=findElement(document,".sidenav");-1===o.className.indexOf(" active")?(o.className+=" active",s.className+=" expanded",o.innerText="unfold_less",this.sideNavExpanded=!0,null==(t=this.bookmarkModule)||t.showBookmarks(),null==(r=this.annotationModule)||r.showHighlights()):(o.className=o.className.replace(" active",""),s.className=s.className.replace(" expanded",""),o.innerText="unfold_more",this.sideNavExpanded=!1,null==(n=this.bookmarkModule)||n.showBookmarks(),null==(i=this.annotationModule)||i.showHighlights())}e.preventDefault(),e.stopPropagation()}get hasMediaOverlays(){return this.publication.hasMediaOverlays}startReadAloud(){if(this.rights.enableTTS){const e=this.ttsModule;e.speakPlay()}}startReadAlong(){var e;this.rights.enableMediaOverlays&&void 0!==this.mediaOverlayModule&&this.hasMediaOverlays&&(null==(e=this.mediaOverlayModule)||e.startReadAloud())}stopReadAloud(){var e;this.rights.enableTTS&&(null==(e=this.highlighter)||e.stopReadAloud())}stopReadAlong(){var e;this.rights.enableMediaOverlays&&void 0!==this.mediaOverlayModule&&this.hasMediaOverlays&&(null==(e=this.mediaOverlayModule)||e.stopReadAloud())}pauseReadAloud(){if(this.rights.enableTTS){const e=this.ttsModule;e.speakPause(),void 0!==this.annotationModule&&this.annotationModule.drawHighlights()}}pauseReadAlong(){var e;this.rights.enableMediaOverlays&&void 0!==this.mediaOverlayModule&&this.hasMediaOverlays&&(null==(e=this.mediaOverlayModule)||e.pauseReadAloud())}resumeReadAloud(){if(this.rights.enableTTS){const e=this.ttsModule;e.speakResume()}}resumeReadAlong(){var e;this.rights.enableMediaOverlays&&void 0!==this.mediaOverlayModule&&this.hasMediaOverlays&&(null==(e=this.mediaOverlayModule)||e.resumeReadAloud())}totalResources(){return this.publication.readingOrder.length}mostRecentNavigatedTocItem(){return this.publication.getRelativeHref(this.currentTOCRawLink)}currentResource(){let e=this.currentChapterLink.href;return this.publication.getSpineIndex(e)}currentLink(){if(1!==this.settings.columnCount&&void 0!==this.currentSpreadLinks.left&&void 0!==this.currentSpreadLinks.right){let e=this.publication.getSpineItem(this.currentSpreadLinks.left.href),t=this.publication.getSpineItem(this.currentSpreadLinks.right.href);return[e,t]}let e=this.currentChapterLink.href;return[this.publication.getSpineItem(e)]}tableOfContents(){return this.publication.tableOfContents}landmarks(){return this.publication.landmarks}pageList(){return this.publication.pageList}readingOrder(){return this.publication.readingOrder}atStart(){var e;return(null==(e=this.view)?void 0:e.atStart())??!1}atEnd(){var e;return(null==(e=this.view)?void 0:e.atEnd())??!1}previousPage(){this.handlePreviousPageClick(void 0)}nextPage(){this.handleNextPageClick(void 0)}previousResource(){this.handlePreviousChapterClick(void 0)}nextResource(){this.handleNextChapterClick(void 0)}goTo(e){let t=e.locations??{progression:0};if(-1!==e.href.indexOf("#")){const r=e.href.slice(e.href.indexOf("#")+1);void 0!==r&&(t={...t,fragment:r})}const r={...e};r.locations=t;const n=this.publication.getAbsoluteHref(e.href);import_loglevel23.default.log(e.href),import_loglevel23.default.log(n),r.href=n,this.stopReadAloud(),this.navigate(r)}currentLocator(){var e,t,r,n;let i;if(this.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions){let t=this.publication.positionsByHref(this.publication.getRelativeHref(this.currentChapterLink.href)),r=Math.ceil(((null==(e=this.view)?void 0:e.getCurrentPosition())??0)*(t.length-1));i=t[r]}else{let e=this.publication.getTOCItem(this.currentChapterLink.href);e&&(void 0!==this.currentTocUrl&&(e=this.publication.getTOCItem(this.currentTocUrl)),void 0===e&&(e=this.publication.getTOCItemAbsolute(this.currentChapterLink.href)),e&&(i={href:e.Href,type:this.currentChapterLink.type,title:this.currentChapterLink.title,locations:{}}))}return i&&(i.locations.progression=null==(t=this.view)?void 0:t.getCurrentPosition(),i.displayInfo={resourceScreenIndex:Math.round((null==(r=this.view)?void 0:r.getCurrentPage())??0),resourceScreenCount:Math.round((null==(n=this.view)?void 0:n.getPageCount())??0)}),i}positions(){return this.publication.positions?this.publication.positions:[]}goToPosition(e){if(this.publication.positions){let t=this.publication.positions.filter((t=>t.locations.position===parseInt(String(e))))[0];this.goTo(t)}}async goToPage(e){void 0!==this.pageBreakModule&&await this.pageBreakModule.goToPageNumber(e)}snapToSelector(e){var t;const r=this.iframes[0].contentDocument;if(r){import_loglevel23.default.log(e);let n=r.querySelectorAll(e);n.length>0&&(null==(t=this.view)||t.snap(n[0]))}}applyAttributes(e){this.attributes=e,this.view.attributes=e,this.handleResize()}handlePreviousPageClick(e){var t,r,n,i;this.stopReadAloud(),"fixed"===(null==(t=this.view)?void 0:t.layout)?this.handlePreviousChapterClick(e):((null==(r=this.view)?void 0:r.atStart())?this.handlePreviousChapterClick(e):(null==(i=null==(n=this.view)?void 0:n.goToPreviousPage)||i.call(n),this.updatePositionInfo(),this.savePosition()),e&&(e.preventDefault(),e.stopPropagation()))}handleNextPageClick(e){var t,r,n,i,o,s,a,l,u,c,d,h,p;let f=!0;if((null==(t=this.sample)?void 0:t.isSampleRead)&&this.publication.positions){const e=this.currentLocator();let t=Math.round(100*(e.locations.totalProgression??0));(null==(r=this.sample)?void 0:r.limit)&&(f=t<=(null==(n=this.sample)?void 0:n.limit),"fixed"===(null==(i=this.view)?void 0:i.layout)&&((!f&&(null==(o=this.sample)?void 0:o.minimum)&&e.locations.position)??0<=((null==(s=this.sample)?void 0:s.minimum)??0))&&(f=!0))}(f&&(null==(a=this.sample)?void 0:a.isSampleRead)&&this.publication.positions||!(null==(l=this.sample)?void 0:l.isSampleRead)||!this.publication.positions)&&(this.stopReadAloud(),"fixed"===(null==(u=this.view)?void 0:u.layout)?this.handleNextChapterClick(e):((null==(c=this.view)?void 0:c.atEnd())?this.handleNextChapterClick(e):(null==(h=null==(d=this.view)?void 0:d.goToNextPage)||h.call(d),this.updatePositionInfo(),this.savePosition()),e&&(e.preventDefault(),e.stopPropagation()))),!f&&(null==(p=this.sample)?void 0:p.isSampleRead)&&this.publication.positions&&e&&(e.preventDefault(),e.stopPropagation())}handleClickThrough(e){var t,r;(null==(t=this.api)?void 0:t.clickThrough)&&(null==(r=this.api)||r.clickThrough(e)),this.emit("click",e)}handleInternalLink(e){const t=e.target;let r={progression:0};const n=t;if(-1!==n.href.indexOf("#")){const e=n.href.slice(n.href.indexOf("#")+1);void 0!==e&&(r={fragment:e})}const i={href:n.href,locations:r,type:n.type,title:n.title};e.preventDefault(),e.stopPropagation(),this.stopReadAloud(),this.navigate(i)}handleNumberOfIframes(){if(this.publication.isFixedLayout){if(1===this.settings.columnCount||window.matchMedia("screen and (max-width: 600px)").matches)2===this.iframes.length&&(this.iframes.pop(),this.spreads.lastChild&&this.spreads.removeChild(this.spreads.lastChild)),this.settings.fixedLayoutShadow&&(this.firstSpread.style.clipPath="polygon(0% -20%, 100% -20%, 120% 100%, -20% 120%)",this.firstSpread.style.boxShadow="0 0 8px 2px #ccc");else{if(1===this.iframes.length){var e=document.createElement("iframe");e.setAttribute("SCROLLING","no"),e.setAttribute("allowtransparency","true"),e.style.opacity="1",e.style.border="none",e.style.overflow="hidden",this.iframes.push(e)}let t=document.createElement("div");this.spreads.appendChild(t),t.appendChild(this.iframes[1]),this.settings.fixedLayoutShadow&&(this.firstSpread.style.clipPath="polygon(0% -20%, 100% -20%, 100% 120%, -20% 120%)",this.firstSpread.style.boxShadow="0 0 8px 2px #ccc",t.style.clipPath="polygon(0% -20%, 100% -20%, 120% 100%, 0% 120%)",t.style.boxShadow="0 0 8px 2px #ccc")}this.precessContentForIframe()}}async handleResize(){var e,t,r,n,i,o,s;if(this.isScrolling)return;if(this.publication.isFixedLayout){var a=this.publication.getSpineIndex(this.currentChapterLink.href);const i=getHeight()-40-((null==(e=this.attributes)?void 0:e.margin)??0);var l=0===a&&2===this.iframes.length?null==(t=this.iframes[1].parentElement)?void 0:t.parentElement:null==(r=this.iframes[0].parentElement)?void 0:r.parentElement;if(l){let e,t,r;l.style.height=i+40+"px",r=0===a&&2===(null==(n=this.iframes)?void 0:n.length)?this.iframes[1].contentDocument:this.iframes[0].contentDocument,r&&r.body&&(e=getComputedStyle(r.body).height,t=getComputedStyle(r.body).width);const o=findIframeElement(r,"head");if(o){const r=findElement(o,"meta[name=viewport]");if(r){var u=r.content,c=u.split(",").reduce(((e,t)=>{var[r,n]=t.match(/[^\s;=]+/g);return e[r]=isNaN(Number(n))?n:+n,e}),{});0===parseInt(c["height"])&&0===parseInt(c["width"])||(e=c["height"]+"px",t=c["width"]+"px")}}var d=(parseInt(getComputedStyle(l).width)-this.settings.fixedLayoutMargin)/(2===this.iframes.length?2*parseInt(null==t?void 0:t.replace("px",""))+2*this.settings.fixedLayoutMargin:parseInt(null==t?void 0:t.replace("px",""))),h=(parseInt(getComputedStyle(l).height)-this.settings.fixedLayoutMargin)/parseInt(null==e?void 0:e.replace("px","")),p=Math.min(d,h);l.style.transform="scale("+p+")";for(const n of this.iframes)n.style.height=e,n.style.width=t,n.parentElement&&(n.parentElement.style.height=e)}}const f=null==(i=this.view)?void 0:i.getCurrentPosition();await this.settings.applyProperties(),this.infoTop&&(this.infoTop.style.height="0px"),this.infoTop&&(this.infoTop.style.minHeight="0px"),this.infoBottom&&(this.infoBottom.style.height=(null==(o=this.attributes)?void 0:o.bottomInfoHeight)?this.attributes.bottomInfoHeight+"px":"40px"),"fixed"!==(null==(s=this.view)?void 0:s.layout)&&this.settings.isPaginated().then((e=>{var t;e?(this.view.height=getHeight()-40-((null==(t=this.attributes)?void 0:t.margin)??0),this.infoBottom&&this.infoBottom.style.removeProperty("display")):this.infoBottom&&(this.infoBottom.style.display="none")})),setTimeout((()=>{var e,t,r,n;"fixed"!==(null==(e=this.view)?void 0:e.layout)&&(null==(t=this.view)?void 0:t.isScrollMode())&&(null==(n=null==(r=this.view)?void 0:r.setIframeHeight)||n.call(r,this.iframes[0]))}),100),setTimeout((async()=>{var e;f&&(null==(e=this.view)||e.goToProgression(f)),await this.updatePositionInfo(!1),void 0!==this.annotationModule&&await this.annotationModule.handleResize(),void 0!==this.bookmarkModule&&await this.bookmarkModule.handleResize(),void 0!==this.searchModule&&await this.searchModule.handleResize(),void 0!==this.definitionsModule&&await this.definitionsModule.handleResize(),void 0!==this.pageBreakModule&&await this.pageBreakModule.handleResize(),void 0!==this.contentProtectionModule&&this.contentProtectionModule.handleResize(),void 0!==this.lineFocusModule&&this.lineFocusModule.handleResize(),void 0!==this.historyModule&&this.historyModule.handleResize()}),150)}updatePositionInfo(e=!0){var t,r,n,i;if("fixed"===(null==(t=this.view)?void 0:t.layout))this.chapterPosition&&(this.chapterPosition.innerHTML=""),this.remainingPositions&&(this.remainingPositions.innerHTML="");else if(null==(r=this.view)?void 0:r.isPaginated()){const e=this.currentLocator();if(e){const t=e.displayInfo.resourceScreenIndex,r=e.displayInfo.resourceScreenCount;this.chapterPosition&&(this.chapterPosition.innerHTML="Page "+t+" of "+r),(null==(n=this.api)?void 0:n.positionInfo)&&(null==(i=this.api)||i.positionInfo(e)),this.emit("positioninfo",e)}}else this.chapterPosition&&(this.chapterPosition.innerHTML=""),this.remainingPositions&&(this.remainingPositions.innerHTML="");e&&this.savePosition()}handlePreviousChapterClick(e){var t;if("fixed"===(null==(t=this.view)?void 0:t.layout)&&1!==this.settings.columnCount){let e=this.publication.getSpineIndex(this.currentChapterLink.href)??0;e-=2,e<0&&(e=0);const t=this.publication.readingOrder[e],r={href:this.publication.getAbsoluteHref(t.Href),locations:{progression:0},type:t.TypeLink,title:t.Title};this.stopReadAloud(),this.navigate(r,!1)}else if(this.previousChapterLink){const e={href:this.publication.getAbsoluteHref(this.previousChapterLink.href),locations:{progression:1},type:this.previousChapterLink.type,title:this.previousChapterLink.title};this.stopReadAloud(),this.navigate(e,!1)}e&&(e.preventDefault(),e.stopPropagation())}handleNextChapterClick(e){var t;if("fixed"===(null==(t=this.view)?void 0:t.layout)&&1!==this.settings.columnCount){let e=this.publication.getSpineIndex(this.currentChapterLink.href)??0;e+=2,e>=this.publication.readingOrder.length-1&&(e=this.publication.readingOrder.length-1);const t=this.publication.readingOrder[e],r={href:this.publication.getAbsoluteHref(t.Href),locations:{progression:0},type:t.TypeLink,title:t.Title};this.stopReadAloud(),this.navigate(r,!1)}else if(this.nextChapterLink){const e={href:this.publication.getAbsoluteHref(this.nextChapterLink.href),locations:{progression:0},type:this.nextChapterLink.type,title:this.nextChapterLink.title};this.stopReadAloud(),this.navigate(e,!1)}e&&(e.preventDefault(),e.stopPropagation())}handleKeydownFallthrough(e){var t,r;(null==(t=this.api)?void 0:t.keydownFallthrough)&&(null==(r=this.api)||r.keydownFallthrough(e)),this.emit("keydown",e)}hideView(){var e,t;"fixed"!==(null==(e=this.view)?void 0:e.layout)&&(null==(t=this.view)?void 0:t.isScrollMode())&&(document.body.style.overflow="auto")}setActiveTOCItem(e){if(this.tocView){const t=Array.prototype.slice.call(this.tocView.querySelectorAll("li > a"));for(const e of t)e.className=e.className.replace(" active","");const r=this.tocView.querySelector('li > a[href^="'+e+'"]');r&&(r.className+=" active")}}async navigate(e,t=!0){var r,n,i,o,s,a,l,u,c,d,h,p,f;this.rights.enableConsumption&&this.consumptionModule&&t&&this.consumptionModule.startReadingSession(e),this.historyModule&&await this.historyModule.push(e,t);const g=this.publication.getTOCItem(e.href);if(g){var m=!1;if(-1!==e.href.indexOf("#")){const t=e.href.slice(0,e.href.indexOf("#"));t===this.currentChapterLink.href&&(m=!0),this.currentChapterLink.href=t,this.currentChapterLink.type=e.type,this.currentChapterLink.title=e.title}else e.href===this.currentChapterLink.href&&(m=!0),this.currentChapterLink.href=e.href,this.currentChapterLink.type=e.type,this.currentChapterLink.title=e.title;if(void 0!==this.currentSpreadLinks.left&&void 0!==this.currentSpreadLinks.right&&(e.href===this.currentSpreadLinks.left.href||e.href===this.currentSpreadLinks.right.href))return;if(m){if(-1!==e.href.indexOf("#")){const t=e.href.slice(e.href.indexOf("#")+1);e.locations={fragment:t}}if(this.newPosition=e,this.currentTOCRawLink=e.href,void 0===e.locations.fragment?this.currentTocUrl=void 0:(this.newElementId=e.locations.fragment,this.currentTocUrl=this.currentChapterLink.href+"#"+this.newElementId),this.newElementId){for(const e of this.iframes){const t=e.contentDocument.getElementById(this.newElementId);null==(n=null==(r=this.view)?void 0:r.goToElement)||n.call(r,t)}this.newElementId=void 0}else if(e.highlight){let t=null==(i=e.highlight)?void 0:i.selectionInfo.rangeInfo.startContainerElementCssSelector;t&&(null==(o=this.view)||o.goToCssSelector(t))}else null==(s=this.view)||s.goToProgression(e.locations.progression??0);let t=this.currentChapterLink.href;const d=this.publication.getPreviousSpineItem(t);d&&d.Href&&(this.previousChapterLink={href:d.Href,type:d.TypeLink,title:d.Title}),this.previousChapterAnchorElement&&(this.previousChapterLink?(this.previousChapterAnchorElement.href=this.publication.getAbsoluteHref(this.previousChapterLink.href),this.previousChapterAnchorElement.className=this.previousChapterAnchorElement.className.replace(" disabled","")):(this.previousChapterAnchorElement.removeAttribute("href"),this.previousChapterAnchorElement.className+=" disabled"));let h=this.publication.getNextSpineItem(t);this.nextChapterLink=h?{href:h.Href,type:h.TypeLink,title:h.Title}:void 0,this.nextChapterAnchorElement&&(this.nextChapterLink?(this.nextChapterAnchorElement.href=this.publication.getAbsoluteHref(this.nextChapterLink.href),this.nextChapterAnchorElement.className=this.nextChapterAnchorElement.className.replace(" disabled","")):(this.nextChapterAnchorElement.removeAttribute("href"),this.nextChapterAnchorElement.className+=" disabled")),void 0!==this.currentTocUrl?this.setActiveTOCItem(this.currentTocUrl):this.setActiveTOCItem(t),this.publication.Metadata.Title&&this.bookTitle&&(this.bookTitle.innerHTML=this.publication.Metadata.Title.toString());const p=this.publication.getSpineItem(t);void 0!==p&&(this.currentChapterLink.title=p.Title,this.currentChapterLink.type=p.TypeLink);let f=this.publication.getTOCItem(t);void 0!==this.currentTocUrl&&(f=this.publication.getTOCItem(this.currentTocUrl)),!this.currentChapterLink.title&&void 0!==f&&f.Title&&(this.currentChapterLink.title=f.Title),!this.currentChapterLink.type&&void 0!==f&&f.TypeLink&&(this.currentChapterLink.title=f.Title),this.currentChapterLink.title?(this.chapterTitle&&(this.chapterTitle.innerHTML="("+this.currentChapterLink.title+")"),(null==(a=this.api)?void 0:a.chapterInfo)&&(null==(l=this.api)||l.chapterInfo(this.currentChapterLink.title)),this.emit("chapterinfo",this.currentChapterLink.title)):(this.chapterTitle&&(this.chapterTitle.innerHTML="(Current Chapter)"),(null==(u=this.api)?void 0:u.chapterInfo)&&(null==(c=this.api)||c.chapterInfo(void 0)),this.emit("chapterinfo",void 0)),await this.updatePositionInfo()}else void 0!==this.lineFocusModule&&this.lineFocusModule.disableLineFocus(!1),void 0!==this.searchModule&&this.searchModule.clearSearch(),void 0===e.locations.fragment?this.currentTocUrl=void 0:(this.newElementId=e.locations.fragment,this.currentTocUrl=this.currentChapterLink.href+"#"+this.newElementId),this.hideIframeContents(),this.showLoadingMessageAfterDelay(),void 0===e.locations&&(e.locations={progression:0}),this.newPosition=e,this.currentTOCRawLink=e.href,this.precessContentForIframe(),this.rights.enableContentProtection&&void 0!==this.contentProtectionModule&&await this.contentProtectionModule.initializeResource(),this.rights.enableMediaOverlays&&void 0!==this.mediaOverlayModule&&this.hasMediaOverlays&&await this.mediaOverlayModule.initializeResource(this.currentLink()),this.rights.enableContentProtection&&void 0!==this.contentProtectionModule&&await this.contentProtectionModule.recalculate(300),this.bookmarkModule&&(await this.bookmarkModule.drawBookmarks(),await this.bookmarkModule.showBookmarks()),this.pageBreakModule&&(await(null==(d=this.highlighter)?void 0:d.destroyHighlights(3)),await this.pageBreakModule.drawPageBreaks()),this.rights.enableSearch&&void 0!==this.searchModule&&void 0!==this.highlighter&&(await this.highlighter.destroyHighlights(1),this.searchModule.drawSearch()),this.rights.enableDefinitions&&this.definitionsModule&&this.highlighter&&await this.definitionsModule.drawDefinitions(),this.rights.enableConsumption&&this.consumptionModule&&this.consumptionModule.continueReadingSession(e),"fixed"===(null==(h=this.view)?void 0:h.layout)?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),(null==(p=this.api)?void 0:p.resourceFitsScreen)&&(null==(f=this.api)||f.resourceFitsScreen()),this.emit("resource.fits")):this.settings.isPaginated().then((e=>{var t,r,n,i;e||((null==(t=this.view)?void 0:t.atStart())&&(null==(r=this.view)?void 0:r.atEnd())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(null==(n=this.view)?void 0:n.atEnd())?(this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none"),this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="unset")):(null==(i=this.view)?void 0:i.atStart())?(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="unset")):(this.nextChapterBottomAnchorElement&&(this.nextChapterBottomAnchorElement.style.display="none"),this.previousChapterTopAnchorElement&&(this.previousChapterTopAnchorElement.style.display="none")))}))}else{const e=this.publication.getStartLink();let t;if(e&&e.Href&&(t=this.publication.getAbsoluteHref(e.Href),t)){const r={href:t,locations:{progression:0},created:new Date,title:e.Title};await this.navigate(r)}}}showIframeContents(e){this.isBeingStyled=!1,setTimeout((()=>{this.isBeingStyled||(e.style.opacity="1",e.style.border="none",e.style.overflow="hidden")}),150)}showLoadingMessageAfterDelay(){this.isLoading=!0,this.isLoading&&this.loadingMessage&&(this.loadingMessage.style.display="block",this.loadingMessage.classList.add("is-loading")),void 0!==this.mediaOverlayModule&&(this.mediaOverlayModule.settings.resourceReady=!1)}hideIframeContents(){this.isBeingStyled=!0,this.iframes.forEach((e=>{e.style.opacity="0",e.style.border="none",e.style.overflow="hidden"}))}hideLoadingMessage(){setTimeout((()=>{var e,t,r,n,i,o,s,a,l,u,c,d,h;this.isLoading=!1,this.loadingMessage&&(this.loadingMessage.style.display="none",this.loadingMessage.classList.remove("is-loading")),"fixed"!==(null==(e=this.view)?void 0:e.layout)&&((null==(t=this.view)?void 0:t.atStart())&&(null==(r=this.view)?void 0:r.atEnd())?((null==(n=this.api)?void 0:n.resourceFitsScreen)&&(null==(i=this.api)||i.resourceFitsScreen()),this.emit("resource.fits")):(null==(o=this.view)?void 0:o.atEnd())?((null==(s=this.api)?void 0:s.resourceAtEnd)&&(null==(a=this.api)||a.resourceAtEnd()),this.emit("resource.end")):(null==(l=this.view)?void 0:l.atStart())&&((null==(u=this.api)?void 0:u.resourceAtStart)&&(null==(c=this.api)||c.resourceAtStart()),this.emit("resource.start"))),(null==(d=this.api)?void 0:d.resourceReady)&&(null==(h=this.api)||h.resourceReady()),this.emit("resource.ready")}),150)}saveCurrentReadingPosition(){var e,t,r,n,i,o;if(this.annotator){var s=this.publication.getTOCItem(this.currentChapterLink.href);void 0!==this.currentTocUrl&&(s=this.publication.getTOCItem(this.currentTocUrl)),void 0===s&&(s=this.publication.getTOCItemAbsolute(this.currentChapterLink.href));let a={progression:null==(e=this.view)?void 0:e.getCurrentPosition()};if(s){if(-1!==s.Href.indexOf("#")){const e=s.Href.slice(s.Href.indexOf("#")+1);void 0!==e&&(a={progression:null==(t=this.view)?void 0:t.getCurrentPosition(),fragment:e})}let e;if(this.rights.autoGeneratePositions&&this.publication.positions||this.publication.positions){const t=this.publication.positionsByHref(this.publication.getRelativeHref(s.Href));if(t.length>0){const r=Math.ceil((a.progression??0)*(t.length-1)),n=t[r];n&&(n.locations.fragment=a.fragment,e={...n,href:s.Href,created:new Date,title:this.currentChapterLink.title})}}else e={href:s.Href,locations:a,created:new Date,type:this.currentChapterLink.type,title:this.currentChapterLink.title};e&&((null==(r=this.sample)?void 0:r.isSampleRead)&&this.publication.positions&&(null==(n=this.sampleReadEventHandler)||n.enforceSampleRead(e)),(null==(i=this.api)?void 0:i.updateCurrentLocation)?null==(o=this.api)||o.updateCurrentLocation(e).then((async t=>{var r;return import_loglevel23.default.log("api updated current location",e),null==(r=this.annotator)?void 0:r.saveLastReadingPosition(e)})):(import_loglevel23.default.log("save last reading position",e),this.annotator.saveLastReadingPosition(e)),this.consumptionModule&&this.consumptionModule.continueReadingSession(e))}}}static createBase(e){const t=document.createElement("base");return t.target="_self",t.href=e,t}static createCssLink(e){const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=e,t}static createJavascriptLink(e,t){const r=document.createElement("script");return r.type="text/javascript",r.src=e,r.async=t,r}activateMarker(e,t){void 0!==this.annotationModule&&(void 0===this.annotationModule.activeAnnotationMarkerId||this.annotationModule.activeAnnotationMarkerId!==e?(this.annotationModule.activeAnnotationMarkerId=e,this.annotationModule.activeAnnotationMarkerPosition=t,this.highlighter&&(this.highlighter.activeAnnotationMarkerId=e)):this.deactivateMarker())}deactivateMarker(){void 0!==this.annotationModule&&(this.annotationModule.activeAnnotationMarkerId=void 0,this.annotationModule.activeAnnotationMarkerPosition=void 0,this.highlighter&&(this.highlighter.activeAnnotationMarkerId=void 0))}showLayer(e){var t;let r="#",n=new Switchable("layer-on","layer-off",!0,e,"layer-"+e);switch(e){case"annotations":case"highlights":r+="R2_ID_HIGHLIGHTS_CONTAINER",n.name="R2_ID_HIGHLIGHTS_CONTAINER";break;case"readaloud":r+="R2_ID_READALOUD_CONTAINER",n.name="R2_ID_READALOUD_CONTAINER";break;case"pagebreak":r+="R2_ID_PAGEBREAK_CONTAINER",n.name="R2_ID_PAGEBREAK_CONTAINER";break;case"search":r+="R2_ID_SEARCH_CONTAINER",n.name="R2_ID_SEARCH_CONTAINER";break;case"definitions":r+="R2_ID_DEFINITIONS_CONTAINER",n.name="R2_ID_DEFINITIONS_CONTAINER";break}null==(t=this.highlighter)||t.layerSettings.saveProperty(n);let i=this.iframes[0].contentDocument;if(i){const e=findElement(i,r);e&&(e.style.display="block")}}hideLayer(e){var t;let r="#",n=new Switchable("layer-on","layer-off",!1,e,"layer-"+e);switch(e){case"annotations":case"highlights":r+="R2_ID_HIGHLIGHTS_CONTAINER",n.name="R2_ID_HIGHLIGHTS_CONTAINER";break;case"readaloud":r+="R2_ID_READALOUD_CONTAINER",n.name="R2_ID_READALOUD_CONTAINER";break;case"pagebreak":r+="R2_ID_PAGEBREAK_CONTAINER",n.name="R2_ID_PAGEBREAK_CONTAINER";break;case"search":r+="R2_ID_SEARCH_CONTAINER",n.name="R2_ID_SEARCH_CONTAINER";break;case"definitions":r+="R2_ID_DEFINITIONS_CONTAINER",n.name="R2_ID_DEFINITIONS_CONTAINER";break}null==(t=this.highlighter)||t.layerSettings.saveProperty(n);let i=this.iframes[0].contentDocument;if(i){const e=findElement(i,r);e&&(e.style.display="none")}}};init_polyfills();var _LocalAnnotator=class e{constructor(e){this.store=e.store}getLastReadingPosition(){const t=this.store.get(e.LAST_READING_POSITION);if(t){const e=JSON.parse(t);return e}return null}initLastReadingPosition(t){if("string"===typeof t)this.store.set(e.LAST_READING_POSITION,t);else{const r=JSON.stringify(t);this.store.set(e.LAST_READING_POSITION,r)}}saveLastReadingPosition(t){if("string"===typeof t)this.store.set(e.LAST_READING_POSITION,t);else{const r=JSON.stringify(t);this.store.set(e.LAST_READING_POSITION,r)}}initBookmarks(t){if("string"===typeof t){let r=JSON.parse(t);this.store.set(e.BOOKMARKS,JSON.stringify(r))}else this.store.set(e.BOOKMARKS,JSON.stringify(t));return t}saveBookmark(t){let r=this.store.get(e.BOOKMARKS);if(r){let n=JSON.parse(r);n.push(t),this.store.set(e.BOOKMARKS,JSON.stringify(n))}else{let r=[];r.push(t),this.store.set(e.BOOKMARKS,JSON.stringify(r))}return t}locatorExists(t,r){let n;switch(r){case 0:n=e.BOOKMARKS;break}const i=this.store.get(n);if(i){const e=JSON.parse(i),r=e.filter((e=>e.href===t.href&&e.locations.progression===t.locations.progression));if(r.length>0)return t}return null}deleteBookmark(t){let r=this.store.get(e.BOOKMARKS);if(r){let n=JSON.parse(r);n=n.filter((e=>e.id!==t.id)),this.store.set(e.BOOKMARKS,JSON.stringify(n))}return t}getBookmarks(t){const r=this.store.get(e.BOOKMARKS);if(r){let e=JSON.parse(r);if(t){let r=e.filter((e=>e.href===t));return r=r.sort(((e,t)=>e.locations.progression&&t.locations.progression?e.locations.progression-t.locations.progression:void 0)),r}return e=e.sort(((e,t)=>e.locations.progression&&t.locations.progression?e.locations.progression-t.locations.progression:void 0)),e}return[]}initAnnotations(t){let r;r="string"===typeof t?JSON.parse(t):t;let n=[];return r.forEach((e=>{const t=`${e.highlight.selectionInfo.rangeInfo.startContainerElementCssSelector}${e.highlight.selectionInfo.rangeInfo.startContainerChildTextNodeIndex}${e.highlight.selectionInfo.rangeInfo.startOffset}${e.highlight.selectionInfo.rangeInfo.endContainerElementCssSelector}${e.highlight.selectionInfo.rangeInfo.endContainerChildTextNodeIndex}${e.highlight.selectionInfo.rangeInfo.endOffset}`,r=SHA256.hash(t);let i;e.highlight.id="R2_HIGHLIGHT_"+r,e.highlight.color?i=e.highlight.color:e.color&&(i=e.color),TextHighlighter.isHexColor(i)&&(i=TextHighlighter.hexToRgbString(i)),e.highlight.color=i,e.highlight.pointerInteraction=!0,e.highlight.selectionInfo.cleanText=e.highlight.selectionInfo.rawText.trim().replace(/\n/g," ").replace(/\s\s+/g," "),n.push(e)})),this.store.set(e.ANNOTATIONS,JSON.stringify(n)),n}saveTemporarySelectionInfo(t){this.store.set(e.SELECTIONINFO,JSON.stringify(t))}getTemporarySelectionInfo(t){const r=this.store.get(e.SELECTIONINFO);if(r){let e=JSON.parse(r);return e.range=convertRangeInfo(t,e.rangeInfo),e}return[]}deleteTemporarySelectionInfo(){this.store.remove(e.SELECTIONINFO)}saveAnnotation(t){let r=this.store.get(e.ANNOTATIONS);if(r){let n=JSON.parse(r);n.push(t),this.store.set(e.ANNOTATIONS,JSON.stringify(n))}else{let r=[];r.push(t),this.store.set(e.ANNOTATIONS,JSON.stringify(r))}return t}deleteAnnotation(t){let r=this.store.get(e.ANNOTATIONS);if(r){let n=JSON.parse(r);n=n.filter((e=>e.id!==t)),this.store.set(e.ANNOTATIONS,JSON.stringify(n))}return t}deleteSelectedAnnotation(t){let r=this.store.get(e.ANNOTATIONS);if(r){let n=JSON.parse(r);n=n.filter((e=>{var r;return(null==(r=e.highlight)?void 0:r.id)!==t.highlight.id})),this.store.set(e.ANNOTATIONS,JSON.stringify(n))}return t}getAnnotations(){const t=this.store.get(e.ANNOTATIONS);if(t){let e=JSON.parse(t);return e=e.sort(((e,t)=>e.locations.progression&&t.locations.progression?e.locations.progression-t.locations.progression:void 0)),e}return[]}getAnnotationsByChapter(t){const r=this.store.get(e.ANNOTATIONS);if(r){let e=JSON.parse(r);return e=e.filter((e=>e.href===t)),e=e.sort(((e,t)=>e.locations.progression&&t.locations.progression?e.locations.progression-t.locations.progression:void 0)),e}return[]}getAnnotationPosition(t,r){const n=this.store.get(e.ANNOTATIONS);if(n){const e=JSON.parse(n),i=e.filter((e=>{var r;return(null==(r=e.highlight)?void 0:r.id)===t||e.id===t}));if(i.length>0){let e=r.document.getElementById(`${i[0].highlight.id}`);if(e){let t=0;if(e.hasChildNodes)for(let r=0;r<e.childNodes.length;r++){let n=e.childNodes[r],i=parseInt(n.style.top.replace("px",""));(i<t||0===t)&&(t=i)}else t=parseInt(e.style.top.replace("px",""));return t}}}return null}getAnnotationElement(t,r){const n=this.store.get(e.ANNOTATIONS);if(n){const e=JSON.parse(n),i=e.filter((e=>{var r;return(null==(r=e.highlight)?void 0:r.id)===t}));if(i.length>0){let e=r.document.getElementById(`${i[0].highlight.id}`);if(e){let t=0;if(e.hasChildNodes)for(let r=0;r<e.childNodes.length;r++){let n=e.childNodes[r],i=parseInt(n.style.top.replace("px",""));if(i<t||0===t)return t=i,n}else t=parseInt(e.style.top.replace("px",""));return e}}}return null}getAnnotation(t){const r=this.store.get(e.ANNOTATIONS);if(r){const e=JSON.parse(r),n=e.filter((e=>{var r;return(null==(r=e.highlight)?void 0:r.id)===t.id}));if(n.length>0)return n[0]}return null}getAnnotationByID(t){const r=this.store.get(e.ANNOTATIONS);if(r){const e=JSON.parse(r),n=e.filter((e=>{var r;return(null==(r=e.highlight)?void 0:r.id)===t}));if(n.length>0)return n[0]}return null}};_LocalAnnotator.LAST_READING_POSITION="last-reading-position",_LocalAnnotator.BOOKMARKS="bookmarks",_LocalAnnotator.ANNOTATIONS="annotations",_LocalAnnotator.SELECTIONINFO="selectionInfo";var LocalAnnotator=_LocalAnnotator;init_polyfills(),init_polyfills();var MemoryStore=class{constructor(){this.store={}}get(e){return this.store[e]||null}set(e,t){this.store[e]=t}remove(e){this.store[e]=null}},LocalStorageStore=class{constructor(e){this.prefix=e.prefix,this.useLocalStorage=e.useLocalStorage;try{const t=e.prefix+"-"+String(Math.random());this.useLocalStorage?(window.localStorage.setItem(t,"test"),window.localStorage.removeItem(t)):(window.sessionStorage.setItem(t,"test"),window.sessionStorage.removeItem(t)),this.fallbackStore=null}catch(t){this.fallbackStore=new MemoryStore}}getLocalStorageKey(e){return this.prefix+"-"+e}get(e){let t;return t=this.fallbackStore?this.fallbackStore.get(e):this.useLocalStorage?window.localStorage.getItem(this.getLocalStorageKey(e)):window.sessionStorage.getItem(this.getLocalStorageKey(e)),t}set(e,t){this.fallbackStore?this.fallbackStore.set(e,t):this.useLocalStorage?window.localStorage.setItem(this.getLocalStorageKey(e),t):window.sessionStorage.setItem(this.getLocalStorageKey(e),t)}remove(e){this.fallbackStore?this.fallbackStore.remove(e):this.useLocalStorage?window.localStorage.removeItem(this.getLocalStorageKey(e)):window.sessionStorage.removeItem(this.getLocalStorageKey(e))}};init_polyfills();var import_publication_link=__toESM(require_publication_link()),import_ta_json_x3=__toESM(require_cjs()),Link=class extends import_publication_link.Link{};function convertAndCamel(e){let t,r,n,i;if(e instanceof Array)return e.map((function(e){return"object"===typeof e&&(e=convertAndCamel(e)),e}));for(r in t={},e)e.hasOwnProperty(r)&&(n=(r.charAt(0).toLowerCase()+r.slice(1)||r).toString(),i=e[r],(i instanceof Array||null!==i&&void 0!==i&&i.constructor===Object)&&(i=convertAndCamel(i)),"href1"===n?t["href"]=i:"typeLink"===n?t["type"]=i:t[n]=i);return t}Link=__decorateClass([(0,import_ta_json_x3.JsonObject)()],Link),init_polyfills();var import_loglevel24=__toESM(require_loglevel()),LayerSettings=class{constructor(e){this.LAYERSETTINGS="layerSetting",this.store=e,this.initialize()}static async create(e){const t=new this(e.store);return new Promise((e=>e(t)))}async stop(){import_loglevel24.default.log("MediaOverlay settings stop")}async initialize(){this.userProperties=await this.getLayerSettings()}async getLayerSettings(){let e=new UserProperties,t=await this.store.get(this.LAYERSETTINGS);if(t){let r=JSON.parse(t);e.properties=r}return e}async saveProperty(e){let t=await this.store.get(this.LAYERSETTINGS);if(t){let r=JSON.parse(t);r=r.filter((t=>t.name!==e.name)),r.push(e),await this.store.set(this.LAYERSETTINGS,JSON.stringify(r))}else{let t=[];t.push(e),await this.store.set(this.LAYERSETTINGS,JSON.stringify(t))}return new Promise((t=>t(e)))}async getProperty(e){let t=await this.store.get(this.LAYERSETTINGS);if(t){let r=JSON.parse(t);return r=r.filter((t=>t.name===e)),0===r.length?null:r[0]}return null}};init_polyfills();var import_pdfjs_dist=__toESM(require_pdf());init_polyfills();var CSS_CLASS_GRAB="grab-to-pan-grab",_onMouseDown,onMouseDown_fn,_onMouseMove,onMouseMove_fn,_endPan,endPan_fn,GrabToPan=class{constructor(e){__privateAdd(this,_onMouseDown),__privateAdd(this,_onMouseMove),__privateAdd(this,_endPan),this.element=e.element,this.document=e.element.ownerDocument,"function"===typeof e.ignoreTarget&&(this.ignoreTarget=e.ignoreTarget),this.onActiveChanged=e.onActiveChanged,this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.toggle=this.toggle.bind(this),this._onMouseDown=__privateMethod(this,_onMouseDown,onMouseDown_fn).bind(this),this._onMouseMove=__privateMethod(this,_onMouseMove,onMouseMove_fn).bind(this),this._endPan=__privateMethod(this,_endPan,endPan_fn).bind(this);const t=this.overlay=document.createElement("div");t.className="grab-to-pan-grabbing"}activate(){var e;this.active||(this.active=!0,this.element.addEventListener("mousedown",this._onMouseDown,!0),this.element.classList.add(CSS_CLASS_GRAB),null==(e=this.onActiveChanged)||e.call(this,!0))}deactivate(){var e;this.active&&(this.active=!1,this.element.removeEventListener("mousedown",this._onMouseDown,!0),this._endPan(),this.element.classList.remove(CSS_CLASS_GRAB),null==(e=this.onActiveChanged)||e.call(this,!1))}toggle(){this.active?this.deactivate():this.activate()}ignoreTarget(e){return e.matches("a[href], a[href] *, input, textarea, button, button *, select, option")}};_onMouseDown=new WeakSet,onMouseDown_fn=function(e){if(0!==e.button||this.ignoreTarget(e.target))return;if(e.originalTarget)try{e.originalTarget.tagName}catch(r){return}this.scrollLeftStart=this.element.scrollLeft,this.scrollTopStart=this.element.scrollTop,this.clientXStart=e.clientX,this.clientYStart=e.clientY,this.document.addEventListener("mousemove",this._onMouseMove,!0),this.document.addEventListener("mouseup",this._endPan,!0),this.element.addEventListener("scroll",this._endPan,!0),e.preventDefault(),e.stopPropagation();const t=document.activeElement;t&&!t.contains(e.target)&&t.blur()},_onMouseMove=new WeakSet,onMouseMove_fn=function(e){if(this.element.removeEventListener("scroll",this._endPan,!0),!(1&e.buttons))return void this._endPan();const t=e.clientX-this.clientXStart,r=e.clientY-this.clientYStart,n=this.scrollTopStart-r,i=this.scrollLeftStart-t;this.element.scrollTo?this.element.scrollTo({top:n,left:i,behavior:"instant"}):(this.element.scrollTop=n,this.element.scrollLeft=i),this.overlay.parentNode||document.body.append(this.overlay)},_endPan=new WeakSet,endPan_fn=function(){this.element.removeEventListener("scroll",this._endPan,!0),this.document.removeEventListener("mousemove",this._onMouseMove,!0),this.document.removeEventListener("mouseup",this._endPan,!0),this.overlay.remove()};var PDFNavigator=class extends eventemitter3_default{constructor(e,t,r){super(),this.pdfDoc=null,this.pageNum=1,this.scaleType=0,this.pageRendering=!1,this.pageNumPending=null,this.scale=1,this.resourceIndex=0,this.onResize=()=>{clearTimeout(this.timeout),this.timeout=setTimeout(this.handleResize.bind(this),200)},this.settings=e,this.publication=t,this.api=r}static async create(e){const t=new this(e.settings,e.publication,e.api);return await t.start(e.mainElement,e.headerMenu,e.footerMenu),new Promise((e=>e(t)))}async start(e,t,r){this.headerMenu=t,this.footerMenu=r,this.mainElement=e,this.resourceIndex=0,this.resource=this.publication.readingOrder[this.resourceIndex],import_pdfjs_dist.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.14.305/pdf.worker.js",this.wrapper=findRequiredElement(this.mainElement,"main#iframe-wrapper"),this.pdfContainer=findRequiredElement(this.mainElement,"#pdf-container"),this.handTool=new GrabToPan({element:this.pdfContainer});const n=this;let i=document.createElement("div");i.id="loadingpdf",i.innerHTML=readerLoading,i.style.width=getComputedStyle(this.wrapper).width,i.style.height=getComputedStyle(this.wrapper).height,i.style.display="flex",i.style.zIndex="100",i.style.position="absolute",i.style.alignItems="center",i.style.justifyContent="center",i.style.background="white",i.className="r2d2bc-loading is-loading",this.pdfContainer.appendChild(i),(0,import_pdfjs_dist.getDocument)(this.publication.getAbsoluteHref(this.resource.Href)).promise.then((function(e){n.pdfDoc=e,n.loadPDFJS(n.pageNum)})),this.setupEvents()}async handleResize(){this.loadPDFJS(this.pageNum)}setupEvents(){addEventListenerOptional(window,"resize",this.onResize)}loadPDFJS(e){const t=this;let r=1;this.wrapper.style.height="calc(100vh - 10px)",this.pdfContainer.style.height="calc(100vh - 10px)",this.pdfContainer.style.flexDirection="column";let n=document.getElementsByTagName("canvas");function i(n){const o=document.createElement("canvas");o.id=String(r),o.style.border="1px solid gray",o.style.margin="1px";let s=n.getViewport({scale:t.scale});if(1===t.scale){const e=t.wrapper.clientHeight/s.height,r=t.wrapper.clientWidth/s.width;s=0===t.scaleType?n.getViewport({scale:e<r?e:r}):n.getViewport({scale:r})}t.pdfContainer.appendChild(o);const a=o.getContext("2d");o.height=s.height,o.width=s.width;const l={canvasContext:a,viewport:s};let u=document.getElementById("loadingpdf");u.style.display="flex",u.style.width=getComputedStyle(t.wrapper).width,u.style.height=getComputedStyle(t.wrapper).height;const c=n.render(l);c.promise.then((function(){var n,o,s;r<t.pdfDoc.numPages?(r++,t.pdfDoc.getPage(r).then(i)):(null==(n=document.getElementById(String(e)))||n.scrollIntoView(),u.style.display="none",(null==(o=t.api)?void 0:o.resourceReady)&&(null==(s=t.api)||s.resourceReady()),t.emit("resource.ready"))}))}Array.from(n).forEach((function(e){var t;null==(t=null==e?void 0:e.parentNode)||t.removeChild(e)})),this.pdfDoc.getPage(r).then(i)}queueRenderPage(e){var t;const r=this;r.pageRendering?r.pageNumPending=e:(this.pageNum=e,null==(t=document.getElementById(String(e)))||t.scrollIntoView())}readingOrder(){return this.publication.readingOrder}tableOfContents(){return this.publication.tableOfContents}landmarks(){}pageList(){}currentResource(){}totalResources(){return this.publication.readingOrder.length}currentLocator(){}positions(){return this.publication.positions?this.publication.positions:[]}nextPage(){const e=this;e.pageNum>=e.pdfDoc.numPages?this.nextResource():(this.pageNum++,this.queueRenderPage(e.pageNum))}previousPage(){const e=this;e.pageNum<=1?this.previousResource():(e.pageNum--,e.queueRenderPage(e.pageNum))}nextResource(){const e=this;this.resourceIndex>=this.publication.readingOrder.length-1||(e.resourceIndex++,e.resource=this.publication.readingOrder[e.resourceIndex],(0,import_pdfjs_dist.getDocument)(this.publication.getAbsoluteHref(this.resource.Href)).promise.then((function(t){e.pdfDoc=t,e.pageNum=1,e.loadPDFJS(e.pageNum)})))}previousResource(){const e=this;0!==this.resourceIndex&&(e.resourceIndex--,e.resource=this.publication.readingOrder[e.resourceIndex],(0,import_pdfjs_dist.getDocument)(this.publication.getAbsoluteHref(this.resource.Href)).promise.then((function(t){e.pdfDoc=t,e.pageNum=e.pdfDoc.numPages,e.loadPDFJS(e.pageNum)})))}goTo(e){const t=new URL(e.href);if(t.searchParams.has("start")){const e=t.searchParams.get("start");e&&this.queueRenderPage(parseInt(e))}else this.queueRenderPage(1)}goToPosition(e){this.queueRenderPage(e)}async goToPage(e){this.queueRenderPage(e)}fitToWidth(){this.scale=1,this.scaleType=1,this.loadPDFJS(this.pageNum)}fitToPage(){this.scale=1,this.scaleType=0,this.loadPDFJS(this.pageNum)}zoomIn(){this.scale=this.scale+.2,this.loadPDFJS(this.pageNum)}zoomOut(){this.scale=this.scale-.2,this.loadPDFJS(this.pageNum)}activateHand(){this.handTool.activate()}deactivateHand(){this.handTool.deactivate()}async scroll(e,t){e?(this.pdfContainer.style.flexDirection="horizontal"===t?"row":"column",this.pdfContainer.style.overflow="auto"):(this.pdfContainer.style.flexDirection="column",this.pdfContainer.style.overflow="hidden")}stop(){removeEventListenerOptional(window,"resize",this.onResize)}},D2Reader=class e{constructor(e,t,r,n,i,o,s,a,l,u,c,d,h,p,f,g,m,v){this.settings=e,this.navigator=t,this.highlighter=r,this.bookmarkModule=n,this.annotationModule=i,this.ttsSettings=o,this.ttsModule=s,this.searchModule=a,this.definitionsModule=l,this.contentProtectionModule=u,this.timelineModule=c,this.mediaOverlaySettings=d,this.mediaOverlayModule=h,this.pageBreakModule=p,this.lineFocusModule=f,this.historyModule=g,this.citationModule=m,this.consumptionModule=v,this.startReadAloud=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.startReadAloud()},this.stopReadAloud=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.stopReadAloud()},this.pauseReadAloud=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.pauseReadAloud()},this.resumeReadAloud=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.resumeReadAloud()},this.startReadAlong=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.startReadAlong()},this.stopReadAlong=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.stopReadAlong()},this.pauseReadAlong=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.pauseReadAlong()},this.resumeReadAlong=()=>{this.navigator instanceof IFrameNavigator&&this.navigator.resumeReadAlong()},this.saveBookmark=async()=>{var e;return await(null==(e=this.bookmarkModule)?void 0:e.saveBookmark())??!1},this.saveBookmarkPlus=async()=>{var e;return null==(e=this.bookmarkModule)?void 0:e.saveBookmarkPlus()},this.deleteBookmark=async e=>{var t;return await(null==(t=this.bookmarkModule)?void 0:t.deleteBookmark(e))??!1},this.deleteAnnotation=async e=>{var t;return await(null==(t=this.annotationModule)?void 0:t.deleteAnnotation(e))??!1},this.addAnnotation=async e=>{var t;return await(null==(t=this.annotationModule)?void 0:t.addAnnotation(e))??!1},this.hideAnnotationLayer=()=>{var e;return null==(e=this.annotationModule)?void 0:e.hideAnnotationLayer()},this.showAnnotationLayer=()=>{var e;return null==(e=this.annotationModule)?void 0:e.showAnnotationLayer()},this.hideLayer=e=>{var t;return this.navigator instanceof IFrameNavigator&&(null==(t=this.navigator)?void 0:t.hideLayer(e))},this.showLayer=e=>{var t;return this.navigator instanceof IFrameNavigator&&(null==(t=this.navigator)?void 0:t.showLayer(e))},this.activateMarker=(e,t)=>{var r;return this.navigator instanceof IFrameNavigator&&(null==(r=this.navigator)?void 0:r.activateMarker(e,t))},this.deactivateMarker=()=>{var e;return this.navigator instanceof IFrameNavigator&&(null==(e=this.navigator)?void 0:e.deactivateMarker())},this.clearDefinitions=async()=>{var e;await(null==(e=this.definitionsModule)?void 0:e.clearDefinitions())},this.addDefinition=async e=>{var t;await(null==(t=this.definitionsModule)?void 0:t.addDefinition(e))},this.historyBack=async()=>{var e;return null==(e=this.historyModule)?void 0:e.historyBack()},this.historyForward=async()=>{var e;return null==(e=this.historyModule)?void 0:e.historyForward()},this.search=async(e,t)=>{var r;return await(null==(r=this.searchModule)?void 0:r.search(e,t))??[]},this.goToSearchIndex=async(e,t,r)=>{var n;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableSearch&&await(null==(n=this.searchModule)?void 0:n.goToSearchIndex(e,t,r))},this.goToSearchID=async(e,t,r)=>{var n;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableSearch&&await(null==(n=this.searchModule)?void 0:n.goToSearchID(e,t,r))},this.clearSearch=async()=>{var e;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableSearch&&await(null==(e=this.searchModule)?void 0:e.clearSearch())},this.resetUserSettings=async()=>await this.settings.resetUserSettings(),this.applyUserSettings=async e=>await this.settings.applyUserSettings(e),this.scroll=async(e,t)=>this.navigator instanceof PDFNavigator?this.navigator.scroll(e,t):await this.settings.scroll(e),this.increase=async e=>{var t,r;this.isTTSIncrementable(e)?this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableTTS&&await(null==(t=this.ttsSettings)?void 0:t.increase(e)):this.isMOIncrementable(e)?this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableMediaOverlays&&await(null==(r=this.mediaOverlaySettings)?void 0:r.increase(e)):await this.settings.increase(e)},this.decrease=async e=>{var t,r;this.isTTSIncrementable(e)?this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableTTS&&await(null==(t=this.ttsSettings)?void 0:t.decrease(e)):this.isMOIncrementable(e)?this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableMediaOverlays&&await(null==(r=this.mediaOverlaySettings)?void 0:r.decrease(e)):await this.settings.decrease(e)},this.resetTTSSettings=()=>{var e;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableTTS&&(null==(e=this.ttsSettings)||e.resetTTSSettings())},this.applyTTSSettings=async e=>{var t;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableTTS&&await(null==(t=this.ttsSettings)?void 0:t.applyTTSSettings(e))},this.applyPreferredVoice=async e=>{var t;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableTTS&&await(null==(t=this.ttsSettings)?void 0:t.applyPreferredVoice(e))},this.resetMediaOverlaySettings=async()=>{var e;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableMediaOverlays&&await(null==(e=this.mediaOverlaySettings)?void 0:e.resetMediaOverlaySettings())},this.applyMediaOverlaySettings=async e=>{var t;this.navigator instanceof IFrameNavigator&&this.navigator.rights.enableMediaOverlays&&await(null==(t=this.mediaOverlaySettings)?void 0:t.applyMediaOverlaySettings(e))},this.goTo=async e=>{this.navigator.goTo(e)},this.goToPosition=async e=>this.navigator.goToPosition(e),this.goToPage=async e=>{await this.navigator.goToPage(e)},this.fitToPage=()=>{this.navigator instanceof PDFNavigator&&this.navigator.fitToPage()},this.fitToWidth=()=>{this.navigator instanceof PDFNavigator&&this.navigator.fitToWidth()},this.zoomIn=()=>{this.navigator instanceof PDFNavigator&&this.navigator.zoomIn()},this.zoomOut=()=>{this.navigator instanceof PDFNavigator&&this.navigator.zoomOut()},this.activateHand=()=>{this.navigator instanceof PDFNavigator&&this.navigator.activateHand()},this.deactivateHand=()=>{this.navigator instanceof PDFNavigator&&this.navigator.deactivateHand()},this.copyToClipboard=e=>{var t;null==(t=this.contentProtectionModule)||t.copyToClipboard(e)},this.nextResource=()=>{this.navigator.nextResource()},this.previousResource=()=>{this.navigator.previousResource()},this.nextPage=async()=>{this.navigator.nextPage()},this.previousPage=async()=>{this.navigator.previousPage()},this.snapToSelector=async e=>{this.navigator instanceof IFrameNavigator&&this.navigator.snapToSelector(e)},this.applyAttributes=e=>{this.navigator instanceof IFrameNavigator&&this.navigator.applyAttributes(e)},this.stop=()=>{var e,t,r,n,i,o,s,a,l,u,c,d,h,p;document.body.onscroll=()=>{},this.navigator.stop(),this.settings.stop(),null==(e=this.ttsSettings)||e.stop(),null==(t=this.ttsModule)||t.stop(),null==(r=this.bookmarkModule)||r.stop(),null==(n=this.annotationModule)||n.stop(),null==(i=this.searchModule)||i.stop(),null==(o=this.definitionsModule)||o.stop(),null==(s=this.contentProtectionModule)||s.stop(),null==(a=this.timelineModule)||a.stop(),null==(l=this.mediaOverlaySettings)||l.stop(),null==(u=this.mediaOverlayModule)||u.stop(),null==(c=this.pageBreakModule)||c.stop(),null==(d=this.lineFocusModule)||d.stop(),null==(h=this.citationModule)||h.stop(),null==(p=this.consumptionModule)||p.stop()}}addEventListener(){this.navigator instanceof IFrameNavigator&&this.navigator.addListener(arguments[0],arguments[1])}static async load(t){var r,n,i,o,s,a,l;let u=t.rights??{autoGeneratePositions:!1,enableAnnotations:!1,enableBookmarks:!1,enableContentProtection:!1,enableDefinitions:!1,enableLineFocus:!1,enableMediaOverlays:!1,enablePageBreaks:!1,enableSearch:!1,enableTTS:!1,enableTimeline:!1,customKeyboardEvents:!1,enableHistory:!1,enableCitations:!1};u.enableContentProtection&&t.protection&&await ContentProtectionModule.setupPreloadProtection(t.protection);const c=findRequiredElement(document,"#D2Reader-Container"),d=findElement(document,"#headerMenu"),h=findElement(document,"#footerMenu");let p,f,g,m,v=t.url;t.publication?(p=TaJsonDeserialize(t.publication,Publication),p.manifestUrl=new URL(v)):p=await Publication.fromUrl(v,t.requestConfig),f="memory"===t.storageType?new MemoryStore:new LocalStorageStore({prefix:p.manifestUrl,useLocalStorage:t.useLocalStorage??!1}),g="memory"===t.storageType?new MemoryStore:new LocalStorageStore({prefix:"r2d2bc-reader",useLocalStorage:t.useLocalStorage??!1}),m="memory"===t.storageType?new MemoryStore:new LocalStorageStore({prefix:"r2d2bc-layers",useLocalStorage:t.useLocalStorage??!1});const y=new LocalAnnotator({store:f});if(p.sample=t.sample,u=updateConfig(u,p),p.Metadata.ConformsTo&&p.Metadata.ConformsTo.includes("https://readium.org/webpub-manifest/profiles/pdf")){const r=await UserSettings.create({store:g,initialUserSettings:t.userSettings,layout:""}),n=await PDFNavigator.create({mainElement:c,publication:p,settings:r,api:t.api});return new e(r,n)}{u.autoGeneratePositions?await p.autoGeneratePositions(t.requestConfig):((null==(r=t.services)?void 0:r.positions)&&await p.fetchPositionsFromService(null==(n=t.services)?void 0:n.positions.href,t.requestConfig),(null==(i=t.services)?void 0:i.weight)&&await p.fetchWeightsFromService(null==(o=t.services)?void 0:o.weight.href,t.requestConfig));const f=await LayerSettings.create({store:m}),v=await UserSettings.create({store:g,initialUserSettings:t.userSettings,headerMenu:d,api:t.api,injectables:"fixed"===((null==(s=p.Metadata.Rendition)?void 0:s.Layout)??"unknown")?t.injectablesFixed:t.injectables,layout:"fixed"===((null==(a=p.Metadata.Rendition)?void 0:a.Layout)??"unknown")?"fixed":"reflowable"}),_=await TextHighlighter.create({layerSettings:f,...t.highlighter}),b=u.enableBookmarks?await BookmarkModule.create({annotator:y,headerMenu:d,rights:u,publication:p,initialAnnotations:t.initialAnnotations,...t.bookmarks}):void 0,S=u.enableAnnotations?await AnnotationModule.create({annotator:y,rights:u,publication:p,initialAnnotations:t.initialAnnotations,highlighter:_,headerMenu:d,...t.annotations}):void 0,w=u.enableTTS,C=w?await TTSSettings.create({store:g,initialTTSSettings:t.tts,headerMenu:d}):void 0;let A;w&&C&&(A=await TTSModule2.create({tts:C,headerMenu:d,rights:u,highlighter:_,...t.tts}));const E=u.enableSearch?await SearchModule.create({headerMenu:d,publication:p,highlighter:_,...t.search}):void 0,x=u.enableDefinitions?await DefinitionsModule.create({publication:p,highlighter:_,...t.define}):void 0,T=u.enableTimeline?await TimelineModule.create({publication:p}):void 0,k=u.enableContentProtection?await ContentProtectionModule.create({...t.protection}):void 0,O=u.enableCitations?await CitationModule.create({publication:p,highlighter:_,...t.citations}):void 0,P=u.enableMediaOverlays,R=P?await MediaOverlaySettings.create({store:g,initialMediaOverlaySettings:t.mediaOverlays,headerMenu:d,...t.mediaOverlays}):void 0,I=P?await MediaOverlayModule.create({publication:p,settings:R,...t.mediaOverlays}):void 0,L=u.enablePageBreaks,M=L&&p.isReflowable?await PageBreakModule.create({publication:p,headerMenu:d,...t.pagebreak}):void 0,N=u.enableLineFocus?await LineFocusModule.create({publication:p,highlighter:_,...t.lineFocus}):void 0,D=u.enableHistory?await HistoryModule.create({annotator:y,publication:p,headerMenu:d}):void 0,B=u.enableConsumption?await ConsumptionModule.create({publication:p,...t.consumption}):void 0,F=await IFrameNavigator.create({mainElement:c,headerMenu:d,footerMenu:h,publication:p,settings:v,annotator:y,initialLastReadingPosition:t.lastReadingPosition,api:t.api,rights:u,tts:t.tts,sample:t.sample,requestConfig:t.requestConfig,injectables:"fixed"===((null==(l=p.Metadata.Rendition)?void 0:l.Layout)??"unknown")?t.injectablesFixed??[]:t.injectables,attributes:t.attributes,services:t.services,highlighter:_,modules:[b,S,A,E,x,T,k,O,I,M,N,D,B]});return new e(v,F,_,b,S,C,A,E,x,k,T,R,I,M,N,D,O,B)}}get hasMediaOverlays(){return this.navigator instanceof IFrameNavigator&&this.navigator.hasMediaOverlays}get tableOfContents(){return convertAndCamel(this.navigator.tableOfContents())??[]}get landmarks(){return convertAndCamel(this.navigator.landmarks())??[]}get pageList(){return convertAndCamel(this.navigator.pageList())??[]}get readingOrder(){return convertAndCamel(this.navigator.readingOrder())??[]}get bookmarks(){var e;return(null==(e=this.bookmarkModule)?void 0:e.getBookmarks())??[]}get annotations(){var e;return null==(e=this.annotationModule)?void 0:e.getAnnotations()}get publicationLayout(){return this.navigator.publication.layout}get history(){var e;return null==(e=this.historyModule)?void 0:e.history}get historyCurrentIndex(){var e;return null==(e=this.historyModule)?void 0:e.historyCurrentIndex}get currentResource(){return this.navigator.currentResource()}get mostRecentNavigatedTocItem(){return this.navigator instanceof IFrameNavigator&&this.navigator.mostRecentNavigatedTocItem()}get totalResources(){return this.navigator.totalResources()}get publicationLanguage(){return this.navigator.publication.Metadata.Language}get currentSettings(){return this.settings.currentSettings}isTTSIncrementable(e){return"pitch"===e||"rate"===e||"volume"===e}isMOIncrementable(e){return"mo_rate"===e||"mo_volume"===e}get currentLocator(){return this.navigator.currentLocator()}get positions(){return this.navigator.positions()}get atStart(){return this.navigator instanceof IFrameNavigator&&this.navigator.atStart()}get atEnd(){return this.navigator instanceof IFrameNavigator&&this.navigator.atEnd()}async applyLineFocusSettings(e){if(e.lines&&this.lineFocusModule){const t=this.lineFocusModule.properties.lines??1;this.lineFocusModule.index=this.lineFocusModule.index*t/parseInt(e.lines),this.lineFocusModule.index=Math.abs(parseInt(this.lineFocusModule.index.toFixed())),this.lineFocusModule.properties.lines=parseInt(e.lines),this.lineFocusModule.isActive&&await this.lineFocusModule.enableLineFocus()}void 0!==e.debug&&this.lineFocusModule&&(this.lineFocusModule.isDebug=e.debug,this.lineFocusModule.isActive&&await this.lineFocusModule.enableLineFocus())}lineUp(){var e;null==(e=this.lineFocusModule)||e.lineUp()}lineDown(){var e;null==(e=this.lineFocusModule)||e.lineDown()}async enableLineFocus(){var e;await(null==(e=this.lineFocusModule)?void 0:e.enableLineFocus())}async lineFocus(e){var t,r;e?await(null==(t=this.lineFocusModule)?void 0:t.enableLineFocus()):null==(r=this.lineFocusModule)||r.disableLineFocus()}disableLineFocus(){var e;null==(e=this.lineFocusModule)||e.disableLineFocus()}};function updateConfig(e,t){var r;return t.isFixedLayout&&(e.enableAnnotations=!1,e.enableSearch=!1,e.enableTTS=!1,e.enableDefinitions=!1,e.enablePageBreaks=!1,e.enableLineFocus=!1),(null==(r=t.sample)?void 0:r.isSampleRead)&&(e.enableAnnotations=!1,e.enableSearch=!1,e.enableTTS=!1,e.enableDefinitions=!1,e.enableTimeline=!1,e.enableMediaOverlays=!1,e.enablePageBreaks=!1,e.enableLineFocus=!1),e}var src_default=D2Reader,load=D2Reader.load},73614:function(e){function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=function(){return[]},t.resolve=t,t.id=73614,e.exports=t},49764:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return me}});var n=r(87158),i=r(73847),o=r(74697),s=r(30089),a=r(21253),l=r(1231),u=r(70793),c=r(16684),d=r(18748),h=r(94026),p=r(69791),f=r(23879),g=r(22369),m=r(80700),v=r(47679),y=r(48166),_=r(40005),b=r(26804),S=r(75310),w=r(1361),C=r(68462),A=r(75704),E=r(26702),x=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{key:e.bookId,attrs:{id:"root"}},[t(m.QG,[e.showToolbars?t(A.A,{staticClass:"settings full-width",staticStyle:{position:"fixed",top:"0","z-index":"14"},attrs:{dense:"",elevation:"1"}},[t(i.A,{attrs:{icon:""},on:{click:e.closeBook}},[t(c.A,[e._v("mdi-arrow-left")])],1),t(i.A,{attrs:{disabled:!e.hasToc&&!e.hasLandmarks&&!e.hasPageList,icon:""},on:{click:function(t){e.showToc=!e.showToc}}},[t(c.A,[e._v("mdi-table-of-contents")])],1),t(E.sw,[e._v(" "+e._s(e.bookTitle))]),t(_.A),t(i.A,{attrs:{icon:"",disabled:!e.screenfull.isEnabled},on:{click:function(t){e.screenfull.isFullscreen?e.screenfull.exit():e.enterFullscreen()}}},[t(c.A,[e._v(e._s(e.fullscreenIcon))])],1),t(i.A,{attrs:{icon:""},on:{click:function(t){e.showHelp=!e.showHelp}}},[t(c.A,[e._v("mdi-help-circle")])],1),t(i.A,{attrs:{icon:""},on:{click:e.toggleSettings}},[t(c.A,[e._v("mdi-cog")])],1)],1):e._e()],1),t(m.wc,[e.showToolbars?t(A.A,{staticClass:"settings full-width",staticStyle:{position:"fixed",bottom:"0","z-index":"14"},attrs:{dense:"",elevation:"1",horizontal:""}},[t(i.A,{attrs:{icon:""},on:{click:e.previousBook}},[t(c.A,[e._v("mdi-undo")])],1),t(_.A),t(i.A,{attrs:{icon:"",disabled:!e.historyCanGoBack},on:{click:e.historyBack}},[t(c.A,[e._v("mdi-chevron-left")])],1),e.verticalScroll?t("span",{staticClass:"mx-2",staticStyle:{"font-size":"0.85em"}},[e._v(" "+e._s(e.progressionTotalPercentage)+" ")]):e._e(),t(i.A,{attrs:{icon:"",disabled:!e.historyCanGoForward},on:{click:e.historyForward}},[t(c.A,[e._v("mdi-chevron-right")])],1),t(_.A),t(i.A,{attrs:{icon:""},on:{click:e.nextBook}},[t(c.A,[e._v("mdi-redo")])],1)],1):e._e()],1),t(f.A,{staticStyle:{"z-index":"15"},attrs:{fixed:"",temporary:"",width:e.$vuetify.breakpoint.smAndUp?500:e.$vuetify.breakpoint.width-50},model:{value:e.showToc,callback:function(t){e.showToc=t},expression:"showToc"}},[t(C.A,{attrs:{grow:""}},[e.hasToc?t(S.A,[t(c.A,[e._v("mdi-table-of-contents")])],1):e._e(),e.hasLandmarks?t(S.A,[t(c.A,[e._v("mdi-eiffel-tower")])],1):e._e(),e.hasPageList?t(S.A,[t(c.A,[e._v("mdi-numeric")])],1):e._e(),e.hasToc?t(w.A,{staticClass:"scrolltab"},[t("toc-list",{staticClass:"scrolltab-content",attrs:{toc:e.tableOfContents},on:{goto:e.goToEntry}})],1):e._e(),e.hasLandmarks?t(w.A,{staticClass:"scrolltab"},[t("toc-list",{staticClass:"scrolltab-content",attrs:{toc:e.landmarks},on:{goto:e.goToEntry}})],1):e._e(),e.hasPageList?t(w.A,{staticClass:"scrolltab"},[t("toc-list",{staticClass:"scrolltab-content",attrs:{toc:e.pageList},on:{goto:e.goToEntry}})],1):e._e()],1)],1),t("header",{attrs:{id:"headerMenu"}}),t("div",{class:e.appearanceClass("bg"),staticStyle:{height:"100vh"},attrs:{id:"D2Reader-Container"}},[t("main",{staticStyle:{height:"100vh"},attrs:{tabindex:"-1",id:"iframe-wrapper"},on:{click:e.clickThrough}},[t("div",{attrs:{id:"reader-loading"}}),t("div",{attrs:{id:"reader-error"}})]),t("a",{class:e.settings.navigationButtons?"":"hidden",staticStyle:{left:"50%",position:"fixed",color:"#000",height:"24px",background:"#d3d3d33b",width:"150px",transform:"translate(-50%, 0)",display:"block"},style:`top: ${e.showToolbars?48:0}px`,attrs:{id:"previous-chapter",rel:"prev",role:"button","aria-labelledby":"previous-label"}},[t(c.A,{staticStyle:{left:"calc(50% - 12px)",position:"relative"}},[e._v("mdi-chevron-up")])],1),t("a",{class:e.settings.navigationButtons?"":"hidden",staticStyle:{bottom:"0",left:"50%",position:"fixed",color:"#000",height:"24px",background:"#d3d3d33b",width:"150px",transform:"translate(-50%, 0)",display:"block"},attrs:{id:"next-chapter",rel:"next",role:"button","aria-labelledby":"next-label"}},[t(c.A,{staticStyle:{left:"calc(50% - 12px)",position:"relative"}},[e._v("mdi-chevron-down")])],1)]),t("footer",{attrs:{id:"footerMenu"}},[t("a",{staticClass:"disabled",class:e.settings.navigationButtons?"":"hidden",staticStyle:{top:"50%",left:"0",position:"fixed",height:"100px",background:"#d3d3d33b"},attrs:{rel:"prev",role:"button","aria-labelledby":"previous-label"}},[t(c.A,{staticStyle:{top:"calc(50% - 12px)",position:"relative"}},[e._v("mdi-chevron-left ")])],1),t("a",{staticClass:"disabled",class:e.settings.navigationButtons?"":"hidden",staticStyle:{top:"50%",right:"0",position:"fixed",height:"100px",background:"#d3d3d33b"},attrs:{rel:"next",role:"button","aria-labelledby":"next-label"}},[t(c.A,{staticStyle:{top:"calc(50% - 12px)",position:"relative"}},[e._v("mdi-chevron-right")])],1)]),e.verticalScroll?e._e():t(u.A,{staticClass:"full-width",class:e.appearanceClass(),staticStyle:{position:"fixed",bottom:"0","font-size":".85rem"},attrs:{fluid:""}},[t(g.A,[t(l.A,{staticClass:"text-truncate",attrs:{cols:"10"}},[e._v(" "+e._s(e.$t("epubreader.page_of",{page:e.progressionPage,count:e.progressionPageCount}))+" ("+e._s(e.progressionTitle||e.$t("epubreader.current_chapter"))+") ")]),t(_.A),t(l.A,{attrs:{cols:"auto"}},[e._v(e._s(e.progressionTotalPercentage))])],1)],1),t(n.A,{attrs:{"close-on-content-click":!1,"max-width":"500",scrollable:""},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"]))return null;t.stopPropagation()}},model:{value:e.showSettings,callback:function(t){e.showSettings=t},expression:"showSettings"}},[t(s.A,[t(A.A,{attrs:{dark:"",color:"primary"}},[t(i.A,{attrs:{icon:"",dark:""},on:{click:function(t){e.showSettings=!1}}},[t(c.A,[e._v("mdi-close")])],1),t(E.sw,[e._v(e._s(e.$t("bookreader.reader_settings")))])],1),t(a.OQ,{staticClass:"pa-0"},[t(d.A,{staticClass:"full-height full-width"},[t(b.A,{staticClass:"font-weight-black text-h6"},[e._v(e._s(e.$t("bookreader.settings.general")))]),e.fixedLayout?t(h.A,[t("settings-select",{attrs:{items:e.readingDirs,label:e.$t("bookreader.settings.reading_mode")},model:{value:e.readingDirection,callback:function(t){e.readingDirection=t},expression:"readingDirection"}})],1):e._e(),t(h.A,[t("settings-switch",{attrs:{label:e.$t("bookreader.settings.always_fullscreen"),disabled:!e.screenfull.isEnabled},model:{value:e.alwaysFullscreen,callback:function(t){e.alwaysFullscreen=t},expression:"alwaysFullscreen"}})],1),t(h.A,[t("settings-select",{attrs:{items:e.navigationOptions,label:e.$t("epubreader.settings.navigation_mode")},model:{value:e.navigationMode,callback:function(t){e.navigationMode=t},expression:"navigationMode"}})],1),t(b.A,{staticClass:"font-weight-black text-h6"},[e._v(e._s(e.$t("bookreader.settings.display")))]),e.fontFamilies.length>1?t(h.A,[t("settings-select",{attrs:{items:e.fontFamilies,label:e.$t("epubreader.settings.font_family")},model:{value:e.fontFamily,callback:function(t){e.fontFamily=t},expression:"fontFamily"}})],1):e._e(),t(h.A,[t(p.UZ,[e._v(e._s(e.$t("epubreader.settings.viewing_theme")))]),e._l(e.appearances,(function(r,n){return t(i.A,{key:n,staticClass:"mx-1",class:r.class,attrs:{value:r.value,color:r.color},on:{click:function(t){e.appearance=r.value}}},[e.appearance===r.value?t(c.A,[e._v("mdi-check")]):e._e()],1)}))],2),e.fixedLayout?e._e():t(h.A,[t(p.UZ,[e._v(e._s(e.$t("epubreader.settings.layout")))]),t(o.A,{staticClass:"py-3",attrs:{mandatory:""},model:{value:e.verticalScroll,callback:function(t){e.verticalScroll=t},expression:"verticalScroll"}},[t(i.A,{attrs:{value:!0}},[e._v(e._s(e.$t("epubreader.settings.layout_scroll")))]),t(i.A,{attrs:{value:!1}},[e._v(e._s(e.$t("epubreader.settings.layout_paginated")))])],1)],1),e.verticalScroll?e._e():t(h.A,[t(p.UZ,[e._v(e._s(e.$t("epubreader.settings.column_count")))]),t(o.A,{staticClass:"py-3",attrs:{mandatory:""},model:{value:e.columnCount,callback:function(t){e.columnCount=t},expression:"columnCount"}},e._l(e.columnCounts,(function(r,n){return t(i.A,{key:n,attrs:{value:r.value}},[e._v(e._s(r.text))])})),1)],1),t(h.A,{staticClass:"justify-center"},[t(i.A,{attrs:{depressed:""},on:{click:function(t){e.fontSize-=10}}},[t(c.A,{attrs:{small:""}},[e._v("mdi-format-title")])],1),t("span",{staticClass:"caption mx-8",staticStyle:{width:"2rem"}},[e._v(e._s(e.fontSize)+"%")]),t(i.A,{attrs:{depressed:""},on:{click:function(t){e.fontSize+=10}}},[t(c.A,[e._v("mdi-format-title")])],1)],1),t(h.A,{staticClass:"justify-center"},[t(i.A,{attrs:{depressed:""},on:{click:function(t){e.lineHeight-=.1}}},[t(c.A,[e._v("$formatLineSpacingDown")])],1),t("span",{staticClass:"caption mx-8",staticStyle:{width:"2rem"}},[e._v(e._s(Math.round(100*e.lineHeight))+"%")]),t(i.A,{attrs:{depressed:""},on:{click:function(t){e.lineHeight+=.1}}},[t(c.A,[e._v("mdi-format-line-spacing")])],1)],1),t(h.A,[t(v.A,{attrs:{label:e.$t("epubreader.settings.page_margins"),min:"0.5",max:"4",step:"0.25",ticks:"always","tick-size":"3"},model:{value:e.pageMargins,callback:function(t){e.pageMargins=t},expression:"pageMargins"}})],1)],1)],1)],1)],1),t(y.A,{attrs:{centered:"",timeout:e.notification.timeout},model:{value:e.notification.enabled,callback:function(t){e.$set(e.notification,"enabled",t)},expression:"notification.enabled"}},[t("p",{staticClass:"text-h6 text-center ma-0"},[e._v(" "+e._s(e.notification.message)+" ")])]),t("shortcut-help-dialog",{attrs:{shortcuts:e.shortcutsHelp},model:{value:e.showHelp,callback:function(t){e.showHelp=t},expression:"showHelp"}})],1)},T=[],k=(r(14602),r(28743),r(30789),r(60933),r(96380),r(91059),r(42838),r(62554),r(85471)),O=r(8547),P=r(33513),R=r(9401),I=r(13044),L=r(7059),M=r(66701),N=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.toc?t(d.A,{attrs:{expand:""}},[e._l(e.toc,(function(r,n){return[r.children?t(M.A,{key:n,attrs:{"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[t("toc-list-item",{staticClass:"ps-0",attrs:{item:r},on:{goto:e.goto}})]},proxy:!0}],null,!0)},[e._l(r.children,(function(r,n){return[t("toc-list-item",{key:n,class:"ms-"+4*(r.level-1),attrs:{item:r},on:{goto:e.goto}})]}))],2):[t("toc-list-item",{key:n,attrs:{item:r},on:{goto:e.goto}})]]}))],2):e._e()},D=[],B=r(47623),F=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(h.A,{attrs:{link:""}},[t(p.pr,[t(p.UZ,{class:e.item.current?"primary--text":"",staticStyle:{width:"100px"},style:e.item.href?"cursor: pointer":void 0,attrs:{title:e.item.title},on:{click:function(t){return t.stopPropagation(),e.goto(e.item)}}},[t(B.A,{attrs:{value:!!e.item.current,color:"primary",dot:"",left:"","offset-y":"0","offset-x":"-5"}}),e._v(" "+e._s(e.item.title)+" ")],1)],1)],1)},j=[],H=k.Ay.extend({name:"TocListItem",props:{item:{type:Object,required:!0}},methods:{goto(e){this.$emit("goto",e)}}}),q=H,U=r(81656),G=(0,U.A)(q,F,j,!1,null,null,null),z=G.exports,V=k.Ay.extend({name:"TocList",components:{TocListItem:z},data:()=>({}),props:{toc:{type:Array,required:!1}},computed:{},methods:{goto(e){this.$emit("goto",e)}}}),$=V,J=(0,U.A)($,N,D,!1,null,null,null),W=J.exports,Y=r(5204);const K=[new Y.r("epubreader.shortcuts.previous",(()=>{}),"CTRL+Space","CTRL + SPACE"),new Y.r("epubreader.shortcuts.next",(()=>{}),"Space","SPACE")],X=[new Y.r("epubreader.shortcuts.previous",(()=>{}),"ArrowLeft","←"),new Y.r("epubreader.shortcuts.next",(()=>{}),"ArrowRight","→")],Q=[new Y.r("epubreader.shortcuts.previous",(()=>{}),"ArrowRight","→"),new Y.r("epubreader.shortcuts.next",(()=>{}),"ArrowLeft","←")],Z=[new Y.r("epubreader.shortcuts.scroll",(e=>e.changeLayout(!0)),"v")],ee=[new Y.r("epubreader.shortcuts.cycle_pagination",(e=>e.cyclePagination()),"p"),new Y.r("epubreader.shortcuts.cycle_viewing_theme",(e=>e.cycleViewingTheme()),"a"),new Y.r("epubreader.shortcuts.font_size_increase",(e=>e.changeFontSize(!0)),"+"),new Y.r("epubreader.shortcuts.font_size_decrease",(e=>e.changeFontSize(!1)),"-"),new Y.r("bookreader.shortcuts.fullscreen",(e=>e.switchFullscreen()),"f")],te=[new Y.r("bookreader.shortcuts.show_hide_toolbars",(e=>e.toggleToolbars()),"m"),new Y.r("bookreader.shortcuts.show_hide_settings",(e=>e.toggleSettings()),"s"),new Y.r("epubreader.shortcuts.show_hide_toc",(e=>e.toggleTableOfContents()),"t"),new Y.r("bookreader.shortcuts.show_hide_help",(e=>e.toggleHelp()),"h"),new Y.r("bookreader.shortcuts.close",(e=>e.closeDialog()),"Escape")];function re(e,t=0,r=0,n){const i=[];for(const o of e){const e=Object.assign({},o,{level:r});e.href===n&&(e.current=!0);const s=[];o.children&&s.push(...re(o.children,t,r+1,n)),r>=t?(delete e.children,i.push(e),i.push(...s)):(e.children=s.length>0?s:void 0,i.push(e))}return i}var ne=r(68566),ie=r(51916),oe=r.n(ie),se=r(33060),ae=r(5760);function le(e){return{modified:new Date,device:{name:"Komga-webui",id:"unused"},locator:ue(e)}}function ue(e){return{href:e.href.startsWith(P.Ay.originNoSlash)?e.href.replace(/(.*\/resource\/)/,""):e.href,type:e.type||"application/octet-stream",title:e.title,locations:ce(e.locations),text:e.text}}function ce(e){return{fragment:e.fragment?[e.fragment]:[],progression:e.progression,position:e.position,totalProgression:e.totalProgression}}function de(e,t){try{return{created:e.modified,href:`${P.Ay.originNoSlash}/api/v1/books/${t}/resource/${e.locator.href}`,type:e.locator.type,title:e.locator.title,locations:{fragment:e.locator.locations.fragment?e.locator.locations.fragment[0]:void 0,position:e.locator.locations.position,progression:e.locator.locations.progression,totalProgression:e.locator.locations.totalProgression},text:e.locator.text}}catch(r){return}}var he=r(2543),pe=k.Ay.extend({name:"EpubReader",components:{SettingsSelect:ae.A,ShortcutHelpDialog:ne.A,TocList:W,SettingsSwitch:L.A},data:function(){return{screenfull:oe(),fullscreenIcon:"mdi-fullscreen",d2Reader:{},book:void 0,series:void 0,siblingPrevious:{},siblingNext:{},incognito:!1,context:{},contextName:"",showSettings:!1,showToolbars:!1,showToc:!1,showHelp:!1,readingDirs:[{text:this.$t("enums.epubreader.reading_direction.auto").toString(),value:"auto"},{text:this.$t("enums.epubreader.reading_direction.ltr").toString(),value:"ltr"},{text:this.$t("enums.epubreader.reading_direction.rtl").toString(),value:"rtl"}],appearances:[{text:this.$t("enums.epubreader.appearances.day").toString(),value:"readium-default-on",color:"white",class:"black--text"},{text:this.$t("enums.epubreader.appearances.sepia").toString(),value:"readium-sepia-on",color:"#faf4e8",class:"black--text"},{text:this.$t("enums.epubreader.appearances.night").toString(),value:"readium-night-on",color:"black",class:"white--text"}],columnCounts:[{text:this.$t("enums.epubreader.column_count.auto").toString(),value:"auto"},{text:this.$t("enums.epubreader.column_count.one").toString(),value:"1"},{text:this.$t("enums.epubreader.column_count.two").toString(),value:"2"}],fontFamilyDefault:[{text:this.$t("epubreader.publisher_font"),value:"Original"}],fontFamiliesAdditional:[],fontFamilies:[],settings:{appearance:"readium-default-on",pageMargins:1,lineHeight:1,fontSize:100,verticalScroll:!1,columnCount:"auto",fixedLayoutMargin:0,fixedLayoutShadow:!1,direction:"auto",fontFamily:"Original",alwaysFullscreen:!1,navigationClick:!0,navigationButtons:!0},navigationOptions:[{text:this.$t("epubreader.settings.navigation_options.buttons").toString(),value:"button"},{text:this.$t("epubreader.settings.navigation_options.click").toString(),value:"click"},{text:this.$t("epubreader.settings.navigation_options.both").toString(),value:"buttonclick"}],tocs:{toc:void 0,landmarks:void 0,pageList:void 0},currentLocation:void 0,historyCanGoBack:!1,historyCanGoForward:!1,notification:{enabled:!1,message:"",timeout:4e3},clickTimer:void 0,forceUpdate:!1,progressionTitle:void 0,progressionPage:void 0,progressionPageCount:void 0,effectiveDirection:"ltr",fixedLayout:!1}},created(){this.$vuetify.rtl=!1,oe().isEnabled&&oe().on("change",this.fullscreenChanged)},beforeDestroy(){this.d2Reader.stop()},destroyed(){this.$vuetify.rtl="true"===this.$t("common.locale_rtl"),oe().isEnabled&&(oe().off("change",this.fullscreenChanged),oe().exit())},async mounted(){Object.assign(this.settings,this.$store.state.persistedState.epubreader),this.settings.alwaysFullscreen=this.$store.state.persistedState.webreader.alwaysFullscreen,this.fontFamiliesAdditional=await this.$komgaFonts.getFamilies(),this.fontFamilies=[...this.fontFamilyDefault,...this.fontFamiliesAdditional],this.setup(this.bookId)},props:{bookId:{type:String,required:!0}},beforeRouteUpdate(e,t,r){e.params.bookId!==t.params.bookId&&(this.d2Reader.stop(),this.setup(e.params.bookId,Number(e.query.page))),r()},computed:{isRtl(){return"rtl"===this.effectiveDirection},shortcuts(){const e=[...ee,...te];return this.fixedLayout||e.push(...Z),this.$_.keyBy(e,(e=>e.key))},progressionTotalPercentage(){var e;const t=null===(e=this.currentLocation)||void 0===e||null===(e=e.locations)||void 0===e?void 0:e.totalProgression;return t?`${Math.round(100*t)}%`:""},shortcutsHelp(){let e=[];return"rtl"===this.effectiveDirection?e.push(...Q):e.push(...X),e.push(...K),{[this.$t("bookreader.shortcuts.reader_navigation").toString()]:e,[this.$t("bookreader.shortcuts.settings").toString()]:[...ee],[this.$t("bookreader.shortcuts.menus").toString()]:te}},tableOfContents(){var e;return this.tocs.toc?re(this.tocs.toc,1,0,null===(e=this.currentLocation)||void 0===e?void 0:e.href):[]},landmarks(){var e;return this.tocs.landmarks?re(this.tocs.landmarks,1,0,null===(e=this.currentLocation)||void 0===e?void 0:e.href):[]},pageList(){var e;return this.tocs.pageList?re(this.tocs.pageList,1,0,null===(e=this.currentLocation)||void 0===e?void 0:e.href):[]},hasToc(){var e;return(null===(e=this.tocs.toc)||void 0===e?void 0:e.length)>0},hasLandmarks(){var e;return(null===(e=this.tocs.landmarks)||void 0===e?void 0:e.length)>0},hasPageList(){var e;return(null===(e=this.tocs.pageList)||void 0===e?void 0:e.length)>0},bookTitle(){var e;return this.book&&this.series?(0,R.P)(this.book.metadata.title,this.series.metadata.title,this.book.oneshot?void 0:this.book.metadata.number):null===(e=this.book)||void 0===e||null===(e=e.metadata)||void 0===e?void 0:e.title},appearance:{get:function(){return this.settings.appearance},set:function(e){this.appearances.map((e=>e.value)).includes(e)&&(this.settings.appearance=e,this.d2Reader.applyUserSettings({appearance:e}),this.$store.commit("setEpubreaderSettings",this.settings))}},verticalScroll:{get:function(){return this.settings.verticalScroll},set:function(e){this.settings.verticalScroll=e,this.d2Reader.applyUserSettings({verticalScroll:e}),this.$store.commit("setEpubreaderSettings",this.settings)}},columnCount:{get:function(){return this.settings.columnCount},set:function(e){this.columnCounts.map((e=>e.value)).includes(e)&&(this.settings.columnCount=e,this.d2Reader.applyUserSettings({columnCount:e}),this.$store.commit("setEpubreaderSettings",this.settings))}},readingDirection:{get:function(){return this.settings.direction},set:function(e){this.readingDirs.map((e=>e.value)).includes(e)&&(this.settings.direction=e,this.d2Reader.applyUserSettings({direction:e}),this.$store.commit("setEpubreaderSettings",this.settings))}},pageMargins:{get:function(){return this.settings.pageMargins},set:function(e){this.settings.pageMargins=e,this.d2Reader.applyUserSettings({pageMargins:e}),this.$store.commit("setEpubreaderSettings",this.settings)}},lineHeight:{get:function(){return this.settings.lineHeight},set:function(e){this.settings.lineHeight=e,this.d2Reader.applyUserSettings({lineHeight:e}),this.$store.commit("setEpubreaderSettings",this.settings)}},fontSize:{get:function(){return this.settings.fontSize},set:function(e){this.settings.fontSize=e,this.d2Reader.applyUserSettings({fontSize:e}),this.$store.commit("setEpubreaderSettings",this.settings)}},alwaysFullscreen:{get:function(){return this.settings.alwaysFullscreen},set:function(e){this.settings.alwaysFullscreen=e,this.$store.commit("setWebreaderAlwaysFullscreen",e),e?this.enterFullscreen():oe().isEnabled&&oe().exit()}},navigationMode:{get:function(){let e=this.settings.navigationButtons?"button":"";return this.settings.navigationClick&&(e+="click"),e},set:function(e){this.settings.navigationButtons=e.includes("button"),this.settings.navigationClick=e.includes("click"),this.$store.commit("setEpubreaderSettings",this.settings)}},fontFamily:{get:function(){var e;return null!==(e=this.settings.fontFamily)&&void 0!==e?e:"Original"},set:function(e){this.settings.fontFamily=e,this.d2Reader.applyUserSettings({fontFamily:e}),this.$store.commit("setEpubreaderSettings",this.settings)}}},methods:{previousBook(){this.$_.isEmpty(this.siblingPrevious)||(this.jumpToPreviousBook=!1,this.$router.push({name:(0,se.Z)(this.siblingPrevious.media),params:{bookId:this.siblingPrevious.id.toString()},query:{context:this.context.origin,contextId:this.context.id,incognito:this.incognito.toString()}}))},nextBook(){this.$_.isEmpty(this.siblingNext)?this.closeBook():(this.jumpToNextBook=!1,this.$router.push({name:(0,se.Z)(this.siblingNext.media),params:{bookId:this.siblingNext.id.toString()},query:{context:this.context.origin,contextId:this.context.id,incognito:this.incognito.toString()}}))},enterFullscreen(){oe().isEnabled&&oe().request(document.documentElement,{navigationUI:"hide"})},switchFullscreen(){oe().isEnabled&&(oe().isFullscreen?oe().exit():this.enterFullscreen())},fullscreenChanged(){oe().isEnabled&&oe().isFullscreen?this.fullscreenIcon="mdi-fullscreen-exit":this.fullscreenIcon="mdi-fullscreen"},toggleToolbars(){this.showToolbars=!this.showToolbars},toggleSettings(){this.showSettings=!this.showSettings},toggleTableOfContents(){this.showToc=!this.showToc},toggleHelp(){this.showHelp=!this.showHelp},keyPressed(e){var t;null===(t=this.shortcuts[e.key])||void 0===t||t.execute(this)},clickThrough(e){let t=e.x,r=e.y;if(e.target.ownerDocument!=document){const n=e.view.frameElement,i=n.parentElement.parentElement,o=i.getBoundingClientRect().width/i.offsetWidth,s=n.getBoundingClientRect();t=s.left+e.x*o,r=s.top+e.y*o}1===e.detail&&(this.clickTimer=setTimeout((()=>{this.singleClick(t,r)}),200)),2===e.detail&&clearTimeout(this.clickTimer)},singleClick(e,t){if(this.verticalScroll){if(this.settings.navigationClick){if(t<this.$vuetify.breakpoint.height/4)return this.d2Reader.previousPage();if(t>.75*this.$vuetify.breakpoint.height)return this.d2Reader.nextPage()}}else if(this.settings.navigationClick){if(e<this.$vuetify.breakpoint.width/4)return this.isRtl?this.d2Reader.nextPage():this.d2Reader.previousPage();if(e>.75*this.$vuetify.breakpoint.width)return this.isRtl?this.d2Reader.previousPage():this.d2Reader.nextPage()}this.toggleToolbars()},async setup(e){this.book=await this.$komgaBooks.getBook(e),this.series=await this.$komgaSeries.getOneSeries(this.book.seriesId);const t=await this.$komgaBooks.getProgression(e),n=de(t,e);this.$route.query.contextId&&this.$route.query.context&&Object.values(I.E).includes(this.$route.query.context)?(this.context={origin:this.$route.query.context,id:this.$route.query.contextId},this.book.context=this.context,(null===this||void 0===this?void 0:this.context.origin)===I.E.READLIST&&(this.contextName=(await this.$komgaReadLists.getOneReadList(this.context.id)).name,document.title=`Komga - ${this.contextName} - ${this.book.metadata.title}`)):document.title=`Komga - ${this.bookTitle}`,this.incognito=!(!this.$route.query.incognito||"true"!==this.$route.query.incognito.toString().toLowerCase());const i=this.fontFamiliesAdditional.map((e=>({type:"style",url:new URL(`${P.Ay.origin}api/v1/fonts/resource/${e}/css`,"file:///home/runner/work/komga/komga/komga-webui/src/views/EpubReader.vue%3Fvue&type=script&lang=ts&").toString(),fontFamily:e})));this.d2Reader=await O.Ay.load({url:new URL((0,P.Cj)(this.bookId)),userSettings:this.settings,storageType:"memory",lastReadingPosition:n,injectables:[{type:"style",url:new URL(r(93680),r.b).toString(),r2before:!0},{type:"style",url:new URL(r(90146),r.b).toString(),r2default:!0},{type:"style",url:new URL(r(33433),r.b).toString(),r2after:!0},{type:"style",url:new URL(r(79736),r.b).toString()},{type:"style",url:new URL(r(60291),r.b).toString()},{type:"style",url:new URL(r(77803),r.b).toString()},...i],requestConfig:{credentials:"include"},attributes:{margin:0,navHeight:10,iframePaddingTop:20,bottomInfoHeight:35},rights:{enableBookmarks:!1,enableAnnotations:!1,enableTTS:!1,enableSearch:!1,enableTimeline:!1,enableDefinitions:!1,enableContentProtection:!1,enableMediaOverlays:!1,enablePageBreaks:!1,autoGeneratePositions:!1,enableLineFocus:!1,customKeyboardEvents:!1,enableHistory:!0,enableCitations:!1,enableConsumption:!1},services:{positions:new URL((0,P.lG)(this.bookId))},api:{updateCurrentLocation:this.updateCurrentLocation,keydownFallthrough:this.keyPressed,clickThrough:this.clickThrough,positionInfo:this.updatePositionInfo,chapterInfo:this.updateChapterInfo,direction:this.updateDirection}}),this.fixedLayout="fixed"===this.d2Reader.publicationLayout,this.tocs.toc=this.d2Reader.tableOfContents,this.tocs.landmarks=this.d2Reader.landmarks,this.tocs.pageList=this.d2Reader.pageList,this.alwaysFullscreen&&this.enterFullscreen();try{(null===this||void 0===this?void 0:this.context.origin)===I.E.READLIST?this.siblingNext=await this.$komgaReadLists.getBookSiblingNext(this.context.id,e):this.siblingNext=await this.$komgaBooks.getBookSiblingNext(e)}catch(o){this.siblingNext={}}try{(null===this||void 0===this?void 0:this.context.origin)===I.E.READLIST?this.siblingPrevious=await this.$komgaReadLists.getBookSiblingPrevious(this.context.id,e):this.siblingPrevious=await this.$komgaBooks.getBookSiblingPrevious(e)}catch(o){this.siblingPrevious={}}},historyBack(){this.d2Reader.historyBack()},historyForward(){this.d2Reader.historyForward()},updateCurrentLocation(e){var t;return this.historyCanGoBack=this.d2Reader.historyCurrentIndex>0,this.historyCanGoForward=this.d2Reader.historyCurrentIndex<(null===(t=this.d2Reader.history)||void 0===t?void 0:t.length)-1,this.markProgress(e),this.currentLocation=e,new Promise((function(t,r){t(e)}))},updatePositionInfo(e){var t,r;this.progressionPage=null===(t=e.displayInfo)||void 0===t?void 0:t.resourceScreenIndex,this.progressionPageCount=null===(r=e.displayInfo)||void 0===r?void 0:r.resourceScreenCount},updateChapterInfo(e){this.progressionTitle=e},updateDirection(e){this.effectiveDirection=e},appearanceClass(e){let t=this.appearance.replace("readium-","").replace("-on","").replace("default","day");return e&&(t+=`-${e}`),t},goToEntry(e){if(void 0!==e.href){const t=new URL(e.href);let r={progression:0},n=e.href;t.hash&&(r={fragment:t.hash.slice(1)},n=e.href.substring(0,e.href.indexOf("#")));let i={href:n,locations:r};this.d2Reader.goTo(i),this.showToc=!1}},closeDialog(){this.showToc?this.showToc=!1:this.showSettings?this.showSettings=!1:this.showToolbars?this.showToolbars=!1:this.closeBook()},closeBook(){this.$router.push({name:this.book.oneshot?"browse-oneshot":"browse-book",params:{bookId:this.bookId.toString(),seriesId:this.book.seriesId},query:{context:this.context.origin,contextId:this.context.id}})},cycleViewingTheme(){const e=(this.appearances.map((e=>e.value)).indexOf(this.settings.appearance)+1)%this.appearances.length,t=this.appearances[e];this.appearance=t.value;const r=this.$t(t.text);this.sendNotification(`${this.$t("epubreader.settings.viewing_theme")}: ${r}`)},changeLayout(e){this.verticalScroll=e;const t=e?this.$t("epubreader.settings.layout_scroll"):this.$t("epubreader.settings.layout_paginated");this.sendNotification(`${this.$t("epubreader.settings.layout")}: ${t}`)},cyclePagination(){if(this.verticalScroll)this.columnCount="auto",this.changeLayout(!1);else{const e=(this.columnCounts.map((e=>e.value)).indexOf(this.settings.columnCount)+1)%this.columnCounts.length,t=this.columnCounts[e];this.columnCount=t.value;const r=this.$t(t.text);this.sendNotification(`${this.$t("epubreader.settings.column_count")}: ${r}`)}},changeFontSize(e){this.fontSize+=e?10:-10},sendNotification(e,t=4e3){this.notification.timeout=t,this.notification.message=e,this.notification.enabled=!0},markProgress:(0,he.debounce)((function(e){this.incognito||this.$komgaBooks.updateProgression(this.bookId,le(e))}),500)}}),fe=pe,ge=(0,U.A)(fe,x,T,!1,null,"0205c6ba",null),me=ge.exports},33060:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},d:function(){return i}});var n=r(2543);function i(e){switch(e.mediaType){case"application/x-rar-compressed":case"application/x-rar-compressed; version=4":return{type:"CBR",color:"#03A9F4"};case"application/zip":return{type:"CBZ",color:"#4CAF50"};case"application/pdf":return{type:"PDF",color:"#FF5722"};case"application/epub+zip":return e.epubIsKepub?{type:"KEPUB",color:"#ff5ab1"}:{type:"EPUB",color:"#ff5ab1"};case"application/x-rar-compressed; version=5":return{type:"RAR5",color:"#000000"};default:return{type:e.mediaType,color:"#000000"}}}function o(e){switch((0,n.lowerCase)(e.mediaProfile)){case"epub":return e.epubDivinaCompatible?"read-book":"read-epub";default:return"read-book"}}},47623:function(e,t,r){"use strict";r.d(t,{A:function(){return d}});var n=r(16684),i=r(78956),o=r(81582),s=r(38937),a=r(7038),l=r(47222),u=r(72006),c=r(69463),d=(0,u.A)(i.A,(0,l.P)(["left","bottom"]),o.A,s.A,a.A).extend({name:"v-badge",props:{avatar:Boolean,bordered:Boolean,color:{type:String,default:"primary"},content:{required:!1},dot:Boolean,label:{type:String,default:"$vuetify.badge"},icon:String,inline:Boolean,offsetX:[Number,String],offsetY:[Number,String],overlap:Boolean,tile:Boolean,transition:{type:String,default:"scale-rotate-transition"},value:{default:!0}},computed:{classes(){return{"v-badge--avatar":this.avatar,"v-badge--bordered":this.bordered,"v-badge--bottom":this.bottom,"v-badge--dot":this.dot,"v-badge--icon":null!=this.icon,"v-badge--inline":this.inline,"v-badge--left":this.left,"v-badge--overlap":this.overlap,"v-badge--tile":this.tile,...this.themeClasses}},computedBottom(){return this.bottom?"auto":this.computedYOffset},computedLeft(){return this.isRtl?this.left?this.computedXOffset:"auto":this.left?"auto":this.computedXOffset},computedRight(){return this.isRtl?this.left?"auto":this.computedXOffset:this.left?this.computedXOffset:"auto"},computedTop(){return this.bottom?this.computedYOffset:"auto"},computedXOffset(){return this.calcPosition(this.offsetX)},computedYOffset(){return this.calcPosition(this.offsetY)},isRtl(){return this.$vuetify.rtl},offset(){return this.overlap?this.dot?8:12:this.dot?2:4},styles(){return this.inline?{}:{bottom:this.computedBottom,left:this.computedLeft,right:this.computedRight,top:this.computedTop}}},methods:{calcPosition(e){return`calc(100% - ${(0,c.Dg)(e||this.offset)})`},genBadge(){const e=this.$vuetify.lang,t=this.$attrs["aria-label"]||e.t(this.label),r=this.setBackgroundColor(this.color,{staticClass:"v-badge__badge",style:this.styles,attrs:{"aria-atomic":this.$attrs["aria-atomic"]||"true","aria-label":t,"aria-live":this.$attrs["aria-live"]||"polite",title:this.$attrs.title,role:this.$attrs.role||"status"},directives:[{name:"show",value:this.isActive}]}),n=this.$createElement("span",r,[this.genBadgeContent()]);return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[n]):n},genBadgeContent(){if(this.dot)return;const e=(0,c.$c)(this,"badge");return e||(this.content?String(this.content):this.icon?this.$createElement(n.A,this.icon):void 0)},genBadgeWrapper(){return this.$createElement("span",{staticClass:"v-badge__wrapper"},[this.genBadge()])}},render(e){const t=[this.genBadgeWrapper()],r=[(0,c.$c)(this)],{"aria-atomic":n,"aria-label":i,"aria-live":o,role:s,title:a,...l}=this.$attrs;return this.inline&&this.left?r.unshift(t):r.push(t),e("span",{staticClass:"v-badge",attrs:l,class:this.classes},r)}})},74697:function(e,t,r){"use strict";r.d(t,{A:function(){return s}});var n=r(87375),i=r(78956),o=r(72006),s=(0,o.A)(n.A,i.A).extend({name:"v-btn-toggle",props:{backgroundColor:String,borderless:Boolean,dense:Boolean,group:Boolean,rounded:Boolean,shaped:Boolean,tile:Boolean},computed:{classes(){return{...n.A.options.computed.classes.call(this),"v-btn-toggle":!0,"v-btn-toggle--borderless":this.borderless,"v-btn-toggle--dense":this.dense,"v-btn-toggle--group":this.group,"v-btn-toggle--rounded":this.rounded,"v-btn-toggle--shaped":this.shaped,"v-btn-toggle--tile":this.tile,...this.themeClasses}}},methods:{genData(){const e=this.setTextColor(this.color,{...n.A.options.methods.genData.call(this)});return this.group?e:this.setBackgroundColor(this.backgroundColor,e)}}})},23879:function(e,t,r){"use strict";r.d(t,{A:function(){return v}});var n=r(13812),i=r(11545),o=r(78956),s=r(28492),a=r(32159),l=r(90826),u=r(64274),c=r(81582),d=r(56809),h=r(8177),p=r(3080),f=r(69463),g=r(72006);const m=(0,g.A)((0,i.A)("left",["isActive","isMobile","miniVariant","expandOnHover","permanent","right","temporary","width"]),o.A,s.A,a.A,l.A,u.A,c.A);var v=m.extend({name:"v-navigation-drawer",directives:{ClickOutside:d.A,Resize:h.A,Touch:p.A},provide(){return{isInNav:"nav"===this.tag}},props:{bottom:Boolean,clipped:Boolean,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,height:{type:[Number,String],default(){return this.app?"100vh":"100%"}},miniVariant:Boolean,miniVariantWidth:{type:[Number,String],default:56},permanent:Boolean,right:Boolean,src:{type:[String,Object],default:""},stateless:Boolean,tag:{type:String,default(){return this.app?"nav":"aside"}},temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},value:null},data:()=>({isMouseover:!1,touchArea:{left:0,right:0},stackMinZIndex:6}),computed:{applicationProperty(){return this.right?"right":"left"},classes(){return{"v-navigation-drawer":!0,"v-navigation-drawer--absolute":this.absolute,"v-navigation-drawer--bottom":this.bottom,"v-navigation-drawer--clipped":this.clipped,"v-navigation-drawer--close":!this.isActive,"v-navigation-drawer--fixed":!this.absolute&&(this.app||this.fixed),"v-navigation-drawer--floating":this.floating,"v-navigation-drawer--is-mobile":this.isMobile,"v-navigation-drawer--is-mouseover":this.isMouseover,"v-navigation-drawer--mini-variant":this.isMiniVariant,"v-navigation-drawer--custom-mini-variant":56!==Number(this.miniVariantWidth),"v-navigation-drawer--open":this.isActive,"v-navigation-drawer--open-on-hover":this.expandOnHover,"v-navigation-drawer--right":this.right,"v-navigation-drawer--temporary":this.temporary,...this.themeClasses}},computedMaxHeight(){if(!this.hasApp)return null;const e=this.$vuetify.application.bottom+this.$vuetify.application.footer+this.$vuetify.application.bar;return this.clipped?e+this.$vuetify.application.top:e},computedTop(){if(!this.hasApp)return 0;let e=this.$vuetify.application.bar;return e+=this.clipped?this.$vuetify.application.top:0,e},computedTransform(){return this.isActive?0:this.isBottom||this.right?100:-100},computedWidth(){return this.isMiniVariant?this.miniVariantWidth:this.width},hasApp(){return this.app&&!this.isMobile&&!this.temporary},isBottom(){return this.bottom&&this.isMobile},isMiniVariant(){return!this.expandOnHover&&this.miniVariant||this.expandOnHover&&!this.isMouseover},isMobile(){return!this.stateless&&!this.permanent&&a.A.options.computed.isMobile.call(this)},reactsToClick(){return!this.stateless&&!this.permanent&&(this.isMobile||this.temporary)},reactsToMobile(){return this.app&&!this.disableResizeWatcher&&!this.permanent&&!this.stateless&&!this.temporary},reactsToResize(){return!this.disableResizeWatcher&&!this.stateless},reactsToRoute(){return!this.disableRouteWatcher&&!this.stateless&&(this.temporary||this.isMobile)},showOverlay(){return!this.hideOverlay&&this.isActive&&(this.isMobile||this.temporary)},styles(){const e=this.isBottom?"translateY":"translateX";return{height:(0,f.Dg)(this.height),top:this.isBottom?"auto":(0,f.Dg)(this.computedTop),maxHeight:null!=this.computedMaxHeight?`calc(100% - ${(0,f.Dg)(this.computedMaxHeight)})`:void 0,transform:`${e}(${(0,f.Dg)(this.computedTransform,"%")})`,width:(0,f.Dg)(this.computedWidth)}}},watch:{$route:"onRouteChange",isActive(e){this.$emit("input",e)},isMobile(e,t){!e&&this.isActive&&!this.temporary&&this.removeOverlay(),null!=t&&this.reactsToResize&&this.reactsToMobile&&(this.isActive=!e)},permanent(e){e&&(this.isActive=!0)},showOverlay(e){e?this.genOverlay():this.removeOverlay()},value(e){this.permanent||(null!=e?e!==this.isActive&&(this.isActive=e):this.init())},expandOnHover:"updateMiniVariant",isMouseover(e){this.updateMiniVariant(!e)}},beforeMount(){this.init()},methods:{calculateTouchArea(){const e=this.$el.parentNode;if(!e)return;const t=e.getBoundingClientRect();this.touchArea={left:t.left+50,right:t.right-50}},closeConditional(){return this.isActive&&!this._isDestroyed&&this.reactsToClick},genAppend(){return this.genPosition("append")},genBackground(){const e={height:"100%",width:"100%",src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img(e):this.$createElement(n.A,{props:e});return this.$createElement("div",{staticClass:"v-navigation-drawer__image"},[t])},genDirectives(){const e=[{name:"click-outside",value:{handler:()=>{this.isActive=!1},closeConditional:this.closeConditional,include:this.getOpenDependentElements}}];return this.touchless||this.stateless||e.push({name:"touch",value:{parent:!0,left:this.swipeLeft,right:this.swipeRight}}),e},genListeners(){const e={mouseenter:()=>this.isMouseover=!0,mouseleave:()=>this.isMouseover=!1,transitionend:e=>{if(e.target!==e.currentTarget)return;this.$emit("transitionend",e);const t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}};return this.miniVariant&&(e.click=()=>this.$emit("update:mini-variant",!1)),e},genPosition(e){const t=(0,f.$c)(this,e);return t?this.$createElement("div",{staticClass:`v-navigation-drawer__${e}`},t):t},genPrepend(){return this.genPosition("prepend")},genContent(){return this.$createElement("div",{staticClass:"v-navigation-drawer__content"},this.$slots.default)},genBorder(){return this.$createElement("div",{staticClass:"v-navigation-drawer__border"})},init(){this.permanent?this.isActive=!0:this.stateless||null!=this.value?this.isActive=this.value:this.temporary||(this.isActive=!this.isMobile)},onRouteChange(){this.reactsToRoute&&this.closeConditional()&&(this.isActive=!1)},swipeLeft(e){this.isActive&&this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(this.right&&e.touchstartX>=this.touchArea.right?this.isActive=!0:!this.right&&this.isActive&&(this.isActive=!1)))},swipeRight(e){this.isActive&&!this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(!this.right&&e.touchstartX<=this.touchArea.left?this.isActive=!0:this.right&&this.isActive&&(this.isActive=!1)))},updateApplication(){if(!this.isActive||this.isMobile||this.temporary||!this.$el)return 0;const e=Number(this.miniVariant?this.miniVariantWidth:this.width);return isNaN(e)?this.$el.clientWidth:e},updateMiniVariant(e){this.expandOnHover&&this.miniVariant!==e&&this.$emit("update:mini-variant",e)}},render(e){const t=[this.genPrepend(),this.genContent(),this.genAppend(),this.genBorder()];return(this.src||(0,f.$c)(this,"img"))&&t.unshift(this.genBackground()),e(this.tag,this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,directives:this.genDirectives(),on:this.genListeners()}),t)}})},11545:function(e,t,r){"use strict";r.d(t,{A:function(){return o}});var n=r(47222),i=r(72006);function o(e,t=[]){return(0,i.A)((0,n.P)(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty(){return e}},watch:{app(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty(e,t){this.$vuetify.application.unregister(this._uid,t)}},activated(){this.callUpdate()},created(){for(let e=0,r=t.length;e<r;e++)this.$watch(t[e],this.callUpdate);this.callUpdate()},mounted(){this.callUpdate()},deactivated(){this.removeApplication()},destroyed(){this.removeApplication()},methods:{callUpdate(){this.app&&this.$vuetify.application.register(this._uid,this.applicationProperty,this.updateApplication())},removeApplication(e=!1){(e||this.app)&&this.$vuetify.application.unregister(this._uid,this.applicationProperty)},updateApplication:()=>0}})}},32159:function(e,t,r){"use strict";var n=r(73803),i=r(85471);t.A=i.Ay.extend({name:"mobile",props:{mobileBreakpoint:{type:[Number,String],default(){return this.$vuetify?this.$vuetify.breakpoint.mobileBreakpoint:void 0},validator:e=>!isNaN(Number(e))||["xs","sm","md","lg","xl"].includes(String(e))}},computed:{isMobile(){const{mobile:e,width:t,name:r,mobileBreakpoint:n}=this.$vuetify.breakpoint;if(n===this.mobileBreakpoint)return e;const i=parseInt(this.mobileBreakpoint,10),o=!isNaN(i);return o?t<i:r===this.mobileBreakpoint}},created(){this.$attrs.hasOwnProperty("mobile-break-point")&&(0,n.CI)("mobile-break-point","mobile-breakpoint",this)}})},64274:function(e,t,r){"use strict";var n=r(85471);t.A=n.Ay.extend({name:"ssr-bootable",data:()=>({isBooted:!1}),mounted(){window.requestAnimationFrame((()=>{this.$el.setAttribute("data-booted","true"),this.isBooted=!0}))}})},7038:function(e,t,r){"use strict";var n=r(85471);t.A=n.Ay.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}})},60291:function(e,t,r){"use strict";e.exports=r.p+"css/2986d8ebe4b35a7b.css"},79736:function(e,t,r){"use strict";e.exports=r.p+"css/1b735ed6bb5ddaec.css"},77803:function(e,t,r){"use strict";e.exports=r.p+"css/cfe869b86fa614f9.css"},33433:function(e,t,r){"use strict";e.exports=r.p+"css/851cc890e268a433.css"},93680:function(e,t,r){"use strict";e.exports=r.p+"css/18c99c961e919bae.css"},90146:function(e,t,r){"use strict";e.exports=r.p+"css/2d29c6ddf8cc6ca2.css"}}]);
//# sourceMappingURL=read-epub.e12da25f.js.map