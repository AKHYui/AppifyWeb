"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[5592],{35918:function(t,e,s){s.r(e),s.d(e,{default:function(){return $}});var i=s(73847),r=s(15137),o=s(57471),n=s(1231),a=s(70793),l=s(19292),c=s(16684),h=s(22369),u=s(86315),f=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(a.A,{staticClass:"pa-6",attrs:{fluid:""}},[e(l.A,{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.booksData,options:t.options,"server-items-length":t.totalBooks,loading:t.loading,"sort-by":"media.status","multi-sort":"","footer-props":{itemsPerPageOptions:[20,50,100]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"top",fn:function(){return[e(a.A,[e(h.A,[e(n.A,{attrs:{cols:"12",sm:"6"}},[e(o.A,{attrs:{color:"primary",mandatory:"",multiple:""},model:{value:t.filterStatus,callback:function(e){t.filterStatus=e},expression:"filterStatus"}},[e(r.A,{attrs:{filter:"",value:"error"}},[t._v(t._s(t.$t("common.error")))]),e(r.A,{attrs:{filter:"",value:"unsupported"}},[t._v(t._s(t.$t("book_card.unsupported")))])],1)],1),e(n.A,{attrs:{cols:"12",sm:"6"}},[e(u.A,{attrs:{items:t.filterLibrariesOptions,label:t.$t("navigation.libraries"),clearable:"",solo:"",multiple:"",chips:"","deletable-chips":""},model:{value:t.filterLibraries,callback:function(e){t.filterLibraries=e},expression:"filterLibraries"}})],1)],1)],1)]},proxy:!0},{key:"item.libraryId",fn:function({item:e}){return[t._v(" "+t._s(t.getLibraryName(e.libraryId))+" ")]}},{key:"item.name",fn:function({item:s}){return[e("router-link",{attrs:{to:{name:s.oneshot?"browse-oneshot":"browse-book",params:{bookId:s.id,seriesId:s.seriesId}}}},[t._v(" "+t._s(s.name)+" ")])]}},{key:"item.deleted",fn:function({item:s}){return[s.deleted?e(r.A,{attrs:{label:"",small:"",color:"error"}},[t._v(" "+t._s(t.$t("common.unavailable"))+" ")]):t._e()]}},{key:"footer.prepend",fn:function(){return[e(i.A,{attrs:{icon:""},on:{click:t.loadBooks}},[e(c.A,[t._v("mdi-refresh")])],1)]},proxy:!0}])})],1)},d=[],p=(s(28743),s(85471)),v=s(79957),m=s(23850),g=s(19447),w=p.Ay.extend({name:"MediaAnalysis",data:function(){return{books:[],totalBooks:0,loading:!0,options:{},filterStatus:["error","unsupported"],filterLibraries:[]}},watch:{options:{handler(){this.loadBooks()},deep:!0},filterStatus(){this.loadBooks()},filterLibraries(){this.loadBooks()}},computed:{filterLibrariesOptions(){return this.$store.state.komgaLibraries.libraries.map((t=>({text:t.name,value:t.id})))},headers(){return[{text:this.$i18n.t("common.library").toString(),value:"libraryId",sortable:!1},{text:this.$i18n.t("media_analysis.name").toString(),value:"name"},{text:this.$i18n.t("media_analysis.status").toString(),value:"media.status"},{text:this.$i18n.t("media_analysis.comment").toString(),value:"media.comment"},{text:this.$i18n.t("media_analysis.media_type").toString(),value:"media.mediaType"},{text:this.$i18n.t("media_analysis.url").toString(),value:"url"},{text:this.$i18n.t("media_analysis.size").toString(),value:"size"},{text:"",value:"deleted",groupable:!1,sortable:!1}]},booksData(){return this.books.map((t=>({...t,media:{...t.media,comment:(0,m.q)(t.media.comment),status:this.$t(`enums.media_status.${t.media.status}`).toString()}})))}},methods:{getLibraryName(t){return this.$store.getters.getLibraryById(t).name},async loadBooks(){this.loading=!0;const{sortBy:t,sortDesc:e,page:s,itemsPerPage:i}=this.options,r={page:s-1,size:i,sort:[]};for(let a=0;a<t.length;a++)r.sort.push(`${t[a]},${e[a]?"desc":"asc"}`);const o=[];this.filterStatus.includes("error")&&o.push(new g.gX(new g.Tr(v.nl.ERROR))),this.filterStatus.includes("unsupported")&&o.push(new g.gX(new g.Tr(v.nl.UNSUPPORTED)));const n=[];if(this.filterLibraries.forEach((t=>n.push(new g.KU(new g.Tr(t))))),this.filterStatus.length>0){const t=await this.$komgaBooks.getBooksList({condition:new g.FY([new g.a4(o),new g.a4(n)])},r);this.totalBooks=t.totalElements,this.$store.commit("setBooksToCheck",t.totalElements),this.books=t.content}this.loading=!1}}}),A=w,y=s(81656),b=(0,y.A)(A,f,d,!1,null,"72a964ee",null),$=b.exports},23850:function(t,e,s){s.d(e,{q:function(){return r}});s(62554);var i=s(80061);function r(t){const e=t.match(/ERR_\d{4}/g);let s=t;return e&&e.forEach((t=>s=s.replace(t,i.A.t(`error_codes.${t}`).toString()))),s}},79957:function(t,e,s){var i,r,o,n,a;s.d(e,{Er:function(){return a},RJ:function(){return o},Zd:function(){return n},nl:function(){return r},s3:function(){return i}}),function(t){t["LEFT_TO_RIGHT"]="LEFT_TO_RIGHT",t["RIGHT_TO_LEFT"]="RIGHT_TO_LEFT",t["VERTICAL"]="VERTICAL",t["WEBTOON"]="WEBTOON"}(i||(i={})),function(t){t["READY"]="READY",t["UNKNOWN"]="UNKNOWN",t["ERROR"]="ERROR",t["UNSUPPORTED"]="UNSUPPORTED",t["OUTDATED"]="OUTDATED"}(r||(r={})),function(t){t["UNREAD"]="UNREAD",t["IN_PROGRESS"]="IN_PROGRESS",t["READ"]="READ"}(o||(o={})),function(t){t["MOVE"]="MOVE",t["COPY"]="COPY",t["HARDLINK"]="HARDLINK"}(n||(n={})),function(t){t["DIVINA"]="DIVINA",t["PDF"]="PDF",t["EPUB"]="EPUB"}(a||(a={}))},19447:function(t,e,s){s.d(e,{$Z:function(){return S},BK:function(){return v},CM:function(){return A},Cg:function(){return N},Dg:function(){return _},F2:function(){return $},FY:function(){return n},H2:function(){return p},KU:function(){return c},NE:function(){return I},NY:function(){return l},Ne:function(){return R},SA:function(){return b},Tr:function(){return E},Vf:function(){return y},WL:function(){return O},YX:function(){return k},_f:function(){return T},a4:function(){return o},cQ:function(){return x},ch:function(){return C},f$:function(){return u},gS:function(){return L},gX:function(){return d},iT:function(){return m},kq:function(){return h},oF:function(){return g},oy:function(){return w},pF:function(){return P},qE:function(){return f},t7:function(){return D},y:function(){return a}});var i,r=s(32362);class o{constructor(t){(0,r.A)(this,"anyOf",void 0),this.anyOf=t}}class n{constructor(t){(0,r.A)(this,"allOf",void 0),this.allOf=t}}class a{constructor(t){(0,r.A)(this,"anyOf",void 0),this.anyOf=t}}class l{constructor(t){(0,r.A)(this,"allOf",void 0),this.allOf=t}}class c{constructor(t){(0,r.A)(this,"libraryId",void 0),this.libraryId=t}}class h{constructor(t){(0,r.A)(this,"seriesId",void 0),this.seriesId=t}}class u{constructor(t){(0,r.A)(this,"seriesStatus",void 0),this.seriesStatus=t}}class f{constructor(t){(0,r.A)(this,"readStatus",void 0),this.readStatus=t}}class d{constructor(t){(0,r.A)(this,"mediaStatus",void 0),this.mediaStatus=t}}class p{constructor(t){(0,r.A)(this,"mediaProfile",void 0),this.mediaProfile=t}}class v{constructor(t){(0,r.A)(this,"genre",void 0),this.genre=t}}class m{constructor(t){(0,r.A)(this,"tag",void 0),this.tag=t}}class g{constructor(t){(0,r.A)(this,"language",void 0),this.language=t}}class w{constructor(t){(0,r.A)(this,"publisher",void 0),this.publisher=t}}class A{constructor(t){(0,r.A)(this,"ageRating",void 0),this.ageRating=t}}class y{constructor(t){(0,r.A)(this,"releaseDate",void 0),this.releaseDate=t}}class b{constructor(t){(0,r.A)(this,"sharingLabel",void 0),this.sharingLabel=t}}class ${constructor(t){(0,r.A)(this,"complete",void 0),this.complete=t}}class O{constructor(t){(0,r.A)(this,"oneShot",void 0),this.oneShot=t}}class S{constructor(t){(0,r.A)(this,"author",void 0),this.author=t}}class _{constructor(t){(0,r.A)(this,"poster",void 0),this.poster=t}}class k{constructor(t){(0,r.A)(this,"titleSort",void 0),this.titleSort=t}}(function(t){t["GENERATED"]="GENERATED",t["SIDECAR"]="SIDECAR",t["USER_UPLOADED"]="USER_UPLOADED"})(i||(i={}));class E{constructor(t){(0,r.A)(this,"operator","is"),(0,r.A)(this,"value",void 0),this.value=t}}class T{constructor(t){(0,r.A)(this,"operator","isNot"),(0,r.A)(this,"value",void 0),this.value=t}}class x{constructor(t){(0,r.A)(this,"operator","before"),(0,r.A)(this,"dateTime",void 0),this.dateTime=t}}class R{constructor(t){(0,r.A)(this,"operator","after"),(0,r.A)(this,"dateTime",void 0),this.dateTime=t}}class N{constructor(){(0,r.A)(this,"operator","isNull")}}class D{constructor(){(0,r.A)(this,"operator","isNotNull")}}class I{constructor(){(0,r.A)(this,"operator","isTrue")}}class C{constructor(){(0,r.A)(this,"operator","isFalse")}}class P{constructor(t){(0,r.A)(this,"operator","beginsWith"),(0,r.A)(this,"value",void 0),this.value=t}}class L{constructor(t){(0,r.A)(this,"operator","doesNotBeginWith"),(0,r.A)(this,"value",void 0),this.value=t}}},57471:function(t,e,s){s.d(e,{A:function(){return n}});var i=s(9854),r=s(78956),o=s(72006),n=(0,o.A)(i.Ql,r.A).extend({name:"v-chip-group",provide(){return{chipGroup:this}},props:{column:Boolean},computed:{classes(){return{...i.Ql.options.computed.classes.call(this),"v-chip-group":!0,"v-chip-group--column":this.column}}},watch:{column(t){t&&(this.scrollOffset=0),this.$nextTick(this.onResize)}},methods:{genData(){return this.setTextColor(this.color,{...i.Ql.options.methods.genData.call(this)})}}})},1231:function(t,e,s){s(40125);var i=s(85471),r=s(20910),o=s(69463);const n=["sm","md","lg","xl"],a=(()=>n.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),l=(()=>n.reduce(((t,e)=>(t["offset"+(0,o.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>n.reduce(((t,e)=>(t["order"+(0,o.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),h={col:Object.keys(a),offset:Object.keys(l),order:Object.keys(c)};function u(t,e,s){let i=t;if(null!=s&&!1!==s){if(e){const s=e.replace(t,"");i+=`-${s}`}return"col"!==t||""!==s&&!0!==s?(i+=`-${s}`,i.toLowerCase()):i.toLowerCase()}}const f=new Map;e.A=i.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...a,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:s,children:i,parent:o}){let n="";for(const r in e)n+=String(e[r]);let a=f.get(n);if(!a){let t;for(t in a=[],h)h[t].forEach((s=>{const i=e[s],r=u(t,s,i);r&&a.push(r)}));const s=a.some((t=>t.startsWith("col-")));a.push({col:!s||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),f.set(n,a)}return t(e.tag,(0,r.Ay)(s,{class:a}),i)}})},9854:function(t,e,s){s.d(e,{Ql:function(){return p}});var i=s(54582),r=s(80700),o=s(94095),n=s(32159),a=s(8177),l=s(3080),c=s(72006),h=s(69463);function u(t){const e=.501,s=Math.abs(t);return Math.sign(t)*(s/((1/e-2)*(1-s)+1))}function f(t,e,s,i){const r=t.clientWidth,o=s?e.content-t.offsetLeft-r:t.offsetLeft;s&&(i=-i);const n=e.wrapper+i,a=r+o,l=.4*r;return o<=i?i=Math.max(o-l,0):n<=a&&(i=Math.min(i-(n-a-l),e.content-e.wrapper)),s?-i:i}function d(t,e,s){const{offsetLeft:i,clientWidth:r}=t;if(s){const t=e.content-i-r/2-e.wrapper/2;return-Math.min(e.content-e.wrapper,Math.max(0,t))}{const t=i+r/2-e.wrapper/2;return Math.min(e.content-e.wrapper,Math.max(0,t))}}const p=(0,c.A)(o.C,n.A).extend({name:"base-slide-group",directives:{Resize:a.A,Touch:l.A},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},showArrows:{type:[Boolean,String],validator:t=>"boolean"===typeof t||["always","never","desktop","mobile"].includes(t)}},data:()=>({isOverflowing:!1,resizeTimeout:0,startX:0,isSwipingHorizontal:!1,isSwiping:!1,scrollOffset:0,widths:{content:0,wrapper:0}}),computed:{canTouch(){return"undefined"!==typeof window},__cachedNext(){return this.genTransition("next")},__cachedPrev(){return this.genTransition("prev")},classes(){return{...o.C.options.computed.classes.call(this),"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing}},hasAffixes(){switch(this.showArrows){case"always":return!0;case"desktop":return!this.isMobile;case!0:return this.isOverflowing||Math.abs(this.scrollOffset)>0;case"mobile":return this.isMobile||this.isOverflowing||Math.abs(this.scrollOffset)>0;case"never":return!1;default:return!this.isMobile&&(this.isOverflowing||Math.abs(this.scrollOffset)>0)}},hasNext(){if(!this.hasAffixes)return!1;const{content:t,wrapper:e}=this.widths;return t>Math.abs(this.scrollOffset)+e},hasPrev(){return this.hasAffixes&&0!==this.scrollOffset}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset(t){this.$vuetify.rtl&&(t=-t);let e=t<=0?u(-t):t>this.widths.content-this.widths.wrapper?-(this.widths.content-this.widths.wrapper)+u(this.widths.content-this.widths.wrapper-t):-t;this.$vuetify.rtl&&(e=-e),this.$refs.content.style.transform=`translateX(${e}px)`}},mounted(){if("undefined"!==typeof ResizeObserver){const t=new ResizeObserver((()=>{this.onResize()}));t.observe(this.$el),t.observe(this.$refs.content),this.$on("hook:destroyed",(()=>{t.disconnect()}))}else{let t=0;this.$on("hook:beforeUpdate",(()=>{var e;t=((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length})),this.$on("hook:updated",(()=>{var e;t!==((null===(e=this.$refs.content)||void 0===e?void 0:e.children)||[]).length&&this.setWidths()}))}},methods:{onScroll(){this.$refs.wrapper.scrollLeft=0},onFocusin(t){if(this.isOverflowing)for(const e of(0,h.K9)(t))for(const t of this.items)if(t.$el===e)return void(this.scrollOffset=f(t.$el,this.widths,this.$vuetify.rtl,this.scrollOffset))},genNext(){const t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:()=>this.onAffixClick("next")},key:"next"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content",on:{focusin:this.onFocusin}},this.$slots.default)},genData(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon(t){let e=t;this.$vuetify.rtl&&"prev"===t?e="next":this.$vuetify.rtl&&"next"===t&&(e="prev");const s=`${t[0].toUpperCase()}${t.slice(1)}`,r=this[`has${s}`];return this.showArrows||r?this.$createElement(i.A,{props:{disabled:!r}},this[`${e}Icon`]):null},genPrev(){const t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:()=>this.onAffixClick("prev")},key:"prev"},[t])},genTransition(t){return this.$createElement(r.mM,[this.genIcon(t)])},genWrapper(){return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:t=>this.overflowCheck(t,this.onTouchStart),move:t=>this.overflowCheck(t,this.onTouchMove),end:t=>this.overflowCheck(t,this.onTouchEnd)}}],ref:"wrapper",on:{scroll:this.onScroll}},[this.genContent()])},calculateNewOffset(t,e,s,i){const r=s?-1:1,o=r*i+("prev"===t?-1:1)*e.wrapper;return r*Math.max(Math.min(o,e.content-e.wrapper),0)},onAffixClick(t){this.$emit(`click:${t}`),this.scrollTo(t)},onResize(){this._isDestroyed||this.setWidths()},onTouchStart(t){const{content:e}=this.$refs;this.startX=this.scrollOffset+t.touchstartX,e.style.setProperty("transition","none"),e.style.setProperty("willChange","transform")},onTouchMove(t){if(this.canTouch){if(!this.isSwiping){const e=t.touchmoveX-t.touchstartX,s=t.touchmoveY-t.touchstartY;this.isSwipingHorizontal=Math.abs(e)>Math.abs(s),this.isSwiping=!0}this.isSwipingHorizontal&&(this.scrollOffset=this.startX-t.touchmoveX,document.documentElement.style.overflowY="hidden")}},onTouchEnd(){if(!this.canTouch)return;const{content:t,wrapper:e}=this.$refs,s=t.clientWidth-e.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-s&&(this.scrollOffset=-s):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=s&&(this.scrollOffset=s),this.isSwiping=!1,document.documentElement.style.removeProperty("overflow-y")},overflowCheck(t,e){t.stopPropagation(),this.isOverflowing&&e(t)},scrollIntoView(){if(!this.selectedItem&&this.items.length){const t=this.items[this.items.length-1].$el.getBoundingClientRect(),e=this.$refs.wrapper.getBoundingClientRect();(this.$vuetify.rtl&&e.right<t.right||!this.$vuetify.rtl&&e.left>t.left)&&this.scrollTo("prev")}this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=d(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=f(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},scrollTo(t){this.scrollOffset=this.calculateNewOffset(t,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths(){window.requestAnimationFrame((()=>{if(this._isDestroyed)return;const{content:t,wrapper:e}=this.$refs;this.widths={content:t?t.clientWidth:0,wrapper:e?e.clientWidth:0},this.isOverflowing=this.widths.wrapper+1<this.widths.content,this.scrollIntoView()}))}},render(t){return t("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}});p.extend({name:"v-slide-group",provide(){return{slideGroup:this}}})}}]);
//# sourceMappingURL=media-analysis.16a0c3d7.js.map