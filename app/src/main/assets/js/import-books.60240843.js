"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[1037],{1324:function(t,e,i){i.d(e,{A:function(){return u}});var s=i(3224),o=i(16684),a=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",{staticClass:"text-center"},[e(s.A,{attrs:{color:"contrast-1",size:t.size}},[e("div",[""!==t.icon?e(o.A,{attrs:{color:t.iconColor,size:t.iconSize}},[t._v(t._s(t.icon)+" ")]):t._e(),e("h1",{staticClass:"text-h5"},[t._v(t._s(t.title))]),e("p",{staticClass:"text-body-1"},[t._v(t._s(t.subTitle))]),t._t("default")],2)])],1)},n=[],r=i(85471),l=r.Ay.extend({name:"EmptyState",props:{title:String,subTitle:String,icon:String,iconColor:String,iconSize:{type:[Number,String],default:140},size:{type:[Number,String],default:400}}}),c=l,d=i(81656),h=(0,d.A)(c,a,n,!1,null,"64f4a2b5",null),u=h.exports},24636:function(t,e,i){i.d(e,{A:function(){return h}});var s=i(16684),o=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.$vuetify.rtl?e(s.A,[t._v(t._s(t.rtl))]):e(s.A,[t._v(t._s(t.icon))])},a=[],n=i(85471),r=n.Ay.extend({name:"RtlIcon",props:{icon:{type:String,required:!0},rtl:{type:String,required:!0}}}),l=r,c=i(81656),d=(0,c.A)(l,o,a,!1,null,"56a7313c",null),h=d.exports},10685:function(t,e,i){i.d(e,{A:function(){return P}});var s=i(73847),o=i(30089),a=i(21253),n=i(92872),r=i(39975),l=i(16684),c=i(18748),d=i(94026),h=i(69791),u=i(45475),g=i(40005),m=i(68069),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(n.A,{attrs:{"max-width":"450",scrollable:""},model:{value:t.modalFileBrowser,callback:function(e){t.modalFileBrowser=e},expression:"modalFileBrowser"}},[e(o.A,[e(a.ri,[t._v(t._s(t.dialogTitle))]),e(a.OQ,{staticStyle:{height:"450px"}},[e(m.A,{attrs:{readonly:""},model:{value:t.selectedPath,callback:function(e){t.selectedPath=e},expression:"selectedPath"}}),e(c.A,{attrs:{elevation:"3",dense:""}},[t.directoryListing.hasOwnProperty("parent")?[e(d.A,{on:{click:function(e){return e.preventDefault(),t.selectParent(t.directoryListing.parent)}}},[e(u.A,[e(l.A,[t._v("mdi-arrow-left")])],1),e(h.pr,[e(h.UZ,[t._v(t._s(t.$t("dialog.file_browser.parent_directory")))])],1)],1),e(r.A)]:t._e(),t._l(t.directoryListing.directories,(function(i,s){return e("div",{key:s},[e(d.A,{on:{click:function(e){return e.preventDefault(),t.select(i)}}},[e(u.A,[e(l.A,[t._v(t._s("directory"===i.type?"mdi-folder":"mdi-file"))])],1),e(h.pr,[e(h.UZ,[t._v(" "+t._s(i.name)+" ")])],1)],1),s!==t.directoryListing.directories.length-1?e(r.A):t._e()],1)})),t._l(t.directoryListing.files,(function(i,s){return e("div",{key:s},[e(d.A,{on:{click:function(e){return e.preventDefault(),t.select(i)}}},[e(u.A,[e(l.A,[t._v(t._s("directory"===i.type?"mdi-folder":"mdi-file"))])],1),e(h.pr,[e(h.UZ,[t._v(" "+t._s(i.name)+" ")])],1)],1),s!==t.directoryListing.files.length-1?e(r.A):t._e()],1)}))],2)],1),e(a.SL,[e(g.A),e(s.A,{attrs:{text:""},on:{click:t.dialogCancel}},[t._v(t._s(t.$t("dialog.file_browser.button_cancel")))]),e(s.A,{attrs:{color:"primary",disabled:!t.selectedPath},on:{click:t.dialogConfirm}},[t._v(t._s(t.confirmText)+" ")])],1)],1)],1)},f=[],v=i(85471),_=i(52846),b=v.Ay.extend({name:"FileBrowserDialog",data:()=>({directoryListing:{},selectedPath:"",modalFileBrowser:!1}),watch:{value(t){t&&this.dialogInit(),this.modalFileBrowser=t},modalFileBrowser(t){!t&&this.dialogCancel()}},props:{value:Boolean,path:{type:String,required:!1},showFiles:{type:Boolean,default:!1},dialogTitle:{type:String,default:function(){return this.$t("dialog.file_browser.dialog_title_default").toString()}},confirmText:{type:String,default:function(){return this.$t("dialog.file_browser.button_confirm_default").toString()}}},methods:{dialogInit(){try{this.getDirs(this.path),this.selectedPath=this.path}catch(t){this.getDirs()}},dialogCancel(){this.$emit("input",!1)},dialogConfirm(){this.$emit("input",!1),this.$emit("update:path",this.selectedPath),this.$emit("confirm")},async getDirs(t){try{this.directoryListing=await this.$komgaFileSystem.getDirectoryListing(t,this.showFiles)}catch(e){this.$eventHub.$emit(_.ff,{message:e.message})}},selectParent(t){this.selectedPath=t,this.getDirs(t)},select(t){this.selectedPath=t.path,"directory"==t.type&&this.getDirs(t.path)}}}),y=b,k=i(81656),A=(0,k.A)(y,p,f,!1,null,"0f82a890",null),P=A.exports},66787:function(t,e,i){i.r(e),i.d(e,{default:function(){return mt}});var s=i(90623),o=i(73847),a=i(72710),n=i(1231),r=i(70793),l=i(39975),c=i(16684),d=i(22369),h=i(86315),u=i(59807),g=i(40005),m=i(68069),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(r.A,{staticClass:"pa-6",attrs:{fluid:""}},[e(s.A,{staticClass:"body-2",attrs:{type:"info",text:"",dismissible:""}},[e("div",[t._v(t._s(t.$t("book_import.info_part1")))]),e("div",{staticClass:"mt-2"},[t._v(t._s(t.$t("book_import.info_part2")))])]),e(d.A,{attrs:{align:"center"}},[e(n.A,{attrs:{cols:"12",sm:""}},[e(m.A,{attrs:{clearable:"",label:t.$t("book_import.field_import_path")},model:{value:t.importPath,callback:function(e){t.importPath=e},expression:"importPath"}})],1),e(n.A,{attrs:{cols:"auto"}},[e("file-browser-dialog",{attrs:{path:t.importPath},on:{"update:path":function(e){t.importPath=e}},model:{value:t.modalFileBrowser,callback:function(e){t.modalFileBrowser=e},expression:"modalFileBrowser"}}),e(o.A,{on:{click:function(e){t.modalFileBrowser=!0}}},[t._v(t._s(t.$t("book_import.button_browse")))])],1),e(n.A,{attrs:{cols:"auto"}},[e(o.A,{attrs:{color:"primary",disabled:!t.importPath},on:{click:t.scanBooks}},[t._v(t._s(t.$t("book_import.button_scan"))+" ")])],1)],1),t.scanned&&0===t.transientBooks.length?e("empty-state",{attrs:{title:t.$t("book_import.no_files_found"),"sub-title":t.$t("book_import.try_another_directory"),"icon-color":"secondary",icon:"mdi-book-search"}}):t._e(),t.transientBooks.length>0?[e(l.A),e(u.A,[e("thead",{staticClass:"font-weight-medium"},[e("tr",[e("td",[e(a.A,{attrs:{indeterminate:1===t.globalSelect},model:{value:t.globalSelect,callback:function(e){t.globalSelect=e},expression:"globalSelect"}})],1),e("td",[t._v(t._s(t.$t("book_import.table.file_name")))]),e("td"),e("td",[t._v(t._s(t.$t("book_import.table.series")))]),e("td",[t._v(t._s(t.$t("book_import.table.number")))]),e("td"),e("td"),e("td"),e("td",[t._v(t._s(t.$t("book_import.table.destination_name")))]),e("td",[e(c.A,[t._v("mdi-alert-circle-outline")])],1)])]),t._l(t.transientBooks,(function(i,s){return e("tbody",{key:s},[e("file-import-row",{attrs:{book:i,series:t.selected.includes(s)?t.selectedSeries:void 0,payload:t.payloads[s]},on:{"update:payload":function(e){return t.$set(t.payloads,s,e)}}},[e(a.A,{attrs:{value:s},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1)}))],2),e(d.A,{attrs:{align:"center"}},[e(n.A,{attrs:{cols:"3"}},[e(h.A,{attrs:{items:t.copyModes},model:{value:t.copyMode,callback:function(e){t.copyMode=e},expression:"copyMode"}})],1),e(n.A,{attrs:{cols:"auto"}},[e(o.A,{attrs:{disabled:0===t.globalSelect},on:{click:function(e){t.modalSeriesPicker=!0}}},[t._v(" "+t._s(t.$t("book_import.button_select_series"))+" ")]),e("series-picker-dialog",{attrs:{series:t.selectedSeries,"include-oneshots":!1},on:{"update:series":function(e){t.selectedSeries=e}},model:{value:t.modalSeriesPicker,callback:function(e){t.modalSeriesPicker=e},expression:"modalSeriesPicker"}})],1),e(g.A),e(n.A,{attrs:{cols:"auto"}},[e(o.A,{attrs:{color:t.importFinished?"success":"primary",disabled:0===t.payloadBatch.books.length},on:{click:t.performImport}},[t.importFinished?e(c.A,{attrs:{left:""}},[t._v("mdi-check")]):t._e(),t._v(" "+t._s(t.$t("book_import.button_import"))+" ")],1)],1)],1)]:t._e()],2)},f=[],v=i(85471),_=i(10685),b=i(18201),y=i(84551),k=function(){var t,e=this,i=e._self._c;e._self._setupProxy;return e.book?i("tr",[i("td",[e._t("default")],2),i("td",[e._v(e._s(e.book.name))]),i("td",[e.bookAnalyzed?[i(y.A,{attrs:{bottom:"",disabled:!e.status.message},scopedSlots:e._u([{key:"activator",fn:function({on:t}){return[i(c.A,e._g({attrs:{color:e.status.color}},t),[e._v(e._s(e.status.icon))])]}}],null,!1,1407416942)},[e._v(" "+e._s(e.convertErrorCodes(e.status.message))+" ")])]:i(b.A,{attrs:{indeterminate:"",color:"primary",size:20,width:2}})],2),i("td",{staticStyle:{cursor:"pointer"},on:{click:function(t){e.modalSeriesPicker=!0}}},[e.selectedSeries?[e._v(e._s(e.selectedSeries.title))]:[i("div",{staticClass:"missing",staticStyle:{height:"2em"}})],i("series-picker-dialog",{attrs:{"include-oneshots":!0},on:{"update:series":e.pickedSeries},model:{value:e.modalSeriesPicker,callback:function(t){e.modalSeriesPicker=t},expression:"modalSeriesPicker"}})],2),i("td",[null!==(t=e.selectedSeries)&&void 0!==t&&t.oneshot?i("span",[e._v(e._s(e.$t("common.oneshot")))]):i(m.A,{attrs:{type:"number",step:"0.1",dense:"",disabled:!e.selectedSeries},model:{value:e.bookNumber,callback:function(t){e.bookNumber=e._n(t)},expression:"bookNumber"}})],1),i("td",{staticClass:"px-1"},[i(o.A,{attrs:{icon:"",elevation:"1",disabled:!e.bookAnalyzed},on:{click:function(t){e.modalBookDetails=!0}}},[e.bookToUpgrade?i(c.A,[e._v("mdi-file-compare")]):i(c.A,[e._v("mdi-book-information-variant")])],1),i("transient-book-details-dialog",{attrs:{"left-book":e.bookAnalyzed,"right-book":e.bookToUpgrade,"right-pages":e.bookToUpgradePages},model:{value:e.modalBookDetails,callback:function(t){e.modalBookDetails=t},expression:"modalBookDetails"}})],1),i("td",{staticClass:"px-1"},[i(o.A,{attrs:{icon:"",elevation:"1",disabled:!e.bookAnalyzed||e.bookAnalyzed.status!==e.MediaStatus.READY},on:{click:function(t){e.modalViewer=!0}}},[e.bookToUpgrade?i(c.A,[e._v("mdi-compare")]):i(c.A,[e._v("mdi-image")])],1),i("transient-book-viewer-dialog",{attrs:{"left-pages":e.leftPagesWithUrl,"right-pages":e.rightPagesWithUrl},model:{value:e.modalViewer,callback:function(t){e.modalViewer=t},expression:"modalViewer"}})],1),i("td",{staticClass:"px-1"},[i(o.A,{attrs:{icon:"",elevation:"1",disabled:!e.bookAnalyzed||e.bookAnalyzed.status!==e.MediaStatus.READY},on:{click:function(t){e.modalNameChooser=!0}}},[i(c.A,[e._v("mdi-format-color-text")])],1),i("file-name-chooser-dialog",{attrs:{books:e.seriesBooks,name:e.destinationName,existing:e.book.name},on:{"update:name":function(t){e.destinationName=t}},model:{value:e.modalNameChooser,callback:function(t){e.modalNameChooser=t},expression:"modalNameChooser"}})],1),i("td",[e._v(" "+e._s(e.destinationName)+" ")]),i("td",[e.error?[i(y.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:t}){return[i(c.A,e._g({attrs:{color:"error"}},t),[e._v("mdi-alert-circle")])]}}],null,!1,3895309489)},[e._v(" "+e._s(e.error)+" ")])]:e._e(),!e.error&&e.bookToUpgrade?[i(y.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:t}){return[i(c.A,e._g({attrs:{color:"warning"}},t),[e._v("mdi-comment-alert")])]}}],null,!1,3329730402)},[e._v(" "+e._s(e.$t("book_import.row.warning_upgrade"))+" ")])]:e._e()],2)]):e._e()},A=[],P=i(79957),w=i(67976),$=i(30089),S=i(21253),x=i(92872),B=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.leftBook?e("div",[e(x.A,{attrs:{scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e($.A,[t.rightBook?e(S.ri,[t._v(t._s(t.$t("dialog.transient_book_details.title_comparison")))]):e(S.ri,[t._v(t._s(t.$t("dialog.transient_book_details.title")))]),e(o.A,{attrs:{icon:"",absolute:"",top:"",right:""},on:{click:t.dialogClose}},[e(c.A,[t._v("mdi-close")])],1),e(l.A),e(S.OQ,{staticStyle:{height:"50%"}},[e(r.A,{attrs:{fluid:""}},[e(u.A,{staticClass:"body-2"},[t.rightBook?e("thead",[e("tr",[e("th"),e("th",{class:t.rightBook?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.label_candidate")))]),e("th",[t._v(t._s(t.$t("dialog.transient_book_details.label_existing")))])])]):t._e(),e("tbody",[e("tr",[e("td",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("dialog.transient_book_details.label_name")))]),e("td",{class:t.rightBook?"diff":""},[t._v(t._s(t.leftBook.name))]),t.rightBook?e("td",[t._v(t._s(t.rightBook.metadata.title))]):t._e()]),e("tr",[e("td",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("dialog.transient_book_details.label_size")))]),e("td",{class:t.rightBook?"diff":""},[t._v(t._s(t.leftBook.size))]),t.rightBook?e("td",[t._v(t._s(t.rightBook.size))]):t._e()]),e("tr",[e("td",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("dialog.transient_book_details.label_format")))]),e("td",{class:t.rightBook?"diff":""},[t._v(t._s(t.getBookFormatFromMediaType(t.leftBook.mediaType).type))]),t.rightBook?e("td",[t._v(t._s(t.getBookFormatFromMediaType(t.rightBook.media.mediaType).type))]):t._e()]),e("tr",[e("td",{staticClass:"font-weight-medium"},[t._v(t._s(t.$t("dialog.transient_book_details.label_pages")))]),e("td",{class:t.rightBook?"diff":""},[t._v(t._s(t.leftBook.pages.length))]),t.rightBook?e("td",[t._v(t._s(t.rightBook.media.pagesCount))]):t._e()]),e("tr",[e("td",{staticClass:"pa-0",attrs:{colspan:t.rightBook?3:2}},[e("pages-table",{attrs:{"left-pages":t.leftBook.pages,"right-pages":t.rightPages}})],1)])])])],1)],1)],1)],1)],1):t._e()},C=[],N=i(33060),T=function(){var t=this,e=t._self._c;t._self._setupProxy;return t.leftPages.length>0?e(u.A,[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.index")))]),e("th",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.filename")))]),e("th",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.media_type")))]),e("th",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.width")))]),e("th",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.height")))]),e("th",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.size")))]),t.rightPages.length>0?[e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.filename")))]),e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.media_type")))]),e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.width")))]),e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.height")))]),e("th",[t._v(t._s(t.$t("dialog.transient_book_details.pages_table.size")))])]:t._e()],2)]),e("tbody",t._l(t.numberRows,(function(i,s){return e("tr",{key:s},[e("td",[t._v(t._s(i))]),e("td",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$_.get(t.leftPages[i-1],"fileName","")))]),e("td",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$_.get(t.leftPages[i-1],"mediaType","")))]),e("td",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$_.get(t.leftPages[i-1],"width","")))]),e("td",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$_.get(t.leftPages[i-1],"height","")))]),e("td",{class:t.rightPages.length>0?"diff":""},[t._v(t._s(t.$_.get(t.leftPages[i-1],"size","")))]),t.rightPages.length>0?[e("td",[t._v(t._s(t.$_.get(t.rightPages[i-1],"fileName","")))]),e("td",[t._v(t._s(t.$_.get(t.rightPages[i-1],"mediaType","")))]),e("td",[t._v(t._s(t.$_.get(t.rightPages[i-1],"width","")))]),e("td",[t._v(t._s(t.$_.get(t.rightPages[i-1],"height","")))]),e("td",[t._v(t._s(t.$_.get(t.rightPages[i-1],"size","")))])]:t._e()],2)})),0)]):t._e()},I=[],D=v.Ay.extend({name:"PagesTable",props:{leftPages:{type:Array,default:()=>[]},rightPages:{type:Array,default:()=>[]}},computed:{numberRows(){return this.leftPages?this.rightPages?Math.max(this.leftPages.length,this.rightPages.length):this.leftPages.length:0}}}),L=D,E=i(81656),O=(0,E.A)(L,T,I,!1,null,"3020819c",null),R=O.exports,F=v.Ay.extend({name:"TransientBookDetailsDialog",components:{PagesTable:R},data:()=>({modal:!1,getBookFormatFromMediaType:N.d}),props:{value:Boolean,leftBook:{type:Object,required:!1},rightBook:{type:Object,required:!1},rightPages:{type:Array,required:!1}},watch:{async value(t){this.modal=t},modal(t){!t&&this.dialogClose()}},methods:{dialogClose(){this.$emit("input",!1)}}}),z=F,U=(0,E.A)(z,B,C,!1,null,"f265107c",null),V=U.exports,M=i(13812),W=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(x.A,{attrs:{scrollable:"",fullscreen:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e($.A,[t.single?e(S.ri,[t._v(t._s(t.$t("dialog.transient_book_viewer.title")))]):e(S.ri,[t._v(t._s(t.$t("dialog.transient_book_viewer.title_comparison")))]),e(o.A,{attrs:{icon:"",absolute:"",top:"",right:""},on:{click:t.dialogClose}},[e(c.A,[t._v("mdi-close")])],1),e(l.A),e(S.OQ,{staticStyle:{height:"50%"}},[e(r.A,{attrs:{fluid:""}},[t.single?t._e():e(d.A,{attrs:{justify:"space-around"}},[e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[t._v(t._s(t.$t("dialog.transient_book_viewer.label_candidate")))]),e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[t._v(t._s(t.$t("dialog.transient_book_viewer.label_existing")))])],1),e(d.A,{attrs:{justify:"space-around"}},[e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[e(o.A,{attrs:{icon:"",disabled:!t.canPrevLeft},on:{click:t.firstPageLeft}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-left",rtl:"mdi-chevron-double-right"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canPrevLeft},on:{click:t.previousPageLeft}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-left",rtl:"mdi-chevron-right"}})],1),t._v(" "+t._s(t.$t("dialog.transient_book_viewer.page_of_pages",{page:t.leftPageNumber,pages:t.leftPages.length}))+" "),e(o.A,{attrs:{icon:"",disabled:!t.canNextLeft},on:{click:t.nextPageLeft}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-right",rtl:"mdi-chevron-left"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canNextLeft},on:{click:t.lastPageLeft}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-right",rtl:"mdi-chevron-double-left"}})],1)],1),t.single?t._e():e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[e(o.A,{attrs:{icon:"",disabled:!t.canPrevAny},on:{click:t.firstPageBoth}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-left",rtl:"mdi-chevron-double-right"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canPrevAny},on:{click:t.previousPageBoth}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-left",rtl:"mdi-chevron-right"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canNextAny},on:{click:t.nextPageBoth}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-right",rtl:"mdi-chevron-left"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canNextAny},on:{click:t.lastPageBoth}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-right",rtl:"mdi-chevron-double-left"}})],1)],1),t.single?t._e():e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[e(o.A,{attrs:{icon:"",disabled:!t.canPrevRight},on:{click:t.firstPageRight}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-left",rtl:"mdi-chevron-double-right"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canPrevRight},on:{click:t.previousPageRight}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-left",rtl:"mdi-chevron-right"}})],1),t._v(" "+t._s(t.$t("dialog.transient_book_viewer.page_of_pages",{page:t.rightPageNumber,pages:t.rightPages.length}))+" "),e(o.A,{attrs:{icon:"",disabled:!t.canNextRight},on:{click:t.nextPageRight}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-right",rtl:"mdi-chevron-left"}})],1),e(o.A,{attrs:{icon:"",disabled:!t.canNextRight},on:{click:t.lastPageRight}},[e("rtl-icon",{attrs:{icon:"mdi-chevron-double-right",rtl:"mdi-chevron-double-left"}})],1)],1)],1),e(d.A,{attrs:{justify:"center"}},[e(n.A,{staticClass:"pa-0",attrs:{cols:"6"}},[e(M.A,{attrs:{src:t.$_.get(t.pageLeft,"url",""),contain:"","max-height":.75*t.$vuetify.breakpoint.height}})],1),t.single?t._e():e(n.A,{staticClass:"pa-0",attrs:{cols:"6"}},[e(M.A,{attrs:{src:t.$_.get(t.pageRight,"url",""),"max-height":.75*t.$vuetify.breakpoint.height,contain:""}})],1)],1),e(d.A,{attrs:{justify:"space-around"}},[e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[t._v(" w: "+t._s(t.$_.get(t.pageLeft,"width",""))+" h: "+t._s(t.$_.get(t.pageLeft,"height",""))+" "+t._s(t.$_.get(t.pageLeft,"mediaType",""))+" ")]),t.single?t._e():e(n.A,{staticClass:"pa-1",attrs:{cols:"auto"}},[t._v(" w: "+t._s(t.$_.get(t.pageRight,"width",""))+" h: "+t._s(t.$_.get(t.pageRight,"height",""))+" "+t._s(t.$_.get(t.pageRight,"mediaType",""))+" ")])],1)],1)],1)],1)],1)],1)},q=[],Z=i(24636),H=v.Ay.extend({name:"TransientBookViewerDialog",components:{RtlIcon:Z.A},data:()=>({modal:!1,leftPageNumber:1,rightPageNumber:1}),props:{value:Boolean,leftPages:{type:Array,default:()=>[]},rightPages:{type:Array,default:()=>[]}},watch:{async value(t){this.modal=t,t&&this.firstPageBoth()},modal(t){!t&&this.dialogClose()}},computed:{pageLeft(){return this.leftPages[this.leftPageNumber-1]},pageRight(){return this.rightPages[this.rightPageNumber-1]},canPrevLeft(){return this.leftPageNumber>1},canPrevRight(){return this.rightPageNumber>1},canPrevAny(){return this.canPrevLeft||this.canPrevRight},canNextLeft(){return this.leftPageNumber<this.leftPages.length},canNextRight(){return this.rightPageNumber<this.rightPages.length},canNextAny(){return this.canNextLeft||this.canNextRight},single(){return 0===this.rightPages.length}},methods:{firstPageLeft(){this.leftPageNumber=1},firstPageRight(){this.rightPageNumber=1},firstPageBoth(){this.firstPageLeft(),this.firstPageRight()},previousPageLeft(){this.canPrevLeft&&this.leftPageNumber--},previousPageRight(){this.canPrevRight&&this.rightPageNumber--},nextPageLeft(){this.canNextLeft&&this.leftPageNumber++},nextPageRight(){this.canNextRight&&this.rightPageNumber++},previousPageBoth(){this.previousPageLeft(),this.previousPageRight()},nextPageBoth(){this.nextPageLeft(),this.nextPageRight()},lastPageLeft(){this.leftPageNumber=this.leftPages.length},lastPageRight(){this.rightPageNumber=this.rightPages.length},lastPageBoth(){this.lastPageLeft(),this.lastPageRight()},dialogClose(){this.$emit("input",!1)}}}),Y=H,K=(0,E.A)(Y,W,q,!1,null,"1647ce60",null),j=K.exports,G=i(33513),X=i(23850),Q=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("div",[e(x.A,{attrs:{"max-width":"600",scrollable:""},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e($.A,[e(S.ri,[t._v(t._s(t.$t("dialog.filename_chooser.title")))]),e(o.A,{attrs:{icon:"",absolute:"",top:"",right:""},on:{click:t.dialogClose}},[e(c.A,[t._v("mdi-close")])],1),e(l.A),e(S.OQ,{staticStyle:{height:"50%"}},[e(r.A,{attrs:{fluid:""}},[e(d.A,[e(n.A,[e("div",{staticClass:"text-subtitle-1"},[t._v(t._s(t.$t("dialog.filename_chooser.label_source_filename")))]),e("div",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.change(t.existing)}}},[t._v(t._s(t.existing))])])],1),e(d.A,{attrs:{align:"center"}},[e(n.A,[e(m.A,{attrs:{autofocus:"",label:t.$t("dialog.filename_chooser.field_destination_filename")},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.choose.apply(null,arguments)}},model:{value:t.nameInternal,callback:function(e){t.nameInternal=e},expression:"nameInternal"}})],1),e(n.A,{attrs:{cols:"auto"}},[e(o.A,{attrs:{disabled:!t.nameInternal},on:{click:t.choose}},[t._v(t._s(t.$t("dialog.filename_chooser.button_choose")))])],1)],1),e(l.A),t.books.length>0?e(u.A,{attrs:{"fixed-header":"",height:t.$vuetify.breakpoint.height/2}},[e("thead",[e("tr",[e("th",[t._v(t._s(t.$t("dialog.filename_chooser.table.order")))]),e("th",[t._v(t._s(t.$t("dialog.filename_chooser.table.existing_file")))])])]),e("tbody",t._l(t.books,(function(i,s){return e("tr",{key:s},[e("td",[t._v(t._s(i.number))]),e("td",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.change(i.name)}}},[t._v(t._s(i.name))])])})),0)]):t._e()],1)],1)],1)],1)],1)},J=[],tt=v.Ay.extend({name:"FileNameChooserDialog",data:()=>({modal:!1,nameInternal:""}),props:{value:Boolean,name:{type:String,required:!0},existing:{type:String,required:!1},books:{type:Array,required:!0}},watch:{value(t){this.modal=t,t&&this.clear()},existing:{handler(t){this.nameInternal=t},immediate:!0},modal(t){!t&&this.dialogClose()}},methods:{clear(){this.nameInternal=this.name||this.existing||""},change(t){this.nameInternal=t},choose(){this.nameInternal&&(this.$emit("update:name",this.nameInternal),this.dialogClose())},dialogClose(){this.$emit("input",!1)}}}),et=tt,it=(0,E.A)(et,Q,J,!1,null,"bd868a7c",null),st=it.exports,ot=i(19447),at=v.Ay.extend({name:"FileImportRow",components:{SeriesPickerDialog:w.A,TransientBookDetailsDialog:V,TransientBookViewerDialog:j,FileNameChooserDialog:st},props:{book:{type:Object,required:!0},series:{type:Object,required:!1},payload:{type:Object,required:!1}},watch:{book:{handler(t){this.analyze(t),this.destinationName=t.name},immediate:!0},selectedSeries:{handler(t){this.getSeriesBooks(t)},immediate:!0},series:{handler(t){t&&(this.selectedSeries={seriesId:t.id,title:t.metadata.title,oneshot:t.oneshot})},immediate:!0},bookNumber:{handler(t){this.checkForUpgrade(t)},immediate:!0},importPayload:{handler(t){this.$emit("update:payload",t)},immediate:!0}},data:()=>({MediaStatus:P.nl,convertErrorCodes:X.q,innerSelect:!1,bookAnalyzed:void 0,selectedSeries:void 0,seriesBooks:[],bookToUpgrade:void 0,bookToUpgradePages:[],modalSeriesPicker:!1,modalBookDetails:!1,modalViewer:!1,modalNameChooser:!1,bookNumber:void 0,destinationName:""}),computed:{leftPagesWithUrl(){return this.bookAnalyzed?this.bookAnalyzed.pages.map((t=>({...t,url:(0,G._i)(this.bookAnalyzed.id,t.number)}))):[]},rightPagesWithUrl(){return this.bookToUpgrade?this.bookToUpgradePages.map((t=>({...t,url:(0,G.ue)(this.bookToUpgrade.id,t.number)}))):[]},status(){if(!this.bookAnalyzed)return{};switch(this.bookAnalyzed.status){case P.nl.READY:return{icon:"mdi-check-circle",color:"success",message:""};default:return{icon:"mdi-alert-circle",color:"error",message:this.bookAnalyzed.comment}}},existingFileNames(){return this.seriesBooks.map((t=>t.name))},error(){return this.bookAnalyzed?this.bookAnalyzed.status!=P.nl.READY?this.$t("book_import.row.error_only_import_no_errors").toString():this.selectedSeries?"":this.$t("book_import.row.error_choose_series").toString():this.$t("book_import.row.error_analyze_first").toString()},importPayload(){var t,e;if(!this.error&&this.selectedSeries)return{seriesId:null===(t=this.selectedSeries)||void 0===t?void 0:t.seriesId,sourceFile:this.book.url,upgradeBookId:null===(e=this.bookToUpgrade)||void 0===e?void 0:e.id,destinationName:this.destinationName}}},methods:{async analyze(t){this.bookAnalyzed=await this.$komgaTransientBooks.analyze(t.id),this.getSeries(this.bookAnalyzed.seriesId),this.bookNumber=this.bookAnalyzed.number},async getSeries(t){if(t){const e=await this.$komgaSeries.getOneSeries(t);this.selectedSeries={seriesId:e.id,title:e.metadata.title,oneshot:e.oneshot}}},async getSeriesBooks(t){t&&(this.seriesBooks=(await this.$komgaBooks.getBooksList({condition:new ot.kq(new ot.Tr(t.seriesId))},{unpaged:!0,sort:"metadata.numberSort"})).content,t.oneshot&&(this.bookNumber=this.seriesBooks[0].metadata.numberSort),this.checkForUpgrade(this.bookNumber))},async checkForUpgrade(t){this.bookToUpgrade=this.seriesBooks.find((e=>e.metadata.numberSort===t)),this.bookToUpgrade?this.bookToUpgradePages=await this.$komgaBooks.getBookPages(this.bookToUpgrade.id):this.bookToUpgradePages=[]},pickedSeries(t){this.selectedSeries={seriesId:t.id,title:t.metadata.title,oneshot:t.oneshot}}}}),nt=at,rt=(0,E.A)(nt,k,A,!1,null,"6bf29db4",null),lt=rt.exports,ct=i(52846),dt=i(1324),ht=v.Ay.extend({name:"ImportBooks",components:{EmptyState:dt.A,FileBrowserDialog:_.A,FileImportRow:lt,SeriesPickerDialog:w.A},data:()=>({modalFileBrowser:!1,modalSeriesPicker:!1,selected:[],selectedSeries:void 0,payloads:[],transientBooks:[],scanned:!1,copyMode:P.Zd.HARDLINK,importFinished:!1}),computed:{globalSelect:{get:function(){return 0===this.selected.length?0:this.selected.length===this.transientBooks.length?2:1},set:function(t){this.selected=t?this.$_.range(this.transientBooks.length):[]}},importPath:{get:function(){return this.$store.state.persistedState.importPath},set:function(t){this.$store.commit("setImportPath",t)}},copyModes(){return[{text:this.$t("enums.copy_mode.HARDLINK").toString(),value:P.Zd.HARDLINK},{text:this.$t("enums.copy_mode.MOVE").toString(),value:P.Zd.MOVE}]},payloadBatch(){return{books:this.selected.map((t=>this.payloads[t])).filter(Boolean),copyMode:this.copyMode}}},watch:{selectedSeries(t){t&&setTimeout((()=>{this.selectedSeries=void 0}),100)}},methods:{async scanBooks(){this.transientBooks=[],this.scanned=!1;try{this.transientBooks=await this.$komgaTransientBooks.scanForTransientBooks(this.importPath),this.scanned=!0}catch(t){this.$eventHub.$emit(ct.ff,{message:(0,X.q)(t.message)})}this.selected=this.$_.range(this.transientBooks.length),this.payloads=this.payloads.splice(this.transientBooks.length,this.payloads.length),this.importFinished=!1},performImport(){this.importFinished||(this.$komgaBooks.importBooks(this.payloadBatch),this.importFinished=!0)}}}),ut=ht,gt=(0,E.A)(ut,p,f,!1,null,"a1871c4c",null),mt=gt.exports},33060:function(t,e,i){i.d(e,{Z:function(){return a},d:function(){return o}});var s=i(2543);function o(t){switch(t.mediaType){case"application/x-rar-compressed":case"application/x-rar-compressed; version=4":return{type:"CBR",color:"#03A9F4"};case"application/zip":return{type:"CBZ",color:"#4CAF50"};case"application/pdf":return{type:"PDF",color:"#FF5722"};case"application/epub+zip":return t.epubIsKepub?{type:"KEPUB",color:"#ff5ab1"}:{type:"EPUB",color:"#ff5ab1"};case"application/x-rar-compressed; version=5":return{type:"RAR5",color:"#000000"};default:return{type:t.mediaType,color:"#000000"}}}function a(t){switch((0,s.lowerCase)(t.mediaProfile)){case"epub":return t.epubDivinaCompatible?"read-book":"read-epub";default:return"read-book"}}},79957:function(t,e,i){var s,o,a,n,r;i.d(e,{Er:function(){return r},RJ:function(){return a},Zd:function(){return n},nl:function(){return o},s3:function(){return s}}),function(t){t["LEFT_TO_RIGHT"]="LEFT_TO_RIGHT",t["RIGHT_TO_LEFT"]="RIGHT_TO_LEFT",t["VERTICAL"]="VERTICAL",t["WEBTOON"]="WEBTOON"}(s||(s={})),function(t){t["READY"]="READY",t["UNKNOWN"]="UNKNOWN",t["ERROR"]="ERROR",t["UNSUPPORTED"]="UNSUPPORTED",t["OUTDATED"]="OUTDATED"}(o||(o={})),function(t){t["UNREAD"]="UNREAD",t["IN_PROGRESS"]="IN_PROGRESS",t["READ"]="READ"}(a||(a={})),function(t){t["MOVE"]="MOVE",t["COPY"]="COPY",t["HARDLINK"]="HARDLINK"}(n||(n={})),function(t){t["DIVINA"]="DIVINA",t["PDF"]="PDF",t["EPUB"]="EPUB"}(r||(r={}))},15601:function(){},72710:function(t,e,i){i.d(e,{A:function(){return n}});i(15601);var s=i(54582),o=i(66682),a=i(49706),n=a.A.extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...o.A.options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(t){this.$nextTick((()=>this.inputIndeterminate=t))},inputIndeterminate(t){this.$emit("update:indeterminate",t)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:t,...e}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(s.A,this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...e,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},92872:function(t,e,i){i.d(e,{A:function(){return p}});var s=i(28071),o=i(41769),a=i(28492),n=i(87086),r=i(90826),l=i(69227),c=i(22011),d=i(56809),h=i(72006),u=i(73803),g=i(69463);const m=(0,h.A)(a.A,n.A,r.A,l.A,c.A,o.A);var p=m.extend({name:"v-dialog",directives:{ClickOutside:d.A},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(t){var e;t?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(e=this.previousActiveElement)||void 0===e||e.focus())},fullscreen(t){this.isActive&&(t?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,u.rq)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(t){const e=t.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(e)||this.overlay&&e&&!this.overlay.$el.contains(e))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):r.A.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{var t,e;(null===(t=this.$refs.dialog)||void 0===t?void 0:t.contains(document.activeElement))||(this.previousActiveElement=document.activeElement,null===(e=this.$refs.dialog)||void 0===e||e.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(t){this.$emit("click:outside",t),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(t){if(t.keyCode===g.uP.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const t=this.getActivator();this.$nextTick((()=>t&&t.focus()))}this.$emit("keydown",t)},onFocusin(t){if(!t||!this.retainFocus)return;const e=t.target;if(e&&this.$refs.dialog&&![document,this.$refs.dialog].includes(e)&&!this.$refs.dialog.contains(e)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((t=>t.contains(e)))){const t=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),e=[...t].find((t=>!t.hasAttribute("disabled")&&!t.matches('[tabindex="-1"]')));e&&e.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(s.A,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const t=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[t]):t},genInnerContent(){const t={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(t.style={...t.style,maxWidth:(0,g.Dg)(this.maxWidth),width:(0,g.Dg)(this.width)}),this.$createElement("div",t,this.getContentSlot())}},render(t){return t("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},1231:function(t,e,i){i(40125);var s=i(85471),o=i(20910),a=i(69463);const n=["sm","md","lg","xl"],r=(()=>n.reduce(((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t)),{}))(),l=(()=>n.reduce(((t,e)=>(t["offset"+(0,a.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),c=(()=>n.reduce(((t,e)=>(t["order"+(0,a.Zb)(e)]={type:[String,Number],default:null},t)),{}))(),d={col:Object.keys(r),offset:Object.keys(l),order:Object.keys(c)};function h(t,e,i){let s=t;if(null!=i&&!1!==i){if(e){const i=e.replace(t,"");s+=`-${i}`}return"col"!==t||""!==i&&!0!==i?(s+=`-${i}`,s.toLowerCase()):s.toLowerCase()}}const u=new Map;e.A=s.Ay.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...r,offset:{type:[String,Number],default:null},...l,order:{type:[String,Number],default:null},...c,alignSelf:{type:String,default:null,validator:t=>["auto","start","end","center","baseline","stretch"].includes(t)},tag:{type:String,default:"div"}},render(t,{props:e,data:i,children:s,parent:a}){let n="";for(const o in e)n+=String(e[o]);let r=u.get(n);if(!r){let t;for(t in r=[],d)d[t].forEach((i=>{const s=e[i],o=h(t,i,s);o&&r.push(o)}));const i=r.some((t=>t.startsWith("col-")));r.push({col:!i||!e.cols,[`col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),u.set(n,r)}return t(e.tag,(0,o.Ay)(i,{class:r}),s)}})},84551:function(t,e,i){i.d(e,{A:function(){return h}});var s=i(41769),o=i(78956),a=i(34236),n=i(28492),r=i(48598),l=i(69463),c=i(73803),d=i(72006),h=(0,d.A)(o.A,a.A,n.A,r.A).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},openOnFocus:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:t,content:e}=this.dimensions,i=!this.bottom&&!this.left&&!this.top&&!this.right,s=!1!==this.attach?t.offsetLeft:t.left;let o=0;return this.top||this.bottom||i?o=s+t.width/2-e.width/2:(this.left||this.right)&&(o=s+(this.right?t.width:-e.width)+(this.right?10:-10)),this.nudgeLeft&&(o-=parseInt(this.nudgeLeft)),this.nudgeRight&&(o+=parseInt(this.nudgeRight)),`${this.calcXOverflow(o,this.dimensions.content.width)}px`},calculatedTop(){const{activator:t,content:e}=this.dimensions,i=!1!==this.attach?t.offsetTop:t.top;let s=0;return this.top||this.bottom?s=i+(this.bottom?t.height:-e.height)+(this.bottom?10:-10):(this.left||this.right)&&(s=i+t.height/2-e.height/2),this.nudgeTop&&(s-=parseInt(this.nudgeTop)),this.nudgeBottom&&(s+=parseInt(this.nudgeBottom)),!1===this.attach&&(s+=this.pageYOffset),`${this.calcYOverflow(s)}px`},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:(0,l.Dg)(this.maxWidth),minWidth:(0,l.Dg)(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick((()=>{this.value&&this.callActivate()}))},mounted(){"v-slot"===(0,l.fo)(this,"activator",!0)&&(0,c.yA)("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const t=s.A.options.methods.genActivatorListeners.call(this);return this.openOnFocus&&(t.focus=t=>{this.getActivator(t),this.runDelay("open")},t.blur=t=>{this.getActivator(t),this.runDelay("close")}),t.keydown=t=>{t.keyCode===l.uP.esc&&(this.getActivator(t),this.runDelay("close"))},t},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const t=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[t]):t},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(t){return t(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent((()=>[this.genTransition()])),this.genActivator()])}})},90826:function(t,e,i){i.d(e,{A:function(){return r}});var s=i(32240),o=s.A,a=i(69463),n=i(85471),r=n.Ay.extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data(){return{animationFrame:0,overlay:null}},watch:{hideOverlay(t){this.isActive&&(t?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const t=new o({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});t.$mount();const e=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");e&&e.insertBefore(t.$el,e.firstChild),this.overlay=t},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=(0,a.fl)(this.$el)),this.overlay.value=!0)})),!0},removeOverlay(t=!0){this.overlay&&((0,a.d7)(this.overlay.$el,"transitionend",(()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&!this.isActive&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),t&&this.showScroll()},scrollListener(t){if("key"in t){if(["INPUT","TEXTAREA","SELECT"].includes(t.target.tagName)||t.target.isContentEditable)return;const e=[a.uP.up,a.uP.pageup],i=[a.uP.down,a.uP.pagedown];if(e.includes(t.keyCode))t.deltaY=-1;else{if(!i.includes(t.keyCode))return;t.deltaY=1}}(t.target===this.overlay||"keydown"!==t.type&&t.target===document.body||this.checkPath(t))&&t.preventDefault()},hasScrollbar(t){if(!t||t.nodeType!==Node.ELEMENT_NODE)return!1;const e=window.getComputedStyle(t);return(["auto","scroll"].includes(e.overflowY)||"SELECT"===t.tagName)&&t.scrollHeight>t.clientHeight||["auto","scroll"].includes(e.overflowX)&&t.scrollWidth>t.clientWidth},shouldScroll(t,e){if(t.hasAttribute("data-app"))return!1;const i=e.shiftKey||e.deltaX?"x":"y",s="y"===i?e.deltaY:e.deltaX||e.deltaY;let o,a;"y"===i?(o=0===t.scrollTop,a=t.scrollTop+t.clientHeight===t.scrollHeight):(o=0===t.scrollLeft,a=t.scrollLeft+t.clientWidth===t.scrollWidth);const n=s<0,r=s>0;return!(o||!n)||(!(a||!r)||!(!o&&!a||!t.parentNode)&&this.shouldScroll(t.parentNode,e))},isInside(t,e){return t===e||null!==t&&t!==document.body&&this.isInside(t.parentNode,e)},checkPath(t){const e=(0,a.K9)(t);if("keydown"===t.type&&e[0]===document.body){const e=this.$refs.dialog,i=window.getSelection().anchorNode;return!(e&&this.hasScrollbar(e)&&this.isInside(i,e))||!this.shouldScroll(e,t)}for(let i=0;i<e.length;i++){const s=e[i];if(s===document)return!0;if(s===document.documentElement)return!0;if(s===this.$refs.content)return!0;if(this.hasScrollbar(s))return!this.shouldScroll(s,t)}return!0},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):((0,a.P4)(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}})},49706:function(t,e,i){i.d(e,{A:function(){return d}});var s=i(66682),o=i(29938),a=i(85471),n=a.Ay.extend({name:"rippleable",directives:{ripple:o.A},props:{ripple:{type:[Boolean,Object],default:!0}},methods:{genRipple(t={}){return this.ripple?(t.staticClass="v-input--selection-controls__ripple",t.directives=t.directives||[],t.directives.push({name:"ripple",value:{center:!0}}),this.$createElement("div",t)):null}}}),r=i(35061),l=i(72006);function c(t){t.preventDefault()}var d=(0,l.A)(s.A,n,r.A).extend({name:"selectable",model:{prop:"inputValue",event:"change"},props:{id:String,inputValue:null,falseValue:null,trueValue:null,multiple:{type:Boolean,default:null},label:String},data(){return{hasColor:this.inputValue,lazyValue:this.inputValue}},computed:{computedColor(){if(this.isActive)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},isMultiple(){return!0===this.multiple||null===this.multiple&&Array.isArray(this.internalValue)},isActive(){const t=this.value,e=this.internalValue;return this.isMultiple?!!Array.isArray(e)&&e.some((e=>this.valueComparator(e,t))):void 0===this.trueValue||void 0===this.falseValue?t?this.valueComparator(t,e):Boolean(e):this.valueComparator(e,this.trueValue)},isDirty(){return this.isActive},rippleState(){return this.isDisabled||this.validationState?this.validationState:void 0}},watch:{inputValue(t){this.lazyValue=t,this.hasColor=t}},methods:{genLabel(){const t=s.A.options.methods.genLabel.call(this);return t?(t.data.on={click:c},t):t},genInput(t,e){return this.$createElement("input",{attrs:Object.assign({"aria-checked":this.isActive.toString(),disabled:this.isDisabled,id:this.computedId,role:t,type:t},e),domProps:{value:this.value,checked:this.isActive},on:{blur:this.onBlur,change:this.onChange,focus:this.onFocus,keydown:this.onKeydown,click:c},ref:"input"})},onClick(t){this.onChange(),this.$emit("click",t)},onChange(){if(!this.isInteractive)return;const t=this.value;let e=this.internalValue;if(this.isMultiple){Array.isArray(e)||(e=[]);const i=e.length;e=e.filter((e=>!this.valueComparator(e,t))),e.length===i&&e.push(t)}else e=void 0!==this.trueValue&&void 0!==this.falseValue?this.valueComparator(e,this.trueValue)?this.falseValue:this.trueValue:t?this.valueComparator(e,t)?null:t:!e;this.validate(!0,e),this.internalValue=e,this.hasColor=e},onFocus(t){this.isFocused=!0,this.$emit("focus",t)},onBlur(t){this.isFocused=!1,this.$emit("blur",t)},onKeydown(t){}}})}}]);
//# sourceMappingURL=import-books.60240843.js.map