{"version":3,"file":"js/browse-readlist.37957ad5.js","mappings":"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","sources":["webpack://komga-webui/./src/views/BrowseReadList.vue","webpack://komga-webui/./src/views/BrowseReadList.vue?1fe1","webpack://komga-webui/./src/views/BrowseReadList.vue?005d","webpack://komga-webui/./src/views/BrowseReadList.vue?e806","webpack://komga-webui/./node_modules/vuetify/lib/components/VOverlay/index.js","webpack://komga-webui/./node_modules/vuetify/lib/mixins/overlayable/index.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.readList)?_c('div',[(!_vm.editElements && _vm.selectedBooks.length === 0)?_c('toolbar-sticky',[(_vm.readList)?_c('read-list-actions-menu',{attrs:{\"read-list\":_vm.readList}}):_vm._e(),(_vm.readList)?_c('v-toolbar-title',[_c('span',[_vm._v(_vm._s(_vm.readList.name))]),_c('v-chip',{staticClass:\"mx-4\",attrs:{\"label\":\"\"}},[_c('span',{staticStyle:{\"font-size\":\"1.1rem\"}},[_vm._v(_vm._s(_vm.totalElements))])]),(_vm.readList.ordered)?_c('span',{staticClass:\"font-italic text-overline\"},[_vm._v(\"(\"+_vm._s(_vm.$t('browse_readlist.manual_ordering'))+\")\")]):_vm._e()],1):_vm._e(),_c('v-spacer'),(_vm.isAdmin)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.startEditElements}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on }){return [_c('v-icon',_vm._g({},on),[_vm._v(\"mdi-playlist-edit\")])]}}],null,false,1014130452)},[_c('span',[_vm._v(_vm._s(_vm.$t('browse_readlist.edit_elements')))])])],1):_vm._e(),(_vm.isAdmin)?_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.editReadList}},[_c('v-tooltip',{attrs:{\"bottom\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on }){return [_c('v-icon',_vm._g({},on),[_vm._v(\"mdi-pencil\")])]}}],null,false,1783139550)},[_c('span',[_vm._v(_vm._s(_vm.$t('browse_readlist.edit_readlist')))])])],1):_vm._e(),_c('page-size-select',{model:{value:(_vm.pageSize),callback:function ($$v) {_vm.pageSize=$$v},expression:\"pageSize\"}}),_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){_vm.drawer = !_vm.drawer}}},[_c('v-icon',{attrs:{\"color\":_vm.filterActive ? 'secondary' : ''}},[_vm._v(\"mdi-filter-variant\")])],1)],1):_vm._e(),_c('multi-select-bar',{attrs:{\"kind\":\"books\",\"oneshots\":_vm.selectedOneshots,\"show-select-all\":\"\"},on:{\"unselect-all\":function($event){_vm.selectedBooks = []},\"select-all\":function($event){_vm.selectedBooks = _vm.books},\"mark-read\":_vm.markSelectedRead,\"mark-unread\":_vm.markSelectedUnread,\"add-to-collection\":_vm.addToCollection,\"add-to-readlist\":_vm.addToReadList,\"edit\":_vm.editMultipleBooks,\"bulk-edit\":_vm.bulkEditMultipleBooks,\"delete\":_vm.deleteBooks},model:{value:(_vm.selectedBooks),callback:function ($$v) {_vm.selectedBooks=$$v},expression:\"selectedBooks\"}}),_c('v-scroll-y-transition',{attrs:{\"hide-on-leave\":\"\"}},[(_vm.editElements)?_c('toolbar-sticky',{attrs:{\"elevation\":5,\"color\":\"base\"}},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.cancelEditElements}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-btn',{attrs:{\"icon\":\"\",\"color\":\"primary\",\"disabled\":_vm.books.length === 0},on:{\"click\":_vm.doEditElements}},[_c('v-icon',[_vm._v(\"mdi-check\")])],1)],1):_vm._e()],1),_c('filter-drawer',{attrs:{\"clear-button\":_vm.filterActive},on:{\"clear\":_vm.resetFilters},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('filter-list',{attrs:{\"filters-options\":_vm.filterOptionsList,\"filters-active\":_vm.filters},on:{\"update:filtersActive\":function($event){_vm.filters=$event},\"update:filters-active\":function($event){_vm.filters=$event}}})]},proxy:true},{key:\"filter\",fn:function(){return [_c('filter-panels',{attrs:{\"filters-options\":_vm.filterOptionsPanel,\"filters-active\":_vm.filters},on:{\"update:filtersActive\":function($event){_vm.filters=$event},\"update:filters-active\":function($event){_vm.filters=$event}}})]},proxy:true}],null,false,457844017),model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}}),_c('v-container',{attrs:{\"fluid\":\"\"}},[(_vm.readList.summary)?_c('v-row',{staticClass:\"px-2\"},[_c('v-col',[_c('read-more',[_vm._v(_vm._s(_vm.readList.summary))])],1)],1):_vm._e(),_c('v-row',{staticClass:\"px-2\"},[_c('v-col',[_c('v-btn',{attrs:{\"title\":_vm.$t('menu.download_readlist'),\"small\":\"\",\"disabled\":!_vm.canDownload,\"href\":_vm.fileUrl}},[_c('v-icon',{attrs:{\"left\":\"\",\"small\":\"\"}},[_vm._v(\"mdi-file-download\")]),_vm._v(\" \"+_vm._s(_vm.$t('common.download'))+\" \")],1)],1)],1),_c('v-divider',{staticClass:\"my-3\"}),(_vm.totalPages === 0)?_c('empty-state',{attrs:{\"title\":_vm.$t('common.filter_no_matches'),\"sub-title\":_vm.$t('common.use_filter_panel_to_change_filter'),\"icon\":\"mdi-book-multiple\",\"icon-color\":\"secondary\"}},[_c('v-btn',{on:{\"click\":_vm.resetFilters}},[_vm._v(_vm._s(_vm.$t('common.reset_filters')))])],1):[(_vm.totalPages > 1)?_c('v-pagination',{attrs:{\"total-visible\":_vm.paginationVisible,\"length\":_vm.totalPages},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}):_vm._e(),_c('item-browser',{attrs:{\"items\":_vm.books,\"item-context\":_vm.itemContext,\"selected\":_vm.selectedBooks,\"edit-function\":_vm.isAdmin ? _vm.editSingleBook : undefined,\"draggable\":_vm.editElements && _vm.readList.ordered,\"deletable\":_vm.editElements},on:{\"update:items\":function($event){_vm.books=$event},\"update:selected\":function($event){_vm.selectedBooks=$event}}}),(_vm.totalPages > 1)?_c('v-pagination',{attrs:{\"total-visible\":_vm.paginationVisible,\"length\":_vm.totalPages},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}}):_vm._e()]],2)],1):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport ItemBrowser from '@/components/ItemBrowser.vue'\nimport ToolbarSticky from '@/components/bars/ToolbarSticky.vue'\nimport {\n  BOOK_CHANGED,\n  BOOK_DELETED,\n  READLIST_CHANGED,\n  READLIST_DELETED,\n  READPROGRESS_CHANGED,\n  READPROGRESS_DELETED,\n} from '@/types/events'\nimport Vue from 'vue'\nimport ReadListActionsMenu from '@/components/menus/ReadListActionsMenu.vue'\nimport MultiSelectBar from '@/components/bars/MultiSelectBar.vue'\nimport {AuthorDto, BookDto, ReadProgressUpdateDto} from '@/types/komga-books'\nimport {ContextOrigin} from '@/types/context'\nimport {BookSseDto, ReadListSseDto, ReadProgressSseDto} from '@/types/komga-sse'\nimport {throttle} from 'lodash'\nimport ReadMore from '@/components/ReadMore.vue'\nimport FilterDrawer from '@/components/FilterDrawer.vue'\nimport FilterPanels from '@/components/FilterPanels.vue'\nimport FilterList from '@/components/FilterList.vue'\nimport {ReadStatus} from '@/types/enum-books'\nimport {authorRoles} from '@/types/author-roles'\nimport {LibraryDto} from '@/types/komga-libraries'\nimport {mergeFilterParams, toNameValue} from '@/functions/filter'\nimport {Location} from 'vue-router'\nimport {readListFileUrl} from '@/functions/urls'\nimport {ItemContext} from '@/types/items'\nimport PageSizeSelect from '@/components/PageSizeSelect.vue'\nimport EmptyState from '@/components/EmptyState.vue'\nimport {ReadListDto, ReadListUpdateDto} from '@/types/komga-readlists'\nimport {Oneshot} from '@/types/komga-series'\nimport {FiltersActive, FiltersOptions, NameValue} from '@/types/filter'\n\nexport default Vue.extend({\n  name: 'BrowseReadList',\n  components: {\n    EmptyState,\n    PageSizeSelect,\n    ToolbarSticky,\n    ItemBrowser,\n    ReadListActionsMenu,\n    MultiSelectBar,\n    FilterDrawer,\n    FilterPanels,\n    FilterList,\n    ReadMore,\n  },\n  data: () => {\n    return {\n      ItemContext,\n      readList: undefined as ReadListDto | undefined,\n      books: [] as BookDto[],\n      booksCopy: [] as BookDto[],\n      selectedBooks: [] as BookDto[],\n      page: 1,\n      pageSize: 20,\n      unpaged: false,\n      totalPages: 1,\n      totalElements: null as number | null,\n      editElements: false,\n      filters: {} as FiltersActive,\n      filterUnwatch: null as any,\n      pageUnwatch: null as any,\n      pageSizeUnwatch: null as any,\n      drawer: false,\n      filterOptions: {\n        library: [] as NameValue[],\n        tag: [] as NameValue[],\n      },\n    }\n  },\n  props: {\n    readListId: {\n      type: String,\n      required: true,\n    },\n  },\n  created() {\n    this.$eventHub.$on(READLIST_CHANGED, this.readListChanged)\n    this.$eventHub.$on(READLIST_DELETED, this.readListDeleted)\n    this.$eventHub.$on(BOOK_CHANGED, this.bookChanged)\n    this.$eventHub.$on(BOOK_DELETED, this.bookChanged)\n    this.$eventHub.$on(READPROGRESS_CHANGED, this.readProgressChanged)\n    this.$eventHub.$on(READPROGRESS_DELETED, this.readProgressChanged)\n  },\n  beforeDestroy() {\n    this.$eventHub.$off(READLIST_CHANGED, this.readListChanged)\n    this.$eventHub.$off(READLIST_DELETED, this.readListDeleted)\n    this.$eventHub.$off(BOOK_CHANGED, this.bookChanged)\n    this.$eventHub.$off(BOOK_DELETED, this.bookChanged)\n    this.$eventHub.$off(READPROGRESS_CHANGED, this.readProgressChanged)\n    this.$eventHub.$off(READPROGRESS_DELETED, this.readProgressChanged)\n  },\n  async mounted() {\n    this.pageSize = this.$store.state.persistedState.browsingPageSize || this.pageSize\n\n    // restore from query param\n    await this.resetParams(this.$route, this.readListId)\n    if (this.$route.query.page) this.page = Number(this.$route.query.page)\n    if (this.$route.query.pageSize) this.pageSize = Number(this.$route.query.pageSize)\n\n    this.loadReadList(this.readListId)\n\n    this.setWatches()\n  },\n  async beforeRouteUpdate(to, from, next) {\n    if (to.params.readListId !== from.params.readListId) {\n      this.unsetWatches()\n\n      // reset\n      await this.resetParams(this.$route, this.readListId)\n      this.page = 1\n      this.totalPages = 1\n      this.totalElements = null\n      this.books = []\n      this.editElements = false\n\n      this.loadReadList(to.params.readListId)\n\n      this.setWatches()\n    }\n\n    next()\n  },\n  computed: {\n    itemContext(): ItemContext[] {\n      if (this.readList?.ordered === false) return [ItemContext.SHOW_SERIES, ItemContext.RELEASE_DATE]\n      return [ItemContext.SHOW_SERIES]\n    },\n    paginationVisible(): number {\n      switch (this.$vuetify.breakpoint.name) {\n        case 'xs':\n          return 5\n        case 'sm':\n        case 'md':\n          return 10\n        case 'lg':\n        case 'xl':\n        default:\n          return 15\n      }\n    },\n    filterOptionsList(): FiltersOptions {\n      return {\n        readStatus: {\n          values: [\n            {name: this.$i18n.t('filter.unread').toString(), value: ReadStatus.UNREAD},\n            {name: this.$t('filter.in_progress').toString(), value: ReadStatus.IN_PROGRESS},\n            {name: this.$t('filter.read').toString(), value: ReadStatus.READ},\n          ],\n        },\n      } as FiltersOptions\n    },\n    filterOptionsPanel(): FiltersOptions {\n      const r = {\n        library: {name: this.$t('filter.library').toString(), values: this.filterOptions.library},\n        tag: {name: this.$t('filter.tag').toString(), values: this.filterOptions.tag},\n      } as FiltersOptions\n      authorRoles.forEach((role: string) => {\n        r[role] = {\n          name: this.$t(`author_roles.${role}`).toString(),\n          search: async search => {\n            return (await this.$komgaReferential.getAuthors(search, role, undefined, undefined, undefined, this.readListId))\n              .content\n              .map(x => x.name)\n          },\n        }\n      })\n      return r\n    },\n    isAdmin(): boolean {\n      return this.$store.getters.meAdmin\n    },\n    canDownload(): boolean {\n      return this.$store.getters.meFileDownload\n    },\n    fileUrl(): string {\n      return readListFileUrl(this.readListId)\n    },\n    filterActive(): boolean {\n      return Object.keys(this.filters).some(x => this.filters[x].length !== 0)\n    },\n    selectedOneshots(): boolean {\n      return this.selectedBooks.every(b => b.oneshot)\n    },\n  },\n  methods: {\n    resetFilters() {\n      this.drawer = false\n      for (const prop in this.filters) {\n        this.$set(this.filters, prop, [])\n      }\n      this.$store.commit('setReadListFilter', {id: this.readListId, filter: this.filters})\n      this.updateRouteAndReload()\n    },\n    async resetParams(route: any, readListId: string) {\n      // load dynamic filters\n      this.$set(this.filterOptions, 'library', this.$store.state.komgaLibraries.libraries.map((x: LibraryDto) => ({\n        name: x.name,\n        value: x.id,\n      })))\n\n      const tags = await this.$komgaReferential.getBookTags(undefined, readListId)\n      this.$set(this.filterOptions, 'tag', toNameValue(tags))\n\n      // get filter from query params or local storage and validate with available filter values\n      let activeFilters: any\n      if (route.query.readStatus || route.query.tag || route.query.library || authorRoles.some(role => role in route.query)) {\n        activeFilters = {\n          readStatus: route.query.readStatus || [],\n          library: route.query.library || [],\n          tag: route.query.tag || [],\n        }\n        authorRoles.forEach((role: string) => {\n          activeFilters[role] = route.query[role] || []\n        })\n      } else {\n        activeFilters = this.$store.getters.getReadListFilter(route.params.readListId) || {} as FiltersActive\n      }\n      this.filters = this.validateFilters(activeFilters)\n    },\n    validateFilters(filters: FiltersActive): FiltersActive {\n      const validFilter = {\n        readStatus: filters.readStatus?.filter(x => Object.keys(ReadStatus).includes(x)) || [],\n        library: filters.library?.filter(x => this.filterOptions.library.map(n => n.value).includes(x)) || [],\n        tag: filters.tag?.filter(x => this.filterOptions.tag.map(n => n.value).includes(x)) || [],\n      } as any\n      authorRoles.forEach((role: string) => {\n        validFilter[role] = filters[role] || []\n      })\n      return validFilter\n    },\n    setWatches() {\n      this.filterUnwatch = this.$watch('filters', (val) => {\n        this.$store.commit('setReadListFilter', {id: this.readListId, filter: val})\n        this.updateRouteAndReload()\n      })\n      this.pageSizeUnwatch = this.$watch('pageSize', (val) => {\n        this.$store.commit('setBrowsingPageSize', val)\n        this.updateRouteAndReload()\n      })\n\n      this.pageUnwatch = this.$watch('page', (val) => {\n        this.updateRoute()\n        this.loadPage(this.readListId, val)\n      })\n    },\n    unsetWatches() {\n      this.filterUnwatch()\n      this.pageUnwatch()\n      this.pageSizeUnwatch()\n    },\n    updateRouteAndReload() {\n      this.unsetWatches()\n\n      this.page = 1\n\n      this.updateRoute()\n      this.loadPage(this.readListId, this.page)\n\n      this.setWatches()\n    },\n    updateRoute() {\n      const loc = {\n        name: this.$route.name,\n        params: {readListId: this.$route.params.readListId},\n        query: {\n          page: `${this.page}`,\n          pageSize: `${this.pageSize}`,\n        },\n      } as Location\n      mergeFilterParams(this.filters, loc.query)\n      this.$router.replace(loc).catch((_: any) => {\n      })\n    },\n    readListChanged(event: ReadListSseDto) {\n      if (event.readListId === this.readListId) {\n        this.loadReadList(this.readListId)\n      }\n    },\n    readListDeleted(event: ReadListSseDto) {\n      if (event.readListId === this.readListId) {\n        this.$router.push({name: 'browse-readlists', params: {libraryId: 'all'}})\n      }\n    },\n    async loadReadList(readListId: string) {\n      this.$komgaReadLists.getOneReadList(readListId)\n        .then(v => {\n          this.readList = v\n          document.title = `Komga - ${v.name}`\n        })\n\n      await this.loadPage(readListId, this.page)\n    },\n    async loadPage(readListId: string, page: number) {\n      this.selectedBooks = []\n\n      const pageRequest = {\n        page: page - 1,\n        size: this.pageSize,\n        unpaged: this.unpaged,\n      } as PageRequest\n\n      let authorsFilter = [] as AuthorDto[]\n      authorRoles.forEach((role: string) => {\n        if (role in this.filters) this.filters[role].forEach((name: string) => authorsFilter.push({\n          name: name,\n          role: role,\n        }))\n      })\n\n      const booksPage = await this.$komgaReadLists.getBooks(readListId, pageRequest, this.filters.library, this.filters.readStatus, this.filters.tag, authorsFilter)\n\n      this.totalPages = booksPage.totalPages\n      this.totalElements = booksPage.totalElements\n      this.books = booksPage.content\n\n      this.books.forEach((x: BookDto) => x.context = {origin: ContextOrigin.READLIST, id: readListId})\n      this.booksCopy = [...this.books]\n      this.selectedBooks = []\n    },\n    reloadPage: throttle(function (this: any) {\n      this.loadPage(this.readListId, this.page)\n    }, 1000),\n    async editSingleBook(book: BookDto) {\n      if (book.oneshot) {\n        const series = (await this.$komgaSeries.getOneSeries(book.seriesId))\n        this.$store.dispatch('dialogUpdateOneshots', {series: series, book: book})\n      } else\n        this.$store.dispatch('dialogUpdateBooks', book)\n    },\n    async editMultipleBooks() {\n      if (this.selectedBooks.every(b => b.oneshot)) {\n        const series = await Promise.all(this.selectedBooks.map(b => this.$komgaSeries.getOneSeries(b.seriesId)))\n        const oneshots = this.selectedBooks.map((b, index) => ({series: series[index], book: b} as Oneshot))\n        this.$store.dispatch('dialogUpdateOneshots', oneshots)\n      } else\n        this.$store.dispatch('dialogUpdateBooks', this.selectedBooks)\n    },\n    bulkEditMultipleBooks() {\n      this.$store.dispatch('dialogUpdateBulkBooks', this.selectedBooks)\n    },\n    deleteBooks() {\n      this.$store.dispatch('dialogDeleteBook', this.selectedBooks)\n    },\n    async markSelectedRead() {\n      await Promise.all(this.selectedBooks.map(b =>\n        this.$komgaBooks.updateReadProgress(b.id, {completed: true} as ReadProgressUpdateDto),\n      ))\n      this.selectedBooks = []\n    },\n    async markSelectedUnread() {\n      await Promise.all(this.selectedBooks.map(b =>\n        this.$komgaBooks.deleteReadProgress(b.id),\n      ))\n      this.selectedBooks = []\n    },\n    addToCollection() {\n      this.$store.dispatch('dialogAddSeriesToCollection', this.selectedBooks.map(b => b.seriesId))\n    },\n    addToReadList() {\n      this.$store.dispatch('dialogAddBooksToReadList', this.selectedBooks.map(b => b.id))\n    },\n    async startEditElements() {\n      this.filters = {}\n      this.unpaged = true\n      await this.reloadPage()\n      this.editElements = true\n    },\n    cancelEditElements() {\n      this.editElements = false\n      this.books = [...this.booksCopy]\n      this.unpaged = false\n      this.reloadPage()\n    },\n    doEditElements() {\n      this.editElements = false\n      const update = {\n        bookIds: this.books.map(x => x.id),\n      } as ReadListUpdateDto\n      this.$komgaReadLists.patchReadList(this.readListId, update)\n      this.unpaged = false\n      this.reloadPage()\n    },\n    editReadList() {\n      this.$store.dispatch('dialogEditReadList', this.readList)\n    },\n    bookChanged(event: BookSseDto) {\n      if (this.books.some(b => b.id === event.bookId)) this.reloadPage()\n    },\n    readProgressChanged(event: ReadProgressSseDto) {\n      if (this.books.some(b => b.id === event.bookId)) this.reloadPage()\n    },\n  },\n})\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BrowseReadList.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BrowseReadList.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./BrowseReadList.vue?vue&type=template&id=9b523eea&\"\nimport script from \"./BrowseReadList.vue?vue&type=script&lang=ts&\"\nexport * from \"./BrowseReadList.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import VOverlay from './VOverlay';\nexport { VOverlay };\nexport default VOverlay;\n//# sourceMappingURL=index.js.map","// Components\nimport VOverlay from '../../components/VOverlay'; // Utilities\n\nimport { keyCodes, addOnceEventListener, addPassiveEventListener, getZIndex, composedPath } from '../../util/helpers'; // Types\n\nimport Vue from 'vue';\n/* @vue/component */\n\nexport default Vue.extend().extend({\n  name: 'overlayable',\n  props: {\n    hideOverlay: Boolean,\n    overlayColor: String,\n    overlayOpacity: [Number, String]\n  },\n\n  data() {\n    return {\n      animationFrame: 0,\n      overlay: null\n    };\n  },\n\n  watch: {\n    hideOverlay(value) {\n      if (!this.isActive) return;\n      if (value) this.removeOverlay();else this.genOverlay();\n    }\n\n  },\n\n  beforeDestroy() {\n    this.removeOverlay();\n  },\n\n  methods: {\n    createOverlay() {\n      const overlay = new VOverlay({\n        propsData: {\n          absolute: this.absolute,\n          value: false,\n          color: this.overlayColor,\n          opacity: this.overlayOpacity\n        }\n      });\n      overlay.$mount();\n      const parent = this.absolute ? this.$el.parentNode : document.querySelector('[data-app]');\n      parent && parent.insertBefore(overlay.$el, parent.firstChild);\n      this.overlay = overlay;\n    },\n\n    genOverlay() {\n      this.hideScroll();\n      if (this.hideOverlay) return;\n      if (!this.overlay) this.createOverlay();\n      this.animationFrame = requestAnimationFrame(() => {\n        if (!this.overlay) return;\n\n        if (this.activeZIndex !== undefined) {\n          this.overlay.zIndex = String(this.activeZIndex - 1);\n        } else if (this.$el) {\n          this.overlay.zIndex = getZIndex(this.$el);\n        }\n\n        this.overlay.value = true;\n      });\n      return true;\n    },\n\n    /** removeOverlay(false) will not restore the scollbar afterwards */\n    removeOverlay(showScroll = true) {\n      if (this.overlay) {\n        addOnceEventListener(this.overlay.$el, 'transitionend', () => {\n          if (!this.overlay || !this.overlay.$el || !this.overlay.$el.parentNode || this.overlay.value || this.isActive) return;\n          this.overlay.$el.parentNode.removeChild(this.overlay.$el);\n          this.overlay.$destroy();\n          this.overlay = null;\n        }); // Cancel animation frame in case\n        // overlay is removed before it\n        // has finished its animation\n\n        cancelAnimationFrame(this.animationFrame);\n        this.overlay.value = false;\n      }\n\n      showScroll && this.showScroll();\n    },\n\n    scrollListener(e) {\n      if ('key' in e) {\n        if (['INPUT', 'TEXTAREA', 'SELECT'].includes(e.target.tagName) || // https://github.com/vuetifyjs/vuetify/issues/4715\n        e.target.isContentEditable) return;\n        const up = [keyCodes.up, keyCodes.pageup];\n        const down = [keyCodes.down, keyCodes.pagedown];\n\n        if (up.includes(e.keyCode)) {\n          e.deltaY = -1;\n        } else if (down.includes(e.keyCode)) {\n          e.deltaY = 1;\n        } else {\n          return;\n        }\n      }\n\n      if (e.target === this.overlay || e.type !== 'keydown' && e.target === document.body || this.checkPath(e)) e.preventDefault();\n    },\n\n    hasScrollbar(el) {\n      if (!el || el.nodeType !== Node.ELEMENT_NODE) return false;\n      const style = window.getComputedStyle(el);\n      return (['auto', 'scroll'].includes(style.overflowY) || el.tagName === 'SELECT') && el.scrollHeight > el.clientHeight || ['auto', 'scroll'].includes(style.overflowX) && el.scrollWidth > el.clientWidth;\n    },\n\n    shouldScroll(el, e) {\n      if (el.hasAttribute('data-app')) return false;\n      const dir = e.shiftKey || e.deltaX ? 'x' : 'y';\n      const delta = dir === 'y' ? e.deltaY : e.deltaX || e.deltaY;\n      let alreadyAtStart;\n      let alreadyAtEnd;\n\n      if (dir === 'y') {\n        alreadyAtStart = el.scrollTop === 0;\n        alreadyAtEnd = el.scrollTop + el.clientHeight === el.scrollHeight;\n      } else {\n        alreadyAtStart = el.scrollLeft === 0;\n        alreadyAtEnd = el.scrollLeft + el.clientWidth === el.scrollWidth;\n      }\n\n      const scrollingUp = delta < 0;\n      const scrollingDown = delta > 0;\n      if (!alreadyAtStart && scrollingUp) return true;\n      if (!alreadyAtEnd && scrollingDown) return true;\n\n      if ((alreadyAtStart || alreadyAtEnd) && el.parentNode) {\n        return this.shouldScroll(el.parentNode, e);\n      }\n\n      return false;\n    },\n\n    isInside(el, parent) {\n      if (el === parent) {\n        return true;\n      } else if (el === null || el === document.body) {\n        return false;\n      } else {\n        return this.isInside(el.parentNode, parent);\n      }\n    },\n\n    checkPath(e) {\n      const path = composedPath(e);\n\n      if (e.type === 'keydown' && path[0] === document.body) {\n        const dialog = this.$refs.dialog; // getSelection returns null in firefox in some edge cases, can be ignored\n\n        const selected = window.getSelection().anchorNode;\n\n        if (dialog && this.hasScrollbar(dialog) && this.isInside(selected, dialog)) {\n          return !this.shouldScroll(dialog, e);\n        }\n\n        return true;\n      }\n\n      for (let index = 0; index < path.length; index++) {\n        const el = path[index];\n        if (el === document) return true;\n        if (el === document.documentElement) return true;\n        if (el === this.$refs.content) return true;\n        if (this.hasScrollbar(el)) return !this.shouldScroll(el, e);\n      }\n\n      return true;\n    },\n\n    hideScroll() {\n      if (this.$vuetify.breakpoint.smAndDown) {\n        document.documentElement.classList.add('overflow-y-hidden');\n      } else {\n        addPassiveEventListener(window, 'wheel', this.scrollListener, {\n          passive: false\n        });\n        window.addEventListener('keydown', this.scrollListener);\n      }\n    },\n\n    showScroll() {\n      document.documentElement.classList.remove('overflow-y-hidden');\n      window.removeEventListener('wheel', this.scrollListener);\n      window.removeEventListener('keydown', this.scrollListener);\n    }\n\n  }\n});\n//# sourceMappingURL=index.js.map"],"names":["staticStyle","_vm","totalElements","readList","ordered","staticClass","_s","on","_c","attrs","scopedSlots","fn","editReadList","key","model","callback","expression","$event","selectedBooks","books","editMultipleBooks","value","$$v","editElements","filters","drawer","fileUrl","totalPages","$t","_v","paginationVisible","itemContext","staticRenderFns","Vue","extend","name","components","EmptyState","PageSizeSelect","ToolbarSticky","ItemBrowser","ReadListActionsMenu","MultiSelectBar","FilterDrawer","FilterPanels","FilterList","ReadMore","data","ItemContext","undefined","booksCopy","page","pageSize","unpaged","filterUnwatch","pageUnwatch","pageSizeUnwatch","filterOptions","library","tag","props","readListId","type","String","required","created","this","$eventHub","$on","READLIST_CHANGED","readListChanged","READLIST_DELETED","readListDeleted","BOOK_CHANGED","bookChanged","BOOK_DELETED","READPROGRESS_CHANGED","readProgressChanged","READPROGRESS_DELETED","beforeDestroy","$off","mounted","$store","state","persistedState","browsingPageSize","resetParams","$route","query","Number","loadReadList","setWatches","beforeRouteUpdate","to","from","next","params","unsetWatches","computed","_this$readList","SHOW_SERIES","RELEASE_DATE","$vuetify","breakpoint","filterOptionsList","readStatus","values","$i18n","t","toString","ReadStatus","UNREAD","IN_PROGRESS","READ","filterOptionsPanel","r","authorRoles","forEach","role","search","async","$komgaReferential","getAuthors","content","map","x","isAdmin","getters","meAdmin","canDownload","meFileDownload","readListFileUrl","filterActive","Object","keys","some","length","selectedOneshots","every","b","oneshot","methods","resetFilters","prop","$set","commit","id","filter","updateRouteAndReload","route","komgaLibraries","libraries","tags","getBookTags","activeFilters","toNameValue","getReadListFilter","validateFilters","_filters$readStatus","_filters$library","_filters$tag","validFilter","includes","n","$watch","val","updateRoute","loadPage","loc","mergeFilterParams","$router","replace","catch","_","event","push","libraryId","$komgaReadLists","getOneReadList","then","v","document","title","pageRequest","size","authorsFilter","booksPage","getBooks","context","origin","ContextOrigin","READLIST","reloadPage","throttle","editSingleBook","book","series","$komgaSeries","getOneSeries","seriesId","dispatch","Promise","all","oneshots","index","bulkEditMultipleBooks","deleteBooks","markSelectedRead","$komgaBooks","updateReadProgress","completed","markSelectedUnread","deleteReadProgress","addToCollection","addToReadList","startEditElements","cancelEditElements","doEditElements","update","bookIds","patchReadList","bookId","component","render","VOverlay","hideOverlay","Boolean","overlayColor","overlayOpacity","animationFrame","overlay","watch","isActive","removeOverlay","genOverlay","createOverlay","propsData","absolute","color","opacity","$mount","parent","$el","parentNode","querySelector","insertBefore","firstChild","hideScroll","requestAnimationFrame","activeZIndex","zIndex","showScroll","removeChild","$destroy","cancelAnimationFrame","scrollListener","e","target","tagName","isContentEditable","up","pageup","down","pagedown","keyCode","deltaY","body","checkPath","preventDefault","hasScrollbar","el","nodeType","Node","ELEMENT_NODE","style","window","getComputedStyle","overflowY","scrollHeight","clientHeight","overflowX","scrollWidth","clientWidth","shouldScroll","hasAttribute","dir","shiftKey","deltaX","delta","alreadyAtStart","alreadyAtEnd","scrollTop","scrollLeft","scrollingUp","scrollingDown","isInside","path","dialog","$refs","selected","getSelection","anchorNode","documentElement","smAndDown","classList","add","passive","addEventListener","remove","removeEventListener"],"sourceRoot":""}