"use strict";(self["webpackChunkkomga_webui"]=self["webpackChunkkomga_webui"]||[]).push([[945],{1324:function(e,t,s){s.d(t,{A:function(){return u}});var i=s(3224),o=s(16684),n=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"text-center"},[t(i.A,{attrs:{color:"contrast-1",size:e.size}},[t("div",[""!==e.icon?t(o.A,{attrs:{color:e.iconColor,size:e.iconSize}},[e._v(e._s(e.icon)+" ")]):e._e(),t("h1",{staticClass:"text-h5"},[e._v(e._s(e.title))]),t("p",{staticClass:"text-body-1"},[e._v(e._s(e.subTitle))]),e._t("default")],2)])],1)},a=[],r=s(85471),l=r.Ay.extend({name:"EmptyState",props:{title:String,subTitle:String,icon:String,iconColor:String,iconSize:{type:[Number,String],default:140},size:{type:[Number,String],default:400}}}),d=l,c=s(81656),h=(0,c.A)(d,n,a,!1,null,"64f4a2b5",null),u=h.exports},81301:function(e,t,s){s.d(t,{A:function(){return f}});var i=s(73847);function o(e,t,s){const i=t.modifiers||{},o=t.value,a="object"===typeof o?o.handler:o,{once:r,...l}=i,d=Object.keys(l).length>0,c="object"===typeof o&&o.options?o.options:d?{attributes:l.attr,childList:l.child,subtree:l.sub,characterData:l.char}:{attributes:!0,childList:!0,subtree:!0,characterData:!0},h=new MutationObserver(((i,o)=>{e._mutate&&(a(i,o),r&&n(e,t,s))}));h.observe(e,c),e._mutate=Object(e._mutate),e._mutate[s.context._uid]={observer:h}}function n(e,t,s){var i;(null===(i=e._mutate)||void 0===i?void 0:i[s.context._uid])&&(e._mutate[s.context._uid].observer.disconnect(),delete e._mutate[s.context._uid])}const a={inserted:o,unbind:n};var r=a,l=s(8177),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticStyle:{position:"relative"}},[t("div",{staticStyle:{"min-height":"36px"}},[e._t("prepend")],2),t("div",{style:"position: absolute; top: 0;"+(e.$vuetify.rtl?"left: 0":"right: 0")},[t(i.A,{attrs:{icon:"",disabled:!e.canScrollBackward},on:{click:function(t){return e.doScroll("backward")}}},[t("rtl-icon",{attrs:{icon:"mdi-chevron-left",rtl:"mdi-chevron-right"}})],1),t(i.A,{attrs:{icon:"",disabled:!e.canScrollForward},on:{click:function(t){return e.doScroll("forward")}}},[t("rtl-icon",{attrs:{icon:"mdi-chevron-right",rtl:"mdi-chevron-left"}})],1)],1),t("div",{directives:[{def:l.A,name:"resize",rawName:"v-resize",value:e.computeScrollability,expression:"computeScrollability"}],ref:e.id,staticClass:"scrolling-wrapper",attrs:{id:e.id},on:{scroll:e.computeScrollability}},[t("div",{directives:[{def:r,name:"mutate",rawName:"v-mutate",value:e.computeScrollability,expression:"computeScrollability"}],staticClass:"d-inline-flex"},[e._t("content"),e._t("content-append")],2)])])},c=[],h=s(85471),u=s(24636),p=h.Ay.extend({name:"HorizontalScroller",components:{RtlIcon:u.A},data:function(){const e=this.$_.uniqueId();return{id:e,canScrollBackward:!1,canScrollForward:!0,container:this.$refs[e],adjustment:100}},props:{tick:{type:Number,default:0}},mounted(){this.container=this.$refs[this.id],this.computeScrollability()},watch:{tick(){setTimeout(this.computeScrollability,200)}},methods:{computeScrollability(){if(this.container){let e;this.$vuetify.rtl?(this.canScrollBackward=Math.round(this.container.scrollLeft)<0,this.canScrollForward=Math.round(this.container.scrollLeft)-this.container.clientWidth>-this.container.scrollWidth,e=(Math.round(this.container.scrollLeft)-this.container.clientWidth)/-this.container.scrollWidth):(this.canScrollBackward=Math.round(this.container.scrollLeft)>0,this.canScrollForward=Math.round(this.container.scrollLeft)+this.container.clientWidth<this.container.scrollWidth,e=(Math.round(this.container.scrollLeft)+this.container.clientWidth)/this.container.scrollWidth),this.$emit("scroll-changed",e)}},doScroll(e){if(void 0!==this.container){let t,s=this.container.clientWidth-this.adjustment,i=Math.round(this.container.scrollLeft);t=this.$vuetify.rtl?"backward"===e?i+s:i-s:"backward"===e?i-s:i+s,this.container.scrollTo({top:0,left:t,behavior:"smooth"})}}}}),m=p,k=s(81656),g=(0,k.A)(m,d,c,!1,null,"6ff71d44",null),f=g.exports},24636:function(e,t,s){s.d(t,{A:function(){return h}});var i=s(16684),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return e.$vuetify.rtl?t(i.A,[e._v(e._s(e.rtl))]):t(i.A,[e._v(e._s(e.icon))])},n=[],a=s(85471),r=a.Ay.extend({name:"RtlIcon",props:{icon:{type:String,required:!0},rtl:{type:String,required:!0}}}),l=r,d=s(81656),c=(0,d.A)(l,o,n,!1,null,"56a7313c",null),h=c.exports},78892:function(e,t,s){s.d(t,{A:function(){return f}});var i=s(73847),o=s(16684),n=s(80700),a=s(40005),r=s(26702),l=s(84551),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(n.Yt,{attrs:{"hide-on-leave":""}},[e.value.length>0?t("toolbar-sticky",{attrs:{elevation:5,color:"base"}},[t(i.A,{attrs:{icon:""},on:{click:e.unselectAll}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-close")])]}}],null,!1,4258196469)},[t("span",[e._v(e._s(e.$t("menu.deselect_all")))])])],1),e.showSelectAll?t(i.A,{attrs:{icon:""},on:{click:e.selectAll}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-select-all")])]}}],null,!1,848294631)},[t("span",[e._v(e._s(e.$t("menu.select_all")))])])],1):e._e(),t(r.sw,{staticClass:"mx-2"},[t("span",[e._v(e._s(e.$tc("common.n_selected",e.value.length)))])]),t(a.A),"books"===e.kind||"series"===e.kind?t(i.A,{attrs:{icon:""},on:{click:e.markRead}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-bookmark-check")])]}}],null,!1,2944767412)},[t("span",[e._v(e._s(e.$t("menu.mark_read")))])])],1):e._e(),"books"===e.kind||"series"===e.kind?t(i.A,{attrs:{icon:""},on:{click:e.markUnread}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-bookmark-remove")])]}}],null,!1,2589859700)},[t("span",[e._v(e._s(e.$t("menu.mark_unread")))])])],1):e._e(),e.isAdmin&&("series"===e.kind||"books"===e.kind&&e.oneshots)?t(i.A,{attrs:{icon:""},on:{click:e.addToCollection}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-playlist-plus")])]}}],null,!1,855572914)},[t("span",[e._v(e._s(e.$t("menu.add_to_collection")))])])],1):e._e(),!e.isAdmin||"books"!==e.kind&&"series"!==e.kind?e._e():t(i.A,{attrs:{icon:""},on:{click:e.addToReadList}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-book-plus-multiple")])]}}],null,!1,3391873344)},[t("span",[e._v(e._s(e.$t("menu.add_to_readlist")))])])],1),e.isAdmin&&"books"===e.kind?t(i.A,{attrs:{icon:""},on:{click:e.bulkEdit}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-table-edit")])]}}],null,!1,2794987148)},[t("span",[e._v(e._s(e.$t("menu.bulk_edit_metadata")))])])],1):e._e(),!e.isAdmin||"books"!==e.kind&&"series"!==e.kind?e._e():t(i.A,{attrs:{icon:""},on:{click:e.edit}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-pencil")])]}}],null,!1,1783139550)},[t("span",[e._v(e._s(e.$t("menu.edit_metadata")))])])],1),e.isAdmin?t(i.A,{attrs:{icon:""},on:{click:e.doDelete}},[t(l.A,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s}){return[t(o.A,e._g({},s),[e._v("mdi-delete")])]}}],null,!1,2967236346)},[t("span",[e._v(e._s(e.$t("menu.delete")))])])],1):e._e()],1):e._e()],1)},c=[],h=s(85471),u=s(72448),p=h.Ay.extend({name:"MultiSelectBar",components:{ToolbarSticky:u.A},data:()=>({}),props:{value:{type:Array,required:!0},kind:{type:String,required:!0},oneshots:{type:Boolean,default:!1},showSelectAll:{type:Boolean,default:!1}},computed:{isAdmin(){return this.$store.getters.meAdmin}},methods:{unselectAll(){this.$emit("unselect-all")},selectAll(){this.$emit("select-all")},markRead(){this.$emit("mark-read")},markUnread(){this.$emit("mark-unread")},addToCollection(){this.$emit("add-to-collection")},addToReadList(){this.$emit("add-to-readlist")},edit(){this.$emit("edit")},bulkEdit(){this.$emit("bulk-edit")},doDelete(){this.$emit("delete")}}}),m=p,k=s(81656),g=(0,k.A)(m,d,c,!1,null,null,null),f=g.exports},62728:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var i=s(70793),o=s(40005),n=s(26702),a=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{style:e.$vuetify.breakpoint.xs?"margin-bottom: 56px":void 0},[e.individualLibrary&&0===e.selectedSeries.length&&0===e.selectedBooks.length?t("toolbar-sticky",[e.library?t("library-actions-menu",{attrs:{library:e.library}}):e._e(),t(n.sw,[t("span",[e._v(e._s(e.library?e.library.name:e.$t("common.all_libraries")))])]),t(o.A),e.individualLibrary&&e.$vuetify.breakpoint.mdAndUp?t("library-navigation",{attrs:{libraryId:e.libraryId}}):e._e(),t(o.A)],1):e._e(),e.individualLibrary&&e.$vuetify.breakpoint.smAndDown?t("library-navigation",{attrs:{libraryId:e.libraryId,"bottom-navigation":""}}):e._e(),t("multi-select-bar",{attrs:{kind:"series"},on:{"unselect-all":function(t){e.selectedSeries=[]},"mark-read":e.markSelectedSeriesRead,"mark-unread":e.markSelectedSeriesUnread,"add-to-collection":e.addToCollection,"add-to-readlist":e.addSeriesBooksToReadList,edit:e.editMultipleSeries,delete:e.deleteSeries},model:{value:e.selectedSeries,callback:function(t){e.selectedSeries=t},expression:"selectedSeries"}}),t("multi-select-bar",{attrs:{kind:"books",oneshots:e.selectedOneshots},on:{"unselect-all":function(t){e.selectedBooks=[]},"mark-read":e.markSelectedBooksRead,"mark-unread":e.markSelectedBooksUnread,"add-to-readlist":e.addToReadList,"add-to-collection":e.addOneshotsToCollection,edit:e.editMultipleBooks,"bulk-edit":e.bulkEditMultipleBooks,delete:e.deleteBooks},model:{value:e.selectedBooks,callback:function(t){e.selectedBooks=t},expression:"selectedBooks"}}),t(i.A,{attrs:{fluid:""}},[e.allEmpty&&!e.loading?t("empty-state",{attrs:{title:e.$t("common.nothing_to_show"),icon:"mdi-help-circle","icon-color":"secondary"}}):e._e(),e.loaderInProgressBooks&&0!==e.loaderInProgressBooks.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderInProgressBooks.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderInProgressBooks,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.keep_reading")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderInProgressBooks.items,"item-context":[e.ItemContext.SHOW_SERIES],nowrap:"","edit-function":e.isAdmin?e.singleEditBook:void 0,selected:e.selectedBooks,selectable:0===e.selectedSeries.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedBooks=t}}})]},proxy:!0}],null,!1,3988083671)}):e._e(),e.loaderOnDeckBooks&&0!==e.loaderOnDeckBooks.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderOnDeckBooks.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderOnDeckBooks,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.on_deck")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderOnDeckBooks.items,"item-context":[e.ItemContext.SHOW_SERIES],nowrap:"","edit-function":e.isAdmin?e.singleEditBook:void 0,selected:e.selectedBooks,selectable:0===e.selectedSeries.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedBooks=t}}})]},proxy:!0}],null,!1,1231022916)}):e._e(),e.loaderRecentlyReleasedBooks&&0!==e.loaderRecentlyReleasedBooks.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderRecentlyReleasedBooks.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderRecentlyReleasedBooks,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.recently_released_books")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderRecentlyReleasedBooks.items,"item-context":[e.ItemContext.RELEASE_DATE,e.ItemContext.SHOW_SERIES],nowrap:"","edit-function":e.isAdmin?e.singleEditBook:void 0,selected:e.selectedBooks,selectable:0===e.selectedSeries.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedBooks=t}}})]},proxy:!0}],null,!1,2221056011)}):e._e(),e.loaderLatestBooks&&0!==e.loaderLatestBooks.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderLatestBooks.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderLatestBooks,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.recently_added_books")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderLatestBooks.items,"item-context":[e.ItemContext.SHOW_SERIES],nowrap:"","edit-function":e.isAdmin?e.singleEditBook:void 0,selected:e.selectedBooks,selectable:0===e.selectedSeries.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedBooks=t}}})]},proxy:!0}],null,!1,311932356)}):e._e(),e.loaderNewSeries&&0!==e.loaderNewSeries.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderNewSeries.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderNewSeries,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.recently_added_series")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderNewSeries.items,nowrap:"","edit-function":e.isAdmin?e.singleEditSeries:void 0,selected:e.selectedSeries,selectable:0===e.selectedBooks.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedSeries=t}}})]},proxy:!0}],null,!1,3814680132)}):e._e(),e.loaderUpdatedSeries&&0!==e.loaderUpdatedSeries.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderUpdatedSeries.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderUpdatedSeries,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.recently_updated_series")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderUpdatedSeries.items,nowrap:"","edit-function":e.isAdmin?e.singleEditSeries:void 0,selected:e.selectedSeries,selectable:0===e.selectedBooks.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedSeries=t}}})]},proxy:!0}],null,!1,4184700440)}):e._e(),e.loaderRecentlyReadBooks&&0!==e.loaderRecentlyReadBooks.items.length?t("horizontal-scroller",{staticClass:"mb-4",attrs:{tick:e.loaderRecentlyReadBooks.tick},on:{"scroll-changed":t=>e.scrollChanged(e.loaderRecentlyReadBooks,t)},scopedSlots:e._u([{key:"prepend",fn:function(){return[t("div",{staticClass:"title"},[e._v(e._s(e.$t("dashboard.recently_read_books")))])]},proxy:!0},{key:"content",fn:function(){return[t("item-browser",{attrs:{items:e.loaderRecentlyReadBooks.items,"item-context":[e.ItemContext.SHOW_SERIES,e.ItemContext.READ_DATE],nowrap:"","edit-function":e.isAdmin?e.singleEditBook:void 0,selected:e.selectedBooks,selectable:0===e.selectedSeries.length,"fixed-item-width":e.fixedCardWidth},on:{"update:selected":function(t){e.selectedBooks=t}}})]},proxy:!0}],null,!1,617184688)}):e._e()],1)],1)},r=[],l=(s(28743),s(14602),s(78892)),d=s(1324),c=s(81301),h=s(10734),u=s(72448),p=s(60693),m=s(57531),k=s(79957),g=s(52846),f=s(85471),v=s(67036),y=s(2543),b=s(94188),_=s(10123),S=s(70551);function A(e,t){(0,S.A)(2,arguments);var s=(0,_.A)(e),i=(0,b.A)(t);if(isNaN(i))return new Date(NaN);if(!i)return s;var o=s.getDate(),n=new Date(s.getTime());n.setMonth(s.getMonth()+i+1,0);var a=n.getDate();return o>=a?n:(s.setFullYear(n.getFullYear(),n.getMonth(),o),s)}function B(e,t){(0,S.A)(2,arguments);var s=(0,b.A)(t);return A(e,-s)}var $=s(30415),x=s(54919),w=s(19447),C=f.Ay.extend({name:"DashboardView",components:{HorizontalScroller:c.A,EmptyState:d.A,ToolbarSticky:u.A,LibraryNavigation:m.A,ItemBrowser:h.A,MultiSelectBar:l.A,LibraryActionsMenu:p.A},data:()=>({ItemContext:x.XZ,loading:!1,library:void 0,loaderNewSeries:void 0,loaderUpdatedSeries:void 0,loaderLatestBooks:void 0,loaderInProgressBooks:void 0,loaderOnDeckBooks:void 0,loaderRecentlyReleasedBooks:void 0,loaderRecentlyReadBooks:void 0,selectedSeries:[],selectedBooks:[]}),created(){this.$eventHub.$on(g.t_,this.seriesChanged),this.$eventHub.$on(g.P,this.seriesChanged),this.$eventHub.$on(g.Mi,this.seriesChanged),this.$eventHub.$on(g.R2,this.bookChanged),this.$eventHub.$on(g.vk,this.bookChanged),this.$eventHub.$on(g.Qg,this.bookChanged),this.$eventHub.$on(g.pU,this.readProgressChanged),this.$eventHub.$on(g.Ih,this.readProgressChanged),this.$eventHub.$on(g.$V,this.readProgressSeriesChanged),this.$eventHub.$on(g.sn,this.readProgressSeriesChanged)},beforeDestroy(){this.$eventHub.$off(g.t_,this.seriesChanged),this.$eventHub.$off(g.P,this.seriesChanged),this.$eventHub.$off(g.Mi,this.seriesChanged),this.$eventHub.$off(g.R2,this.bookChanged),this.$eventHub.$off(g.vk,this.bookChanged),this.$eventHub.$off(g.Qg,this.bookChanged),this.$eventHub.$off(g.pU,this.readProgressChanged),this.$eventHub.$off(g.Ih,this.readProgressChanged),this.$eventHub.$off(g.$V,this.readProgressSeriesChanged),this.$eventHub.$off(g.sn,this.readProgressSeriesChanged)},mounted(){this.individualLibrary&&this.$store.commit("setLibraryRoute",{id:this.libraryId,route:v.k.RECOMMENDED}),this.setupLoaders(this.libraryId),this.loadAll(this.libraryId)},props:{libraryId:{type:String,default:v._}},watch:{libraryId(e){this.setupLoaders(e),this.loadAll(e)},"$store.state.komgaLibraries.libraries":{handler(e){0===e.length?this.$router.push({name:"welcome"}):this.reload()}}},computed:{isAdmin(){return this.$store.getters.meAdmin},fixedCardWidth(){return this.$vuetify.breakpoint.xs?120:150},allEmpty(){var e,t,s,i,o,n,a;return 0===(null===(e=this.loaderNewSeries)||void 0===e?void 0:e.items.length)&&0===(null===(t=this.loaderUpdatedSeries)||void 0===t?void 0:t.items.length)&&0===(null===(s=this.loaderLatestBooks)||void 0===s?void 0:s.items.length)&&0===(null===(i=this.loaderInProgressBooks)||void 0===i?void 0:i.items.length)&&0===(null===(o=this.loaderOnDeckBooks)||void 0===o?void 0:o.items.length)&&0===(null===(n=this.loaderRecentlyReleasedBooks)||void 0===n?void 0:n.items.length)&&0===(null===(a=this.loaderRecentlyReadBooks)||void 0===a?void 0:a.items.length)},individualLibrary(){return this.libraryId!==v._},selectedOneshots(){return this.selectedBooks.every((e=>e.oneshot))}},methods:{async scrollChanged(e,t){t>.95&&await e.loadNext()},getRequestLibraryId(e){return e!==v._?e:void 0},seriesChanged(e){this.libraryId!==v._&&e.libraryId!==this.libraryId||this.reload()},bookChanged(e){this.libraryId!==v._&&e.libraryId!==this.libraryId||this.reload()},readProgressChanged(e){var t,s,i,o,n;(null!==(t=this.loaderInProgressBooks)&&void 0!==t&&t.items.some((t=>t.id===e.bookId))||null!==(s=this.loaderLatestBooks)&&void 0!==s&&s.items.some((t=>t.id===e.bookId))||null!==(i=this.loaderOnDeckBooks)&&void 0!==i&&i.items.some((t=>t.id===e.bookId))||null!==(o=this.loaderRecentlyReleasedBooks)&&void 0!==o&&o.items.some((t=>t.id===e.bookId))||null!==(n=this.loaderRecentlyReadBooks)&&void 0!==n&&n.items.some((t=>t.id===e.bookId)))&&this.reload()},readProgressSeriesChanged(e){var t,s;(null!==(t=this.loaderUpdatedSeries)&&void 0!==t&&t.items.some((t=>t.id===e.seriesId))||null!==(s=this.loaderNewSeries)&&void 0!==s&&s.items.some((t=>t.id===e.seriesId)))&&this.reload()},reload:(0,y.throttle)((function(){this.loadAll(this.libraryId,!0)}),5e3),setupLoaders(e){const t=[];e!==v._&&t.push(new w.KU(new w.Tr(e))),this.loaderInProgressBooks=new $.D({sort:["readProgress.readDate,desc"]},(e=>this.$komgaBooks.getBooksList({condition:new w.FY([...t,new w.qE(new w.Tr(k.RJ.IN_PROGRESS))])},e))),this.loaderOnDeckBooks=new $.D({},(t=>this.$komgaBooks.getBooksOnDeck(this.getRequestLibraryId(e),t))),this.loaderLatestBooks=new $.D({sort:["createdDate,desc"]},(e=>this.$komgaBooks.getBooksList({condition:new w.FY(t)},e))),this.loaderRecentlyReleasedBooks=new $.D({sort:["metadata.releaseDate,desc"]},(e=>this.$komgaBooks.getBooksList({condition:new w.FY([...t,new w.Vf(new w.Ne(B(new Date,1)))])},e))),this.loaderRecentlyReadBooks=new $.D({sort:["readProgress.readDate,desc"]},(e=>this.$komgaBooks.getBooksList({condition:new w.FY([...t,new w.qE(new w.Tr(k.RJ.READ))])},e))),this.loaderNewSeries=new $.D({},(t=>this.$komgaSeries.getNewSeries(this.getRequestLibraryId(e),!1,t))),this.loaderUpdatedSeries=new $.D({},(t=>this.$komgaSeries.getUpdatedSeries(this.getRequestLibraryId(e),!1,t)))},loadAll(e,t=!1){this.loading=!0,this.library=this.getLibraryLazy(e),void 0!=this.library&&(document.title=`Komga - ${this.library.name}`),this.selectedSeries=[],this.selectedBooks=[],t?Promise.all([this.loaderInProgressBooks.reload(),this.loaderOnDeckBooks.reload(),this.loaderRecentlyReleasedBooks.reload(),this.loaderLatestBooks.reload(),this.loaderNewSeries.reload(),this.loaderUpdatedSeries.reload(),this.loaderRecentlyReadBooks.reload()]).then((()=>{this.loading=!1})):Promise.all([this.loaderInProgressBooks.loadNext(),this.loaderOnDeckBooks.loadNext(),this.loaderRecentlyReleasedBooks.loadNext(),this.loaderLatestBooks.loadNext(),this.loaderNewSeries.loadNext(),this.loaderUpdatedSeries.loadNext(),this.loaderRecentlyReadBooks.loadNext()]).then((()=>{this.loading=!1}))},async singleEditSeries(e){if(e.oneshot){let t=(await this.$komgaBooks.getBooksList({condition:new w.kq(new w.Tr(e.id))})).content[0];this.$store.dispatch("dialogUpdateOneshots",{series:e,book:t})}else this.$store.dispatch("dialogUpdateSeries",e)},async singleEditBook(e){if(e.oneshot){const t=await this.$komgaSeries.getOneSeries(e.seriesId);this.$store.dispatch("dialogUpdateOneshots",{series:t,book:e})}else this.$store.dispatch("dialogUpdateBooks",e)},async markSelectedSeriesRead(){await Promise.all(this.selectedSeries.map((e=>this.$komgaSeries.markAsRead(e.id)))),this.selectedSeries=[]},async markSelectedSeriesUnread(){await Promise.all(this.selectedSeries.map((e=>this.$komgaSeries.markAsUnread(e.id)))),this.selectedSeries=[]},addToCollection(){this.$store.dispatch("dialogAddSeriesToCollection",this.selectedSeries.map((e=>e.id))),this.selectedSeries=[]},addOneshotsToCollection(){this.$store.dispatch("dialogAddSeriesToCollection",this.selectedBooks.map((e=>e.seriesId))),this.selectedBooks=[]},async editMultipleSeries(){if(this.selectedSeries.every((e=>e.oneshot))){const e=await Promise.all(this.selectedSeries.map((e=>this.$komgaBooks.getBooksList({condition:new w.kq(new w.Tr(e.id))})))),t=this.selectedSeries.map(((t,s)=>({series:t,book:e[s].content[0]})));this.$store.dispatch("dialogUpdateOneshots",t)}else this.$store.dispatch("dialogUpdateSeries",this.selectedSeries)},async editMultipleBooks(){if(this.selectedBooks.every((e=>e.oneshot))){const e=await Promise.all(this.selectedBooks.map((e=>this.$komgaSeries.getOneSeries(e.seriesId)))),t=this.selectedBooks.map(((t,s)=>({series:e[s],book:t})));this.$store.dispatch("dialogUpdateOneshots",t)}else this.$store.dispatch("dialogUpdateBooks",this.selectedBooks)},deleteSeries(){this.$store.dispatch("dialogDeleteSeries",this.selectedSeries)},deleteBooks(){this.$store.dispatch("dialogDeleteBook",this.selectedBooks)},bulkEditMultipleBooks(){this.$store.dispatch("dialogUpdateBulkBooks",this.selectedBooks)},addToReadList(){this.$store.dispatch("dialogAddBooksToReadList",this.selectedBooks.map((e=>e.id))),this.selectedBooks=[]},async addSeriesBooksToReadList(){const e=this.selectedSeries.map((e=>new w.kq(new w.Tr(e.id)))),t=await this.$komgaBooks.getBooksList({condition:new w.a4(e)},{unpaged:!0});this.$store.dispatch("dialogAddBooksToReadList",t.content.map((e=>e.id)))},async markSelectedBooksRead(){await Promise.all(this.selectedBooks.map((e=>this.$komgaBooks.updateReadProgress(e.id,{completed:!0})))),this.selectedBooks=[]},async markSelectedBooksUnread(){await Promise.all(this.selectedBooks.map((e=>this.$komgaBooks.deleteReadProgress(e.id)))),this.selectedBooks=[]},getLibraryLazy(e){return e!==v._?this.$store.getters.getLibraryById(e):void 0}}}),I=C,T=s(81656),R=(0,T.A)(I,a,r,!1,null,"4a23eba5",null),P=R.exports},30415:function(e,t,s){s.d(t,{D:function(){return o}});var i=s(32362);s(14602),s(28743);class o{get hasNextPage(){return!!this.currentPage&&!this.currentPage.last}get tick(){return this._tick}get hasLoadedAny(){return this.currentPage}constructor(e,t,s=e=>e){(0,i.A)(this,"pageable",void 0),(0,i.A)(this,"loader",void 0),(0,i.A)(this,"postProcessor",void 0),(0,i.A)(this,"currentPage",void 0),(0,i.A)(this,"loadedPages",[]),(0,i.A)(this,"_tick",0),(0,i.A)(this,"items",[]),this.pageable=e,this.loader=t,this.postProcessor=s}async reload(){if(!this.currentPage)return this.loadNext();const e=Object.assign({},this.pageable,{size:(this.currentPage.number+1)*(this.pageable.size||20),page:0}),t=await this.loader(e);this.items.splice(0,this.items.length,...t.content.map(this.postProcessor)),this._tick++}async loadNext(){if(this.currentPage){if(this.currentPage.last)return!1;{const e=this.currentPage.number+1;if(!this.loadedPages.includes(e)){this.loadedPages.push(e);const t=Object.assign({},this.pageable,{page:e});return this.currentPage=await this.loader(t),this.items.push(...this.currentPage.content.map(this.postProcessor)),this._tick++,!0}return!1}}return this.loadedPages.push(this.pageable.page||0),this.currentPage=await this.loader(this.pageable),this.items.push(...this.currentPage.content.map(this.postProcessor)),this._tick++,!0}}},22369:function(e,t,s){s(40125);var i=s(85471),o=s(20910),n=s(69463);const a=["sm","md","lg","xl"],r=["start","end","center"];function l(e,t){return a.reduce(((s,i)=>(s[e+(0,n.Zb)(i)]=t(),s)),{})}const d=e=>[...r,"baseline","stretch"].includes(e),c=l("align",(()=>({type:String,default:null,validator:d}))),h=e=>[...r,"space-between","space-around"].includes(e),u=l("justify",(()=>({type:String,default:null,validator:h}))),p=e=>[...r,"space-between","space-around","stretch"].includes(e),m=l("alignContent",(()=>({type:String,default:null,validator:p}))),k={align:Object.keys(c),justify:Object.keys(u),alignContent:Object.keys(m)},g={align:"align",justify:"justify",alignContent:"align-content"};function f(e,t,s){let i=g[e];if(null!=s){if(t){const s=t.replace(e,"");i+=`-${s}`}return i+=`-${s}`,i.toLowerCase()}}const v=new Map;t.A=i.Ay.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:d},...c,justify:{type:String,default:null,validator:h},...u,alignContent:{type:String,default:null,validator:p},...m},render(e,{props:t,data:s,children:i}){let n="";for(const o in t)n+=String(t[o]);let a=v.get(n);if(!a){let e;for(e in a=[],k)k[e].forEach((s=>{const i=t[s],o=f(e,s,i);o&&a.push(o)}));a.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),v.set(n,a)}return e(t.tag,(0,o.Ay)(s,{staticClass:"row",class:a}),i)}})},30376:function(e,t,s){s.d(t,{A:function(){return v}});var i=s(28071),o=s(41769),n=s(34236),a=s(28492),r=s(48598),l=s(69227),d=s(26863),c=s(81582),h=s(56809),u=s(8177),p=s(72006),m=s(73803),k=s(69463),g=s(18857);const f=(0,p.A)(a.A,n.A,l.A,d.A,c.A,r.A);var v=f.extend({name:"v-menu",directives:{ClickOutside:h.A,Resize:u.A},provide(){return{isInMenu:!0,theme:this.theme}},props:{auto:Boolean,closeOnClick:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},disabled:Boolean,disableKeys:Boolean,maxHeight:{type:[Number,String],default:"auto"},offsetX:Boolean,offsetY:Boolean,openOnHover:Boolean,origin:{type:String,default:"top left"},transition:{type:[Boolean,String],default:"v-menu-transition"},contentProps:{type:Object,default:()=>({})}},data(){return{calculatedTopAuto:0,defaultOffset:8,hasJustFocused:!1,listIndex:-1,resizeTimeout:0,selectedIndex:null,tiles:[]}},computed:{activeTile(){return this.tiles[this.listIndex]},calculatedLeft(){const e=Math.max(this.dimensions.content.width,parseFloat(this.calculatedMinWidth));return this.auto?(0,k.Dg)(this.calcXOverflow(this.calcLeftAuto(),e))||"0":this.calcLeft(e)||"0"},calculatedMaxHeight(){const e=this.auto?"200px":(0,k.Dg)(this.maxHeight);return e||"0"},calculatedMaxWidth(){return(0,k.Dg)(this.maxWidth)||"0"},calculatedMinWidth(){if(this.minWidth)return(0,k.Dg)(this.minWidth)||"0";const e=Math.min(this.dimensions.activator.width+Number(this.nudgeWidth)+(this.auto?16:0),Math.max(this.pageWidth-24,0)),t=isNaN(parseInt(this.calculatedMaxWidth))?e:parseInt(this.calculatedMaxWidth);return(0,k.Dg)(Math.min(t,e))||"0"},calculatedTop(){const e=this.auto?(0,k.Dg)(this.calcYOverflow(this.calculatedTopAuto)):this.calcTop();return e||"0"},hasClickableTiles(){return Boolean(this.tiles.find((e=>e.tabIndex>-1)))},styles(){return{maxHeight:this.calculatedMaxHeight,minWidth:this.calculatedMinWidth,maxWidth:this.calculatedMaxWidth,top:this.calculatedTop,left:this.calculatedLeft,transformOrigin:this.origin,zIndex:this.zIndex||this.activeZIndex}}},watch:{isActive(e){e||(this.listIndex=-1)},isContentActive(e){this.hasJustFocused=e},listIndex(e,t){if(e in this.tiles){const t=this.tiles[e];t.classList.add("v-list-item--highlighted");const s=this.$refs.content.scrollTop,i=this.$refs.content.clientHeight;s>t.offsetTop-8?(0,g.A)(t.offsetTop-t.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content}):s+i<t.offsetTop+t.clientHeight+8&&(0,g.A)(t.offsetTop-i+2*t.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content})}t in this.tiles&&this.tiles[t].classList.remove("v-list-item--highlighted")}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,m.rq)("full-width",this)},mounted(){this.isActive&&this.callActivate()},methods:{activate(){this.updateDimensions(),requestAnimationFrame((()=>{this.startTransition().then((()=>{this.$refs.content&&(this.calculatedTopAuto=this.calcTopAuto(),this.auto&&(this.$refs.content.scrollTop=this.calcScrollPosition()))}))}))},calcScrollPosition(){const e=this.$refs.content,t=e.querySelector(".v-list-item--active"),s=e.scrollHeight-e.offsetHeight;return t?Math.min(s,Math.max(0,t.offsetTop-e.offsetHeight/2+t.offsetHeight/2)):e.scrollTop},calcLeftAuto(){return parseInt(this.dimensions.activator.left-2*this.defaultOffset)},calcTopAuto(){const e=this.$refs.content,t=e.querySelector(".v-list-item--active");if(t||(this.selectedIndex=null),this.offsetY||!t)return this.computedTop;this.selectedIndex=Array.from(this.tiles).indexOf(t);const s=t.offsetTop-this.calcScrollPosition(),i=e.querySelector(".v-list-item").offsetTop;return this.computedTop-s-i-1},changeListIndex(e){if(this.getTiles(),this.isActive&&this.hasClickableTiles)if(e.keyCode!==k.uP.tab){if(e.keyCode===k.uP.down)this.nextTile();else if(e.keyCode===k.uP.up)this.prevTile();else if(e.keyCode===k.uP.end)this.lastTile();else if(e.keyCode===k.uP.home)this.firstTile();else{if(e.keyCode!==k.uP.enter||-1===this.listIndex)return;this.tiles[this.listIndex].click()}e.preventDefault()}else this.isActive=!1},closeConditional(e){const t=e.target;return this.isActive&&!this._isDestroyed&&this.closeOnClick&&!this.$refs.content.contains(t)},genActivatorAttributes(){const e=o.A.options.methods.genActivatorAttributes.call(this);return this.activeTile&&this.activeTile.id?{...e,"aria-activedescendant":this.activeTile.id}:e},genActivatorListeners(){const e=r.A.options.methods.genActivatorListeners.call(this);return this.disableKeys||(e.keydown=this.onKeyDown),e},genTransition(){const e=this.genContent();return this.transition?this.$createElement("transition",{props:{name:this.transition}},[e]):e},genDirectives(){const e=[{name:"show",value:this.isContentActive}];return!this.openOnHover&&this.closeOnClick&&e.push({name:"click-outside",value:{handler:()=>{this.isActive=!1},closeConditional:this.closeConditional,include:()=>[this.$el,...this.getOpenDependentElements()]}}),e},genContent(){const e={attrs:{...this.getScopeIdAttrs(),...this.contentProps,role:"role"in this.$attrs?this.$attrs.role:"menu"},staticClass:"v-menu__content",class:{...this.rootThemeClasses,...this.roundedClasses,"v-menu__content--auto":this.auto,"v-menu__content--fixed":this.activatorFixed,menuable__content__active:this.isActive,[this.contentClass.trim()]:!0},style:this.styles,directives:this.genDirectives(),ref:"content",on:{click:e=>{const t=e.target;t.getAttribute("disabled")||this.closeOnContentClick&&(this.isActive=!1)},keydown:this.onKeyDown}};return this.$listeners.scroll&&(e.on=e.on||{},e.on.scroll=this.$listeners.scroll),!this.disabled&&this.openOnHover&&(e.on=e.on||{},e.on.mouseenter=this.mouseEnterHandler),this.openOnHover&&(e.on=e.on||{},e.on.mouseleave=this.mouseLeaveHandler),this.$createElement("div",e,this.getContentSlot())},getTiles(){this.$refs.content&&(this.tiles=Array.from(this.$refs.content.querySelectorAll(".v-list-item, .v-divider, .v-subheader")))},mouseEnterHandler(){this.runDelay("open",(()=>{this.hasJustFocused||(this.hasJustFocused=!0)}))},mouseLeaveHandler(e){this.runDelay("close",(()=>{var t;(null===(t=this.$refs.content)||void 0===t?void 0:t.contains(e.relatedTarget))||requestAnimationFrame((()=>{this.isActive=!1,this.callDeactivate()}))}))},nextTile(){const e=this.tiles[this.listIndex+1];if(!e){if(!this.tiles.length)return;return this.listIndex=-1,void this.nextTile()}this.listIndex++,-1===e.tabIndex&&this.nextTile()},prevTile(){const e=this.tiles[this.listIndex-1];if(!e){if(!this.tiles.length)return;return this.listIndex=this.tiles.length,void this.prevTile()}this.listIndex--,-1===e.tabIndex&&this.prevTile()},lastTile(){const e=this.tiles[this.tiles.length-1];e&&(this.listIndex=this.tiles.length-1,-1===e.tabIndex&&this.prevTile())},firstTile(){const e=this.tiles[0];e&&(this.listIndex=0,-1===e.tabIndex&&this.nextTile())},onKeyDown(e){if(!this.disableKeys){if(e.keyCode===k.uP.esc){setTimeout((()=>{this.isActive=!1}));const e=this.getActivator();this.$nextTick((()=>e&&e.focus()))}else!this.isActive&&[k.uP.up,k.uP.down].includes(e.keyCode)&&(this.isActive=!0);this.$nextTick((()=>this.changeListIndex(e)))}},onResize(){this.isActive&&(this.$refs.content.offsetWidth,this.updateDimensions(),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateDimensions,100))}},render(e){const t={staticClass:"v-menu",class:{"v-menu--attached":""===this.attach||!0===this.attach||"attach"===this.attach},directives:[{arg:"500",name:"resize",value:this.onResize}]};return e("div",t,[!this.activator&&this.genActivator(),this.showLazyContent((()=>[this.$createElement(i.A,{props:{root:!0,light:this.light,dark:this.dark}},[this.genTransition()])]))])}})},26702:function(e,t,s){s.d(t,{MZ:function(){return a},sw:function(){return n}});var i=s(75704),o=s(69463);const n=(0,o.Gn)("v-toolbar__title"),a=(0,o.Gn)("v-toolbar__items");i.A},11545:function(e,t,s){s.d(t,{A:function(){return n}});var i=s(47222),o=s(72006);function n(e,t=[]){return(0,o.A)((0,i.P)(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty(){return e}},watch:{app(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty(e,t){this.$vuetify.application.unregister(this._uid,t)}},activated(){this.callUpdate()},created(){for(let e=0,s=t.length;e<s;e++)this.$watch(t[e],this.callUpdate);this.callUpdate()},mounted(){this.callUpdate()},deactivated(){this.removeApplication()},destroyed(){this.removeApplication()},methods:{callUpdate(){this.app&&this.$vuetify.application.register(this._uid,this.applicationProperty,this.updateApplication())},removeApplication(e=!1){(e||this.app)&&this.$vuetify.application.unregister(this._uid,this.applicationProperty)},updateApplication:()=>0}})}},87375:function(e,t,s){var i=s(94095);t.A=i.C.extend({name:"button-group",provide(){return{btnToggle:this}},computed:{classes(){return i.C.options.computed.classes.call(this)}},methods:{genData:i.C.options.methods.genData}})}}]);
//# sourceMappingURL=dashboard.e9fe566e.js.map